{"version":3,"mappings":"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","names":["_sfc_main","ModalComponent","CreatePlaylistModal","json","event","playlistId","playlistName","_hoisted_1","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_ModalComponent","_ctx","_withCtx","_withDirectives","_createElementVNode","_cache","$event","$data","_renderList","playlist","_toDisplayString","$options","_createBlock","_component_CreatePlaylistModal","_createCommentVNode","__default__","baseUrl","url","mytext","$e","QrCode","defineAsyncComponent","PlaylistAddModal","ConfirmModal","ShareModal","_c","_b","_a","request","video","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_30","_hoisted_31","_component_router_link","$props","_normalizeClass","_normalizeStyle","_hoisted_7","_component_i18n_t","_hoisted_9","_hoisted_10","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_26","_hoisted_29","_hoisted_32","_component_ConfirmModal","_component_PlaylistAddModal","_component_ShareModal"],"ignoreList":[],"sources":["../../src/components/PlaylistAddModal.vue","../../src/components/ShareModal.vue","../../src/components/VideoItem.vue"],"sourcesContent":["<template>\n    <ModalComponent @close=\"$emit('close')\">\n        <span v-t=\"'actions.select_playlist'\" class=\"inline-block w-max text-2xl\" />\n        <select v-model=\"selectedPlaylist\" class=\"select mt-3 w-full\">\n            <option v-for=\"playlist in playlists\" :key=\"playlist.id\" :value=\"playlist.id\" v-text=\"playlist.name\" />\n        </select>\n        <div class=\"mt-3 w-full flex justify-between\">\n            <button\n                ref=\"addButton\"\n                v-t=\"'actions.create_playlist'\"\n                class=\"btn\"\n                @click=\"showCreatePlaylistModal = true\"\n            />\n            <button\n                ref=\"addButton\"\n                v-t=\"'actions.add_to_playlist'\"\n                class=\"btn\"\n                @click=\"handleClick(selectedPlaylist)\"\n            />\n        </div>\n    </ModalComponent>\n    <CreatePlaylistModal\n        v-if=\"showCreatePlaylistModal\"\n        @close=\"showCreatePlaylistModal = false\"\n        @created=\"addCreatedPlaylist\"\n    />\n</template>\n\n<script>\nimport ModalComponent from \"./ModalComponent.vue\";\nimport CreatePlaylistModal from \"./CreatePlaylistModal.vue\";\n\nexport default {\n    components: {\n        ModalComponent,\n        CreatePlaylistModal,\n    },\n    props: {\n        videoInfo: {\n            type: Object,\n            required: true,\n        },\n        videoId: {\n            type: String,\n            required: true,\n        },\n    },\n    emits: [\"close\"],\n    data() {\n        return {\n            playlists: [],\n            selectedPlaylist: null,\n            processing: false,\n            showCreatePlaylistModal: false,\n        };\n    },\n    mounted() {\n        this.getPlaylists().then(json => {\n            this.playlists = json;\n        });\n        this.selectedPlaylist = this.getPreferenceString(\"selectedPlaylist\" + this.hashCode(this.authApiUrl()));\n        window.addEventListener(\"keydown\", this.handleKeyDown);\n        window.blur();\n    },\n    unmounted() {\n        window.removeEventListener(\"keydown\", this.handleKeyDown);\n    },\n    methods: {\n        handleKeyDown(event) {\n            if (event.code === \"Enter\" && !this.showCreatePlaylistModal) {\n                this.handleClick(this.selectedPlaylist);\n                event.preventDefault();\n            }\n        },\n        handleClick(playlistId) {\n            if (!playlistId) {\n                alert(this.$t(\"actions.please_select_playlist\"));\n                return;\n            }\n\n            if (this.processing) return;\n\n            this.$refs.addButton.disabled = true;\n            this.processing = true;\n\n            this.addVideosToPlaylist(playlistId, [this.videoId], [this.videoInfo]).then(json => {\n                this.setPreference(\"selectedPlaylist\" + this.hashCode(this.authApiUrl()), playlistId);\n                this.$emit(\"close\");\n                if (json.error) alert(json.error);\n            });\n        },\n        addCreatedPlaylist(playlistId, playlistName) {\n            this.playlists.push({ id: playlistId, name: playlistName });\n            this.selectedPlaylist = playlistId;\n        },\n    },\n};\n</script>\n","<template>\n    <ModalComponent>\n        <h2 v-t=\"'actions.share'\" class=\"mb-5\" />\n        <div class=\"flex justify-between\">\n            <label v-t=\"'actions.piped_link'\" />\n            <input v-model=\"pipedLink\" type=\"checkbox\" @change=\"onChange\" />\n        </div>\n        <hr />\n        <div v-if=\"hasPlaylist\" class=\"flex justify-between\">\n            <label v-t=\"'actions.with_playlist'\" />\n            <input v-model=\"withPlaylist\" type=\"checkbox\" @change=\"onChange\" />\n        </div>\n        <div class=\"flex justify-between\">\n            <label v-t=\"'actions.with_timecode'\" for=\"withTimeCode\" />\n            <input id=\"withTimeCode\" v-model=\"withTimeCode\" type=\"checkbox\" @change=\"onChange\" />\n        </div>\n        <div v-if=\"withTimeCode\" class=\"mt-2 flex items-center justify-between\">\n            <label v-t=\"'actions.time_code'\" />\n            <input v-model=\"timeStamp\" class=\"input w-12\" type=\"text\" @change=\"onChange\" />\n        </div>\n        <hr />\n        <a :href=\"generatedLink\" target=\"_blank\">\n            <h3 class=\"mt-4\" v-text=\"generatedLink\" />\n        </a>\n        <QrCode v-if=\"showQrCode\" :text=\"generatedLink\" />\n        <div class=\"mt-4 flex justify-end\">\n            <button v-t=\"'actions.generate_qrcode'\" class=\"btn\" @click=\"showQrCode = !showQrCode\" />\n            <button v-t=\"'actions.follow_link'\" class=\"btn ml-3\" @click=\"followLink()\" />\n            <button v-t=\"'actions.copy_link'\" class=\"btn ml-3\" @click=\"copyLink()\" />\n        </div>\n    </ModalComponent>\n</template>\n\n<script setup>\nimport { defineAsyncComponent } from \"vue\";\n\nconst QrCode = defineAsyncComponent(() => import(\"./QrCode.vue\"));\n</script>\n\n<script>\nimport ModalComponent from \"./ModalComponent.vue\";\n\nexport default {\n    components: {\n        ModalComponent,\n    },\n    props: {\n        videoId: {\n            type: String,\n            required: true,\n        },\n        currentTime: {\n            type: Number,\n            required: true,\n        },\n        playlistId: {\n            type: String,\n            default: undefined,\n        },\n        playlistIndex: {\n            type: Number,\n            default: undefined,\n        },\n    },\n    data() {\n        return {\n            withTimeCode: true,\n            pipedLink: true,\n            withPlaylist: true,\n            timeStamp: null,\n            hasPlaylist: false,\n            showQrCode: false,\n        };\n    },\n    computed: {\n        generatedLink() {\n            var baseUrl = this.pipedLink\n                ? window.location.origin + \"/watch?v=\" + this.videoId\n                : \"https://youtu.be/\" + this.videoId;\n            var url = new URL(baseUrl);\n            if (this.withTimeCode && this.timeStamp > 0) url.searchParams.append(\"t\", this.timeStamp);\n            if (this.hasPlaylist && this.withPlaylist) {\n                url.searchParams.append(\"list\", this.playlistId);\n                url.searchParams.append(\"index\", this.playlistIndex);\n            }\n            return url.href;\n        },\n    },\n    mounted() {\n        this.timeStamp = parseInt(this.currentTime);\n        this.withTimeCode = this.getPreferenceBoolean(\"shareWithTimeCode\", true);\n        this.pipedLink = this.getPreferenceBoolean(\"shareAsPipedLink\", true);\n        this.withPlaylist = this.getPreferenceBoolean(\"shareWithPlaylist\", true);\n        this.hasPlaylist = this.playlistId != undefined && !isNaN(this.playlistIndex);\n    },\n    methods: {\n        followLink() {\n            window.open(this.generatedLink, \"_blank\").focus();\n        },\n        async copyLink() {\n            await this.copyURL(this.generatedLink);\n        },\n        async copyURL(mytext) {\n            try {\n                await navigator.clipboard.writeText(mytext);\n                alert(this.$t(\"info.copied\"));\n            } catch ($e) {\n                alert(this.$t(\"info.cannot_copy\"));\n            }\n        },\n        onChange() {\n            this.setPreference(\"shareWithTimeCode\", this.withTimeCode, true);\n            this.setPreference(\"shareAsPipedLink\", this.pipedLink, true);\n            this.setPreference(\"shareWithPlaylist\", this.withPlaylist, true);\n        },\n    },\n};\n</script>\n","<template>\n    <div v-if=\"showVideo\" class=\"flex flex-col flex-justify-between\">\n        <router-link\n            class=\"inline-block w-full focus:underline hover:underline\"\n            :to=\"{\n                path: '/watch',\n                query: {\n                    v: item.url.substr(-11),\n                    ...(playlistId && { list: playlistId }),\n                    ...(index >= 0 && { index: index + 1 }),\n                    ...(preferListen && { listen: 1 }),\n                },\n            }\"\n        >\n            <div class=\"w-full\">\n                <img\n                    loading=\"lazy\"\n                    class=\"aspect-video w-full object-contain\"\n                    :src=\"thumbnail\"\n                    :alt=\"title\"\n                    :class=\"{ 'shorts-img': item.isShort, 'opacity-75': item.watched }\"\n                />\n                <!-- progress bar -->\n                <div class=\"relative h-1 w-full\">\n                    <div\n                        v-if=\"item.watched && item.duration > 0\"\n                        class=\"absolute bottom-0 left-0 h-1 bg-red-600\"\n                        :style=\"{ width: `clamp(0%, ${(item.currentTime / item.duration) * 100}%, 100%` }\"\n                    />\n                </div>\n            </div>\n\n            <div class=\"relative text-sm\">\n                <span\n                    v-if=\"item.duration > 0\"\n                    class=\"thumbnail-overlay thumbnail-right\"\n                    v-text=\"timeFormat(item.duration)\"\n                />\n                <!-- shorts thumbnail -->\n                <span v-if=\"item.isShort\" v-t=\"'video.shorts'\" class=\"thumbnail-overlay thumbnail-left\" />\n                <span\n                    v-else-if=\"item.duration >= 0\"\n                    class=\"thumbnail-overlay thumbnail-right\"\n                    v-text=\"timeFormat(item.duration)\"\n                />\n                <i18n-t v-else keypath=\"video.live\" class=\"thumbnail-overlay thumbnail-right !bg-red-600\" tag=\"div\">\n                    <i class=\"i-fa6-solid:tower-broadcast w-3\" />\n                </i18n-t>\n                <span v-if=\"item.watched\" v-t=\"'video.watched'\" class=\"thumbnail-overlay bottom-5px left-5px\" />\n            </div>\n\n            <div>\n                <p\n                    style=\"display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical\"\n                    class=\"link flex overflow-hidden pt-2 font-bold\"\n                    :title=\"title\"\n                    v-text=\"title\"\n                />\n            </div>\n        </router-link>\n\n        <div class=\"flex\">\n            <router-link :to=\"item.uploaderUrl\">\n                <img\n                    v-if=\"item.uploaderAvatar\"\n                    loading=\"lazy\"\n                    :src=\"item.uploaderAvatar\"\n                    class=\"mr-0.5 mt-0.5 h-32px w-32px rounded-full\"\n                    width=\"68\"\n                    height=\"68\"\n                />\n            </router-link>\n\n            <div class=\"flex-1 px-2\">\n                <router-link\n                    v-if=\"item.uploaderUrl && item.uploaderName && !hideChannel\"\n                    class=\"link-secondary block overflow-hidden text-sm\"\n                    :to=\"item.uploaderUrl\"\n                    :title=\"item.uploaderName\"\n                >\n                    <span v-text=\"item.uploaderName\" />\n                    <i v-if=\"item.uploaderVerified\" class=\"i-fa6-solid:check ml-1.5\" />\n                </router-link>\n\n                <div v-if=\"item.views >= 0 || item.uploadedDate\" class=\"mt-1 text-xs text-gray-300 font-normal\">\n                    <span v-if=\"item.views >= 0\">\n                        <i class=\"i-fa6-solid:eye\" />\n                        <span class=\"pl-1\" v-text=\"`${numberFormat(item.views)} •`\" />\n                    </span>\n                    <span v-if=\"item.uploaded > 0\" class=\"pl-0.5\" v-text=\"timeAgo(item.uploaded)\" />\n                    <span v-else-if=\"item.uploadedDate\" class=\"pl-0.5\" v-text=\"item.uploadedDate\" />\n                </div>\n            </div>\n\n            <div class=\"flex items-center gap-2.5\">\n                <router-link\n                    :to=\"{\n                        path: '/watch',\n                        query: {\n                            v: item.url.substr(-11),\n                            ...(playlistId && { list: playlistId }),\n                            ...(index >= 0 && { index: index + 1 }),\n                            ...(!preferListen && { listen: 1 }),\n                        },\n                    }\"\n                    :aria-label=\"preferListen ? title : 'Listen to ' + title\"\n                    :title=\"preferListen ? title : 'Listen to ' + title\"\n                >\n                    <i :class=\"preferListen ? 'i-fa6-solid:tv' : 'i-fa6-solid:headphones'\" />\n                </router-link>\n                <button :title=\"$t('actions.add_to_playlist')\" @click=\"showPlaylistModal = !showPlaylistModal\">\n                    <i class=\"i-fa6-solid:circle-plus\" />\n                </button>\n                <button :title=\"$t('actions.share')\" @click=\"showShareModal = !showShareModal\">\n                    <i class=\"i-fa6-solid:share\" />\n                </button>\n                <button\n                    v-if=\"admin\"\n                    ref=\"removeButton\"\n                    :title=\"$t('actions.remove_from_playlist')\"\n                    @click=\"showConfirmRemove = true\"\n                >\n                    <i class=\"i-fa6-solid:circle-minus\" />\n                </button>\n                <ConfirmModal\n                    v-if=\"showConfirmRemove\"\n                    :message=\"$t('actions.delete_playlist_video_confirm')\"\n                    @close=\"showConfirmRemove = false\"\n                    @confirm=\"removeVideo(item.url.substr(-11))\"\n                />\n                <PlaylistAddModal\n                    v-if=\"showPlaylistModal\"\n                    :video-id=\"item.url.substr(-11)\"\n                    :video-info=\"item\"\n                    @close=\"showPlaylistModal = false\"\n                />\n                <ShareModal\n                    v-if=\"showShareModal\"\n                    :video-id=\"item.url.substr(-11)\"\n                    :current-time=\"0\"\n                    @close=\"showShareModal = false\"\n                />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport PlaylistAddModal from \"./PlaylistAddModal.vue\";\nimport ShareModal from \"./ShareModal.vue\";\nimport ConfirmModal from \"./ConfirmModal.vue\";\n\nexport default {\n    components: { PlaylistAddModal, ConfirmModal, ShareModal },\n    props: {\n        item: {\n            type: Object,\n            default: () => {\n                return {};\n            },\n        },\n        isFeed: {\n            type: Boolean,\n            default: false,\n        },\n        height: { type: String, default: \"118\" },\n        width: { type: String, default: \"210\" },\n        hideChannel: { type: Boolean, default: false },\n        index: { type: Number, default: -1 },\n        playlistId: { type: String, default: null },\n        preferListen: { type: Boolean, default: false },\n        admin: { type: Boolean, default: false },\n    },\n    emits: [\"remove\"],\n    data() {\n        return {\n            showPlaylistModal: false,\n            showShareModal: false,\n            showVideo: true,\n            showConfirmRemove: false,\n        };\n    },\n    computed: {\n        title() {\n            return this.item.dearrow?.titles[0]?.title ?? this.item.title;\n        },\n        thumbnail() {\n            return this.item.dearrow?.thumbnails[0]?.thumbnail ?? this.item.thumbnail;\n        },\n    },\n    mounted() {\n        this.shouldShowVideo();\n    },\n    methods: {\n        removeVideo() {\n            this.$refs.removeButton.disabled = true;\n            this.removeVideoFromPlaylist(this.playlistId, this.index).then(json => {\n                if (json.error) alert(json.error);\n                else this.$emit(\"remove\");\n            });\n        },\n        shouldShowVideo() {\n            if (!this.isFeed || !this.getPreferenceBoolean(\"hideWatched\", false)) return;\n\n            const objectStore = window.db.transaction(\"watch_history\", \"readonly\").objectStore(\"watch_history\");\n            const request = objectStore.get(this.item.url.substr(-11));\n            request.onsuccess = event => {\n                const video = event.target.result;\n                if (video && (video.currentTime ?? 0) > video.duration * 0.9) {\n                    this.showVideo = false;\n                    return;\n                }\n            };\n        },\n    },\n};\n</script>\n\n<style>\n.shorts-img {\n    @apply w-full object-contain;\n}\n</style>\n"],"file":"assets/VideoItem-BNJ24tbL.js"}