import{i as f}from"./Misc-D3fhnEf0.js";import{C as p}from"./ConfirmModal-DRMIgDMG.js";import{a as w,c as h,b as s,w as l,l as c,x as n,E as u,g,j as y,F as v,r as C,o as d,h as _}from"./index-DFHtCH6M.js";import"./ModalComponent-B-ePo8ic.js";const b={components:{ConfirmModal:p},data(){return{username:null,password:null,passwordConfirm:null,showPassword:!1,showConfirmPassword:!1,showUnsecureRegisterDialog:!1,forceUnsecureRegister:!1}},mounted(){this.getAuthToken()&&this.$router.push("/")},activated(){document.title="Register - Piped"},methods:{register(){if(!(!this.username||!this.password)){if(this.password!=this.passwordConfirm){alert(this.$t("login.passwords_incorrect"));return}if(f(this.username)&&!this.forceUnsecureRegister){this.showUnsecureRegisterDialog=!0;return}this.fetchJson(this.authApiUrl()+"/register",null,{method:"POST",body:JSON.stringify({username:this.username,password:this.password})}).then(r=>{r.token?(this.setPreference("authToken"+this.hashCode(this.authApiUrl()),r.token),window.location="/"):alert(r.error)})}}}},U={class:"flex justify-center"},P={class:"my-4 text-center font-bold"},k=["title"],R=s("hr",null,null,-1),x={class:"flex flex-col items-center justify-center text-center"},D={class:"w-max items-center px-3 children:pb-3"},j=["placeholder","aria-label"],M={class:"flex justify-center"},V=["type","placeholder","aria-label"],B=s("div",{class:"i-fa6-solid:eye"},null,-1),K=[B],T={class:"flex justify-center"},A=["type","placeholder","aria-label"],E=s("div",{class:"i-fa6-solid:eye"},null,-1),N=[E];function F(r,e,J,O,o,i){const m=C("ConfirmModal"),a=_("t");return d(),h(v,null,[s("div",U,[l(s("h1",P,null,512),[[a,"titles.register"]]),s("i",{class:"i-fa6-solid:circle-info ml-2 mt-6 cursor-pointer",title:r.$t("info.register_note")},null,8,k)]),R,s("div",x,[s("form",D,[s("div",null,[l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),class:"input w-full",type:"text",autocomplete:"username",placeholder:r.$t("login.username"),"aria-label":r.$t("login.username"),onKeyup:e[1]||(e[1]=n((...t)=>i.register&&i.register(...t),["enter"]))},null,40,j),[[c,o.username]])]),s("div",M,[l(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.password=t),class:"input h-auto w-full",type:o.showPassword?"text":"password",autocomplete:"password",placeholder:r.$t("login.password"),"aria-label":r.$t("login.password"),onKeyup:e[3]||(e[3]=n((...t)=>i.register&&i.register(...t),["enter"]))},null,40,V),[[u,o.password]]),s("button",{type:"button",class:"btn ml-2",onClick:e[4]||(e[4]=t=>o.showPassword=!o.showPassword)},K)]),s("div",T,[l(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.passwordConfirm=t),class:"input h-auto w-full",type:o.showConfirmPassword?"text":"password",autocomplete:"password",placeholder:r.$t("login.password_confirm"),"aria-label":r.$t("login.password_confirm"),onKeyup:e[6]||(e[6]=n((...t)=>i.register&&i.register(...t),["enter"]))},null,40,A),[[u,o.passwordConfirm]]),s("button",{type:"button",class:"btn ml-2",onClick:e[7]||(e[7]=t=>o.showConfirmPassword=!o.showConfirmPassword)},N)]),s("div",null,[l(s("a",{class:"btn w-auto",onClick:e[8]||(e[8]=(...t)=>i.register&&i.register(...t))},null,512),[[a,"titles.register"]])])])]),o.showUnsecureRegisterDialog?(d(),g(m,{key:0,message:r.$t("info.register_no_email_note"),onClose:e[9]||(e[9]=t=>o.showUnsecureRegisterDialog=!1),onConfirm:e[10]||(e[10]=t=>{o.forceUnsecureRegister=!0,o.showUnsecureRegisterDialog=!1,i.register()})},null,8,["message"])):y("",!0)],64)}const H=w(b,[["render",F]]);export{H as default};
//# sourceMappingURL=RegisterPage-Y9lPsehm.js.map
