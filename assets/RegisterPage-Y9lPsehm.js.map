{"version":3,"file":"RegisterPage-Y9lPsehm.js","sources":["../../src/components/RegisterPage.vue"],"sourcesContent":["<template>\n    <div class=\"flex justify-center\">\n        <h1 v-t=\"'titles.register'\" class=\"my-4 text-center font-bold\" />\n        <i class=\"i-fa6-solid:circle-info ml-2 mt-6 cursor-pointer\" :title=\"$t('info.register_note')\" />\n    </div>\n    <hr />\n    <div class=\"flex flex-col items-center justify-center text-center\">\n        <form class=\"w-max items-center px-3 children:pb-3\">\n            <div>\n                <input\n                    v-model=\"username\"\n                    class=\"input w-full\"\n                    type=\"text\"\n                    autocomplete=\"username\"\n                    :placeholder=\"$t('login.username')\"\n                    :aria-label=\"$t('login.username')\"\n                    @keyup.enter=\"register\"\n                />\n            </div>\n            <div class=\"flex justify-center\">\n                <input\n                    v-model=\"password\"\n                    class=\"input h-auto w-full\"\n                    :type=\"showPassword ? 'text' : 'password'\"\n                    autocomplete=\"password\"\n                    :placeholder=\"$t('login.password')\"\n                    :aria-label=\"$t('login.password')\"\n                    @keyup.enter=\"register\"\n                />\n                <button type=\"button\" class=\"btn ml-2\" @click=\"showPassword = !showPassword\">\n                    <div class=\"i-fa6-solid:eye\" />\n                </button>\n            </div>\n            <div class=\"flex justify-center\">\n                <input\n                    v-model=\"passwordConfirm\"\n                    class=\"input h-auto w-full\"\n                    :type=\"showConfirmPassword ? 'text' : 'password'\"\n                    autocomplete=\"password\"\n                    :placeholder=\"$t('login.password_confirm')\"\n                    :aria-label=\"$t('login.password_confirm')\"\n                    @keyup.enter=\"register\"\n                />\n                <button type=\"button\" class=\"btn ml-2\" @click=\"showConfirmPassword = !showConfirmPassword\">\n                    <div class=\"i-fa6-solid:eye\" />\n                </button>\n            </div>\n            <div>\n                <a v-t=\"'titles.register'\" class=\"btn w-auto\" @click=\"register\" />\n            </div>\n        </form>\n    </div>\n    <ConfirmModal\n        v-if=\"showUnsecureRegisterDialog\"\n        :message=\"$t('info.register_no_email_note')\"\n        @close=\"showUnsecureRegisterDialog = false\"\n        @confirm=\"\n            forceUnsecureRegister = true;\n            showUnsecureRegisterDialog = false;\n            register();\n        \"\n    />\n</template>\n\n<script>\nimport { isEmail } from \"../utils/Misc.js\";\nimport ConfirmModal from \"./ConfirmModal.vue\";\n\nexport default {\n    components: { ConfirmModal },\n    data() {\n        return {\n            username: null,\n            password: null,\n            passwordConfirm: null,\n            showPassword: false,\n            showConfirmPassword: false,\n            showUnsecureRegisterDialog: false,\n            forceUnsecureRegister: false,\n        };\n    },\n    mounted() {\n        //TODO: Add Server Side check\n        if (this.getAuthToken()) {\n            this.$router.push(import.meta.env.BASE_URL);\n        }\n    },\n    activated() {\n        document.title = \"Register - Piped\";\n    },\n    methods: {\n        register() {\n            if (!this.username || !this.password) return;\n            if (this.password != this.passwordConfirm) {\n                alert(this.$t(\"login.passwords_incorrect\"));\n                return;\n            }\n            if (isEmail(this.username) && !this.forceUnsecureRegister) {\n                this.showUnsecureRegisterDialog = true;\n                return;\n            }\n            this.fetchJson(this.authApiUrl() + \"/register\", null, {\n                method: \"POST\",\n                body: JSON.stringify({\n                    username: this.username,\n                    password: this.password,\n                }),\n            }).then(resp => {\n                if (resp.token) {\n                    this.setPreference(\"authToken\" + this.hashCode(this.authApiUrl()), resp.token);\n                    window.location = import.meta.env.BASE_URL; // done to bypass cache\n                } else alert(resp.error);\n            });\n        },\n    },\n};\n</script>\n"],"names":["_sfc_main","ConfirmModal","isEmail","resp","_hoisted_1","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_openBlock","_createElementBlock","_Fragment","_withDirectives","_ctx","_hoisted_4","_cache","$event","$data","_withKeys","$options","args","_hoisted_11","_hoisted_15","_createBlock","_component_ConfirmModal","_createCommentVNode"],"mappings":"kPAoEA,MAAKA,EAAU,CACX,WAAY,CAAE,aAAAC,CAAa,EAC3B,MAAO,CACI,MAAA,CACH,SAAU,KACV,SAAU,KACV,gBAAiB,KACjB,aAAc,GACd,oBAAqB,GACrB,2BAA4B,GAC5B,sBAAuB,EAAA,CAE/B,EACA,SAAU,CAEF,KAAK,gBACA,KAAA,QAAQ,KAAK,GAAwB,CAElD,EACA,WAAY,CACR,SAAS,MAAQ,kBACrB,EACA,QAAS,CACL,UAAW,CACP,GAAI,GAAC,KAAK,UAAY,CAAC,KAAK,UACxB,IAAA,KAAK,UAAY,KAAK,gBAAiB,CACjC,MAAA,KAAK,GAAG,2BAA2B,CAAC,EAC1C,MACJ,CACA,GAAIC,EAAQ,KAAK,QAAQ,GAAK,CAAC,KAAK,sBAAuB,CACvD,KAAK,2BAA6B,GAClC,MACJ,CACA,KAAK,UAAU,KAAK,WAAW,EAAI,YAAa,KAAM,CAClD,OAAQ,OACR,KAAM,KAAK,UAAU,CACjB,SAAU,KAAK,SACf,SAAU,KAAK,QAAA,CAClB,CAAA,CACJ,EAAE,KAAaC,GAAA,CACRA,EAAK,OACA,KAAA,cAAc,YAAc,KAAK,SAAS,KAAK,YAAY,EAAGA,EAAK,KAAK,EAC7E,OAAO,SAAW,KACT,MAAAA,EAAK,KAAK,CAAA,CAC1B,EACL,CACJ,CACJ,EAlHSC,EAAA,CAAA,MAAM,uBACqBC,EAAA,CAAA,MAAM,8BAF1CC,EAAA,CAAA,OAAA,IAKIC,EAAM,KAAA,KAAA,KAAA,EAAA,EACDC,EAAA,CAAA,MAAM,yDACDC,EAAA,CAAA,MAAM,yCAPpBC,EAAA,CAAA,cAAA,YAAA,EAmBiBC,EAAA,CAAA,MAAM,uBAnBvBC,EAAA,CAAA,OAAA,cAAA,YAAA,MA8BmD,MAAA,CAA1B,MAAM,mBAAiB,KAAA,EAAA,KAA5BC,GAGHC,EAAA,CAAA,MAAM,uBAjCvBC,EAAA,CAAA,OAAA,cAAA,YAAA,MA4CmD,MAAA,CAA1B,MAAM,mBAAiB,KAAA,EAAA,KAA5BC,8DA5CpB,OAAAC,EAAA,EAAAC,EAAAC,EAAA,KAAA,CACIZ,EAGM,MAHNH,EAGM,CAFFgB,EAAAb,EAAiE,KAAjEF,EAAiE,KAAA,GAAA,EAAA,IAAxD,iBAAiB,CAAA,GAC1BE,EAAgG,IAAA,CAA7F,MAAM,mDAAoD,MAAOc,EAAE,GAAA,oBAAA,CAAA,EAH9E,KAAA,EAAAf,CAAA,CAAA,GAKIgB,EACAf,EA6CM,MA7CNC,EA6CM,CA5CFD,EA2CO,OA3CPE,EA2CO,CA1CHF,EAUM,MAAA,KAAA,GATFA,EAQE,QAAA,CAjBlB,sBAAAgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAU6BC,GAAAC,EAAQ,SAAAD,GACjB,MAAM,eACN,KAAK,OACL,aAAa,WACZ,YAAaH,EAAE,GAAA,gBAAA,EACf,aAAYA,EAAE,GAAA,gBAAA,EACd,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAhB1BG,UAgBkCC,EAAQ,UAAAA,EAAA,SAAA,GAAAC,CAAA,EAAA,CAAA,OAAA,CAAA,EAAA,EAhB1C,KAAA,GAAAlB,CAAA,EAAA,IAU6Be,EAAQ,QAAA,CAAA,KASzBlB,EAaM,MAbNI,EAaM,GAZFJ,EAQE,QAAA,CA5BlB,sBAAAgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAqB6BC,GAAAC,EAAQ,SAAAD,GACjB,MAAM,sBACL,KAAMC,EAAY,aAAA,OAAA,WACnB,aAAa,WACZ,YAAaJ,EAAE,GAAA,gBAAA,EACf,aAAYA,EAAE,GAAA,gBAAA,EACd,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EA3B1BG,UA2BkCC,EAAQ,UAAAA,EAAA,SAAA,GAAAC,CAAA,EAAA,CAAA,OAAA,CAAA,EAAA,EA3B1C,KAAA,GAAAhB,CAAA,EAAA,IAqB6Ba,EAAQ,QAAA,CAAA,GAQrBlB,EAES,SAAA,CAFD,KAAK,SAAS,MAAM,WAAY,QAAKgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAEC,GAAAC,EAAY,aAAA,CAAIA,EAAY,eA7B3FI,CAAA,CAAA,GAiCYtB,EAaM,MAbNO,EAaM,GAZFP,EAQE,QAAA,CA1ClB,sBAAAgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAmC6BC,GAAAC,EAAe,gBAAAD,GACxB,MAAM,sBACL,KAAMC,EAAmB,oBAAA,OAAA,WAC1B,aAAa,WACZ,YAAaJ,EAAE,GAAA,wBAAA,EACf,aAAYA,EAAE,GAAA,wBAAA,EACd,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAzC1BG,UAyCkCC,EAAQ,UAAAA,EAAA,SAAA,GAAAC,CAAA,EAAA,CAAA,OAAA,CAAA,EAAA,EAzC1C,KAAA,GAAAb,CAAA,EAAA,IAmC6BU,EAAe,eAAA,CAAA,GAQ5BlB,EAES,SAAA,CAFD,KAAK,SAAS,MAAM,WAAY,QAAKgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAEC,GAAAC,EAAmB,oBAAA,CAAIA,EAAmB,sBA3CzGK,CAAA,CAAA,GA+CYvB,EAEM,MAAA,KAAA,GADFA,EAAkE,IAAA,CAAvC,MAAM,aAAc,4BAAOoB,EAAQ,UAAAA,EAAA,SAAA,GAAAC,CAAA,EAAA,gBAAtD,iBAAiB,CAAA,SAK3BH,EAA0B,gCADpCM,EASEC,EAAA,CA7DN,IAAA,EAsDS,QAASX,EAAE,GAAA,6BAAA,EACX,oBAAOG,GAAAC,EAA0B,2BAAA,IACjC,UAAOF,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAA,CAAeC,EAAqB,sBAAA,GAAqBA,EAA0B,2BAAA,GAAsBE,EAAQ,SAAA,CAAA,yBAxDjIM,EAAA,GAAA,EAAA"}