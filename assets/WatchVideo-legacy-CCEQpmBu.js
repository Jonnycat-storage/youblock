System.register(["./index-legacy-CmTDz3X_.js","./Misc-legacy-DufQkfaw.js","./ModalComponent-legacy-BmTvlHoT.js","./ContentItem-legacy-dpAxIUVA.js","./WatchOnButton-legacy-GiW_Hk0q.js","./VideoItem-legacy-DDmFzm8y.js","./LoadingIndicatorPage-legacy-rxdJgMZA.js","./CreatePlaylistModal-legacy-Bg0tm0yq.js","./ConfirmModal-legacy-CnRD7ob6.js"],(function(e,t){"use strict";var a,s,i,o,n,r,l,d,c,h,u,p,m,f,g,b,k,v,y,x,w,C,S,$,P,T,_,I,L,E,M,D,z,A,R,V,U;return{setters:[e=>{a=e._,s=e.a,i=e.o,o=e.c,n=e.b,r=e.t,l=e.j,d=e.w,c=e.n,h=e.g,u=e.e,p=e.l,m=e.x,f=e.F,g=e.r,b=e.h,k=e.d,v=e.C,y=e.B,x=e.f,w=e.D,C=e.i,S=e.T,$=e.K,P=e.k},e=>{T=e.p},e=>{_=e.M},e=>{I=e._},e=>{L=e.C,E=e.E,M=e.W,D=e.p,z=e.r},e=>{A=e.V,R=e.P,V=e._},e=>{U=e.L},null,null],execute:function(){var B=document.createElement("style");B.textContent='/*! @license\n * Shaka Player\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n.shaka-hidden{display:none!important}.shaka-video-container{display:flex;position:relative;top:0;left:0}.shaka-video-container .material-icons-round{font-family:Material Icons Round;font-size:24px}.shaka-video-container *{-webkit-font-smoothing:antialiased;font-family:Roboto-Regular,Roboto,sans-serif,TengwarTelcontar}.shaka-video-container:-webkit-full-screen{background-color:#000;width:100%;height:100%}.shaka-video-container:fullscreen{background-color:#000;width:100%;height:100%}.shaka-video-container:-webkit-full-screen .shaka-text-container{font-size:4.4vmin}.shaka-video-container:fullscreen .shaka-text-container{font-size:4.4vmin}.shaka-video-container:-webkit-full-screen{background-color:#000;width:100%;height:100%}.shaka-video-container:-webkit-full-screen .shaka-text-container{font-size:4.4vmin}.shaka-video-container:-moz-full-screen{background-color:#000;width:100%;height:100%}.shaka-video-container:-moz-full-screen .shaka-text-container{font-size:4.4vmin}.shaka-video-container:-ms-fullscreen{background-color:#000;width:100%;height:100%}.shaka-video-container:-ms-fullscreen .shaka-text-container{font-size:4.4vmin}.shaka-controls-container{box-sizing:border-box;z-index:1;flex-direction:column;justify-content:flex-end;align-items:center;width:100%;height:100%;margin:0;padding:0;display:flex;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-video-container:not([shaka-controls=true]) .shaka-controls-container{display:none}.shaka-controls-container *{flex-shrink:0}.shaka-controls-container[casting=true] .shaka-fullscreen-button{display:none}.shaka-canvas-container,.shaka-vr-canvas-container{pointer-events:none;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-bottom-controls{z-index:1;width:96%;padding:0 0 2.5%}.shaka-controls-button-panel{user-select:none;opacity:0;flex-direction:row;justify-content:flex-end;align-items:center;min-width:48px;margin:0;padding:0;font-size:12px;font-style:normal;font-weight:400;transition:opacity .6s cubic-bezier(.4,0,.6,1);display:flex;overflow:hidden}.shaka-controls-container[casting=true] .shaka-controls-button-panel,.shaka-controls-container[shown=true] .shaka-controls-button-panel{opacity:1}.shaka-controls-button-panel>*{color:#fff;cursor:pointer;background:0 0;border:0;height:32px;margin:1px;padding:0 5px;line-height:.5}.shaka-controls-button-panel .shaka-overflow-menu-only{display:none}.shaka-play-button-container{flex-shrink:1;justify-content:center;align-items:center;width:100%;height:100%;margin:0;display:flex;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-statistics-container{color:#fff;z-index:2;opacity:0;background-color:rgba(35,35,35,.9);border-radius:2px;min-width:300px;padding:5px 10px;font-size:14px;transition:opacity .6s cubic-bezier(.4,0,.6,1);position:absolute;top:15px;left:15px;overflow-x:hidden;overflow-y:auto}.shaka-controls-container[casting=true] .shaka-statistics-container,.shaka-controls-container[shown=true] .shaka-statistics-container{opacity:1}.shaka-statistics-container div{justify-content:space-between;display:flex}.shaka-statistics-container span{color:#969696}.shaka-ad-statistics-container{color:#fff;z-index:2;opacity:0;background-color:rgba(35,35,35,.9);border-radius:2px;min-width:150px;padding:5px 10px;font-size:14px;transition:opacity .6s cubic-bezier(.4,0,.6,1);position:absolute;top:15px;right:15px;overflow-x:hidden;overflow-y:auto}.shaka-controls-container[casting=true] .shaka-ad-statistics-container,.shaka-controls-container[shown=true] .shaka-ad-statistics-container{opacity:1}.shaka-ad-statistics-container div{justify-content:space-between;display:flex}.shaka-ad-statistics-container span{color:#969696}.shaka-context-menu{z-index:3;background-color:rgba(35,35,35,.9);border-radius:2px;position:absolute}.shaka-context-menu button{color:#fff;cursor:pointer;background:0 0;border:0;align-items:center;width:100%;padding:5px 10px;display:flex}.shaka-context-menu button:hover{background-color:rgba(50,50,50,.9)}.shaka-context-menu label{color:#fff;cursor:pointer;align-items:flex-start;padding:0 20px}.shaka-context-menu .shaka-current-selection-span{color:#fff;cursor:pointer;align-items:flex-start}.shaka-scrim-container{opacity:0;background:linear-gradient(0deg,#000 0,transparent 15%);flex-shrink:1;width:100%;height:100%;margin:0;transition:opacity .6s cubic-bezier(.4,0,.6,1);position:absolute;top:0;bottom:0;left:0;right:0}.shaka-controls-container[casting=true] .shaka-scrim-container,.shaka-controls-container[shown=true] .shaka-scrim-container{opacity:1}.shaka-text-container{pointer-events:none;color:#fff;width:100%;min-width:48px;font-size:20px;line-height:1.4;transition:bottom .1s cubic-bezier(.4,0,.6,1) .5s;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-text-container span.shaka-text-wrapper{background:0 0;display:inline}.shaka-controls-container[shown=true]~.shaka-text-container{transition-delay:0s;bottom:15%}.shaka-spinner-container{flex-shrink:1;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-video-container:not([shaka-controls=true]) .shaka-spinner-container{display:none}.shaka-spinner{box-sizing:border-box;filter:drop-shadow(0 0 2px rgba(255,255,255,.5));width:0;height:0;margin:0;padding:7.8%;position:relative;top:0;left:0}.shaka-hidden-fast-forward-container,.shaka-hidden-rewind-container{flex-shrink:1;width:40%;height:100%}.shaka-hidden-fast-forward-container{position:absolute;top:0;bottom:0;left:60%;right:0}.shaka-hidden-rewind-container{position:absolute;top:0;bottom:0;left:0;right:0}.shaka-play-button{box-sizing:border-box;opacity:0;background-color:rgba(255,255,255,.9);background-position:50%;background-repeat:no-repeat;background-size:50%;border:none;border-radius:50%;width:0;height:0;margin:0;padding:7.5%;transition:opacity .6s cubic-bezier(.4,0,.6,1);box-shadow:0 0 20px rgba(0,0,0,.1)}.shaka-controls-container[casting=true] .shaka-play-button,.shaka-controls-container[shown=true] .shaka-play-button{opacity:1}.shaka-play-button[icon=play]{background-image:url(data:image/svg+xml,%3Csvg%20fill%3D%22%23000000%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%20%20%3Cpath%20d%3D%22M8%205v14l11-7z%22%2F%3E%0A%20%20%20%20%3Cpath%20d%3D%22M0%200h24v24H0z%22%20fill%3D%22none%22%2F%3E%0A%3C%2Fsvg%3E)}.shaka-play-button[icon=pause]{background-image:url(data:image/svg+xml,%3Csvg%20fill%3D%22%23000000%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%20%20%3Cpath%20d%3D%22M6%2019h4V5H6v14zm8-14v14h4V5h-4z%22%2F%3E%0A%20%20%20%20%3Cpath%20d%3D%22M0%200h24v24H0z%22%20fill%3D%22none%22%2F%3E%0A%3C%2Fsvg%3E)}.shaka-current-time{color:#fff;cursor:pointer;font-size:14px}.shaka-current-time[disabled]{color:#fff;cursor:default;background-color:transparent}.shaka-controls-container button:focus,.shaka-controls-container input:focus{outline:1px solid highlight}.shaka-controls-container button:-moz-focus-inner{border:0;outline:0}.shaka-controls-container input:-moz-focus-outer{border:0;outline:0}.shaka-controls-container:not(.shaka-keyboard-navigation) button:focus,.shaka-controls-container:not(.shaka-keyboard-navigation) input:focus{outline:0}.shaka-fast-foward-container,.shaka-rewind-container{color:#fff;cursor:default;opacity:0;user-select:none;background-color:rgba(0,0,0,.5);border:none;flex-direction:row;flex-shrink:1;justify-content:center;align-items:center;width:100%;height:100%;margin:0;font-size:20px;display:flex;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-fast-foward-container{border-radius:40% 0 0 40%}.shaka-rewind-container{border-radius:0 40% 40% 0}.shaka-forward-rewind-container-icon{font-family:Material Icons Round;font-size:34px}.shaka-range-container{background:#fff;border-radius:4px;height:4px;margin:4px 6px;position:relative;top:0;left:0}.shaka-volume-bar-container{width:100px;padding:0}.shaka-range-element{-webkit-appearance:none;z-index:1;background:0 0;width:100%;height:12px;margin:0;padding:0;position:absolute;top:-4px;bottom:0;left:0;right:0}.shaka-range-element::-webkit-slider-runnable-track{cursor:pointer;color:transparent;background:0 0;border:none;width:100%;height:12px}.shaka-range-element::-webkit-slider-thumb{-webkit-appearance:none;background:#fff;border:none;border-radius:12px;width:12px;height:12px}.shaka-range-element::-moz-range-track{cursor:pointer;color:transparent;background:0 0;border:none;width:100%;height:12px}.shaka-range-element::-moz-range-thumb{-webkit-appearance:none;background:#fff;border:none;border-radius:12px;width:12px;height:12px}.shaka-seek-bar-container{opacity:0;transition:opacity .6s cubic-bezier(.4,0,.6,1)}.shaka-controls-container[casting=true] .shaka-seek-bar-container,.shaka-controls-container[shown=true] .shaka-seek-bar-container{opacity:1}.shaka-ad-markers{width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-spinner-svg{transform-origin:50%;width:100%;height:100%;margin:0;padding:0;animation:2s linear infinite rotate;position:absolute;top:0;bottom:0;left:0;right:0}.shaka-spinner-path{stroke:#202124;stroke-dasharray:20 200;stroke-dashoffset:0;stroke-linecap:round;animation:1s ease-in-out infinite dash}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1 200;stroke-dashoffset:0}50%{stroke-dasharray:89 200;stroke-dashoffset:-35px}to{stroke-dasharray:89 200;stroke-dashoffset:-124px}}.shaka-spacer{cursor:default;flex-grow:1;flex-shrink:1;margin:0}.shaka-overflow-menu,.shaka-settings-menu{white-space:nowrap;opacity:0;z-index:2;background:#fff;border-radius:2px;flex-direction:column;min-width:180px;max-height:250px;transition:opacity .6s cubic-bezier(.4,0,.6,1);display:flex;position:absolute;bottom:30px;right:15px;overflow-x:hidden;overflow-y:auto;box-shadow:0 1px 9px rgba(0,0,0,.4)}.shaka-controls-container[casting=true] .shaka-overflow-menu,.shaka-controls-container[casting=true] .shaka-settings-menu,.shaka-controls-container[shown=true] .shaka-overflow-menu,.shaka-controls-container[shown=true] .shaka-settings-menu{opacity:1}.shaka-overflow-menu button,.shaka-settings-menu button{color:#000;cursor:pointer;background:0 0;border:none;align-items:center;min-height:30px;padding:3.5px 6px;font-size:14px;display:flex}.shaka-overflow-menu button:hover,.shaka-settings-menu button:hover{background:#e0e0e0}.shaka-overflow-menu button label,.shaka-settings-menu button label{cursor:pointer}.shaka-keyboard-navigation .shaka-overflow-menu button:focus,.shaka-keyboard-navigation .shaka-settings-menu button:focus{background:#e0e0e0}.shaka-overflow-menu i,.shaka-settings-menu i{padding-left:10px;padding-right:10px}.shaka-overflow-menu.shaka-low-position,.shaka-settings-menu.shaka-low-position{bottom:15px}.shaka-overflow-menu span{text-align:left}.shaka-overflow-button-label{flex-direction:column;display:flex;position:relative}.shaka-current-selection-span{color:rgba(0,0,0,.54)}.shaka-settings-menu span{margin-left:54px}.shaka-back-to-overflow-button span{margin-left:0}.shaka-back-to-overflow-button i{padding-right:20px}.shaka-auto-span{left:17px}.shaka-controls-container[ad-active=true]{pointer-events:none}.shaka-controls-container[ad-active=true] .shaka-bottom-controls{pointer-events:auto}.shaka-client-side-ad-container,.shaka-server-side-ad-container{position:absolute;top:0;bottom:0;left:0;right:0}.shaka-video-container[shaka-controls=true] .shaka-client-side-ad-container iframe,.shaka-video-container[shaka-controls=true] .shaka-server-side-ad-container iframe{height:90%}.shaka-server-side-ad-container{flex-shrink:1;width:100%;height:100%}.shaka-server-side-ad-container:not([ad-active=true]){pointer-events:none}.shaka-ad-controls{z-index:1;flex-direction:row;padding-bottom:1%;display:flex}.shaka-video-container:not([shaka-controls=true]) .shaka-ad-controls{display:none}.shaka-ad-controls button,.shaka-ad-controls div{color:#fff;font-size:initial}.shaka-ad-controls div:not(.shaka-skip-ad-counter):not(.shaka-skip-ad-container){margin:1px}.shaka-ad-counter,.shaka-ad-position{text-shadow:1px 1px 4px #000;flex-direction:column;justify-content:flex-end;display:flex}.shaka-ad-controls .shaka-ad-position:not(.shaka-hidden)+.shaka-ad-counter{margin-left:.75em}.shaka-skip-ad-container{flex-direction:row;margin:0 0 0 auto;display:flex;position:relative;right:-2%}.shaka-skip-ad-button{cursor:pointer;background:rgba(0,0,0,.7);border:none;padding:5px 15px}.shaka-skip-ad-button:disabled{background:rgba(0,0,0,.3)}.shaka-skip-ad-counter{background:rgba(0,0,0,.7);margin:0;padding:5px}.shaka-tooltips-on{overflow:visible}.shaka-tooltips-on>[class*=shaka-tooltip]{position:relative}.shaka-tooltips-on>[class*=shaka-tooltip]:active:after,.shaka-tooltips-on>[class*=shaka-tooltip]:hover:after{content:attr(aria-label);white-space:nowrap;color:#fff;background:rgba(35,35,35,.9);border-radius:3px;padding:5px 10px;font-family:Roboto-Regular,Roboto,sans-serif;font-size:13px;line-height:16px;position:absolute;bottom:37px;left:16px;transform:translate(-50%)}.shaka-tooltips-on>[class*=shaka-tooltip]:focus-visible:after{content:attr(aria-label);white-space:nowrap;color:#fff;background:rgba(35,35,35,.9);border-radius:3px;padding:5px 10px;font-family:Roboto-Regular,Roboto,sans-serif;font-size:13px;line-height:16px;position:absolute;bottom:37px;left:16px;transform:translate(-50%)}.shaka-tooltips-on>.shaka-tooltip-status:active:after,.shaka-tooltips-on>.shaka-tooltip-status:hover:after{content:attr(aria-label)" (" attr(shaka-status)")"}.shaka-tooltips-on>.shaka-tooltip-status:focus-visible:after{content:attr(aria-label)" (" attr(shaka-status)")"}.shaka-tooltips-on button:first-child:active:after,.shaka-tooltips-on button:first-child:hover:after{left:0;transform:translate(0)}.shaka-tooltips-on button:first-child:focus-visible:after{left:0;transform:translate(0)}.shaka-tooltips-on button:last-child:active:after,.shaka-tooltips-on button:last-child:hover:after{left:32px;transform:translate(-100%)}.shaka-tooltips-on button:last-child:focus-visible:after{left:32px;transform:translate(-100%)}#shaka-player-ui-thumbnail-container{visibility:hidden;z-index:1;background-color:#000;border:1px solid #000;width:15%;min-width:150px;position:absolute;overflow:hidden;box-shadow:0 8px 8px rgba(0,0,0,.5)}#shaka-player-ui-thumbnail-container #shaka-player-ui-thumbnail-image{position:absolute}#shaka-player-ui-thumbnail-container #shaka-player-ui-thumbnail-time{color:#fff;text-align:center;background-color:rgba(0,0,0,.5);font-size:16px;position:absolute;bottom:0;left:0;right:0}#shaka-player-ui-time-container{color:#000;visibility:hidden;z-index:1;background-color:#fff;border:1px solid #000;border-radius:10px;padding:1px 7px;position:absolute;overflow:hidden;box-shadow:0 8px 8px rgba(0,0,0,.5)}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxP.ttf)format("truetype")}@font-face{font-family:Material Icons Round;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialiconsround/v108/LDItaoyNOAY6Uewc665JcIzCKsKc_M9flwmM.otf)format("opentype")}.material-icons-round{letter-spacing:normal;text-transform:none;white-space:nowrap;word-wrap:normal;direction:ltr;font-family:Material Icons Round;font-size:24px;font-style:normal;font-weight:400;line-height:1;display:inline-block}:root{--player-base:rgba(255,255,255,.3);--player-buffered:rgba(255,255,255,.54);--player-played:red;--spon-seg-sponsor:#00d400;--spon-seg-selfpromo:#ff0;--spon-seg-interaction:#c0f;--spon-seg-poi_highlight:#ff1684;--spon-seg-intro:#0ff;--spon-seg-outro:#0202ed;--spon-seg-preview:#008fd6;--spon-seg-filler:#7300ff;--spon-seg-music_offtopic:#f90;--spon-seg-default:white}.player-container{--un-bg-opacity:1;background-color:rgba(0,0,0,var(--un-bg-opacity));min-height:16rem;max-height:75vh}.shaka-video-container .material-icons-round{font-size:1.25rem!important;line-height:1.75rem!important}.shaka-current-time{font-size:1rem!important;line-height:1.5rem!important}.shaka-video-container:-webkit-full-screen{max-height:none!important}.shaka-text-wrapper *{text-align:left!important}.shaka-text-wrapper>span>span{background-color:transparent!important}.shaka-text-wrapper>span>span :first-child:last-child{padding:.09em 0;background-color:rgba(0,0,0,.6)!important}#shaka-player-ui-time-container{display:none!important}.skip-segment-button{z-index:1000;color:#fff;background-color:rgba(0,0,0,.5);border:2px solid rgba(255,255,255,.75);border-right:0;border-radius:.75em 0 0 .75em;justify-content:center;align-items:center;padding:.5em;line-height:1.5em;display:flex;position:absolute;top:50%;right:0;transform:translateY(-50%)}.skip-segment-button .material-icons-round{font-size:1.6em!important;line-height:inherit!important}::-webkit-scrollbar{height:5px}.chapter{cursor:pointer;align-self:center;padding:.625rem}.chapter img{width:100%;height:100%}.chapter-vertical{cursor:pointer;align-self:center;padding:.625rem}.chapter-vertical img{width:30%;height:30%}.chapter-vertical:hover{--un-bg-opacity:1;background-color:rgba(107,114,128,var(--un-bg-opacity))}.text-truncate{text-overflow:ellipsis;white-space:nowrap;width:10em;display:inline-block;overflow:hidden}.toast{z-index:9999;--un-text-opacity:1;color:rgba(0,0,0,var(--un-text-opacity));--un-shadow:var(--un-shadow-inset)0 1px 3px 0 var(--un-shadow-color,rgba(0,0,0,.1)),var(--un-shadow-inset)0 1px 2px -1px var(--un-shadow-color,rgba(0,0,0,.1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow);background-color:rgba(255,255,255,.8);border-radius:.25rem;flex-direction:column;justify-content:center;min-width:max-content;padding:1rem;transition-duration:.2s;display:flex;position:fixed;top:3rem;right:3rem}.dark .toast{--un-text-opacity:1;color:rgba(255,255,255,var(--un-text-opacity));background-color:rgba(15,15,15,.8)}.toast button{text-decoration-line:underline}.v-enter-from,.v-leave-to{opacity:0;transform:translate(100%)scale(.5)}.description a{filter:brightness(.75);text-decoration:underline}\n',document.head.appendChild(B);const j=a((()=>t.import("./shaka-player.ui-legacy-Dyga1S3k.js").then((e=>e.s))),void 0),F=a((()=>t.import("./index-legacy-CmTDz3X_.js").then((e=>e.J))),void 0),N={components:{ModalComponent:_},props:{video:{type:Object,default:()=>({})},sponsors:{type:Object,default:()=>({})},selectedAutoPlay:Boolean,selectedAutoLoop:Boolean,isEmbed:Boolean},emits:["timeupdate","ended","navigateNext"],data:()=>({lastUpdate:(new Date).getTime(),initialSeekComplete:!1,destroying:!1,inSegment:!1,isHoveringTimebar:!1,showSpeedModal:!1,showCurrentSpeed:!1,hideCurrentSpeed:null,showCurrentVolume:!1,hideCurrentVolume:null,playbackSpeedInput:null,currentTime:0,seekbarPadding:2,error:0}),computed:{shouldAutoPlay:e=>e.getPreferenceBoolean("playerAutoPlay",!0)&&!e.isEmbed,preferredVideoCodecs:e=>{var t=[];const a=e.getPreferenceString("enabledCodecs","vp9,avc").split(",");return""!==e.$refs.videoEl.canPlayType('video/mp4; codecs="av01.0.08M.08"')&&a.includes("av1")&&t.push("av01"),""!==e.$refs.videoEl.canPlayType('video/webm; codecs="vp9"')&&a.includes("vp9")&&t.push("vp9"),""!==e.$refs.videoEl.canPlayType('video/mp4; codecs="avc1.4d401f"')&&a.includes("avc")&&t.push("avc1"),t}},mounted(){this.$shaka||(this.shakaPromise=j.then((e=>e.default)).then((e=>this.$shaka=e))),this.$hotkeys||(this.hotkeysPromise=F.then((e=>e.default)).then((e=>this.$hotkeys=e)))},activated(){this.destroying=!1,this.sponsors?.segments?.forEach((e=>e.skipped=!1)),this.hotkeysPromise.then((()=>{var e=this;this.$hotkeys("f,m,j,k,l,c,space,up,down,left,right,ctrl+left,ctrl+right,home,end,0,1,2,3,4,5,6,7,8,9,shift+n,shift+s,shift+,,shift+.,alt+p,return,.,,",(function(t,a){const s=e.$refs.videoEl;switch(a.key){case"f":e.$ui.getControls().toggleFullScreen(),t.preventDefault();break;case"m":s.muted=!s.muted,t.preventDefault();break;case"j":s.currentTime=Math.max(s.currentTime-15,0),t.preventDefault();break;case"l":s.currentTime=s.currentTime+15,t.preventDefault();break;case"c":e.$player.setTextTrackVisibility(!e.$player.isTextTrackVisible()),t.preventDefault();break;case"k":case"space":s.paused?s.play():s.pause(),t.preventDefault();break;case"up":e.adjustPlaybackVolume(s.volume+.05),t.preventDefault();break;case"down":e.adjustPlaybackVolume(s.volume-.05),t.preventDefault();break;case"left":s.currentTime=Math.max(s.currentTime-5,0),t.preventDefault();break;case"right":s.currentTime=s.currentTime+5,t.preventDefault();break;case"ctrl+left":s.currentTime=e.video.chapters.findLast((e=>e.start<s.currentTime)).start,t.preventDefault();break;case"ctrl+right":s.currentTime=e.video.chapters.find((e=>e.start>s.currentTime))?.start||s.duration,t.preventDefault();break;case"home":case"0":s.currentTime=0,t.preventDefault();break;case"end":s.currentTime=s.duration,t.preventDefault();break;case"1":s.currentTime=.1*s.duration,t.preventDefault();break;case"2":s.currentTime=.2*s.duration,t.preventDefault();break;case"3":s.currentTime=.3*s.duration,t.preventDefault();break;case"4":s.currentTime=.4*s.duration,t.preventDefault();break;case"5":s.currentTime=.5*s.duration,t.preventDefault();break;case"6":s.currentTime=.6*s.duration,t.preventDefault();break;case"7":s.currentTime=.7*s.duration,t.preventDefault();break;case"8":s.currentTime=.8*s.duration,t.preventDefault();break;case"9":s.currentTime=.9*s.duration,t.preventDefault();break;case"shift+n":e.$emit("navigateNext"),t.preventDefault();break;case"shift+s":e.showSpeedModal=!0;break;case"shift+,":e.adjustPlaybackSpeed(s.playbackRate-.25);break;case"shift+.":e.adjustPlaybackSpeed(s.playbackRate+.25);break;case"alt+p":document.pictureInPictureElement?document.exitPictureInPicture():s.requestPictureInPicture();break;case"return":e.skipSegment(s);break;case".":s.currentTime+=.04,t.preventDefault();break;case",":s.currentTime-=.04,t.preventDefault()}}))}))},deactivated(){this.destroying=!0,this.destroy(!0)},unmounted(){this.destroying=!0,this.destroy(!0)},methods:{async loadVideo(){this.updateSponsors();const e=this,s=this.$refs.videoEl;s.setAttribute("poster",this.video.thumbnailUrl);const i=!this.$player;var o=[];o.push(...this.video.audioStreams),o.push(...this.video.videoStreams);const n=void 0!==window.MediaSource;var r,l;if(this.video.livestream)r=this.video.hls,l="application/x-mpegURL";else if(this.video.audioStreams.length>0&&n&&!this.getPreferenceBoolean("preferHls",!1)){if(this.video.dash){const e=new URL(this.video.dash);e.searchParams.set("rewrite",!1),r=e.toString()}else{const e=(await a((async()=>{const{generate_dash_file_from_formats:e}=await t.import("./DashUtils-legacy-CNwiZbwj.js");return{generate_dash_file_from_formats:e}}),void 0)).generate_dash_file_from_formats(o,this.video.duration);r="data:application/dash+xml;charset=utf-8;base64,"+btoa(e)}l="application/dash+xml"}else this.video.hls?(r=this.video.hls,l="application/x-mpegURL"):(r=this.video.videoStreams.findLast((e=>null==e.codec)).url,l="video/mp4");i?this.shakaPromise.then((async()=>{if(this.destroying)return;this.$shaka.polyfill.installAll();const t=new this.$shaka.Player;await t.attach(s);const a=new URL(e.video.proxyUrl);let i=a.pathname;i.lastIndexOf("/")===i.length-1&&(i=i.substring(0,i.length-1)),t.getNetworkingEngine().registerRequestFilter(((t,s)=>{const o=s.uris[0];var n=new URL(o);const r=s.headers;(n.host.endsWith(".googlevideo.com")||n.host.endsWith(".lbryplayer.xyz")&&(e.getPreferenceBoolean("proxyLBRY",!1)||r.Range))&&(n.searchParams.set("host",n.host),n.protocol=a.protocol,n.host=a.host,n.pathname=i+n.pathname,s.uris[0]=n.toString()),n.pathname===i+"/videoplayback"&&r.Range&&(n.searchParams.set("range",r.Range.split("=")[1]),s.headers={},s.uris[0]=n.toString())})),t.configure("streaming.bufferingGoal",Math.max(this.getPreferenceNumber("bufferGoal",10),10)),t.configure("streaming.bufferBehind",300),this.setPlayerAttrs(t,s,r,l,this.$shaka)})):this.setPlayerAttrs(this.$player,s,r,l,this.$shaka),i&&(s.addEventListener("loadeddata",(()=>{document.pictureInPictureElement&&s.requestPictureInPicture()})),s.addEventListener("timeupdate",(()=>{const e=s.currentTime;if(this.$emit("timeupdate",e),this.updateProgressDatabase(e),this.sponsors&&this.sponsors.segments){const t=this.findCurrentSegment(e);this.inSegment=!!t,!t?.autoskip||t.skipped&&!this.selectedAutoLoop||this.skipSegment(s,t)}})),s.addEventListener("volumechange",(()=>{this.setPreference("volume",s.volume,!0)})),s.addEventListener("ratechange",(e=>{const t=s.playbackRate;t>0&&!isNaN(s.duration)&&!isNaN(s.duration-e.timeStamp/1e3)&&this.setPreference("rate",t,!0)})),s.addEventListener("ended",(()=>{this.$emit("ended")})))},findCurrentSegment(e){return this.sponsors?.segments?.find((t=>e>=t.segment[0]&&e<t.segment[1]))},onClickSkipSegment(){const e=this.$refs.videoEl;this.skipSegment(e)},skipSegment(e,t){const a=e.currentTime;t||(t=this.findCurrentSegment(a)),t&&(console.log("Skipped segment at "+a),e.currentTime=t.segment[1],t.skipped=!0)},async setPlayerAttrs(e,t,a,s,i){const o="/watch?v="+this.video.id;if(!this.$ui){this.destroy();const a=class extends i.ui.Element{constructor(e,t){super(e,t),this.newTabButton_=document.createElement("button"),this.newTabButton_.classList.add("shaka-cast-button"),this.newTabButton_.classList.add("shaka-tooltip"),this.newTabButton_.ariaPressed="false",this.newTabIcon_=document.createElement("i"),this.newTabIcon_.classList.add("material-icons-round"),this.newTabIcon_.textContent="launch",this.newTabButton_.appendChild(this.newTabIcon_);const a=document.createElement("label");a.classList.add("shaka-overflow-button-label"),a.classList.add("shaka-overflow-menu-only"),this.newTabNameSpan_=document.createElement("span"),this.newTabNameSpan_.innerText="Open in new tab",a.appendChild(this.newTabNameSpan_),this.newTabButton_.appendChild(a),this.parent.appendChild(this.newTabButton_),this.eventManager.listen(this.newTabButton_,"click",(()=>{this.video.pause(),window.open(o)}))}};a.Factory=class{create(e,t){return new a(e,t)}},i.ui.OverflowMenu.registerElement("open_new_tab",new a.Factory),this.$ui=new i.ui.Overlay(e,this.$refs.container,t);const s=["quality","captions","picture_in_picture","playback_rate","airplay"];this.isEmbed&&s.push("open_new_tab");const n={overflowMenuButtons:s,seekBarColors:{base:"var(--player-base)",buffered:"var(--player-buffered)",played:"var(--player-played)"}};this.$ui.configure(n)}this.updateMarkers();const n=new Event("playerInit");window.dispatchEvent(n);const r=this.$ui.getControls().getPlayer();this.setupSeekbarPreview(),this.$player=r;const l=this.getPreferenceBoolean("listen",!1)&&!this.video.livestream,d=Math.min(Math.max(this.getPreferenceNumber("prefetchLimit",2),0),10);this.$player.configure({preferredVideoCodecs:this.preferredVideoCodecs,preferredAudioCodecs:["opus","mp4a"],manifest:{disableVideo:l},streaming:{segmentPrefetchLimit:d,retryParameters:{maxAttempts:1/0,baseDelay:250,backoffFactor:1.5}}});const c=this.getPreferenceNumber("quality",0),h=c>0&&(this.video.audioStreams.length>0||this.video.livestream)&&!l;h&&this.$player.configure("abr.enabled",!1);const u=this.$route.query.t??this.$route.query.start;var p=0;u?(p=T(u),this.initialSeekComplete=!0):window.db&&this.getPreferenceBoolean("watchHistory",!1)?await new Promise((e=>{var t=window.db.transaction("watch_history","readonly");t.objectStore("watch_history").get(this.video.id).onsuccess=function(t){var a=t.target.result;const s=a?.currentTime;s&&s<.9*a.duration&&(p=s),e()},t.oncomplete=()=>{this.initialSeekComplete=!0}})):this.initialSeekComplete=!0,r.load(a,p,s).then((()=>{const e=window.navigator?.vendor?.includes("Apple");if(!e){const e=this.getPreferenceString("hl","en").substr(0,2);var a="en";for(var s in r.getAudioLanguages())if(s==e)return void(a=s);r.selectAudioLanguage(a)}if(r.getAudioLanguages().length>1){const e=this.$ui.getConfiguration().overflowMenuButtons,t=[...e.slice(0,1),"language",...e.slice(1)];this.$ui.configure("overflowMenuButtons",t)}if(h){var i=Number.MAX_VALUE,o=null,n=0;const e=r.getVariantTracks().filter((e=>e.language==a||"und"==e.language));c>=480&&e.forEach((e=>{const t=e.audioBandwidth;t>n&&(n=t)})),e.sort(((e,t)=>e.bandwidth-t.bandwidth)).forEach((e=>{if(e.audioBandwidth<n)return;const t=Math.abs(c-e.height);t<i&&(i=t,o=e)})),r.selectVariantTrack(o,!0)}this.video.subtitles.map((e=>{r.addTextTrackAsync(e.url,e.code,"subtitles",e.mimeType,null,e.name)})),t.volume=this.getPreferenceNumber("volume",1);const l=this.getPreferenceNumber("rate",1);t.playbackRate=l,t.defaultPlaybackRate=l;const d=this.getPreferenceBoolean("autoDisplayCaptions",!1);this.$player.setTextTrackVisibility(d);const u=this.getPreferenceString("subtitles","");if(""!==u){const e=this.$player.getTextTracks(),t=e.findIndex((e=>e.language==u));-1!=t&&(this.$player.setTextTrackVisibility(!0),this.$player.selectTextTrack(e[t]))}})).catch((e=>{console.error(e),this.error=e.code})),"true"!==this.$route.query.fullscreen||this.$ui.getControls().isFullScreenEnabled()||this.$ui.getControls().toggleFullScreen();const m=this.$refs.container.querySelector(".shaka-seek-bar"),f=["to right"];for(const g of this.video.chapters){const e=g.start/this.video.duration*100;0!==e&&(f.push(`transparent ${e}%`),f.push(`black ${e}%`),f.push(`black calc(${e}% + 1px)`),f.push(`transparent calc(${e}% + 1px)`))}m.style.background=`linear-gradient(${f.join(",")})`,m.addEventListener("mouseup",(()=>{this.$refs.videoEl.focus()}))},async updateProgressDatabase(e){if(!((new Date).getTime()-this.lastUpdate<500)&&(this.lastUpdate=(new Date).getTime(),this.initialSeekComplete&&this.video.id&&window.db)){var t=window.db.transaction("watch_history","readwrite").objectStore("watch_history");t.get(this.video.id).onsuccess=function(a){var s=a.target.result;s&&(s.currentTime=e,t.put(s))}}},seek(e){this.$refs.videoEl&&(this.$refs.videoEl.currentTime=e)},adjustPlaybackSpeed(e){const t=Math.min(4,Math.max(.25,e));this.$player.trickPlay(t),this.hideCurrentSpeed&&window.clearTimeout(this.hideCurrentSpeed),this.showCurrentSpeed=!1,this.showCurrentSpeed=!0,this.hideCurrentSpeed=window.setTimeout((()=>this.showCurrentSpeed=!1),1500)},adjustPlaybackVolume(e){const t=Math.min(1,Math.max(0,e));this.$refs.videoEl.volume=t,this.hideCurrentVolume&&window.clearTimeout(this.hideCurrentVolume),this.showCurrentVolume=!1,this.showCurrentVolume=!0,this.hideCurrentVolume=window.setTimeout((()=>this.showCurrentVolume=!1),1500)},setSpeedFromInput(){try{const e=Number(this.playbackSpeedInput);this.adjustPlaybackSpeed(e)}catch(e){alert(this.$t("actions.invalid_input"))}this.showSpeedModal=!1},updateMarkers(){const e=this.$refs.container.querySelector(".shaka-ad-markers"),t=["to right"];this.sponsors?.segments?.forEach((e=>{const a=e.segment[0]/this.video.duration*100,s=e.segment[1]/this.video.duration*100;var i=["sponsor","selfpromo","interaction","poi_highlight","intro","outro","preview","filler","music_offtopic"].includes(e.category)?`var(--spon-seg-${e.category})`:"var(--spon-seg-default)";t.push(`transparent ${a}%`),t.push(`${i} ${a}%`),t.push(`${i} ${s}%`),t.push(`transparent ${s}%`)})),t.length<=1||e&&(e.style.background=`linear-gradient(${t.join(",")})`)},updateSponsors(){this.getPreferenceBoolean("showMarkers",!0)&&this.shakaPromise.then((()=>{this.updateMarkers()}))},setupSeekbarPreview(){if(!this.video.previewFrames)return;let e=document.querySelector(".shaka-seek-bar");e.addEventListener("mousemove",(e=>{this.isHoveringTimebar=!0;const t=e.offsetX/e.target.offsetWidth*this.video.duration;this.showSeekbarPreview(1e3*t)})),e.addEventListener("mouseout",(()=>{this.isHoveringTimebar=!1,this.$refs.previewContainer.style.display="none"}))},async showSeekbarPreview(e){const t=this.getFrame(e),a=await this.loadImage(t.url);if(!this.isHoveringTimebar)return;const s=document.querySelector(".shaka-seek-bar"),i=this.$refs.previewContainer,o=this.$refs.preview,n=o.getContext("2d"),r=t.positionX*t.frameWidth,l=t.positionY*t.frameHeight;o.width=t.frameWidth>100?t.frameWidth:2*t.frameWidth,o.height=t.frameWidth>100?t.frameHeight:2*t.frameHeight,n.drawImage(a,r,l,t.frameWidth,t.frameHeight,0,0,o.width,o.height);const d=e/this.video.duration/10-.5*o.width/s.clientWidth*100,c=(s.clientWidth-o.clientWidth)/s.clientWidth*100-this.seekbarPadding;this.currentTime=e/1e3,i.style.left=`max(${this.seekbarPadding}%, min(${d}%, ${c}%))`,i.style.display="flex"},getFrame(e){let t=0;const a=this.video.previewFrames.at(-1);for(let s=0;s<a.urls.length;s++)for(let i=0;i<a.framesPerPageY;i++)for(let o=0;o<a.framesPerPageX;o++){const n=t+a.durationPerFrame;if(e>=t&&e<=n)return{url:a.urls[s],positionX:o,positionY:i,frameWidth:a.frameWidth,frameHeight:a.frameHeight};t=n}return null},loadImage:e=>new Promise((t=>{const a=new Image;a.onload=()=>t(a),a.src=e})),destroy(e){this.$ui&&!document.pictureInPictureElement&&(this.$ui.destroy(),this.$ui=void 0,this.$player=void 0),this.$player&&(this.$player.destroy(),document.pictureInPictureElement||(this.$player=void 0)),e&&this.$hotkeys?.unbind(),this.$refs.container?.querySelectorAll("div").forEach((e=>e.remove()))}}},q=["autoplay","loop"],H={id:"preview-container",ref:"previewContainer",class:"absolute bottom-0 z-[2000] mb-[3.5%] hidden flex-col items-center"},W={id:"preview",ref:"preview",class:"rounded-sm"},O={key:0,class:"mt-2 text-sm drop-shadow-[0_0_2px_white] -mb-2 .dark:drop-shadow-[0_0_2px_black]"},J=["textContent"],Y=["aria-label"],K=n("i",{class:"material-icons-round"},"skip_next",-1),X={key:1,class:"absolute top-8 rounded bg-black/80 p-2 text-lg backdrop-blur-sm"},G={key:2,class:"text-l absolute left-1/2 top-1/2 flex flex-col transform items-center gap-6 rounded-8 bg-white/80 px-8 py-4 -translate-x-1/2 -translate-y-1/2 .dark:bg-dark-700/80"},Q=n("i",{class:"i-fa6-solid:gauge-high h-25 w-25 p-5"},null,-1),Z=["textContent"],ee={key:3,class:"text-l absolute left-1/2 top-1/2 flex flex-col transform items-center gap-6 rounded-8 bg-white/80 px-8 py-4 -translate-x-1/2 -translate-y-1/2 .dark:bg-dark-700/80"},te={key:0,class:"i-fa6-solid:volume-high h-25 w-25 p-5"},ae={key:1,class:"i-fa6-solid:volume-xmark h-25 w-25 p-5"},se=["textContent"],ie={class:"flex flex-col"},oe=["placeholder"],ne=s(N,[["render",function(e,t,a,s,k,v){const y=g("ModalComponent"),x=b("t");return i(),o(f,null,[n("div",{ref:"container","data-shaka-player-container":"",class:c(["relative max-h-screen w-full flex justify-center",{"player-container":!a.isEmbed}])},[n("video",{ref:"videoEl",class:"w-full","data-shaka-player":"",autoplay:v.shouldAutoPlay,loop:a.selectedAutoLoop},null,8,q),n("span",H,[n("canvas",W,null,512),a.video.chapters.length>1?(i(),o("span",O,r(a.video.chapters.findLast((e=>e.start<k.currentTime))?.title),1)):l("",!0),n("span",{class:"mt-2 w-min rounded-xl bg-white px-2 pb-1 pt-1.5 text-sm .dark:bg-dark-700",textContent:r(e.timeFormat(k.currentTime))},null,8,J)],512),k.inSegment?(i(),o("button",{key:0,class:"skip-segment-button",type:"button","aria-label":e.$t("actions.skip_segment"),"aria-pressed":"false",onClick:t[0]||(t[0]=(...e)=>v.onClickSkipSegment&&v.onClickSkipSegment(...e))},[d(n("span",null,null,512),[[x,"actions.skip_segment"]]),K],8,Y)):l("",!0),k.error>0?d((i(),o("span",X,null,512)),[[x,{path:"player.failed",args:[k.error]}]]):l("",!0),k.showCurrentSpeed?(i(),o("div",G,[Q,n("span",{textContent:r(e.$refs.videoEl.playbackRate)},null,8,Z)])):l("",!0),k.showCurrentVolume?(i(),o("div",ee,[e.$refs.videoEl.volume>0?(i(),o("i",te)):(i(),o("i",ae)),n("span",{textContent:r(Math.round(100*e.$refs.videoEl.volume)/100)},null,8,se)])):l("",!0)],2),k.showSpeedModal?(i(),h(y,{key:0,onClose:t[4]||(t[4]=e=>k.showSpeedModal=!1)},{default:u((()=>[d(n("h2",null,null,512),[[x,"actions.playback_speed"]]),n("div",ie,[d(n("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>k.playbackSpeedInput=e),class:"input my-3",type:"text",placeholder:e.$t("actions.playback_speed"),onKeyup:t[2]||(t[2]=m((e=>v.setSpeedFromInput()),["enter"]))},null,40,oe),[[p,k.playbackSpeedInput]]),d(n("button",{class:"btn ml-auto w-min",onClick:t[3]||(t[3]=e=>v.setSpeedFromInput())},null,512),[[x,"actions.okay"]])])])),_:1})):l("",!0)],64)}]]),re={components:{CollapsableText:L},props:{comment:{type:Object,default:()=>({})},uploader:{type:String,default:null},uploaderAvatarUrl:{type:String,default:null},videoId:{type:String,default:null}},data:()=>({loadingReplies:!1,showingReplies:!1,replies:[],nextpage:null}),methods:{async loadReplies(){console.log(this.uploaderAvatarUrl),this.showingReplies||!this.loadingReplies?(this.loadingReplies=!0,this.showingReplies=!0,this.fetchJson(this.apiUrl()+"/nextpage/comments/"+this.videoId,{nextpage:this.nextpage||this.comment.repliesPage}).then((e=>{this.replies=this.replies.concat(e.comments),this.nextpage=e.nextpage}))):this.showingReplies=!0},async hideReplies(){this.showingReplies=!1}}},le={class:"comment mt-1.5 flex"},de=["src"],ce={class:"comment-content pl-2"},he={class:"comment-header"},ue={key:0,class:"comment-pinned"},pe=n("i",{class:"i-fa6-solid:thumbtack"},null,-1),me={class:"ml-1.5"},fe={class:"comment-author"},ge={key:0,class:"i-fa6-solid:check ml-1.5"},be=["textContent"],ke={class:"comment-footer my-1 flex items-center gap-3"},ve=n("div",{class:"i-fa6-solid:thumbs-up"},null,-1),ye=["textContent"],xe=["title"],we=["src","title"],Ce=["textContent"],Se=n("i",{class:"i-fa6-solid:level-down-alt ml-1.5"},null,-1),$e=n("i",{class:"i-fa6-solid:level-up-alt ml-1.5"},null,-1),Pe={key:2,class:"replies"},Te=n("i",{class:"i-fa6-solid:level-down-alt ml-1.5"},null,-1),_e=s(re,[["render",function(e,t,a,s,c,h){const p=g("router-link"),m=g("CollapsableText"),w=g("CommentItem",!0),C=b("t");return i(),o("div",le,[n("img",{loading:"lazy",src:a.comment.thumbnail,class:"comment-avatar h-12 w-12 rounded-full",height:"48",width:"48",alt:"Avatar"},null,8,de),n("div",ce,[n("div",he,[a.comment.pinned?(i(),o("div",ue,[pe,d(n("span",me,null,512),[[C,{path:"comment.pinned_by",args:{author:a.uploader}}]])])):l("",!0),n("div",fe,[k(p,{class:"link font-bold",to:a.comment.commentorUrl},{default:u((()=>[v(r(a.comment.author),1)])),_:1},8,["to"]),a.comment.verified?(i(),o("i",ge)):l("",!0)]),n("div",{class:"comment-meta mb-1.5 text-sm",textContent:r(a.comment.commentedTime)},null,8,be)]),k(m,{text:a.comment.commentText,"visible-limit":500},null,8,["text"]),n("div",ke,[ve,n("span",{textContent:r(e.numberFormat(a.comment.likeCount))},null,8,ye),a.comment.hearted?(i(),o("i",{key:0,class:"i-fa6-solid:heart",title:e.$t("actions.creator_liked")},null,8,xe)):l("",!0),a.comment.creatorReplied?(i(),o("img",{key:1,src:a.uploaderAvatarUrl,class:"h-5 w-5 rounded-full",title:e.$t("actions.creator_replied")},null,8,we)):l("",!0)]),!a.comment.repliesPage||c.loadingReplies&&c.showingReplies?l("",!0):(i(),o("div",{key:0,class:"cursor-pointer",onClick:t[0]||(t[0]=(...e)=>h.loadReplies&&h.loadReplies(...e))},[n("a",{textContent:r(`${e.$t("actions.reply_count",a.comment.replyCount)}`)},null,8,Ce),Se])),c.showingReplies?(i(),o("div",{key:1,class:"cursor-pointer",onClick:t[1]||(t[1]=(...e)=>h.hideReplies&&h.hideReplies(...e))},[d(n("a",null,null,512),[[C,"actions.hide_replies"]]),$e])):l("",!0),c.replies?d((i(),o("div",Pe,[(i(!0),o(f,null,x(c.replies,(e=>(i(),o("div",{key:e.commentId,class:"w-full"},[k(w,{comment:e,uploader:a.uploader,"video-id":a.videoId},null,8,["comment","uploader","video-id"])])))),128)),c.nextpage?(i(),o("div",{key:0,class:"cursor-pointer",onClick:t[2]||(t[2]=(...e)=>h.loadReplies&&h.loadReplies(...e))},[d(n("a",null,null,512),[[C,"actions.load_more_replies"]]),Te])):l("",!0)],512)),[[y,c.showingReplies]]):l("",!0)])])}]]),Ie={key:0,class:"max-h-75vh max-w-35vw min-h-64 flex-col overflow-y-scroll lt-lg:hidden"},Le={class:"mb-2 bg-gray-500/50 p-2","aria-label":"chapters",title:"chapters"},Ee=["onClick"],Me={class:"flex"},De=["textContent"],ze=["src","alt"],Ae={class:"m-2 flex flex-col"},Re=["title","textContent"],Ve=["textContent"],Ue={key:1,class:"max-h-64 flex flex-col overflow-y-scroll"},Be={class:"mb-2 bg-gray-500/50 p-2","aria-label":"chapters",title:"chapters"},je=["onClick"],Fe={class:"flex"},Ne=["textContent"],qe=["src","alt"],He={class:"m-2 flex flex-col"},We=["title","textContent"],Oe=["textContent"],Je={key:2,class:"flex overflow-x-auto"},Ye=["onClick"],Ke=["src","alt"],Xe={class:"m-1 flex"},Ge=["title","textContent"],Qe=["textContent"],Ze={__name:"ChaptersBar",props:{chapters:{type:Object,default:()=>null},mobileLayout:{type:Boolean,default:()=>!0},playerPosition:{type:Number,default:()=>0}},emits:["seek"],setup(e){const t=e,a=e=>t.playerPosition>=t.chapters[e].start&&t.playerPosition<(t.chapters[e+1]?.start??1/0);return(t,s)=>(i(),o(f,null,[e.mobileLayout?l("",!0):(i(),o("div",Ie,[n("h2",Le,r(t.$t("video.chapters"))+" ("+r(e.chapters.length)+") ",1),(i(!0),o(f,null,x(e.chapters,((e,s)=>(i(),o("div",{key:e.start,class:c(["chapter-vertical",{"bg-red-500/50":a(s)}]),onClick:a=>t.$emit("seek",e.start)},[n("div",Me,[n("span",{class:"mr-2 mt-5 text-current",textContent:r(s+1)},null,8,De),n("img",{class:"shrink-0",src:e.image,alt:e.title},null,8,ze),n("div",Ae,[n("span",{class:"text-sm",title:e.title,textContent:r(e.title)},null,8,Re),n("span",{class:"text-sm text-blue-500 font-bold",textContent:r(t.timeFormat(e.start))},null,8,Ve)])])],10,Ee)))),128))])),e.mobileLayout&&"Vertical"==t.getPreferenceString("mobileChapterLayout")?(i(),o("div",Ue,[n("h2",Be,r(t.$t("video.chapters"))+" ("+r(e.chapters.length)+") ",1),(i(!0),o(f,null,x(e.chapters,((e,s)=>(i(),o("div",{key:e.start,class:c(["chapter-vertical",{"bg-red-500/50":a(s)}]),onClick:a=>t.$emit("seek",e.start)},[n("div",Fe,[n("span",{class:"mr-2 mt-5 text-current",textContent:r(s+1)},null,8,Ne),n("img",{class:"shrink-0",src:e.image,alt:e.title},null,8,qe),n("div",He,[n("span",{class:"text-sm",title:e.title,textContent:r(e.title)},null,8,We),n("span",{class:"text-sm text-blue-500 font-bold",textContent:r(t.timeFormat(e.start))},null,8,Oe)])])],10,je)))),128))])):l("",!0),"Horizontal"==t.getPreferenceString("mobileChapterLayout")&&e.mobileLayout?(i(),o("div",Je,[(i(!0),o(f,null,x(e.chapters,((e,s)=>(i(),o("div",{key:e.start,class:c(["chapter",{"bg-red-500/50":a(s)}]),onClick:a=>t.$emit("seek",e.start)},[n("img",{src:e.image,alt:e.title},null,8,Ke),n("div",Xe,[n("span",{class:"text-truncate text-sm",title:e.title,textContent:r(e.title)},null,8,Ge),n("span",{class:"px-1 text-sm text-blue-500 font-bold",textContent:r(t.timeFormat(e.start))},null,8,Qe)])],10,Ye)))),128))])):l("",!0)],64))}},et={components:{VideoItem:A},props:{playlist:{type:Object,required:!0},playlistId:{type:String,required:!0},selectedIndex:{type:Number,required:!0},preferListen:{type:Boolean,default:!1}},watch:{playlist:{handler(){this.selectedIndex-1<this.playlist.relatedStreams.length&&w((()=>{this.updateScroll()}))},deep:!0}},mounted(){this.updateScroll(),this.updateWatched(this.playlist.relatedStreams)},methods:{updateScroll(){const e=Array.from(this.$refs.scrollable.children).filter((e=>e.matches("div")));this.selectedIndex-1<e.length&&(this.$refs.scrollable.scrollTop=e[this.selectedIndex-1].offsetTop-this.$refs.scrollable.offsetTop)}}},tt={ref:"scrollable",class:"h-screen-sm overflow-x-scroll"},at={class:"toast"},st={name:"App",components:{VideoPlayer:ne,ContentItem:I,ErrorHandler:E,CommentItem:_e,ChaptersBar:Ze,PlaylistAddModal:R,ShareModal:V,PlaylistVideos:s(et,[["render",function(e,t,a,s,n,r){const l=g("VideoItem");return i(),o("div",tt,[(i(!0),o(f,null,x(a.playlist.relatedStreams,((e,t)=>(i(),h(l,{key:e.url,item:e,index:t,"playlist-id":a.playlistId,"prefer-listen":a.preferListen,height:"94",width:"168"},null,8,["item","index","playlist-id","prefer-listen"])))),128))],512)}]]),WatchOnButton:M,LoadingIndicatorPage:U,ToastComponent:s({emits:["dismissed"],methods:{dismiss(){this.$emit("dismissed")}}},[["render",function(e,t,a,s,r,l){const c=b("t");return i(),o("div",at,[C(e.$slots,"default"),d(n("button",{onClick:t[0]||(t[0]=(...e)=>l.dismiss&&l.dismiss(...e))},null,512),[[c,"actions.dismiss"]])])}]])},data(){const e=window.matchMedia("(max-width: 640px)");return{video:null,playlistId:null,playlist:null,index:null,sponsors:null,selectedAutoLoop:!1,selectedAutoPlay:null,showComments:!0,showDesc:!1,showRecs:!0,showChapters:!0,comments:null,subscribed:!1,channelId:null,active:!0,smallViewQuery:e,smallView:e.matches,showModal:!1,showShareModal:!1,isMobile:!0,currentTime:0,shouldShowToast:!1,timeoutCounter:null,counter:0}},computed:{isListening:e=>e.getPreferenceBoolean("listen",!1),toggleListenUrl(e){const t=new URL(window.location.href);return t.searchParams.set("listen",e.isListening?"0":"1"),t.searchParams.set("t",Math.floor(this.currentTime)),t.pathname+t.search},isEmbed:e=>0==String(e.$route.path).indexOf("/embed/"),uploadDate:e=>new Date(e.video.uploadDate).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric"}),defaultCounter:e=>e.getPreferenceNumber("autoPlayNextCountdown",5),purifiedDescription(){return D(this.video.description)},youtubeVideoHref(){let e=`https://youtu.be/${this.getVideoId()}?t=${Math.round(this.currentTime)}`;return this.playlistId&&(e+=`&list=${this.playlistId}`),e}},mounted(){window.innerWidth>=1024&&(this.isMobile=!1),window.addEventListener("resize",(()=>{window.innerWidth>=1024?this.isMobile=!1:this.isMobile=!0})),this.getVideoData().then((()=>{(async()=>{const e=this.getVideoId(),t=this;if(window.db&&this.getPreferenceBoolean("watchHistory",!1)&&!this.video.error){var a=window.db.transaction("watch_history","readwrite").objectStore("watch_history");a.get(e).onsuccess=function(s){var i=s.target.result;i?i.watchedAt=Date.now():i={videoId:e,title:t.video.title,duration:t.video.duration,thumbnail:t.video.thumbnailUrl,uploaderUrl:t.video.uploaderUrl,uploaderName:t.video.uploader,watchedAt:Date.now()},a.put(i)}}})(),this.active&&this.$refs.videoPlayer.loadVideo()})),this.playlistId=this.$route.query.list,this.index=Number(this.$route.query.index),this.getPlaylistData(),this.getSponsors(),!this.isEmbed&&this.showComments&&this.getComments(),this.isEmbed&&(document.querySelector("html").style.overflow="hidden"),window.addEventListener("click",this.handleClick),window.addEventListener("resize",(()=>{this.smallView=this.smallViewQuery.matches}))},activated(){this.active=!0,this.selectedAutoPlay=this.getPreferenceBoolean("autoplay",!1),this.showComments=!this.getPreferenceBoolean("minimizeComments",!1),this.showDesc=!this.getPreferenceBoolean("minimizeDescription",!0),this.showRecs=!this.getPreferenceBoolean("minimizeRecommendations",!1),this.showChapters=!this.getPreferenceBoolean("minimizeChapters",!1),this.video?.duration&&(document.title=this.video.title+" - Piped",this.$refs.videoPlayer.loadVideo()),window.addEventListener("scroll",this.handleScroll)},deactivated(){this.active=!1,window.removeEventListener("scroll",this.handleScroll),this.dismiss()},unmounted(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("click",this.handleClick),this.dismiss()},methods:{fetchVideo(){return this.fetchJson(this.apiUrl()+"/streams/"+this.getVideoId())},async fetchSponsors(){var e=this.getPreferenceString("selectedSkip","sponsor,interaction,selfpromo,music_offtopic").split(",");const t=this.getPreferenceJSON("skipOptions");void 0!==t&&(e=Object.keys(t).filter((e=>void 0!==t[e]&&"no"!==t[e])));const a=await this.fetchJson(this.apiUrl()+"/sponsors/"+this.getVideoId(),{category:JSON.stringify(e)});a?.segments?.forEach((e=>{const a=t?.[e.category];e.autoskip=void 0===a||"auto"===a}));const s=Math.max(this.getPreferenceNumber("minSegmentLength",0),0);return a.segments=a.segments?.filter((e=>e.segment[1]-e.segment[0]>=s)),a},toggleComments(){this.showComments=!this.showComments,this.showComments&&null===this.comments&&this.fetchComments()},fetchComments(){return this.fetchJson(this.apiUrl()+"/comments/"+this.getVideoId())},onChange(){this.setPreference("autoplay",this.selectedAutoPlay,!0)},async getVideoData(){await this.fetchVideo().then((e=>{this.video=e,this.video.id=this.getVideoId()})).then((()=>{if(!this.video.error){document.title=this.video.title+" - Piped",this.channelId=this.video.uploaderUrl.split("/")[2],this.isEmbed||this.fetchSubscribedStatus();const e=(new DOMParser).parseFromString(this.video.description,"text/html");e.querySelectorAll("a").forEach((e=>{e.innerText.match(/(?:[\d]{1,2}:)?(?:[\d]{1,2}):(?:[\d]{1,2})/)||(e.outerHTML=e.getAttribute("href"))})),e.querySelectorAll("br").forEach((e=>e.outerHTML="\n")),this.video.description=z(e.querySelector("body").innerHTML),this.updateWatched(this.video.relatedStreams),this.fetchDeArrowContent(this.video.relatedStreams)}}))},async getPlaylistData(){this.playlistId&&(this.playlist=await this.getPlaylist(this.playlistId),await this.fetchPlaylistPages().then((()=>{if(!(this.index>=0))for(let e=0;e<this.playlist.relatedStreams.length;e++)if(this.playlist.relatedStreams[e].url.substr(-11)==this.getVideoId()){this.index=e+1,this.$router.replace({query:{...this.$route.query,index:this.index}});break}})),await this.fetchPlaylistPages())},async fetchPlaylistPages(){this.playlist.nextpage&&(await this.fetchJson(this.apiUrl()+"/nextpage/playlists/"+this.playlistId,{nextpage:this.playlist.nextpage}).then((e=>{this.playlist.relatedStreams.push(...e.relatedStreams),this.playlist.nextpage=e.nextpage,this.fetchDeArrowContent(e.relatedStreams)})),await this.fetchPlaylistPages())},async getSponsors(){this.getPreferenceBoolean("sponsorblock",!0)&&this.fetchSponsors().then((e=>this.sponsors=e))},async getComments(){this.comments=await this.fetchComments()},async fetchSubscribedStatus(){this.channelId&&(this.subscribed=await this.fetchSubscriptionStatus(this.channelId))},subscribeHandler(){this.toggleSubscriptionState(this.channelId,this.subscribed).then((e=>{e&&(this.subscribed=!this.subscribed)}))},handleClick(e){if(!e||!e.target)return;if(!e.target.matches("a[href]"))return;const t=e.target;t.getAttribute("href")&&this.handleTimestampLinks(t)&&e.preventDefault()},handleTimestampLinks(e){try{const t=new URL(e.getAttribute("href"),document.baseURI);if(t.searchParams.size>2||t.searchParams.get("v")!==this.getVideoId()||!t.searchParams.has("t"))return!1;const a=T(t.searchParams.get("t"));return a&&this.navigate(a),!0}catch(t){console.error(t)}return!1},handleScroll(){!this.loading&&this.comments&&this.comments.nextpage&&window.innerHeight+window.scrollY>=this.$refs.comments?.offsetHeight-window.innerHeight&&(this.loading=!0,this.fetchJson(this.apiUrl()+"/nextpage/comments/"+this.getVideoId(),{nextpage:this.comments.nextpage}).then((e=>{this.comments.nextpage=e.nextpage,this.loading=!1,this.comments.comments=this.comments.comments.concat(e.comments)})))},getVideoId(){if(this.$route.query.video_ids){const e=this.$route.query.video_ids.split(",");return this.index=Number(this.$route.query.index??0),e[this.index]}return this.$route.query.v||this.$route.params.v},navigate(e){this.$refs.videoPlayer.seek(e)},onTimeUpdate(e){this.currentTime=e},onVideoEnded(){!this.selectedAutoLoop&&this.selectedAutoPlay&&(this.playlist?.relatedStreams?.length>0||this.video.relatedStreams.length>0)&&this.showToast()},showToast(){this.counter=this.defaultCounter,this.counter<1?this.navigateNext():(this.timeoutCounter&&clearInterval(this.timeoutCounter),this.timeoutCounter=setInterval((()=>{this.counter--,0===this.counter&&(this.dismiss(),this.navigateNext())}),1e3),this.shouldShowToast=!0)},dismiss(){clearInterval(this.timeoutCounter),this.shouldShowToast=!1},navigateNext(){const e=this.$route.query,t=this.$route.query.video_ids?.split(",")??[];let a;a=this.playlist?this.playlist?.relatedStreams?.[this.index]?.url??this.video.relatedStreams[0].url:t.length>this.index+1?`${this.$route.path}?index=${this.index+1}`:this.video.relatedStreams[0].url;const s=new URLSearchParams;for(var i in e)switch(i){case"v":case"t":break;case"index":this.playlist&&this.index<this.playlist.relatedStreams.length&&s.set("index",this.index+1);break;case"list":this.index<this.playlist.relatedStreams.length&&s.set("list",e.list);break;default:s.set(i,e[i])}s.set("fullscreen",this.$refs.videoPlayer.$ui.getControls().isFullScreenEnabled());const o=s.toString();o.length>0&&(a+="&"+o),this.$router.push(a)},downloadCurrentFrame(){const e=document.querySelector("video"),t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);let a=document.createElement("a");const s=Math.round(1e3*e.currentTime)/1e3;a.download=`${this.video.title}_${s}s.png`,a.href=t.toDataURL(),a.click()}}},it={key:0,class:"absolute left-0 top-0 z-50 h-full w-full bg-black"},ot=["textContent"],nt={class:"mb-3 mt-3 flex flex-wrap"},rt={class:"flex flex-auto gap-2"},lt=n("span",null," | ",-1),dt=["textContent"],ct={class:"flex gap-2"},ht={class:"flex items-center"},ut=n("div",{class:"i-fa6-solid:thumbs-up"},null,-1),pt=["textContent"],mt={class:"flex items-center"},ft=n("div",{class:"i-fa6-solid:thumbs-down"},null,-1),gt=["textContent"],bt={key:1},kt={class:"flex flex-wrap gap-1"},vt={class:"flex items-center"},yt=["src"],xt={key:1,class:"i-fa6-solid:check ml-1"},wt={class:"ml-auto flex flex-wrap gap-1"},Ct=n("i",{class:"i-fa6-solid:download"},null,-1),St=n("i",{class:"i-fa6-solid:circle-plus ml-1"},null,-1),$t=["textContent"],Pt={class:"flex flex-wrap gap-1"},Tt=["href"],_t=[n("i",{class:"i-fa6-solid:rss mx-1.5"},null,-1)],It=n("i",{class:"i-fa6-solid:share mx-1.5"},null,-1),Lt=n("hr",{class:"mb-2"},null,-1),Et=["href"],Mt=n("br",null,null,-1),Dt={class:"btn ml-2"},zt={class:"ml-2",for:"showChapters"},At=["innerHTML"],Rt=n("br",null,null,-1),Vt=["textContent"],Ut=["textContent"],Bt=["textContent"],jt=["textContent"],Ft={key:2,class:"mt-2 flex flex-wrap gap-2"},Nt=n("hr",null,null,-1),qt={for:"chkAutoLoop"},Ht=["textContent"],Wt=n("br",null,null,-1),Ot={for:"chkAutoPlay"},Jt=["textContent"],Yt=n("hr",null,null,-1),Kt={class:"grid grid-cols-1 sm:grid-cols-4 xl:grid-cols-5"},Xt={class:"sm:col-span-3 xl:col-span-4"},Gt=["textContent"],Qt={key:0,class:"sm:col-span-3 xl:col-span-4"},Zt={key:1,class:"sm:col-span-3 xl:col-span-4"},ea={class:"mt-8 text-center"},ta={key:2,class:"sm:col-span-3 xl:col-span-4"},aa={class:"mt-8 text-center"},sa={key:3,ref:"comments",class:"sm:col-span-3 xl:col-span-4"},ia={key:4,class:"order-first sm:order-last"},oa=n("hr",{class:"sm:hidden"},null,-1);e("default",s(st,[["render",function(e,t,a,s,p,m){const w=g("VideoPlayer"),C=g("ErrorHandler"),T=g("i18n-t"),_=g("ToastComponent"),I=g("ChaptersBar"),L=g("router-link"),E=g("PlaylistAddModal"),M=g("ShareModal"),D=g("WatchOnButton"),z=g("CommentItem"),A=g("PlaylistVideos"),R=g("ContentItem"),V=g("LoadingIndicatorPage"),U=b("t");return i(),o(f,null,[p.video&&m.isEmbed?(i(),o("div",it,[k(w,{ref:"videoPlayer",video:p.video,sponsors:p.sponsors,"selected-auto-play":!1,"selected-auto-loop":p.selectedAutoLoop,"is-embed":m.isEmbed},null,8,["video","sponsors","selected-auto-loop","is-embed"])])):l("",!0),k(V,{"show-content":p.video&&!m.isEmbed,class:"w-full"},{default:u((()=>[p.video&&p.video.error?(i(),h(C,{key:0,message:p.video.message,error:p.video.error},null,8,["message","error"])):l("",!0),k(S,null,{default:u((()=>[p.shouldShowToast?(i(),h(_,{key:0,onDismissed:m.dismiss},{default:u((()=>[k(T,{keypath:"info.next_video_countdown"},{default:u((()=>[v(r(p.counter),1)])),_:1})])),_:1},8,["onDismissed"])):l("",!0)])),_:1}),d(n("div",null,[n("div",{class:c(p.isMobile?"flex-col":"flex")},[(i(),h($,null,[k(w,{ref:"videoPlayer",video:p.video,sponsors:p.sponsors,"selected-auto-play":p.selectedAutoPlay,"selected-auto-loop":p.selectedAutoLoop,onTimeupdate:m.onTimeUpdate,onEnded:m.onVideoEnded,onNavigateNext:m.navigateNext},null,8,["video","sponsors","selected-auto-play","selected-auto-loop","onTimeupdate","onEnded","onNavigateNext"])],1024)),p.video?.chapters?.length>0&&p.showChapters?(i(),h(I,{key:0,"mobile-layout":p.isMobile,chapters:p.video.chapters,"player-position":p.currentTime,onSeek:m.navigate},null,8,["mobile-layout","chapters","player-position","onSeek"])):l("",!0)],2),n("div",{class:"mt-2 break-words text-2xl font-bold",textContent:r(p.video.title)},null,8,ot),n("div",nt,[n("div",rt,[d(n("span",null,null,512),[[U,{path:"video.views",args:{views:e.addCommas(p.video.views)}}]]),lt,n("span",{textContent:r(m.uploadDate)},null,8,dt)]),n("div",ct,[p.video.likes>=0?(i(),o(f,{key:0},[n("div",ht,[ut,n("strong",{class:"ml-1",textContent:r(e.addCommas(p.video.likes))},null,8,pt)]),n("div",mt,[ft,n("strong",{class:"ml-1",textContent:r(p.video.dislikes>=0?e.addCommas(p.video.dislikes):"?")},null,8,gt)])],64)):l("",!0),p.video.likes<0?(i(),o("div",bt,[d(n("strong",null,null,512),[[U,"video.ratings_disabled"]])])):l("",!0)])]),n("div",kt,[n("div",vt,[n("img",{loading:"lazy",height:"48",width:"48",src:p.video.uploaderAvatar,alt:"",class:"rounded-full"},null,8,yt),p.video.uploaderUrl?(i(),h(L,{key:0,class:"link ml-1.5",to:p.video.uploaderUrl},{default:u((()=>[v(r(p.video.uploader),1)])),_:1},8,["to"])):l("",!0),p.video.uploaderVerified?(i(),o("i",xt)):l("",!0)]),p.showModal?(i(),h(E,{key:0,"video-id":m.getVideoId(),"video-info":p.video,onClose:t[0]||(t[0]=e=>p.showModal=!p.showModal)},null,8,["video-id","video-info"])):l("",!0),p.showShareModal?(i(),h(M,{key:1,"video-id":m.getVideoId(),"current-time":p.currentTime,"playlist-id":p.playlistId,"playlist-index":p.index,onClose:t[1]||(t[1]=e=>p.showShareModal=!p.showShareModal)},null,8,["video-id","current-time","playlist-id","playlist-index"])):l("",!0),n("div",wt,[n("button",{class:"btn flex items-center gap-1 <md:hidden",onClick:t[2]||(t[2]=(...e)=>m.downloadCurrentFrame&&m.downloadCurrentFrame(...e))},[v(r(e.$t("actions.download_frame")),1),Ct]),n("button",{class:"btn flex items-center",onClick:t[3]||(t[3]=e=>p.showModal=!p.showModal)},[v(r(e.$t("actions.add_to_playlist")),1),St]),n("button",{class:"btn",onClick:t[4]||(t[4]=(...e)=>m.subscribeHandler&&m.subscribeHandler(...e)),textContent:r(e.$t("actions."+(p.subscribed?"unsubscribe":"subscribe"))+" - "+e.numberFormat(p.video.uploaderSubscriberCount))},null,8,$t),n("div",Pt,[p.video.uploaderUrl?(i(),o("a",{key:0,"aria-label":"RSS feed",title:"RSS feed",role:"button",href:`${e.apiUrl()}/feed/unauthenticated/rss?channels=${p.video.uploaderUrl.split("/")[2]}`,target:"_blank",class:"btn flex items-center"},_t,8,Tt)):l("",!0),n("button",{class:"btn flex items-center",onClick:t[5]||(t[5]=e=>p.showShareModal=!p.showShareModal)},[k(T,{class:"lt-lg:hidden",keypath:"actions.share",tag:"strong"}),It]),k(D,{link:m.youtubeVideoHref},null,8,["link"]),p.video.lbryId?(i(),h(D,{key:1,link:`https://odysee.com/${p.video.lbryId}`,platform:"Odysee"},null,8,["link"])):l("",!0),k(L,{to:m.toggleListenUrl,"aria-label":(m.isListening?"Watch ":"Listen to ")+p.video.title,title:(m.isListening?"Watch ":"Listen to ")+p.video.title,class:"btn flex items-center"},{default:u((()=>[n("i",{class:c([m.isListening?"i-fa6-solid:tv":"i-fa6-solid:headphones","mx-1.5"])},null,2)])),_:1},8,["to","aria-label","title"])])])]),Lt,(i(!0),o(f,null,x(p.video?.metaInfo??[],(e=>(i(),o("div",{key:e.title,class:"btn my-3 flex flex-wrap cursor-default gap-2 px-4 py-2"},[n("span",null,r(e.description??e.title),1),(i(!0),o(f,null,x(e.urls,((t,a)=>(i(),o("a",{key:a,href:t,class:"underline"},r(e.urlTexts[a]),9,Et)))),128)),Mt])))),128)),d(n("button",{class:"btn mb-2",onClick:t[6]||(t[6]=e=>p.showDesc=!p.showDesc)},null,512),[[U,"actions."+(p.showDesc?"minimize_description":"show_description")]]),d(n("span",Dt,[d(n("input",{id:"showChapters","onUpdate:modelValue":t[7]||(t[7]=e=>p.showChapters=e),type:"checkbox"},null,512),[[P,p.showChapters]]),d(n("label",zt,null,512),[[U,"actions.show_chapters"]])],512),[[y,p.video?.chapters?.length>0]]),p.showDesc?(i(),o(f,{key:0},[n("div",{class:"description break-words",innerHTML:m.purifiedDescription},null,8,At),Rt,p.sponsors&&p.sponsors.segments?(i(),o("div",{key:0,textContent:r(`${e.$t("video.sponsor_segments")}: ${p.sponsors.segments.length}`)},null,8,Vt)):l("",!0),p.video.category?(i(),o("div",{key:1,textContent:r(`${e.$t("video.category")}: ${p.video.category}`)},null,8,Ut)):l("",!0),n("div",{textContent:r(`${e.$t("video.license")}: ${p.video.license}`)},null,8,Bt),n("div",{class:"capitalize",textContent:r(`${e.$t("video.visibility")}: ${p.video.visibility}`)},null,8,jt),p.video.tags?(i(),o("div",Ft,[(i(!0),o(f,null,x(p.video.tags,(e=>(i(),h(L,{key:e,class:"btn line-clamp-1 rounded-s px-2 py-1",to:`/results?search_query=${encodeURIComponent(e)}`},{default:u((()=>[v(r(e),1)])),_:2},1032,["to"])))),128))])):l("",!0)],64)):l("",!0)],512),[[y,!p.video.error]]),Nt,n("label",qt,[n("strong",{textContent:r(`${e.$t("actions.loop_this_video")}:`)},null,8,Ht)]),d(n("input",{id:"chkAutoLoop","onUpdate:modelValue":t[8]||(t[8]=e=>p.selectedAutoLoop=e),class:"ml-1.5",type:"checkbox",onChange:t[9]||(t[9]=e=>m.onChange(e))},null,544),[[P,p.selectedAutoLoop]]),Wt,n("label",Ot,[n("strong",{textContent:r(`${e.$t("actions.auto_play_next_video")}:`)},null,8,Jt)]),d(n("input",{id:"chkAutoPlay","onUpdate:modelValue":t[10]||(t[10]=e=>p.selectedAutoPlay=e),class:"ml-1.5",type:"checkbox",onChange:t[11]||(t[11]=e=>m.onChange(e))},null,544),[[P,p.selectedAutoPlay]]),Yt,n("div",Kt,[n("div",Xt,[p.comments?.disabled?l("",!0):(i(),o("button",{key:0,class:"btn mb-2",onClick:t[12]||(t[12]=(...e)=>m.toggleComments&&m.toggleComments(...e)),textContent:r(`${e.$t(p.showComments?"actions.minimize_comments":"actions.show_comments")} (${e.numberFormat(p.comments?.commentCount)})`)},null,8,Gt))]),p.showComments?p.comments?p.comments.disabled?(i(),o("div",ta,[d(n("p",aa,null,512),[[U,"comment.disabled"]])])):(i(),o("div",sa,[(i(!0),o(f,null,x(p.comments.comments,(e=>(i(),h(z,{key:e.commentId,comment:e,uploader:p.video.uploader,"uploader-avatar-url":p.video.uploaderAvatar,"video-id":m.getVideoId()},null,8,["comment","uploader","uploader-avatar-url","video-id"])))),128))],512)):(i(),o("div",Zt,[d(n("p",ea,null,512),[[U,"comment.loading"]])])):(i(),o("div",Qt)),p.video?(i(),o("div",ia,[p.playlist?(i(),h(A,{key:0,"playlist-id":p.playlistId,playlist:p.playlist,"selected-index":p.index,"prefer-listen":m.isListening},null,8,["playlist-id","playlist","selected-index","prefer-listen"])):l("",!0),d(n("a",{class:"btn mb-2",onClick:t[13]||(t[13]=e=>p.showRecs=!p.showRecs)},null,512),[[U,"actions."+(p.showRecs?"minimize_recommendations":"show_recommendations")]]),d(n("hr",null,null,512),[[y,p.showRecs]]),d(n("div",null,[(i(!0),o(f,null,x(p.video.relatedStreams,(e=>(i(),h(R,{key:e.url,item:e,"prefer-listen":m.isListening,class:"mb-4",height:"94",width:"168"},null,8,["item","prefer-listen"])))),128))],512),[[y,p.showRecs]]),oa])):l("",!0)])])),_:1},8,["show-content"])],64)}]]))}}}));
//# sourceMappingURL=WatchVideo-legacy-CCEQpmBu.js.map
