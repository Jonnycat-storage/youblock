{"version":3,"file":"RegisterPage-legacy-bRTKQiCx.js","sources":["../../src/components/RegisterPage.vue"],"sourcesContent":["<template>\n    <div class=\"flex justify-center\">\n        <h1 v-t=\"'titles.register'\" class=\"my-4 text-center font-bold\" />\n        <i class=\"i-fa6-solid:circle-info ml-2 mt-6 cursor-pointer\" :title=\"$t('info.register_note')\" />\n    </div>\n    <hr />\n    <div class=\"flex flex-col items-center justify-center text-center\">\n        <form class=\"w-max items-center px-3 children:pb-3\">\n            <div>\n                <input\n                    v-model=\"username\"\n                    class=\"input w-full\"\n                    type=\"text\"\n                    autocomplete=\"username\"\n                    :placeholder=\"$t('login.username')\"\n                    :aria-label=\"$t('login.username')\"\n                    @keyup.enter=\"register\"\n                />\n            </div>\n            <div class=\"flex justify-center\">\n                <input\n                    v-model=\"password\"\n                    class=\"input h-auto w-full\"\n                    :type=\"showPassword ? 'text' : 'password'\"\n                    autocomplete=\"password\"\n                    :placeholder=\"$t('login.password')\"\n                    :aria-label=\"$t('login.password')\"\n                    @keyup.enter=\"register\"\n                />\n                <button type=\"button\" class=\"btn ml-2\" @click=\"showPassword = !showPassword\">\n                    <div class=\"i-fa6-solid:eye\" />\n                </button>\n            </div>\n            <div class=\"flex justify-center\">\n                <input\n                    v-model=\"passwordConfirm\"\n                    class=\"input h-auto w-full\"\n                    :type=\"showConfirmPassword ? 'text' : 'password'\"\n                    autocomplete=\"password\"\n                    :placeholder=\"$t('login.password_confirm')\"\n                    :aria-label=\"$t('login.password_confirm')\"\n                    @keyup.enter=\"register\"\n                />\n                <button type=\"button\" class=\"btn ml-2\" @click=\"showConfirmPassword = !showConfirmPassword\">\n                    <div class=\"i-fa6-solid:eye\" />\n                </button>\n            </div>\n            <div>\n                <a v-t=\"'titles.register'\" class=\"btn w-auto\" @click=\"register\" />\n            </div>\n        </form>\n    </div>\n    <ConfirmModal\n        v-if=\"showUnsecureRegisterDialog\"\n        :message=\"$t('info.register_no_email_note')\"\n        @close=\"showUnsecureRegisterDialog = false\"\n        @confirm=\"\n            forceUnsecureRegister = true;\n            showUnsecureRegisterDialog = false;\n            register();\n        \"\n    />\n</template>\n\n<script>\nimport { isEmail } from \"../utils/Misc.js\";\nimport ConfirmModal from \"./ConfirmModal.vue\";\n\nexport default {\n    components: { ConfirmModal },\n    data() {\n        return {\n            username: null,\n            password: null,\n            passwordConfirm: null,\n            showPassword: false,\n            showConfirmPassword: false,\n            showUnsecureRegisterDialog: false,\n            forceUnsecureRegister: false,\n        };\n    },\n    mounted() {\n        //TODO: Add Server Side check\n        if (this.getAuthToken()) {\n            this.$router.push(import.meta.env.BASE_URL);\n        }\n    },\n    activated() {\n        document.title = \"Register - Piped\";\n    },\n    methods: {\n        register() {\n            if (!this.username || !this.password) return;\n            if (this.password != this.passwordConfirm) {\n                alert(this.$t(\"login.passwords_incorrect\"));\n                return;\n            }\n            if (isEmail(this.username) && !this.forceUnsecureRegister) {\n                this.showUnsecureRegisterDialog = true;\n                return;\n            }\n            this.fetchJson(this.authApiUrl() + \"/register\", null, {\n                method: \"POST\",\n                body: JSON.stringify({\n                    username: this.username,\n                    password: this.password,\n                }),\n            }).then(resp => {\n                if (resp.token) {\n                    this.setPreference(\"authToken\" + this.hashCode(this.authApiUrl()), resp.token);\n                    window.location = import.meta.env.BASE_URL; // done to bypass cache\n                } else alert(resp.error);\n            });\n        },\n    },\n};\n</script>\n"],"names":["_sfc_main","components","ConfirmModal","data","username","password","passwordConfirm","showPassword","showConfirmPassword","showUnsecureRegisterDialog","forceUnsecureRegister","mounted","this","getAuthToken","$router","push","activated","document","title","methods","register","isEmail","fetchJson","authApiUrl","method","body","JSON","stringify","then","resp","token","setPreference","hashCode","window","location","alert","error","$t","_hoisted_1","class","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_12","_hoisted_13","_openBlock","_createElementBlock","_Fragment","_withDirectives","_ctx","_hoisted_4","_cache","$event","$data","type","autocomplete","placeholder","onKeyup","_withKeys","$options","args","onClick","_hoisted_11","_hoisted_15","_createBlock","_component_ConfirmModal","key","message","onClose","onConfirm","_createCommentVNode"],"mappings":"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"}