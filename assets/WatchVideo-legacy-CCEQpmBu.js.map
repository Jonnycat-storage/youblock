{"version":3,"file":"WatchVideo-legacy-CCEQpmBu.js","sources":["../../src/components/VideoPlayer.vue","../../src/components/CommentItem.vue","../../src/components/ChaptersBar.vue","../../src/components/PlaylistVideos.vue","../../src/components/ToastComponent.vue","../../src/components/WatchVideo.vue"],"sourcesContent":["<template>\n    <div\n        ref=\"container\"\n        data-shaka-player-container\n        class=\"relative max-h-screen w-full flex justify-center\"\n        :class=\"{ 'player-container': !isEmbed }\"\n    >\n        <video ref=\"videoEl\" class=\"w-full\" data-shaka-player :autoplay=\"shouldAutoPlay\" :loop=\"selectedAutoLoop\" />\n        <span\n            id=\"preview-container\"\n            ref=\"previewContainer\"\n            class=\"absolute bottom-0 z-[2000] mb-[3.5%] hidden flex-col items-center\"\n        >\n            <canvas id=\"preview\" ref=\"preview\" class=\"rounded-sm\" />\n            <span\n                v-if=\"video.chapters.length > 1\"\n                class=\"mt-2 text-sm drop-shadow-[0_0_2px_white] -mb-2 .dark:drop-shadow-[0_0_2px_black]\"\n            >\n                {{ video.chapters.findLast(chapter => chapter.start < currentTime)?.title }}\n            </span>\n            <span\n                class=\"mt-2 w-min rounded-xl bg-white px-2 pb-1 pt-1.5 text-sm .dark:bg-dark-700\"\n                v-text=\"timeFormat(currentTime)\"\n            />\n        </span>\n        <button\n            v-if=\"inSegment\"\n            class=\"skip-segment-button\"\n            type=\"button\"\n            :aria-label=\"$t('actions.skip_segment')\"\n            aria-pressed=\"false\"\n            @click=\"onClickSkipSegment\"\n        >\n            <span v-t=\"'actions.skip_segment'\" />\n            <i class=\"material-icons-round\">skip_next</i>\n        </button>\n        <span\n            v-if=\"error > 0\"\n            v-t=\"{ path: 'player.failed', args: [error] }\"\n            class=\"absolute top-8 rounded bg-black/80 p-2 text-lg backdrop-blur-sm\"\n        />\n        <div\n            v-if=\"showCurrentSpeed\"\n            class=\"text-l absolute left-1/2 top-1/2 flex flex-col transform items-center gap-6 rounded-8 bg-white/80 px-8 py-4 -translate-x-1/2 -translate-y-1/2 .dark:bg-dark-700/80\"\n        >\n            <i class=\"i-fa6-solid:gauge-high h-25 w-25 p-5\" />\n            <span v-text=\"$refs.videoEl.playbackRate\" />\n        </div>\n        <div\n            v-if=\"showCurrentVolume\"\n            class=\"text-l absolute left-1/2 top-1/2 flex flex-col transform items-center gap-6 rounded-8 bg-white/80 px-8 py-4 -translate-x-1/2 -translate-y-1/2 .dark:bg-dark-700/80\"\n        >\n            <i v-if=\"$refs.videoEl.volume > 0\" class=\"i-fa6-solid:volume-high h-25 w-25 p-5\" />\n            <i v-else class=\"i-fa6-solid:volume-xmark h-25 w-25 p-5\" />\n            <span v-text=\"Math.round($refs.videoEl.volume * 100) / 100\" />\n        </div>\n    </div>\n\n    <ModalComponent v-if=\"showSpeedModal\" @close=\"showSpeedModal = false\">\n        <h2 v-t=\"'actions.playback_speed'\" />\n        <div class=\"flex flex-col\">\n            <input\n                v-model=\"playbackSpeedInput\"\n                class=\"input my-3\"\n                type=\"text\"\n                :placeholder=\"$t('actions.playback_speed')\"\n                @keyup.enter=\"setSpeedFromInput()\"\n            />\n            <button v-t=\"'actions.okay'\" class=\"btn ml-auto w-min\" @click=\"setSpeedFromInput()\" />\n        </div>\n    </ModalComponent>\n</template>\n\n<script>\nimport \"shaka-player/dist/controls.css\";\nimport { parseTimeParam } from \"@/utils/Misc\";\nimport ModalComponent from \"./ModalComponent.vue\";\n\nconst shaka = import(\"shaka-player/dist/shaka-player.ui.js\");\nconst hotkeys = import(\"hotkeys-js\");\n\nexport default {\n    components: { ModalComponent },\n    props: {\n        video: {\n            type: Object,\n            default: () => {\n                return {};\n            },\n        },\n        sponsors: {\n            type: Object,\n            default: () => {\n                return {};\n            },\n        },\n        selectedAutoPlay: Boolean,\n        selectedAutoLoop: Boolean,\n        isEmbed: Boolean,\n    },\n    emits: [\"timeupdate\", \"ended\", \"navigateNext\"],\n    data() {\n        return {\n            lastUpdate: new Date().getTime(),\n            initialSeekComplete: false,\n            destroying: false,\n            inSegment: false,\n            isHoveringTimebar: false,\n            showSpeedModal: false,\n            showCurrentSpeed: false,\n            hideCurrentSpeed: null,\n            showCurrentVolume: false,\n            hideCurrentVolume: null,\n            playbackSpeedInput: null,\n            currentTime: 0,\n            seekbarPadding: 2,\n            error: 0,\n        };\n    },\n    computed: {\n        shouldAutoPlay: _this => {\n            return _this.getPreferenceBoolean(\"playerAutoPlay\", true) && !_this.isEmbed;\n        },\n        preferredVideoCodecs: _this => {\n            var preferredVideoCodecs = [];\n            const enabledCodecs = _this.getPreferenceString(\"enabledCodecs\", \"vp9,avc\").split(\",\");\n\n            if (\n                _this.$refs.videoEl.canPlayType('video/mp4; codecs=\"av01.0.08M.08\"') !== \"\" &&\n                enabledCodecs.includes(\"av1\")\n            )\n                preferredVideoCodecs.push(\"av01\");\n            if (_this.$refs.videoEl.canPlayType('video/webm; codecs=\"vp9\"') !== \"\" && enabledCodecs.includes(\"vp9\"))\n                preferredVideoCodecs.push(\"vp9\");\n            if (\n                _this.$refs.videoEl.canPlayType('video/mp4; codecs=\"avc1.4d401f\"') !== \"\" &&\n                enabledCodecs.includes(\"avc\")\n            )\n                preferredVideoCodecs.push(\"avc1\");\n\n            return preferredVideoCodecs;\n        },\n    },\n    mounted() {\n        if (!this.$shaka) this.shakaPromise = shaka.then(shaka => shaka.default).then(shaka => (this.$shaka = shaka));\n        if (!this.$hotkeys)\n            this.hotkeysPromise = hotkeys.then(mod => mod.default).then(hotkeys => (this.$hotkeys = hotkeys));\n    },\n    activated() {\n        this.destroying = false;\n        this.sponsors?.segments?.forEach(segment => (segment.skipped = false));\n        this.hotkeysPromise.then(() => {\n            var self = this;\n            this.$hotkeys(\n                \"f,m,j,k,l,c,space,up,down,left,right,ctrl+left,ctrl+right,home,end,0,1,2,3,4,5,6,7,8,9,shift+n,shift+s,shift+,,shift+.,alt+p,return,.,,\",\n                function (e, handler) {\n                    const videoEl = self.$refs.videoEl;\n                    switch (handler.key) {\n                        case \"f\":\n                            self.$ui.getControls().toggleFullScreen();\n                            e.preventDefault();\n                            break;\n                        case \"m\":\n                            videoEl.muted = !videoEl.muted;\n                            e.preventDefault();\n                            break;\n                        case \"j\":\n                            videoEl.currentTime = Math.max(videoEl.currentTime - 15, 0);\n                            e.preventDefault();\n                            break;\n                        case \"l\":\n                            videoEl.currentTime = videoEl.currentTime + 15;\n                            e.preventDefault();\n                            break;\n                        case \"c\":\n                            self.$player.setTextTrackVisibility(!self.$player.isTextTrackVisible());\n                            e.preventDefault();\n                            break;\n                        case \"k\":\n                        case \"space\":\n                            if (videoEl.paused) videoEl.play();\n                            else videoEl.pause();\n                            e.preventDefault();\n                            break;\n                        case \"up\":\n                            self.adjustPlaybackVolume(videoEl.volume + 0.05);\n                            e.preventDefault();\n                            break;\n                        case \"down\":\n                            self.adjustPlaybackVolume(videoEl.volume - 0.05);\n                            e.preventDefault();\n                            break;\n                        case \"left\":\n                            videoEl.currentTime = Math.max(videoEl.currentTime - 5, 0);\n                            e.preventDefault();\n                            break;\n                        case \"right\":\n                            videoEl.currentTime = videoEl.currentTime + 5;\n                            e.preventDefault();\n                            break;\n                        case \"ctrl+left\": {\n                            videoEl.currentTime = self.video.chapters.findLast(\n                                chapter => chapter.start < videoEl.currentTime,\n                            ).start;\n                            e.preventDefault();\n                            break;\n                        }\n                        case \"ctrl+right\": {\n                            videoEl.currentTime =\n                                self.video.chapters.find(chapter => chapter.start > videoEl.currentTime)?.start ||\n                                videoEl.duration;\n                            e.preventDefault();\n                            break;\n                        }\n                        case \"home\":\n                            videoEl.currentTime = 0;\n                            e.preventDefault();\n                            break;\n                        case \"end\":\n                            videoEl.currentTime = videoEl.duration;\n                            e.preventDefault();\n                            break;\n                        case \"0\":\n                            videoEl.currentTime = 0;\n                            e.preventDefault();\n                            break;\n                        case \"1\":\n                            videoEl.currentTime = videoEl.duration * 0.1;\n                            e.preventDefault();\n                            break;\n                        case \"2\":\n                            videoEl.currentTime = videoEl.duration * 0.2;\n                            e.preventDefault();\n                            break;\n                        case \"3\":\n                            videoEl.currentTime = videoEl.duration * 0.3;\n                            e.preventDefault();\n                            break;\n                        case \"4\":\n                            videoEl.currentTime = videoEl.duration * 0.4;\n                            e.preventDefault();\n                            break;\n                        case \"5\":\n                            videoEl.currentTime = videoEl.duration * 0.5;\n                            e.preventDefault();\n                            break;\n                        case \"6\":\n                            videoEl.currentTime = videoEl.duration * 0.6;\n                            e.preventDefault();\n                            break;\n                        case \"7\":\n                            videoEl.currentTime = videoEl.duration * 0.7;\n                            e.preventDefault();\n                            break;\n                        case \"8\":\n                            videoEl.currentTime = videoEl.duration * 0.8;\n                            e.preventDefault();\n                            break;\n                        case \"9\":\n                            videoEl.currentTime = videoEl.duration * 0.9;\n                            e.preventDefault();\n                            break;\n                        case \"shift+n\":\n                            self.$emit(\"navigateNext\");\n                            e.preventDefault();\n                            break;\n                        case \"shift+s\":\n                            self.showSpeedModal = true;\n                            break;\n                        case \"shift+,\":\n                            self.adjustPlaybackSpeed(videoEl.playbackRate - 0.25);\n                            break;\n                        case \"shift+.\":\n                            self.adjustPlaybackSpeed(videoEl.playbackRate + 0.25);\n                            break;\n                        case \"alt+p\":\n                            document.pictureInPictureElement\n                                ? document.exitPictureInPicture()\n                                : videoEl.requestPictureInPicture();\n                            break;\n                        case \"return\":\n                            self.skipSegment(videoEl);\n                            break;\n                        case \".\":\n                            videoEl.currentTime += 0.04;\n                            e.preventDefault();\n                            break;\n                        case \",\":\n                            videoEl.currentTime -= 0.04;\n                            e.preventDefault();\n                            break;\n                    }\n                },\n            );\n        });\n    },\n    deactivated() {\n        this.destroying = true;\n        this.destroy(true);\n    },\n    unmounted() {\n        this.destroying = true;\n        this.destroy(true);\n    },\n    methods: {\n        async loadVideo() {\n            this.updateSponsors();\n\n            const component = this;\n            const videoEl = this.$refs.videoEl;\n\n            videoEl.setAttribute(\"poster\", this.video.thumbnailUrl);\n\n            const noPrevPlayer = !this.$player;\n\n            var streams = [];\n\n            streams.push(...this.video.audioStreams);\n            streams.push(...this.video.videoStreams);\n\n            const MseSupport = window.MediaSource !== undefined;\n\n            const lbry = null;\n\n            var uri;\n            var mime;\n\n            if (this.video.livestream) {\n                uri = this.video.hls;\n                mime = \"application/x-mpegURL\";\n            } else if (\n                this.video.audioStreams.length > 0 &&\n                !lbry &&\n                MseSupport &&\n                !this.getPreferenceBoolean(\"preferHls\", false)\n            ) {\n                if (!this.video.dash) {\n                    const dash = (await import(\"../utils/DashUtils.js\")).generate_dash_file_from_formats(\n                        streams,\n                        this.video.duration,\n                    );\n\n                    uri = \"data:application/dash+xml;charset=utf-8;base64,\" + btoa(dash);\n                } else {\n                    const url = new URL(this.video.dash);\n                    url.searchParams.set(\"rewrite\", false);\n                    uri = url.toString();\n                }\n                mime = \"application/dash+xml\";\n            } else if (lbry) {\n                uri = lbry.url;\n                if (this.getPreferenceBoolean(\"proxyLBRY\", false)) {\n                    const url = new URL(uri);\n                    const proxyURL = new URL(this.video.proxyUrl);\n                    let proxyPath = proxyURL.pathname;\n                    if (proxyPath.lastIndexOf(\"/\") === proxyPath.length - 1) {\n                        proxyPath = proxyPath.substring(0, proxyPath.length - 1);\n                    }\n\n                    url.searchParams.set(\"host\", url.host);\n                    url.protocol = proxyURL.protocol;\n                    url.host = proxyURL.host;\n                    url.pathname = proxyPath + url.pathname;\n                    uri = url.toString();\n                }\n                const contentType = await fetch(uri, {\n                    method: \"HEAD\",\n                }).then(response => {\n                    uri = response.url;\n                    return response.headers.get(\"Content-Type\");\n                });\n                mime = contentType;\n            } else if (this.video.hls) {\n                uri = this.video.hls;\n                mime = \"application/x-mpegURL\";\n            } else {\n                uri = this.video.videoStreams.findLast(stream => stream.codec == null).url;\n                mime = \"video/mp4\";\n            }\n\n            if (noPrevPlayer)\n                this.shakaPromise.then(async () => {\n                    if (this.destroying) return;\n                    this.$shaka.polyfill.installAll();\n\n                    const localPlayer = new this.$shaka.Player();\n                    await localPlayer.attach(videoEl);\n                    const proxyURL = new URL(component.video.proxyUrl);\n                    let proxyPath = proxyURL.pathname;\n                    if (proxyPath.lastIndexOf(\"/\") === proxyPath.length - 1) {\n                        proxyPath = proxyPath.substring(0, proxyPath.length - 1);\n                    }\n\n                    localPlayer.getNetworkingEngine().registerRequestFilter((_type, request) => {\n                        const uri = request.uris[0];\n                        var url = new URL(uri);\n                        const headers = request.headers;\n                        if (\n                            url.host.endsWith(\".googlevideo.com\") ||\n                            (url.host.endsWith(\".lbryplayer.xyz\") &&\n                                (component.getPreferenceBoolean(\"proxyLBRY\", false) || headers.Range))\n                        ) {\n                            url.searchParams.set(\"host\", url.host);\n                            url.protocol = proxyURL.protocol;\n                            url.host = proxyURL.host;\n                            url.pathname = proxyPath + url.pathname;\n                            request.uris[0] = url.toString();\n                        }\n                        if (url.pathname === proxyPath + \"/videoplayback\") {\n                            if (headers.Range) {\n                                url.searchParams.set(\"range\", headers.Range.split(\"=\")[1]);\n                                request.headers = {};\n                                request.uris[0] = url.toString();\n                            }\n                        }\n                    });\n\n                    localPlayer.configure(\n                        \"streaming.bufferingGoal\",\n                        Math.max(this.getPreferenceNumber(\"bufferGoal\", 10), 10),\n                    );\n                    localPlayer.configure(\"streaming.bufferBehind\", 300);\n\n                    this.setPlayerAttrs(localPlayer, videoEl, uri, mime, this.$shaka);\n                });\n            else this.setPlayerAttrs(this.$player, videoEl, uri, mime, this.$shaka);\n\n            if (noPrevPlayer) {\n                videoEl.addEventListener(\"loadeddata\", () => {\n                    if (document.pictureInPictureElement) videoEl.requestPictureInPicture();\n                });\n                videoEl.addEventListener(\"timeupdate\", () => {\n                    const time = videoEl.currentTime;\n                    this.$emit(\"timeupdate\", time);\n                    this.updateProgressDatabase(time);\n                    if (this.sponsors && this.sponsors.segments) {\n                        const segment = this.findCurrentSegment(time);\n                        this.inSegment = !!segment;\n                        if (segment?.autoskip && (!segment.skipped || this.selectedAutoLoop)) {\n                            this.skipSegment(videoEl, segment);\n                        }\n                    }\n                });\n\n                videoEl.addEventListener(\"volumechange\", () => {\n                    this.setPreference(\"volume\", videoEl.volume, true);\n                });\n\n                videoEl.addEventListener(\"ratechange\", e => {\n                    const rate = videoEl.playbackRate;\n                    if (rate > 0 && !isNaN(videoEl.duration) && !isNaN(videoEl.duration - e.timeStamp / 1000))\n                        this.setPreference(\"rate\", rate, true);\n                });\n\n                videoEl.addEventListener(\"ended\", () => {\n                    this.$emit(\"ended\");\n                });\n            }\n            //TODO: Add sponsors on seekbar: https://github.com/ajayyy/SponsorBlock/blob/e39de9fd852adb9196e0358ed827ad38d9933e29/src/js-components/previewBar.ts#L12\n        },\n        findCurrentSegment(time) {\n            return this.sponsors?.segments?.find(s => time >= s.segment[0] && time < s.segment[1]);\n        },\n        onClickSkipSegment() {\n            const videoEl = this.$refs.videoEl;\n            this.skipSegment(videoEl);\n        },\n        skipSegment(videoEl, segment) {\n            const time = videoEl.currentTime;\n            if (!segment) segment = this.findCurrentSegment(time);\n            if (!segment) return;\n            console.log(\"Skipped segment at \" + time);\n            videoEl.currentTime = segment.segment[1];\n            segment.skipped = true;\n        },\n        async setPlayerAttrs(localPlayer, videoEl, uri, mime, shaka) {\n            const url = \"/watch?v=\" + this.video.id;\n\n            if (!this.$ui) {\n                this.destroy();\n                const OpenButton = class extends shaka.ui.Element {\n                    constructor(parent, controls) {\n                        super(parent, controls);\n\n                        this.newTabButton_ = document.createElement(\"button\");\n                        this.newTabButton_.classList.add(\"shaka-cast-button\");\n                        this.newTabButton_.classList.add(\"shaka-tooltip\");\n                        this.newTabButton_.ariaPressed = \"false\";\n\n                        this.newTabIcon_ = document.createElement(\"i\");\n                        this.newTabIcon_.classList.add(\"material-icons-round\");\n                        this.newTabIcon_.textContent = \"launch\";\n                        this.newTabButton_.appendChild(this.newTabIcon_);\n\n                        const label = document.createElement(\"label\");\n                        label.classList.add(\"shaka-overflow-button-label\");\n                        label.classList.add(\"shaka-overflow-menu-only\");\n                        this.newTabNameSpan_ = document.createElement(\"span\");\n                        this.newTabNameSpan_.innerText = \"Open in new tab\";\n                        label.appendChild(this.newTabNameSpan_);\n\n                        this.newTabButton_.appendChild(label);\n                        this.parent.appendChild(this.newTabButton_);\n\n                        this.eventManager.listen(this.newTabButton_, \"click\", () => {\n                            this.video.pause();\n                            window.open(url);\n                        });\n                    }\n                };\n\n                OpenButton.Factory = class {\n                    create(rootElement, controls) {\n                        return new OpenButton(rootElement, controls);\n                    }\n                };\n\n                shaka.ui.OverflowMenu.registerElement(\"open_new_tab\", new OpenButton.Factory());\n\n                this.$ui = new shaka.ui.Overlay(localPlayer, this.$refs.container, videoEl);\n\n                const overflowMenuButtons = [\"quality\", \"captions\", \"picture_in_picture\", \"playback_rate\", \"airplay\"];\n\n                if (this.isEmbed) {\n                    overflowMenuButtons.push(\"open_new_tab\");\n                }\n\n                const config = {\n                    overflowMenuButtons: overflowMenuButtons,\n                    seekBarColors: {\n                        base: \"var(--player-base)\",\n                        buffered: \"var(--player-buffered)\",\n                        played: \"var(--player-played)\",\n                    },\n                };\n\n                this.$ui.configure(config);\n            }\n\n            this.updateMarkers();\n\n            const event = new Event(\"playerInit\");\n            window.dispatchEvent(event);\n\n            const player = this.$ui.getControls().getPlayer();\n\n            this.setupSeekbarPreview();\n\n            this.$player = player;\n\n            const disableVideo = this.getPreferenceBoolean(\"listen\", false) && !this.video.livestream;\n\n            const prefetchLimit = Math.min(Math.max(this.getPreferenceNumber(\"prefetchLimit\", 2), 0), 10);\n\n            this.$player.configure({\n                preferredVideoCodecs: this.preferredVideoCodecs,\n                preferredAudioCodecs: [\"opus\", \"mp4a\"],\n                manifest: {\n                    disableVideo: disableVideo,\n                },\n                streaming: {\n                    segmentPrefetchLimit: prefetchLimit,\n                    retryParameters: {\n                        maxAttempts: Infinity,\n                        baseDelay: 250,\n                        backoffFactor: 1.5,\n                    },\n                },\n            });\n\n            const quality = this.getPreferenceNumber(\"quality\", 0);\n            const qualityConds =\n                quality > 0 && (this.video.audioStreams.length > 0 || this.video.livestream) && !disableVideo;\n            if (qualityConds) this.$player.configure(\"abr.enabled\", false);\n\n            const time = this.$route.query.t ?? this.$route.query.start;\n\n            var startTime = 0;\n\n            if (time) {\n                startTime = parseTimeParam(time);\n                this.initialSeekComplete = true;\n            } else if (window.db && this.getPreferenceBoolean(\"watchHistory\", false)) {\n                await new Promise(resolve => {\n                    var tx = window.db.transaction(\"watch_history\", \"readonly\");\n                    var store = tx.objectStore(\"watch_history\");\n                    var request = store.get(this.video.id);\n                    request.onsuccess = function (event) {\n                        var video = event.target.result;\n                        const currentTime = video?.currentTime;\n                        if (currentTime) {\n                            if (currentTime < video.duration * 0.9) {\n                                startTime = currentTime;\n                            }\n                        }\n                        resolve();\n                    };\n\n                    tx.oncomplete = () => {\n                        this.initialSeekComplete = true;\n                    };\n                });\n            } else {\n                this.initialSeekComplete = true;\n            }\n\n            player\n                .load(uri, startTime, mime)\n                .then(() => {\n                    const isSafari = window.navigator?.vendor?.includes(\"Apple\");\n\n                    if (!isSafari) {\n                        // Set the audio language\n                        const prefLang = this.getPreferenceString(\"hl\", \"en\").substr(0, 2);\n                        var lang = \"en\";\n                        for (var l in player.getAudioLanguages()) {\n                            if (l == prefLang) {\n                                lang = l;\n                                return;\n                            }\n                        }\n                        player.selectAudioLanguage(lang);\n                    }\n\n                    const audioLanguages = player.getAudioLanguages();\n                    if (audioLanguages.length > 1) {\n                        const overflowMenuButtons = this.$ui.getConfiguration().overflowMenuButtons;\n                        // append language menu on index 1\n                        const newOverflowMenuButtons = [\n                            ...overflowMenuButtons.slice(0, 1),\n                            \"language\",\n                            ...overflowMenuButtons.slice(1),\n                        ];\n                        this.$ui.configure(\"overflowMenuButtons\", newOverflowMenuButtons);\n                    }\n\n                    if (qualityConds) {\n                        var leastDiff = Number.MAX_VALUE;\n                        var bestStream = null;\n\n                        var bestAudio = 0;\n\n                        const tracks = player\n                            .getVariantTracks()\n                            .filter(track => track.language == lang || track.language == \"und\");\n\n                        // Choose the best audio stream\n                        if (quality >= 480)\n                            tracks.forEach(track => {\n                                const audioBandwidth = track.audioBandwidth;\n                                if (audioBandwidth > bestAudio) bestAudio = audioBandwidth;\n                            });\n\n                        // Find best matching stream based on resolution and bitrate\n                        tracks\n                            .sort((a, b) => a.bandwidth - b.bandwidth)\n                            .forEach(stream => {\n                                if (stream.audioBandwidth < bestAudio) return;\n\n                                const diff = Math.abs(quality - stream.height);\n                                if (diff < leastDiff) {\n                                    leastDiff = diff;\n                                    bestStream = stream;\n                                }\n                            });\n\n                        player.selectVariantTrack(bestStream, true);\n                    }\n\n                    this.video.subtitles.map(subtitle => {\n                        player.addTextTrackAsync(\n                            subtitle.url,\n                            subtitle.code,\n                            \"subtitles\",\n                            subtitle.mimeType,\n                            null,\n                            subtitle.name,\n                        );\n                    });\n                    videoEl.volume = this.getPreferenceNumber(\"volume\", 1);\n                    const rate = this.getPreferenceNumber(\"rate\", 1);\n                    videoEl.playbackRate = rate;\n                    videoEl.defaultPlaybackRate = rate;\n\n                    const autoDisplayCaptions = this.getPreferenceBoolean(\"autoDisplayCaptions\", false);\n                    this.$player.setTextTrackVisibility(autoDisplayCaptions);\n\n                    const prefSubtitles = this.getPreferenceString(\"subtitles\", \"\");\n                    if (prefSubtitles !== \"\") {\n                        const textTracks = this.$player.getTextTracks();\n                        const subtitleIdx = textTracks.findIndex(textTrack => textTrack.language == prefSubtitles);\n                        if (subtitleIdx != -1) {\n                            this.$player.setTextTrackVisibility(true);\n                            this.$player.selectTextTrack(textTracks[subtitleIdx]);\n                        }\n                    }\n                })\n                .catch(e => {\n                    console.error(e);\n                    this.error = e.code;\n                });\n\n            // expand the player to fullscreen when the fullscreen query equals true\n            if (this.$route.query.fullscreen === \"true\" && !this.$ui.getControls().isFullScreenEnabled())\n                this.$ui.getControls().toggleFullScreen();\n\n            const seekbar = this.$refs.container.querySelector(\".shaka-seek-bar\");\n            const array = [\"to right\"];\n            for (const chapter of this.video.chapters) {\n                const start = (chapter.start / this.video.duration) * 100;\n                if (start === 0) {\n                    continue;\n                }\n                array.push(`transparent ${start}%`);\n                array.push(`black ${start}%`);\n                array.push(`black calc(${start}% + 1px)`);\n                array.push(`transparent calc(${start}% + 1px)`);\n            }\n            seekbar.style.background = `linear-gradient(${array.join(\",\")})`;\n\n            seekbar.addEventListener(\"mouseup\", () => {\n                this.$refs.videoEl.focus();\n            });\n        },\n        async updateProgressDatabase(time) {\n            // debounce\n            if (new Date().getTime() - this.lastUpdate < 500) return;\n            this.lastUpdate = new Date().getTime();\n\n            if (!this.initialSeekComplete || !this.video.id || !window.db) return;\n\n            var tx = window.db.transaction(\"watch_history\", \"readwrite\");\n            var store = tx.objectStore(\"watch_history\");\n            var request = store.get(this.video.id);\n            request.onsuccess = function (event) {\n                var video = event.target.result;\n                if (video) {\n                    video.currentTime = time;\n                    store.put(video);\n                }\n            };\n        },\n        seek(time) {\n            if (this.$refs.videoEl) {\n                this.$refs.videoEl.currentTime = time;\n            }\n        },\n        adjustPlaybackSpeed(newSpeed) {\n            const normalizedSpeed = Math.min(4, Math.max(0.25, newSpeed));\n            this.$player.trickPlay(normalizedSpeed);\n            if (this.hideCurrentSpeed) window.clearTimeout(this.hideCurrentSpeed);\n            this.showCurrentSpeed = false;\n            this.showCurrentSpeed = true;\n            this.hideCurrentSpeed = window.setTimeout(() => (this.showCurrentSpeed = false), 1500);\n        },\n        adjustPlaybackVolume(newVolume) {\n            const normalizedVolume = Math.min(1, Math.max(0, newVolume));\n            this.$refs.videoEl.volume = normalizedVolume;\n            if (this.hideCurrentVolume) window.clearTimeout(this.hideCurrentVolume);\n            this.showCurrentVolume = false;\n            this.showCurrentVolume = true;\n            this.hideCurrentVolume = window.setTimeout(() => (this.showCurrentVolume = false), 1500);\n        },\n        setSpeedFromInput() {\n            try {\n                const newSpeed = Number(this.playbackSpeedInput);\n                this.adjustPlaybackSpeed(newSpeed);\n            } catch (err) {\n                alert(this.$t(\"actions.invalid_input\"));\n            }\n            this.showSpeedModal = false;\n        },\n        updateMarkers() {\n            const markers = this.$refs.container.querySelector(\".shaka-ad-markers\");\n            const array = [\"to right\"];\n            this.sponsors?.segments?.forEach(segment => {\n                const start = (segment.segment[0] / this.video.duration) * 100;\n                const end = (segment.segment[1] / this.video.duration) * 100;\n\n                var color = [\n                    \"sponsor\",\n                    \"selfpromo\",\n                    \"interaction\",\n                    \"poi_highlight\",\n                    \"intro\",\n                    \"outro\",\n                    \"preview\",\n                    \"filler\",\n                    \"music_offtopic\",\n                ].includes(segment.category)\n                    ? `var(--spon-seg-${segment.category})`\n                    : \"var(--spon-seg-default)\";\n\n                array.push(`transparent ${start}%`);\n                array.push(`${color} ${start}%`);\n                array.push(`${color} ${end}%`);\n                array.push(`transparent ${end}%`);\n            });\n\n            if (array.length <= 1) {\n                return;\n            }\n\n            if (markers) markers.style.background = `linear-gradient(${array.join(\",\")})`;\n        },\n        updateSponsors() {\n            if (this.getPreferenceBoolean(\"showMarkers\", true)) {\n                this.shakaPromise.then(() => {\n                    this.updateMarkers();\n                });\n            }\n        },\n        setupSeekbarPreview() {\n            if (!this.video.previewFrames) return;\n            let seekBar = document.querySelector(\".shaka-seek-bar\");\n            // load the thumbnail preview when the user moves over the seekbar\n            seekBar.addEventListener(\"mousemove\", e => {\n                this.isHoveringTimebar = true;\n                const position = (e.offsetX / e.target.offsetWidth) * this.video.duration;\n                this.showSeekbarPreview(position * 1000);\n            });\n            // hide the preview when the user stops hovering the seekbar\n            seekBar.addEventListener(\"mouseout\", () => {\n                this.isHoveringTimebar = false;\n                this.$refs.previewContainer.style.display = \"none\";\n            });\n        },\n        async showSeekbarPreview(position) {\n            const frame = this.getFrame(position);\n            const originalImage = await this.loadImage(frame.url);\n            if (!this.isHoveringTimebar) return;\n\n            const seekBar = document.querySelector(\".shaka-seek-bar\");\n            const container = this.$refs.previewContainer;\n            const canvas = this.$refs.preview;\n            const ctx = canvas.getContext(\"2d\");\n\n            const offsetX = frame.positionX * frame.frameWidth;\n            const offsetY = frame.positionY * frame.frameHeight;\n\n            canvas.width = frame.frameWidth > 100 ? frame.frameWidth : frame.frameWidth * 2;\n            canvas.height = frame.frameWidth > 100 ? frame.frameHeight : frame.frameHeight * 2;\n            // draw the thumbnail preview into the canvas by cropping only the relevant part\n            ctx.drawImage(\n                originalImage,\n                offsetX,\n                offsetY,\n                frame.frameWidth,\n                frame.frameHeight,\n                0,\n                0,\n                canvas.width,\n                canvas.height,\n            );\n\n            // calculate the thumbnail preview offset and display it\n            const centerOffset = position / this.video.duration / 10;\n            const left = centerOffset - ((0.5 * canvas.width) / seekBar.clientWidth) * 100;\n            const maxLeft =\n                ((seekBar.clientWidth - canvas.clientWidth) / seekBar.clientWidth) * 100 - this.seekbarPadding;\n\n            this.currentTime = position / 1000;\n\n            container.style.left = `max(${this.seekbarPadding}%, min(${left}%, ${maxLeft}%))`;\n            container.style.display = \"flex\";\n        },\n        // ineffective algorithm to find the thumbnail corresponding to the currently hovered position in the video\n        getFrame(position) {\n            let startPosition = 0;\n            const framePage = this.video.previewFrames.at(-1);\n            for (let i = 0; i < framePage.urls.length; i++) {\n                for (let positionY = 0; positionY < framePage.framesPerPageY; positionY++) {\n                    for (let positionX = 0; positionX < framePage.framesPerPageX; positionX++) {\n                        const endPosition = startPosition + framePage.durationPerFrame;\n                        if (position >= startPosition && position <= endPosition) {\n                            return {\n                                url: framePage.urls[i],\n                                positionX: positionX,\n                                positionY: positionY,\n                                frameWidth: framePage.frameWidth,\n                                frameHeight: framePage.frameHeight,\n                            };\n                        }\n                        startPosition = endPosition;\n                    }\n                }\n            }\n            return null;\n        },\n        // creates a new image from an URL\n        loadImage(url) {\n            return new Promise(r => {\n                const i = new Image();\n                i.onload = () => r(i);\n                i.src = url;\n            });\n        },\n        destroy(hotkeys) {\n            if (this.$ui && !document.pictureInPictureElement) {\n                this.$ui.destroy();\n                this.$ui = undefined;\n                this.$player = undefined;\n            }\n            if (this.$player) {\n                this.$player.destroy();\n                if (!document.pictureInPictureElement) this.$player = undefined;\n            }\n            if (hotkeys) this.$hotkeys?.unbind();\n            this.$refs.container?.querySelectorAll(\"div\").forEach(node => node.remove());\n        },\n    },\n};\n</script>\n\n<style>\n:root {\n    --player-base: rgba(255, 255, 255, 0.3);\n    --player-buffered: rgba(255, 255, 255, 0.54);\n    --player-played: rgba(255, 0, 0);\n\n    --spon-seg-sponsor: #00d400;\n    --spon-seg-selfpromo: #ffff00;\n    --spon-seg-interaction: #cc00ff;\n    --spon-seg-poi_highlight: #ff1684;\n    --spon-seg-intro: #00ffff;\n    --spon-seg-outro: #0202ed;\n    --spon-seg-preview: #008fd6;\n    --spon-seg-filler: #7300ff;\n    --spon-seg-music_offtopic: #ff9900;\n    --spon-seg-default: white;\n}\n\n.player-container {\n    @apply max-h-75vh min-h-64 bg-black;\n}\n\n.shaka-video-container .material-icons-round {\n    @apply !text-xl;\n}\n\n.shaka-current-time {\n    @apply !text-base;\n}\n\n.shaka-video-container:-webkit-full-screen {\n    max-height: none !important;\n}\n\n/* captions style */\n.shaka-text-wrapper * {\n    text-align: left !important;\n}\n\n.shaka-text-wrapper > span > span {\n    background-color: transparent !important;\n}\n\n/* apply to all spans that don't include multiple other spans to avoid the style being applied to the text container too when the subtitles are two lines */\n.shaka-text-wrapper > span > span *:first-child:last-child {\n    background-color: rgba(0, 0, 0, 0.6) !important;\n    padding: 0.09em 0;\n}\n\n#shaka-player-ui-time-container {\n    display: none !important;\n}\n\n.skip-segment-button {\n    /* position button above player overlay */\n    z-index: 1000;\n\n    position: absolute;\n    transform: translate(0, -50%);\n    top: 50%;\n    right: 0;\n\n    background-color: rgb(0 0 0 / 0.5);\n    border: 2px rgba(255, 255, 255, 0.75) solid;\n    border-right: 0;\n    border-radius: 0.75em;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    padding: 0.5em;\n\n    /* center text vertically */\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    color: #fff;\n    line-height: 1.5em;\n}\n\n.skip-segment-button .material-icons-round {\n    font-size: 1.6em !important;\n    line-height: inherit !important;\n}\n</style>\n","<template>\n    <div class=\"comment mt-1.5 flex\">\n        <img\n            loading=\"lazy\"\n            :src=\"comment.thumbnail\"\n            class=\"comment-avatar h-12 w-12 rounded-full\"\n            height=\"48\"\n            width=\"48\"\n            alt=\"Avatar\"\n        />\n\n        <div class=\"comment-content pl-2\">\n            <div class=\"comment-header\">\n                <div v-if=\"comment.pinned\" class=\"comment-pinned\">\n                    <i class=\"i-fa6-solid:thumbtack\" />\n                    <span\n                        v-t=\"{\n                            path: 'comment.pinned_by',\n                            args: { author: uploader },\n                        }\"\n                        class=\"ml-1.5\"\n                    />\n                </div>\n\n                <div class=\"comment-author\">\n                    <router-link class=\"link font-bold\" :to=\"comment.commentorUrl\">{{ comment.author }}</router-link>\n                    <i v-if=\"comment.verified\" class=\"i-fa6-solid:check ml-1.5\" />\n                </div>\n                <div class=\"comment-meta mb-1.5 text-sm\" v-text=\"comment.commentedTime\" />\n            </div>\n            <!-- eslint-disable-next-line vue/no-v-html -->\n            <CollapsableText :text=\"comment.commentText\" :visible-limit=\"500\" />\n            <div class=\"comment-footer my-1 flex items-center gap-3\">\n                <div class=\"i-fa6-solid:thumbs-up\" />\n                <span v-text=\"numberFormat(comment.likeCount)\" />\n                <i v-if=\"comment.hearted\" class=\"i-fa6-solid:heart\" :title=\"$t('actions.creator_liked')\" />\n                <img\n                    v-if=\"comment.creatorReplied\"\n                    :src=\"uploaderAvatarUrl\"\n                    class=\"h-5 w-5 rounded-full\"\n                    :title=\"$t('actions.creator_replied')\"\n                />\n            </div>\n            <template v-if=\"comment.repliesPage && (!loadingReplies || !showingReplies)\">\n                <div class=\"cursor-pointer\" @click=\"loadReplies\">\n                    <a v-text=\"`${$t('actions.reply_count', comment.replyCount)}`\" />\n                    <i class=\"i-fa6-solid:level-down-alt ml-1.5\" />\n                </div>\n            </template>\n            <template v-if=\"showingReplies\">\n                <div class=\"cursor-pointer\" @click=\"hideReplies\">\n                    <a v-t=\"'actions.hide_replies'\" />\n                    <i class=\"i-fa6-solid:level-up-alt ml-1.5\" />\n                </div>\n            </template>\n            <div v-show=\"showingReplies\" v-if=\"replies\" class=\"replies\">\n                <div v-for=\"reply in replies\" :key=\"reply.commentId\" class=\"w-full\">\n                    <!-- eslint-disable-next-line vue/no-undef-components -->\n                    <CommentItem :comment=\"reply\" :uploader=\"uploader\" :video-id=\"videoId\" />\n                </div>\n                <div v-if=\"nextpage\" class=\"cursor-pointer\" @click=\"loadReplies\">\n                    <a v-t=\"'actions.load_more_replies'\" />\n                    <i class=\"i-fa6-solid:level-down-alt ml-1.5\" />\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport CollapsableText from \"./CollapsableText.vue\";\n\nexport default {\n    components: { CollapsableText },\n    props: {\n        comment: {\n            type: Object,\n            default: () => {\n                return {};\n            },\n        },\n        uploader: { type: String, default: null },\n        uploaderAvatarUrl: { type: String, default: null },\n        videoId: { type: String, default: null },\n    },\n    data() {\n        return {\n            loadingReplies: false,\n            showingReplies: false,\n            replies: [],\n            nextpage: null,\n        };\n    },\n    methods: {\n        async loadReplies() {\n            console.log(this.uploaderAvatarUrl);\n            if (!this.showingReplies && this.loadingReplies) {\n                this.showingReplies = true;\n                return;\n            }\n            this.loadingReplies = true;\n            this.showingReplies = true;\n            this.fetchJson(this.apiUrl() + \"/nextpage/comments/\" + this.videoId, {\n                nextpage: this.nextpage || this.comment.repliesPage,\n            }).then(json => {\n                this.replies = this.replies.concat(json.comments);\n                this.nextpage = json.nextpage;\n            });\n        },\n        async hideReplies() {\n            this.showingReplies = false;\n        },\n    },\n};\n</script>\n","<template>\n    <!-- desktop view -->\n    <div v-if=\"!mobileLayout\" class=\"max-h-75vh max-w-35vw min-h-64 flex-col overflow-y-scroll lt-lg:hidden\">\n        <h2 class=\"mb-2 bg-gray-500/50 p-2\" aria-label=\"chapters\" title=\"chapters\">\n            {{ $t(\"video.chapters\") }} ({{ chapters.length }})\n        </h2>\n        <div\n            v-for=\"(chapter, index) in chapters\"\n            :key=\"chapter.start\"\n            class=\"chapter-vertical\"\n            :class=\"{ 'bg-red-500/50': isCurrentChapter(index) }\"\n            @click=\"$emit('seek', chapter.start)\"\n        >\n            <div class=\"flex\">\n                <span class=\"mr-2 mt-5 text-current\" v-text=\"index + 1\" />\n                <img class=\"shrink-0\" :src=\"chapter.image\" :alt=\"chapter.title\" />\n                <div class=\"m-2 flex flex-col\">\n                    <span class=\"text-sm\" :title=\"chapter.title\" v-text=\"chapter.title\" />\n                    <span class=\"text-sm text-blue-500 font-bold\" v-text=\"timeFormat(chapter.start)\" />\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- mobile vertical view -->\n    <div\n        v-if=\"mobileLayout && getPreferenceString('mobileChapterLayout') == 'Vertical'\"\n        class=\"max-h-64 flex flex-col overflow-y-scroll\"\n    >\n        <h2 class=\"mb-2 bg-gray-500/50 p-2\" aria-label=\"chapters\" title=\"chapters\">\n            {{ $t(\"video.chapters\") }} ({{ chapters.length }})\n        </h2>\n        <div\n            v-for=\"(chapter, index) in chapters\"\n            :key=\"chapter.start\"\n            class=\"chapter-vertical\"\n            :class=\"{ 'bg-red-500/50': isCurrentChapter(index) }\"\n            @click=\"$emit('seek', chapter.start)\"\n        >\n            <div class=\"flex\">\n                <span class=\"mr-2 mt-5 text-current\" v-text=\"index + 1\" />\n                <img class=\"shrink-0\" :src=\"chapter.image\" :alt=\"chapter.title\" />\n                <div class=\"m-2 flex flex-col\">\n                    <span class=\"text-sm\" :title=\"chapter.title\" v-text=\"chapter.title\" />\n                    <span class=\"text-sm text-blue-500 font-bold\" v-text=\"timeFormat(chapter.start)\" />\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- mobile Horizontal view -->\n    <div v-if=\"getPreferenceString('mobileChapterLayout') == 'Horizontal' && mobileLayout\" class=\"flex overflow-x-auto\">\n        <div\n            v-for=\"(chapter, index) in chapters\"\n            :key=\"chapter.start\"\n            class=\"chapter\"\n            :class=\"{ 'bg-red-500/50': isCurrentChapter(index) }\"\n            @click=\"$emit('seek', chapter.start)\"\n        >\n            <img :src=\"chapter.image\" :alt=\"chapter.title\" />\n            <div class=\"m-1 flex\">\n                <span class=\"text-truncate text-sm\" :title=\"chapter.title\" v-text=\"chapter.title\" />\n                <span class=\"px-1 text-sm text-blue-500 font-bold\" v-text=\"timeFormat(chapter.start)\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nconst props = defineProps({\n    chapters: {\n        type: Object,\n        default: () => null,\n    },\n    mobileLayout: {\n        type: Boolean,\n        default: () => true,\n    },\n    playerPosition: {\n        type: Number,\n        default: () => 0,\n    },\n});\n\nconst isCurrentChapter = index => {\n    return (\n        props.playerPosition >= props.chapters[index].start &&\n        props.playerPosition < (props.chapters[index + 1]?.start ?? Infinity)\n    );\n};\n\ndefineEmits([\"seek\"]);\n</script>\n\n<style>\n::-webkit-scrollbar {\n    height: 5px;\n}\n.chapter {\n    @apply cursor-pointer self-center p-2.5;\n}\n.chapter img {\n    @apply w-full h-full;\n}\n.chapter-vertical {\n    @apply cursor-pointer self-center p-2.5;\n}\n.chapter-vertical img {\n    @apply w-3/10 h-3/10;\n}\n\n.chapter-vertical:hover {\n    @apply bg-gray-500;\n}\n.text-truncate {\n    @apply truncate overflow-hidden inline-block w-10em;\n}\n</style>\n","<template>\n    <div ref=\"scrollable\" class=\"h-screen-sm overflow-x-scroll\">\n        <VideoItem\n            v-for=\"(related, index) in playlist.relatedStreams\"\n            :key=\"related.url\"\n            :item=\"related\"\n            :index=\"index\"\n            :playlist-id=\"playlistId\"\n            :prefer-listen=\"preferListen\"\n            height=\"94\"\n            width=\"168\"\n        />\n    </div>\n</template>\n\n<script>\nimport { nextTick } from \"vue\";\nimport VideoItem from \"./VideoItem.vue\";\n\nexport default {\n    components: { VideoItem },\n    props: {\n        playlist: {\n            type: Object,\n            required: true,\n        },\n        playlistId: {\n            type: String,\n            required: true,\n        },\n        selectedIndex: {\n            type: Number,\n            required: true,\n        },\n        preferListen: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    watch: {\n        playlist: {\n            handler() {\n                if (this.selectedIndex - 1 < this.playlist.relatedStreams.length)\n                    nextTick(() => {\n                        this.updateScroll();\n                    });\n            },\n            deep: true,\n        },\n    },\n    mounted() {\n        this.updateScroll();\n        this.updateWatched(this.playlist.relatedStreams);\n    },\n    methods: {\n        updateScroll() {\n            const elems = Array.from(this.$refs.scrollable.children).filter(elm => elm.matches(\"div\"));\n            const index = this.selectedIndex - 1;\n            if (index < elems.length)\n                this.$refs.scrollable.scrollTop =\n                    elems[this.selectedIndex - 1].offsetTop - this.$refs.scrollable.offsetTop;\n        },\n    },\n};\n</script>\n","<template>\n    <div class=\"toast\">\n        <slot />\n        <button v-t=\"'actions.dismiss'\" @click=\"dismiss\" />\n    </div>\n</template>\n\n<script>\nexport default {\n    emits: [\"dismissed\"],\n    methods: {\n        dismiss() {\n            this.$emit(\"dismissed\");\n        },\n    },\n};\n</script>\n\n<style>\n.toast {\n    @apply bg-white/80 text-black flex flex-col justify-center fixed top-12 right-12 p-4 min-w-max shadow rounded duration-200 z-9999;\n}\n.dark .toast {\n    @apply bg-dark-900/80 text-white;\n}\n.toast button {\n    @apply underline;\n}\n</style>\n","<template>\n    <div v-if=\"video && isEmbed\" class=\"absolute left-0 top-0 z-50 h-full w-full bg-black\">\n        <VideoPlayer\n            ref=\"videoPlayer\"\n            :video=\"video\"\n            :sponsors=\"sponsors\"\n            :selected-auto-play=\"false\"\n            :selected-auto-loop=\"selectedAutoLoop\"\n            :is-embed=\"isEmbed\"\n        />\n    </div>\n\n    <LoadingIndicatorPage :show-content=\"video && !isEmbed\" class=\"w-full\">\n        <ErrorHandler v-if=\"video && video.error\" :message=\"video.message\" :error=\"video.error\" />\n        <Transition>\n            <ToastComponent v-if=\"shouldShowToast\" @dismissed=\"dismiss\">\n                <i18n-t keypath=\"info.next_video_countdown\">{{ counter }}</i18n-t>\n            </ToastComponent>\n        </Transition>\n\n        <div v-show=\"!video.error\">\n            <div :class=\"isMobile ? 'flex-col' : 'flex'\">\n                <keep-alive>\n                    <VideoPlayer\n                        ref=\"videoPlayer\"\n                        :video=\"video\"\n                        :sponsors=\"sponsors\"\n                        :selected-auto-play=\"selectedAutoPlay\"\n                        :selected-auto-loop=\"selectedAutoLoop\"\n                        @timeupdate=\"onTimeUpdate\"\n                        @ended=\"onVideoEnded\"\n                        @navigate-next=\"navigateNext\"\n                    />\n                </keep-alive>\n                <ChaptersBar\n                    v-if=\"video?.chapters?.length > 0 && showChapters\"\n                    :mobile-layout=\"isMobile\"\n                    :chapters=\"video.chapters\"\n                    :player-position=\"currentTime\"\n                    @seek=\"navigate\"\n                />\n            </div>\n            <!-- video title -->\n            <div class=\"mt-2 break-words text-2xl font-bold\" v-text=\"video.title\" />\n            <div class=\"mb-3 mt-3 flex flex-wrap\">\n                <!-- views / date -->\n                <div class=\"flex flex-auto gap-2\">\n                    <span v-t=\"{ path: 'video.views', args: { views: addCommas(video.views) } }\" />\n                    <span> | </span>\n                    <span v-text=\"uploadDate\" />\n                </div>\n                <!-- Likes/dilikes -->\n                <div class=\"flex gap-2\">\n                    <template v-if=\"video.likes >= 0\">\n                        <div class=\"flex items-center\">\n                            <div class=\"i-fa6-solid:thumbs-up\" />\n                            <strong class=\"ml-1\" v-text=\"addCommas(video.likes)\" />\n                        </div>\n                        <div class=\"flex items-center\">\n                            <div class=\"i-fa6-solid:thumbs-down\" />\n                            <strong class=\"ml-1\" v-text=\"video.dislikes >= 0 ? addCommas(video.dislikes) : '?'\" />\n                        </div>\n                    </template>\n                    <template v-if=\"video.likes < 0\">\n                        <div>\n                            <strong v-t=\"'video.ratings_disabled'\" />\n                        </div>\n                    </template>\n                </div>\n            </div>\n            <!-- Channel info & options flex container -->\n            <div class=\"flex flex-wrap gap-1\">\n                <!-- Channel Image & Info -->\n                <div class=\"flex items-center\">\n                    <img\n                        loading=\"lazy\"\n                        height=\"48\"\n                        width=\"48\"\n                        :src=\"video.uploaderAvatar\"\n                        alt=\"\"\n                        class=\"rounded-full\"\n                    />\n                    <router-link v-if=\"video.uploaderUrl\" class=\"link ml-1.5\" :to=\"video.uploaderUrl\">{{\n                        video.uploader\n                    }}</router-link>\n                    <!-- Verified Badge -->\n                    <i v-if=\"video.uploaderVerified\" class=\"i-fa6-solid:check ml-1\" />\n                </div>\n                <PlaylistAddModal\n                    v-if=\"showModal\"\n                    :video-id=\"getVideoId()\"\n                    :video-info=\"video\"\n                    @close=\"showModal = !showModal\"\n                />\n                <ShareModal\n                    v-if=\"showShareModal\"\n                    :video-id=\"getVideoId()\"\n                    :current-time=\"currentTime\"\n                    :playlist-id=\"playlistId\"\n                    :playlist-index=\"index\"\n                    @close=\"showShareModal = !showShareModal\"\n                />\n                <div class=\"ml-auto flex flex-wrap gap-1\">\n                    <!-- Subscribe Button -->\n                    <button class=\"btn flex items-center gap-1 <md:hidden\" @click=\"downloadCurrentFrame\">\n                        {{ $t(\"actions.download_frame\") }}<i class=\"i-fa6-solid:download\" />\n                    </button>\n                    <button class=\"btn flex items-center\" @click=\"showModal = !showModal\">\n                        {{ $t(\"actions.add_to_playlist\") }}<i class=\"i-fa6-solid:circle-plus ml-1\" />\n                    </button>\n                    <button\n                        class=\"btn\"\n                        @click=\"subscribeHandler\"\n                        v-text=\"\n                            $t('actions.' + (subscribed ? 'unsubscribe' : 'subscribe')) +\n                            ' - ' +\n                            numberFormat(video.uploaderSubscriberCount)\n                        \"\n                    />\n                    <div class=\"flex flex-wrap gap-1\">\n                        <!-- RSS Feed button -->\n                        <a\n                            v-if=\"video.uploaderUrl\"\n                            aria-label=\"RSS feed\"\n                            title=\"RSS feed\"\n                            role=\"button\"\n                            :href=\"`${apiUrl()}/feed/unauthenticated/rss?channels=${video.uploaderUrl.split('/')[2]}`\"\n                            target=\"_blank\"\n                            class=\"btn flex items-center\"\n                        >\n                            <i class=\"i-fa6-solid:rss mx-1.5\" />\n                        </a>\n                        <!-- Share Dialog -->\n                        <button class=\"btn flex items-center\" @click=\"showShareModal = !showShareModal\">\n                            <i18n-t class=\"lt-lg:hidden\" keypath=\"actions.share\" tag=\"strong\"></i18n-t>\n                            <i class=\"i-fa6-solid:share mx-1.5\" />\n                        </button>\n                        <!-- YouTube -->\n                        <WatchOnButton :link=\"youtubeVideoHref\" />\n                        <!-- Odysee -->\n                        <WatchOnButton\n                            v-if=\"video.lbryId\"\n                            :link=\"`https://odysee.com/${video.lbryId}`\"\n                            platform=\"Odysee\"\n                        />\n                        <!-- listen / watch toggle -->\n                        <router-link\n                            :to=\"toggleListenUrl\"\n                            :aria-label=\"(isListening ? 'Watch ' : 'Listen to ') + video.title\"\n                            :title=\"(isListening ? 'Watch ' : 'Listen to ') + video.title\"\n                            class=\"btn flex items-center\"\n                        >\n                            <i :class=\"isListening ? 'i-fa6-solid:tv' : 'i-fa6-solid:headphones'\" class=\"mx-1.5\" />\n                        </router-link>\n                    </div>\n                </div>\n            </div>\n\n            <hr class=\"mb-2\" />\n\n            <div\n                v-for=\"metaInfo in video?.metaInfo ?? []\"\n                :key=\"metaInfo.title\"\n                class=\"btn my-3 flex flex-wrap cursor-default gap-2 px-4 py-2\"\n            >\n                <span>{{ metaInfo.description ?? metaInfo.title }}</span>\n                <a v-for=\"(link, linkIndex) in metaInfo.urls\" :key=\"linkIndex\" :href=\"link\" class=\"underline\">{{\n                    metaInfo.urlTexts[linkIndex]\n                }}</a>\n                <br />\n            </div>\n\n            <button\n                v-t=\"`actions.${showDesc ? 'minimize_description' : 'show_description'}`\"\n                class=\"btn mb-2\"\n                @click=\"showDesc = !showDesc\"\n            />\n\n            <span v-show=\"video?.chapters?.length > 0\" class=\"btn ml-2\">\n                <input id=\"showChapters\" v-model=\"showChapters\" type=\"checkbox\" />\n                <label v-t=\"'actions.show_chapters'\" class=\"ml-2\" for=\"showChapters\" />\n            </span>\n\n            <template v-if=\"showDesc\">\n                <!-- eslint-disable-next-line vue/no-v-html -->\n                <div class=\"description break-words\" v-html=\"purifiedDescription\" />\n                <br />\n\n                <div\n                    v-if=\"sponsors && sponsors.segments\"\n                    v-text=\"`${$t('video.sponsor_segments')}: ${sponsors.segments.length}`\"\n                />\n                <div v-if=\"video.category\" v-text=\"`${$t('video.category')}: ${video.category}`\" />\n                <div v-text=\"`${$t('video.license')}: ${video.license}`\" />\n                <div class=\"capitalize\" v-text=\"`${$t('video.visibility')}: ${video.visibility}`\" />\n\n                <div v-if=\"video.tags\" class=\"mt-2 flex flex-wrap gap-2\">\n                    <router-link\n                        v-for=\"tag in video.tags\"\n                        :key=\"tag\"\n                        class=\"btn line-clamp-1 rounded-s px-2 py-1\"\n                        :to=\"`/results?search_query=${encodeURIComponent(tag)}`\"\n                        >{{ tag }}</router-link\n                    >\n                </div>\n            </template>\n        </div>\n\n        <hr />\n\n        <label for=\"chkAutoLoop\"><strong v-text=\"`${$t('actions.loop_this_video')}:`\" /></label>\n        <input id=\"chkAutoLoop\" v-model=\"selectedAutoLoop\" class=\"ml-1.5\" type=\"checkbox\" @change=\"onChange($event)\" />\n        <br />\n        <label for=\"chkAutoPlay\"><strong v-text=\"`${$t('actions.auto_play_next_video')}:`\" /></label>\n        <input id=\"chkAutoPlay\" v-model=\"selectedAutoPlay\" class=\"ml-1.5\" type=\"checkbox\" @change=\"onChange($event)\" />\n\n        <hr />\n\n        <div class=\"grid grid-cols-1 sm:grid-cols-4 xl:grid-cols-5\">\n            <div class=\"sm:col-span-3 xl:col-span-4\">\n                <button\n                    v-if=\"!comments?.disabled\"\n                    class=\"btn mb-2\"\n                    @click=\"toggleComments\"\n                    v-text=\"\n                        `${$t(showComments ? 'actions.minimize_comments' : 'actions.show_comments')} (${numberFormat(\n                            comments?.commentCount,\n                        )})`\n                    \"\n                />\n            </div>\n            <div v-if=\"!showComments\" class=\"sm:col-span-3 xl:col-span-4\"></div>\n            <div v-else-if=\"!comments\" class=\"sm:col-span-3 xl:col-span-4\">\n                <p v-t=\"'comment.loading'\" class=\"mt-8 text-center\"></p>\n            </div>\n            <div v-else-if=\"comments.disabled\" class=\"sm:col-span-3 xl:col-span-4\">\n                <p v-t=\"'comment.disabled'\" class=\"mt-8 text-center\"></p>\n            </div>\n            <div v-else ref=\"comments\" class=\"sm:col-span-3 xl:col-span-4\">\n                <CommentItem\n                    v-for=\"comment in comments.comments\"\n                    :key=\"comment.commentId\"\n                    :comment=\"comment\"\n                    :uploader=\"video.uploader\"\n                    :uploader-avatar-url=\"video.uploaderAvatar\"\n                    :video-id=\"getVideoId()\"\n                />\n            </div>\n\n            <div v-if=\"video\" class=\"order-first sm:order-last\">\n                <PlaylistVideos\n                    v-if=\"playlist\"\n                    :playlist-id=\"playlistId\"\n                    :playlist=\"playlist\"\n                    :selected-index=\"index\"\n                    :prefer-listen=\"isListening\"\n                />\n                <a\n                    v-t=\"`actions.${showRecs ? 'minimize_recommendations' : 'show_recommendations'}`\"\n                    class=\"btn mb-2\"\n                    @click=\"showRecs = !showRecs\"\n                />\n                <hr v-show=\"showRecs\" />\n                <div v-show=\"showRecs\">\n                    <ContentItem\n                        v-for=\"related in video.relatedStreams\"\n                        :key=\"related.url\"\n                        :item=\"related\"\n                        :prefer-listen=\"isListening\"\n                        class=\"mb-4\"\n                        height=\"94\"\n                        width=\"168\"\n                    />\n                </div>\n                <hr class=\"sm:hidden\" />\n            </div>\n        </div>\n    </LoadingIndicatorPage>\n</template>\n\n<script>\nimport VideoPlayer from \"./VideoPlayer.vue\";\nimport ContentItem from \"./ContentItem.vue\";\nimport ErrorHandler from \"./ErrorHandler.vue\";\nimport CommentItem from \"./CommentItem.vue\";\nimport ChaptersBar from \"./ChaptersBar.vue\";\nimport PlaylistAddModal from \"./PlaylistAddModal.vue\";\nimport ShareModal from \"./ShareModal.vue\";\nimport PlaylistVideos from \"./PlaylistVideos.vue\";\nimport WatchOnButton from \"./WatchOnButton.vue\";\nimport LoadingIndicatorPage from \"./LoadingIndicatorPage.vue\";\nimport ToastComponent from \"./ToastComponent.vue\";\nimport { parseTimeParam } from \"@/utils/Misc\";\nimport { purifyHTML, rewriteDescription } from \"@/utils/HtmlUtils\";\n\nexport default {\n    name: \"App\",\n    components: {\n        VideoPlayer,\n        ContentItem,\n        ErrorHandler,\n        CommentItem,\n        ChaptersBar,\n        PlaylistAddModal,\n        ShareModal,\n        PlaylistVideos,\n        WatchOnButton,\n        LoadingIndicatorPage,\n        ToastComponent,\n    },\n    data() {\n        const smallViewQuery = window.matchMedia(\"(max-width: 640px)\");\n        return {\n            video: null,\n            playlistId: null,\n            playlist: null,\n            index: null,\n            sponsors: null,\n            selectedAutoLoop: false,\n            selectedAutoPlay: null,\n            showComments: true,\n            showDesc: false,\n            showRecs: true,\n            showChapters: true,\n            comments: null,\n            subscribed: false,\n            channelId: null,\n            active: true,\n            smallViewQuery: smallViewQuery,\n            smallView: smallViewQuery.matches,\n            showModal: false,\n            showShareModal: false,\n            isMobile: true,\n            currentTime: 0,\n            shouldShowToast: false,\n            timeoutCounter: null,\n            counter: 0,\n        };\n    },\n    computed: {\n        isListening(_this) {\n            return _this.getPreferenceBoolean(\"listen\", false);\n        },\n        toggleListenUrl(_this) {\n            const url = new URL(window.location.href);\n            url.searchParams.set(\"listen\", _this.isListening ? \"0\" : \"1\");\n            url.searchParams.set(\"t\", Math.floor(this.currentTime));\n            return url.pathname + url.search;\n        },\n        isEmbed(_this) {\n            return String(_this.$route.path).indexOf(\"/embed/\") == 0;\n        },\n        uploadDate(_this) {\n            return new Date(_this.video.uploadDate).toLocaleString(undefined, {\n                month: \"short\",\n                day: \"numeric\",\n                year: \"numeric\",\n            });\n        },\n        defaultCounter(_this) {\n            return _this.getPreferenceNumber(\"autoPlayNextCountdown\", 5);\n        },\n        purifiedDescription() {\n            return purifyHTML(this.video.description);\n        },\n        youtubeVideoHref() {\n            let link = `https://youtu.be/${this.getVideoId()}?t=${Math.round(this.currentTime)}`;\n            if (this.playlistId) link += `&list=${this.playlistId}`;\n            return link;\n        },\n    },\n    mounted() {\n        // check screen size\n        if (window.innerWidth >= 1024) {\n            this.isMobile = false;\n        }\n        // add an event listener to watch for screen size changes\n        window.addEventListener(\"resize\", () => {\n            if (window.innerWidth >= 1024) {\n                this.isMobile = false;\n            } else {\n                this.isMobile = true;\n            }\n        });\n        this.getVideoData().then(() => {\n            (async () => {\n                const videoId = this.getVideoId();\n                const instance = this;\n                if (window.db && this.getPreferenceBoolean(\"watchHistory\", false) && !this.video.error) {\n                    var tx = window.db.transaction(\"watch_history\", \"readwrite\");\n                    var store = tx.objectStore(\"watch_history\");\n                    var request = store.get(videoId);\n                    request.onsuccess = function (event) {\n                        var video = event.target.result;\n                        if (video) {\n                            video.watchedAt = Date.now();\n                        } else {\n                            video = {\n                                videoId: videoId,\n                                title: instance.video.title,\n                                duration: instance.video.duration,\n                                thumbnail: instance.video.thumbnailUrl,\n                                uploaderUrl: instance.video.uploaderUrl,\n                                uploaderName: instance.video.uploader,\n                                watchedAt: Date.now(),\n                            };\n                        }\n                        store.put(video);\n                    };\n                }\n            })();\n            if (this.active) this.$refs.videoPlayer.loadVideo();\n        });\n        this.playlistId = this.$route.query.list;\n        this.index = Number(this.$route.query.index);\n        this.getPlaylistData();\n        this.getSponsors();\n        if (!this.isEmbed && this.showComments) this.getComments();\n        if (this.isEmbed) document.querySelector(\"html\").style.overflow = \"hidden\";\n        window.addEventListener(\"click\", this.handleClick);\n        window.addEventListener(\"resize\", () => {\n            this.smallView = this.smallViewQuery.matches;\n        });\n    },\n    activated() {\n        this.active = true;\n        this.selectedAutoPlay = this.getPreferenceBoolean(\"autoplay\", false);\n        this.showComments = !this.getPreferenceBoolean(\"minimizeComments\", false);\n        this.showDesc = !this.getPreferenceBoolean(\"minimizeDescription\", true);\n        this.showRecs = !this.getPreferenceBoolean(\"minimizeRecommendations\", false);\n        this.showChapters = !this.getPreferenceBoolean(\"minimizeChapters\", false);\n        if (this.video?.duration) {\n            document.title = this.video.title + \" - Piped\";\n            this.$refs.videoPlayer.loadVideo();\n        }\n        window.addEventListener(\"scroll\", this.handleScroll);\n    },\n    deactivated() {\n        this.active = false;\n        window.removeEventListener(\"scroll\", this.handleScroll);\n        this.dismiss();\n    },\n    unmounted() {\n        window.removeEventListener(\"scroll\", this.handleScroll);\n        window.removeEventListener(\"click\", this.handleClick);\n        this.dismiss();\n    },\n    methods: {\n        fetchVideo() {\n            return this.fetchJson(this.apiUrl() + \"/streams/\" + this.getVideoId());\n        },\n        async fetchSponsors() {\n            var selectedSkip = this.getPreferenceString(\n                \"selectedSkip\",\n                \"sponsor,interaction,selfpromo,music_offtopic\",\n            ).split(\",\");\n            const skipOptions = this.getPreferenceJSON(\"skipOptions\");\n            if (skipOptions !== undefined) {\n                selectedSkip = Object.keys(skipOptions).filter(\n                    k => skipOptions[k] !== undefined && skipOptions[k] !== \"no\",\n                );\n            }\n\n            const sponsors = await this.fetchJson(this.apiUrl() + \"/sponsors/\" + this.getVideoId(), {\n                category: JSON.stringify(selectedSkip),\n            });\n\n            sponsors?.segments?.forEach(segment => {\n                const option = skipOptions?.[segment.category];\n                segment.autoskip = option === undefined || option === \"auto\";\n            });\n\n            const minSegmentLength = Math.max(this.getPreferenceNumber(\"minSegmentLength\", 0), 0);\n            sponsors.segments = sponsors.segments?.filter(segment => {\n                const length = segment.segment[1] - segment.segment[0];\n                return length >= minSegmentLength;\n            });\n\n            return sponsors;\n        },\n        toggleComments() {\n            this.showComments = !this.showComments;\n            if (this.showComments && this.comments === null) {\n                this.fetchComments();\n            }\n        },\n        fetchComments() {\n            return this.fetchJson(this.apiUrl() + \"/comments/\" + this.getVideoId());\n        },\n        onChange() {\n            this.setPreference(\"autoplay\", this.selectedAutoPlay, true);\n        },\n        async getVideoData() {\n            await this.fetchVideo()\n                .then(data => {\n                    this.video = data;\n                    this.video.id = this.getVideoId();\n                })\n                .then(() => {\n                    if (!this.video.error) {\n                        document.title = this.video.title + \" - Piped\";\n                        this.channelId = this.video.uploaderUrl.split(\"/\")[2];\n                        if (!this.isEmbed) this.fetchSubscribedStatus();\n\n                        const parser = new DOMParser();\n                        const xmlDoc = parser.parseFromString(this.video.description, \"text/html\");\n                        xmlDoc.querySelectorAll(\"a\").forEach(elem => {\n                            if (!elem.innerText.match(/(?:[\\d]{1,2}:)?(?:[\\d]{1,2}):(?:[\\d]{1,2})/))\n                                elem.outerHTML = elem.getAttribute(\"href\");\n                        });\n                        xmlDoc.querySelectorAll(\"br\").forEach(elem => (elem.outerHTML = \"\\n\"));\n                        this.video.description = rewriteDescription(xmlDoc.querySelector(\"body\").innerHTML);\n                        this.updateWatched(this.video.relatedStreams);\n\n                        this.fetchDeArrowContent(this.video.relatedStreams);\n                    }\n                });\n        },\n        async getPlaylistData() {\n            if (this.playlistId) {\n                this.playlist = await this.getPlaylist(this.playlistId);\n                await this.fetchPlaylistPages().then(() => {\n                    if (!(this.index >= 0)) {\n                        for (let i = 0; i < this.playlist.relatedStreams.length; i++)\n                            if (this.playlist.relatedStreams[i].url.substr(-11) == this.getVideoId()) {\n                                this.index = i + 1;\n                                this.$router.replace({\n                                    query: { ...this.$route.query, index: this.index },\n                                });\n                                break;\n                            }\n                    }\n                });\n                await this.fetchPlaylistPages();\n            }\n        },\n        async fetchPlaylistPages() {\n            if (this.playlist.nextpage) {\n                await this.fetchJson(this.apiUrl() + \"/nextpage/playlists/\" + this.playlistId, {\n                    nextpage: this.playlist.nextpage,\n                }).then(json => {\n                    this.playlist.relatedStreams.push(...json.relatedStreams);\n                    this.playlist.nextpage = json.nextpage;\n                    this.fetchDeArrowContent(json.relatedStreams);\n                });\n                await this.fetchPlaylistPages();\n            }\n        },\n        async getSponsors() {\n            if (this.getPreferenceBoolean(\"sponsorblock\", true))\n                this.fetchSponsors().then(data => (this.sponsors = data));\n        },\n        async getComments() {\n            this.comments = await this.fetchComments();\n        },\n        async fetchSubscribedStatus() {\n            if (!this.channelId) return;\n\n            this.subscribed = await this.fetchSubscriptionStatus(this.channelId);\n        },\n        subscribeHandler() {\n            this.toggleSubscriptionState(this.channelId, this.subscribed).then(success => {\n                if (success) this.subscribed = !this.subscribed;\n            });\n        },\n        handleClick(event) {\n            if (!event || !event.target) return;\n            if (!event.target.matches(\"a[href]\")) return;\n            const target = event.target;\n            if (!target.getAttribute(\"href\")) return;\n            if (this.handleTimestampLinks(target)) {\n                event.preventDefault();\n            }\n        },\n        handleTimestampLinks(target) {\n            try {\n                const url = new URL(target.getAttribute(\"href\"), document.baseURI);\n                if (\n                    url.searchParams.size > 2 ||\n                    url.searchParams.get(\"v\") !== this.getVideoId() ||\n                    !url.searchParams.has(\"t\")\n                ) {\n                    return false;\n                }\n                const time = parseTimeParam(url.searchParams.get(\"t\"));\n                if (time) {\n                    this.navigate(time);\n                }\n                return true;\n            } catch (e) {\n                console.error(e);\n            }\n            return false;\n        },\n        handleScroll() {\n            if (this.loading || !this.comments || !this.comments.nextpage) return;\n            if (window.innerHeight + window.scrollY >= this.$refs.comments?.offsetHeight - window.innerHeight) {\n                this.loading = true;\n                this.fetchJson(this.apiUrl() + \"/nextpage/comments/\" + this.getVideoId(), {\n                    nextpage: this.comments.nextpage,\n                }).then(json => {\n                    this.comments.nextpage = json.nextpage;\n                    this.loading = false;\n                    this.comments.comments = this.comments.comments.concat(json.comments);\n                });\n            }\n        },\n        getVideoId() {\n            if (this.$route.query.video_ids) {\n                const videos_list = this.$route.query.video_ids.split(\",\");\n                this.index = Number(this.$route.query.index ?? 0);\n                return videos_list[this.index];\n            }\n\n            return this.$route.query.v || this.$route.params.v;\n        },\n        navigate(time) {\n            this.$refs.videoPlayer.seek(time);\n        },\n        onTimeUpdate(time) {\n            this.currentTime = time;\n        },\n        onVideoEnded() {\n            if (\n                !this.selectedAutoLoop &&\n                this.selectedAutoPlay &&\n                (this.playlist?.relatedStreams?.length > 0 || this.video.relatedStreams.length > 0)\n            ) {\n                this.showToast();\n            }\n        },\n        showToast() {\n            this.counter = this.defaultCounter;\n            if (this.counter < 1) {\n                this.navigateNext();\n                return;\n            }\n            if (this.timeoutCounter) clearInterval(this.timeoutCounter);\n            this.timeoutCounter = setInterval(() => {\n                this.counter--;\n                if (this.counter === 0) {\n                    this.dismiss();\n                    this.navigateNext();\n                }\n            }, 1000);\n            this.shouldShowToast = true;\n        },\n        dismiss() {\n            clearInterval(this.timeoutCounter);\n            this.shouldShowToast = false;\n        },\n        navigateNext() {\n            const params = this.$route.query;\n            const video_ids = this.$route.query.video_ids?.split(\",\") ?? [];\n            let url;\n            if (this.playlist) {\n                url = this.playlist?.relatedStreams?.[this.index]?.url ?? this.video.relatedStreams[0].url;\n            } else if (video_ids.length > this.index + 1) {\n                url = `${this.$route.path}?index=${this.index + 1}`;\n            } else {\n                url = this.video.relatedStreams[0].url;\n            }\n            const searchParams = new URLSearchParams();\n            for (var param in params)\n                switch (param) {\n                    case \"v\":\n                    case \"t\":\n                        break;\n                    case \"index\":\n                        if (this.playlist && this.index < this.playlist.relatedStreams.length)\n                            searchParams.set(\"index\", this.index + 1);\n                        break;\n                    case \"list\":\n                        if (this.index < this.playlist.relatedStreams.length) searchParams.set(\"list\", params.list);\n                        break;\n                    default:\n                        searchParams.set(param, params[param]);\n                        break;\n                }\n            // save the fullscreen state\n            searchParams.set(\"fullscreen\", this.$refs.videoPlayer.$ui.getControls().isFullScreenEnabled());\n            const paramStr = searchParams.toString();\n            if (paramStr.length > 0) url += \"&\" + paramStr;\n            this.$router.push(url);\n        },\n        downloadCurrentFrame() {\n            const video = document.querySelector(\"video\");\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n\n            const context = canvas.getContext(\"2d\");\n            context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n            let link = document.createElement(\"a\");\n            const currentTime = Math.round(video.currentTime * 1000) / 1000;\n            link.download = `${this.video.title}_${currentTime}s.png`;\n            link.href = canvas.toDataURL();\n            link.click();\n        },\n    },\n};\n</script>\n\n<style>\n.v-enter-from,\n.v-leave-to {\n    opacity: 0;\n    transform: translateX(100%) scale(0.5);\n}\n\n.description a {\n    text-decoration: underline;\n    filter: brightness(0.75);\n}\n</style>\n"],"names":["shaka","module","then","n","s","hotkeys","__vitePreload","J","_sfc_main","components","ModalComponent","props","video","type","Object","default","sponsors","selectedAutoPlay","Boolean","selectedAutoLoop","isEmbed","emits","data","lastUpdate","Date","getTime","initialSeekComplete","destroying","inSegment","isHoveringTimebar","showSpeedModal","showCurrentSpeed","hideCurrentSpeed","showCurrentVolume","hideCurrentVolume","playbackSpeedInput","currentTime","seekbarPadding","error","computed","shouldAutoPlay","_this","getPreferenceBoolean","preferredVideoCodecs","enabledCodecs","getPreferenceString","split","$refs","videoEl","canPlayType","includes","push","mounted","this","$shaka","shakaPromise","$hotkeys","hotkeysPromise","mod","activated","segments","forEach","segment","skipped","self","e","handler","key","$ui","getControls","toggleFullScreen","preventDefault","muted","Math","max","$player","setTextTrackVisibility","isTextTrackVisible","paused","play","pause","adjustPlaybackVolume","volume","chapters","findLast","chapter","start","find","duration","$emit","adjustPlaybackSpeed","playbackRate","document","pictureInPictureElement","exitPictureInPicture","requestPictureInPicture","skipSegment","deactivated","destroy","unmounted","methods","loadVideo","updateSponsors","component","setAttribute","thumbnailUrl","noPrevPlayer","streams","audioStreams","videoStreams","MseSupport","undefined","window","MediaSource","uri","mime","livestream","hls","length","dash","url","URL","searchParams","set","toString","async","generate_dash_file_from_formats","import","btoa","stream","codec","polyfill","installAll","localPlayer","Player","attach","proxyURL","proxyUrl","proxyPath","pathname","lastIndexOf","substring","getNetworkingEngine","registerRequestFilter","_type","request","uris","headers","host","endsWith","Range","protocol","configure","getPreferenceNumber","setPlayerAttrs","addEventListener","time","updateProgressDatabase","findCurrentSegment","autoskip","setPreference","rate","isNaN","timeStamp","onClickSkipSegment","console","log","id","OpenButton","ui","Element","constructor","parent","controls","super","newTabButton_","createElement","classList","add","ariaPressed","newTabIcon_","textContent","appendChild","label","newTabNameSpan_","innerText","eventManager","listen","open","Factory","create","rootElement","OverflowMenu","registerElement","Overlay","container","overflowMenuButtons","config","seekBarColors","base","buffered","played","updateMarkers","event","Event","dispatchEvent","player","getPlayer","setupSeekbarPreview","disableVideo","prefetchLimit","min","preferredAudioCodecs","manifest","streaming","segmentPrefetchLimit","retryParameters","maxAttempts","Infinity","baseDelay","backoffFactor","quality","qualityConds","$route","query","t","startTime","parseTimeParam","db","Promise","resolve","tx","transaction","objectStore","get","onsuccess","target","result","oncomplete","load","isSafari","navigator","vendor","prefLang","substr","lang","l","getAudioLanguages","selectAudioLanguage","getConfiguration","newOverflowMenuButtons","slice","leastDiff","Number","MAX_VALUE","bestStream","bestAudio","tracks","getVariantTracks","filter","track","language","audioBandwidth","sort","a","b","bandwidth","diff","abs","height","selectVariantTrack","subtitles","map","subtitle","addTextTrackAsync","code","mimeType","name","defaultPlaybackRate","autoDisplayCaptions","prefSubtitles","textTracks","getTextTracks","subtitleIdx","findIndex","textTrack","selectTextTrack","catch","fullscreen","isFullScreenEnabled","seekbar","querySelector","array","style","background","join","focus","store","put","seek","newSpeed","normalizedSpeed","trickPlay","clearTimeout","setTimeout","newVolume","normalizedVolume","setSpeedFromInput","err","alert","$t","markers","end","color","category","previewFrames","seekBar","position","offsetX","offsetWidth","showSeekbarPreview","previewContainer","display","frame","getFrame","originalImage","loadImage","canvas","preview","ctx","getContext","positionX","frameWidth","offsetY","positionY","frameHeight","width","drawImage","left","clientWidth","maxLeft","startPosition","framePage","at","i","urls","framesPerPageY","framesPerPageX","endPosition","durationPerFrame","r","Image","onload","src","unbind","querySelectorAll","node","remove","_hoisted_1","ref","class","_hoisted_5","_hoisted_6","_hoisted_7","_createElementVNode","_hoisted_11","_hoisted_15","_hoisted_16","_hoisted_17","_openBlock","_createElementBlock","_Fragment","_normalizeClass","$props","autoplay","$options","loop","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$data","title","_createCommentVNode","_ctx","timeFormat","onClick","args","_withDirectives","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","round","_createBlock","_component_ModalComponent","onClose","_withCtx","_cache","$event","placeholder","onKeyup","_withKeys","_","CollapsableText","comment","uploader","String","uploaderAvatarUrl","videoId","loadingReplies","showingReplies","replies","nextpage","loadReplies","fetchJson","apiUrl","repliesPage","json","concat","comments","hideReplies","loading","thumbnail","alt","pinned","_createVNode","_component_router_link","to","commentorUrl","_createTextVNode","author","verified","commentedTime","_component_CollapsableText","text","commentText","numberFormat","likeCount","hearted","creatorReplied","replyCount","_hoisted_18","_hoisted_19","_renderList","reply","commentId","_component_CommentItem","_hoisted_20","__props","isCurrentChapter","index","playerPosition","VideoItem","playlist","required","playlistId","selectedIndex","preferListen","watch","relatedStreams","nextTick","updateScroll","deep","updateWatched","elems","Array","from","scrollable","children","elm","matches","scrollTop","offsetTop","VideoPlayer","ContentItem","ErrorHandler","CommentItem","ChaptersBar","PlaylistAddModal","ShareModal","PlaylistVideos","related","_component_VideoItem","item","WatchOnButton","LoadingIndicatorPage","ToastComponent","dismiss","_renderSlot","$slots","smallViewQuery","matchMedia","showComments","showDesc","showRecs","showChapters","subscribed","channelId","active","smallView","showModal","showShareModal","isMobile","shouldShowToast","timeoutCounter","counter","isListening","toggleListenUrl","location","href","floor","search","path","indexOf","uploadDate","toLocaleString","month","day","year","defaultCounter","purifiedDescription","purifyHTML","description","youtubeVideoHref","link","getVideoId","innerWidth","getVideoData","instance","watchedAt","now","uploaderUrl","uploaderName","videoPlayer","list","getPlaylistData","getSponsors","getComments","overflow","handleClick","handleScroll","removeEventListener","fetchVideo","fetchSponsors","selectedSkip","skipOptions","getPreferenceJSON","keys","k","JSON","stringify","option","minSegmentLength","toggleComments","fetchComments","onChange","fetchSubscribedStatus","xmlDoc","DOMParser","parseFromString","elem","match","outerHTML","getAttribute","rewriteDescription","innerHTML","fetchDeArrowContent","getPlaylist","fetchPlaylistPages","$router","replace","fetchSubscriptionStatus","subscribeHandler","toggleSubscriptionState","success","handleTimestampLinks","baseURI","size","has","navigate","innerHeight","scrollY","offsetHeight","video_ids","videos_list","v","params","onTimeUpdate","onVideoEnded","showToast","navigateNext","clearInterval","setInterval","URLSearchParams","param","paramStr","downloadCurrentFrame","videoWidth","videoHeight","download","toDataURL","click","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_29","_hoisted_31","for","_hoisted_33","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_41","_hoisted_42","_hoisted_44","_hoisted_45","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_52","_hoisted_54","_component_VideoPlayer","_component_LoadingIndicatorPage","_component_ErrorHandler","message","_Transition","_component_ToastComponent","onDismissed","_component_i18n_t","keypath","_KeepAlive","onTimeupdate","onEnded","onNavigateNext","_component_ChaptersBar","onSeek","addCommas","views","likes","dislikes","uploaderAvatar","uploaderVerified","_component_PlaylistAddModal","_component_ShareModal","_hoisted_21","uploaderSubscriberCount","role","_hoisted_26","tag","_hoisted_27","_component_WatchOnButton","lbryId","platform","_hoisted_28","metaInfo","linkIndex","urlTexts","_hoisted_30","_hoisted_32","_hoisted_34","license","visibility","tags","_hoisted_39","encodeURIComponent","_vShow","_hoisted_40","_hoisted_43","_hoisted_46","disabled","commentCount","_hoisted_53","_hoisted_55","_hoisted_51","_hoisted_50","_hoisted_56","_component_PlaylistVideos","_component_ContentItem","_hoisted_57"],"mappings":"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"}