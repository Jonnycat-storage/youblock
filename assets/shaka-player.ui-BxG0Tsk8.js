function Rk(Nn,Jo){for(var er=0;er<Jo.length;er++){const Ui=Jo[er];if(typeof Ui!="string"&&!Array.isArray(Ui)){for(const O in Ui)if(O!=="default"&&!(O in Nn)){const Dr=Object.getOwnPropertyDescriptor(Ui,O);Dr&&Object.defineProperty(Nn,O,Dr.get?Dr:{enumerable:!0,get:()=>Ui[O]})}}}return Object.freeze(Object.defineProperty(Nn,Symbol.toStringTag,{value:"Module"}))}var Pk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dk(Nn){return Nn&&Nn.__esModule&&Object.prototype.hasOwnProperty.call(Nn,"default")?Nn.default:Nn}var v0={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(Nn){(function(){var Jo=typeof window<"u"?window:Pk,er={};(function(O,Dr,Ic){var p;function y0(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var Lu=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function aA(e){e=[typeof globalThis=="object"&&globalThis,e,typeof O=="object"&&O,typeof self=="object"&&self,typeof Dr=="object"&&Dr];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var zn=aA(this);function Ke(e,t){if(t)e:{var n=zn;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&Lu(n,e,{configurable:!0,writable:!0,value:t})}}Ke("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}function n(o,s){this.g=o,Lu(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}),Ke("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=zn[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&Lu(i.prototype,e,{configurable:!0,writable:!0,value:function(){return T0(y0(this))}})}return e});function T0(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function g(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:y0(e)}}function W(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var lA=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},Cc;if(typeof Object.setPrototypeOf=="function")Cc=Object.setPrototypeOf;else{var Mc;e:{var cA={a:!0},E0={};try{E0.__proto__=cA,Mc=E0.a;break e}catch(e){}Mc=!1}Cc=Mc?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var S0=Cc;function de(e,t){if(e.prototype=lA(t.prototype),e.prototype.constructor=e,S0)S0(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.im=t.prototype}function Ru(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function kc(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}Ru.prototype.u=function(e){this.h=e};function Lc(e,t){e.i={Th:t,di:!0},e.g=e.m||e.j}Ru.prototype.return=function(e){this.i={return:e},this.g=this.j};function T(e,t,n){return e.g=n,{value:t}}Ru.prototype.B=function(e){this.g=e};function V(e){e.g=0}function Z(e,t,n){e.m=t,n!=null&&(e.j=n)}function oi(e,t){e.m=0,e.j=t||0}function le(e,t,n){e.g=t,e.m=n||0}function Q(e,t){return e.m=t||0,t=e.i.Th,e.i=null,t}function Yt(e){e.A=[e.i],e.m=0,e.j=0}function Jt(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.di?e.g=e.m||e.j:n.B!=null&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function hA(e){this.g=new Ru,this.h=e}function dA(e,t){kc(e.g);var n=e.g.l;return n?Rc(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),$o(e))}function Rc(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.s=!1,r;var o=r.value}catch(s){return e.g.l=null,Lc(e.g,s),$o(e)}return e.g.l=null,i.call(e.g,o),$o(e)}function $o(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Lc(e.g,n)}if(e.g.s=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.di)throw t.Th;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function pA(e){this.next=function(t){return kc(e.g),e.g.l?t=Rc(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=$o(e)),t},this.throw=function(t){return kc(e.g),e.g.l?t=Rc(e,e.g.l.throw,t,e.g.u):(Lc(e.g,t),t=$o(e)),t},this.return=function(t){return dA(e,t)},this[Symbol.iterator]=function(){return this}}function fA(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}o(e.next())})}function M(e){return fA(new pA(new hA(e)))}function An(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}Ke("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.s=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=zn.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.H),reject:s(this.l)}},t.prototype.H=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.J(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.G(s):this.m(s)}},t.prototype.G=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.K(u,s):this.m(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.m=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.I(),this.A()},t.prototype.I=function(){var s=this;r(function(){if(s.C()){var u=zn.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.C=function(){if(this.s)return!1;var s=zn.CustomEvent,u=zn.Event,a=zn.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=zn.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.A=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.J=function(s){var u=this.j();s.Qe(u.resolve,u.reject)},t.prototype.K=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(d,f){return typeof d=="function"?function(m){try{l(d(m))}catch(y){c(y)}}:f}var l,c,h=new t(function(d,f){l=d,c=f});return this.Qe(a(s,l),a(u,c)),h},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Qe=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.s=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=g(s),c=l.next();!c.done;c=l.next())i(c.value).Qe(u,a)})},t.all=function(s){var u=g(s),a=u.next();return a.done?i([]):new t(function(l,c){function h(m){return function(y){d[m]=y,f--,f==0&&l(d)}}var d=[],f=0;do d.push(void 0),f++,i(a.value).Qe(h(d.length-1),c),a=u.next();while(!a.done)})},t});function _n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Ke("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=g(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function r(a){if(!_n(a,s)){var l=new n;Lu(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return c.get(a)!=2||c.get(l)!=3?!1:(c.delete(a),c.set(l,4),!c.has(a)&&c.get(l)==4)}catch(h){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!_n(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&_n(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&_n(a,s)&&_n(a[s],this.g)},t.prototype.delete=function(a){return i(a)&&_n(a,s)&&_n(a[s],this.g)?delete a[s][this.g]:!1},t}),Ke("Map",function(e){function t(){var u={};return u.jc=u.next=u.head=u}function n(u,a){var l=u.g;return T0(function(){if(l){for(;l.head!=u.g;)l=l.jc;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u.h[l];if(c&&_n(u.h,l))for(u=0;u<c.length;u++){var h=c[u];if(a!==a&&h.key!==h.key||a===h.key)return{id:l,list:c,index:u,entry:h}}return{id:l,list:c,index:-1,entry:void 0}}function r(u){if(this.h={},this.g=t(),this.size=0,u){u=g(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(g([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),c=l.next();return c.done||c.value[0]!=u||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch(h){return!1}}())return e;var o=new WeakMap;r.prototype.set=function(u,a){u=u===0?0:u;var l=i(this,u);return l.list||(l.list=this.h[l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this.g,jc:this.g.jc,head:this.g,key:u,value:a},l.list.push(l.entry),this.g.jc.next=l.entry,this.g.jc=l.entry,this.size++),this},r.prototype.delete=function(u){return u=i(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this.h[u.id],u.entry.jc.next=u.entry.next,u.entry.next.jc=u.entry.jc,u.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this.h={},this.g=this.g.jc=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,u.call(a,c[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r});function Pc(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}Ke("Array.prototype.keys",function(e){return e||function(){return Pc(this,function(t){return t})}}),Ke("Set",function(e){function t(n){if(this.g=new Map,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(g([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),o=r.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=r.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:r.next().done)}catch(s){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)}),Ke("Array.from",function(e){return e||function(t,n,i){n=n!=null?n:function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}}),Ke("Array.prototype.values",function(e){return e||function(){return Pc(this,function(t,n){return n})}}),Ke("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),Ke("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,0>n&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}});function Dc(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}Ke("String.prototype.includes",function(e){return e||function(t,n){return Dc(this,t,"includes").indexOf(t,n||0)!==-1}});function A0(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{bi:r,v:o}}return{bi:-1,v:void 0}}Ke("Array.prototype.findIndex",function(e){return e||function(t,n){return A0(this,t,n).bi}}),Ke("Array.prototype.find",function(e){return e||function(t,n){return A0(this,t,n).v}}),Ke("String.prototype.startsWith",function(e){return e||function(t,n){var i=Dc(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),Ke("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch(o){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var gA=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)_n(i,r)&&(e[r]=i[r])}return e};Ke("Object.assign",function(e){return e||gA}),Ke("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),Ke("Array.prototype.entries",function(e){return e||function(){return Pc(this,function(t,n){return[t,n]})}}),Ke("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),Ke("String.prototype.repeat",function(e){return e||function(t){var n=Dc(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),Ke("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),Ke("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)_n(t,i)&&n.push(t[i]);return n}}),Ke("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),Ke("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),Ke("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),Ke("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)_n(t,i)&&n.push([i,t[i]]);return n}});var mA=this||self;function j(e,t){e=e.split(".");var n=mA;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function vA(){}function yA(){}function G(e,t){if(t)if(t instanceof Map)for(var n=g(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=O.performance&&O.performance.now?O.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function w0(e){var t=new G(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}G.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},G.prototype.stopImmediatePropagation=function(){this.g=!0},G.prototype.stopPropagation=function(){},j("shaka.util.FakeEvent",G);var Pu={al:"abrstatuschanged",cl:"adaptation",fl:"audiotrackchanged",hl:"buffering",il:"complete",jl:"downloadfailed",kl:"downloadheadersreceived",ll:"drmsessionupdate",ql:"emsg",Jl:"prft",Error:"error",rl:"expirationupdated",ul:"firstquartile",vl:"gapjumped",yl:"keystatuschanged",Al:"loaded",Bl:"loading",Dl:"manifestparsed",El:"manifestupdated",Fl:"mediaqualitychanged",Metadata:"metadata",Gl:"midpoint",Hl:"nospatialvideoinfo",Il:"onstatechange",Ll:"ratechange",Ml:"segmentappended",Nl:"sessiondata",Ol:"spatialvideoinfo",Pl:"stalldetected",Ql:"started",Rl:"statechanged",Sl:"streaming",Tl:"textchanged",Ul:"texttrackvisibility",Vl:"thirdquartile",Wl:"timelineregionadded",Xl:"timelineregionenter",Yl:"timelineregionexit",Zl:"trackschanged",am:"unloading",cm:"variantchanged"};function TA(){}function si(){}function ce(){}function tr(e){var t=An.apply(1,arguments);x0.has(e)||(x0.add(e),ce.apply(TA,W(t)))}function EA(){}function _k(){}function Uk(){}var x0=new Set;O.console&&(ce=function(){return console.warn.apply(console,W(An.apply(0,arguments)))},si=function(){console.error.apply(console,W(An.apply(0,arguments)))});function Du(){this.g={}}p=Du.prototype,p.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},p.get=function(e){return(e=this.g[e])?e.slice():null},p.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},p.forEach=function(e){for(var t in this.g)e(t,this.g[t])},p.size=function(){return Object.keys(this.g).length},p.keys=function(){return Object.keys(this.g)};function ve(){this.Ga=new Du,this.Ke=this}ve.prototype.addEventListener=function(e,t){this.Ga&&this.Ga.push(e,t)},ve.prototype.removeEventListener=function(e,t){this.Ga&&this.Ga.remove(e,t)},ve.prototype.dispatchEvent=function(e){if(!this.Ga)return!0;var t=this.Ga.get(e.type)||[],n=this.Ga.get("All");for(n&&(t=t.concat(n)),t=g(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ke,e.currentTarget=this.Ke;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(i){}if(e.g)break}return e.defaultPrevented},ve.prototype.release=function(){this.Ga=null};function Nc(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function SA(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function I0(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(t(n.value))return!0;return!1}function Nr(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())i=i.value,t(i)&&n.push(i);return n}var AA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ze(e){var t;e instanceof Ze?(Nu(this,e.Zb),this.Vc=e.Vc,_u(this,e.cc),_c(this,e.sd),this.sb=e.sb,Zo(this,e.g.clone()),this.Fc=e.Fc):e&&(t=String(e).match(AA))?(Nu(this,t[1]||"",!0),this.Vc=Qo(t[2]||""),_u(this,t[3]||"",!0),_c(this,t[4]),this.sb=Qo(t[5]||"",!0),Zo(this,t[6]||"",!0),this.Fc=Qo(t[7]||"")):this.g=new ts(null)}p=Ze.prototype,p.Zb="",p.Vc="",p.cc="",p.sd=null,p.sb="",p.Fc="",p.toString=function(){var e=[],t=this.Zb;if(t&&e.push(es(t,C0,!0),":"),t=this.cc){e.push("//");var n=this.Vc;n&&e.push(es(n,C0,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.sd,t!=null&&e.push(":",String(t))}return(t=this.sb)&&(this.cc&&t.charAt(0)!="/"&&e.push("/"),e.push(es(t,t.charAt(0)=="/"?IA:xA,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Fc)&&e.push("#",es(t,MA)),e.join("")},p.resolve=function(e){var t=this.clone();t.Zb==="data"&&(t=new Ze);var n=!!e.Zb;n?Nu(t,e.Zb):n=!!e.Vc,n?t.Vc=e.Vc:n=!!e.cc,n?_u(t,e.cc):n=e.sd!=null;var i=e.sb;if(n)_c(t,e.sd);else if(n=!!e.sb){if(i.charAt(0)!="/")if(this.cc&&!this.sb)i="/"+i;else{var r=t.sb.lastIndexOf("/");r!=-1&&(i=t.sb.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];u=="."?r&&s==i.length&&o.push(""):u==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.sb=i:n=e.g.toString()!=="",n?Zo(t,e.g.clone()):n=!!e.Fc,n&&(t.Fc=e.Fc),t},p.clone=function(){return new Ze(this)};function Nu(e,t,n){e.Zb=n?Qo(t,!0):t,e.Zb&&(e.Zb=e.Zb.replace(/:$/,""))}function _u(e,t,n){e.cc=n?Qo(t,!0):t}function _c(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.sd=t}else e.sd=null}function Zo(e,t,n){t instanceof ts?e.g=t:(n||(t=es(t,CA)),e.g=new ts(t))}function Qo(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function es(e,t,n){return e!=null?(e=encodeURI(e).replace(t,wA),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wA(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var C0=/[#\/\?@]/g,xA=/[#\?:]/g,IA=/[#\?]/g,CA=/[#\?@]/g,MA=/#/g;function ts(e){this.g=e||null}function Uu(e){if(!e.cb&&(e.cb={},e.Ud=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),r=r||"",e.add(o,decodeURIComponent(r.replace(/\+/g," ")))}}p=ts.prototype,p.cb=null,p.Ud=null;function M0(e){return Uu(e),e.Ud}p.add=function(e,t){Uu(this),this.g=null;var n=this.cb.hasOwnProperty(e)?this.cb[e]:null;return n||(this.cb[e]=n=[]),n.push(t),this.Ud++,this},p.set=function(e,t){return Uu(this),this.g=null,this.cb.hasOwnProperty(e)?this.cb[e]=[t]:this.add(e,t),this},p.get=function(e){return Uu(this),this.cb[e]||[]},p.toString=function(){if(this.g)return this.g;if(!this.cb)return"";var e=[],t;for(t in this.cb)for(var n=encodeURIComponent(t),i=this.cb[t],r=0;r<i.length;r++){var o=n;i[r]!==""&&(o+="="+encodeURIComponent(i[r])),e.push(o)}return this.g=e.join("&")},p.clone=function(){var e=new ts;if(e.g=this.g,this.cb){var t={},n;for(n in this.cb)t[n]=this.cb[n].concat();e.cb=t,e.Ud=this.Ud}return e};function _r(){}function Oi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Uc(e)==Uc(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=he(e);t=he(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function Uc(e){return e instanceof ArrayBuffer?e:e.buffer}function an(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function he(e,t,n){return n=n===void 0?1/0:n,Oc(e,t===void 0?0:t,n,Uint8Array)}function k0(e,t,n){return n=n===void 0?1/0:n,Oc(e,t===void 0?0:t,n,Uint16Array)}function Ut(e,t,n){return n=n===void 0?1/0:n,Oc(e,t===void 0?0:t,n,DataView)}function Oc(e,t,n,i){var r=Uc(e),o=1;"BYTES_PER_ELEMENT"in i&&(o=i.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}j("shaka.util.BufferUtils",_r),_r.toDataView=Ut,_r.toUint16=k0,_r.toUint8=he,_r.toArrayBuffer=an,_r.equal=Oi;function L(e,t,n){var i=An.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}L.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},j("shaka.util.Error",L),L.Severity={RECOVERABLE:1,CRITICAL:2},L.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},L.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Ur(e){this.h=e,this.g=void 0}Ur.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function L0(e,t){return e.length&&t.length&&e!==t?0<bc(e,t).length:!0}function bc(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.keySystem==o.keySystem){r=new Map;for(var s=g((i.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,r.set(u.keyId,u);r=Array.from(r.values()),s=i.keyIds&&o.keyIds?new Set([].concat(W(i.keyIds),W(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r,keyIds:s});break}}return n}function jc(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var Ou=new Ur(function(){return an(new Uint8Array([0]))}),bu=new Map;function ns(e){this.h=e,this.g=null}ns.prototype.X=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){O.clearTimeout(i),n=!1},i=O.setTimeout(function(){n&&t.h()},1e3*e),this},ns.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function te(e){this.h=e,this.g=null}te.prototype.Sa=function(){return this.stop(),this.h(),this},te.prototype.X=function(e){var t=this;return this.stop(),this.g=new ns(function(){t.h()}).X(e),this},te.prototype.wa=function(e){var t=this;return this.stop(),this.g=new ns(function(){t.g.X(e),t.h()}).X(e),this},te.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},j("shaka.util.Timer",te),te.prototype.stop=te.prototype.stop,te.prototype.tickEvery=te.prototype.wa,te.prototype.tickAfter=te.prototype.X,te.prototype.tickNow=te.prototype.Sa;function Un(){var e=O.ManagedMediaSource||O.MediaSource;return!!(e&&e.isTypeSupported)}function is(e){return R0().canPlayType(e)!=""}function rs(){return!!navigator.userAgent.match(/Edge?\//)}function ui(){return Ce("Xbox One")}function Wn(){return Ce("Tizen")}function os(){return Ce("Tizen 3")}function ju(){return Ce("Tizen 2")}function Xn(){return Ce("Web0S")}function Fu(){return Xn()&&Fc()===38}function $t(){return Ce("CrKey")}function Fc(){if(!Ce("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function nr(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Wn()&&!Ce("PC=EOS")&&!Ce("PC=APL")&&!Ce("VirginMedia")&&!Bc()&&!Yn()&&!Ce("AFT")&&!Ce("WPE")&&!Ce("DT_STB_BCM")}function Bu(){return Ce("PlayStation 5")}function Yn(){return Ce("PlayStation 4")}function Gu(){return Ce("Hisense")||Ce("VIDAA")}function Bc(){return Ce("SOPOpenBrowser")}function bi(){if(!nr())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Gc(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function Vu(){return Ce("Android")}function Vc(){return!!(Wn()||Xn()||ui()||Yn()||Bu()||Ce("AFT")||Ce("PC=EOS")||Ce("PC=APL")||Ce("VirginMedia")||Bc()||Ce("WPE")||$t()||Gu()||Ce("DT_STB_BCM"))}function Ce(e){return(navigator.userAgent||"").includes(e)}function R0(){return Or||(Hc||(Hc=new te(function(){Or=null})),(Or=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Or=document.createElement("video")),Hc.X(1),Or)}function Hu(e){return e?e===O.shakaMediaKeysPolyfill:!!O.shakaMediaKeysPolyfill}function P0(){var e,t,n,i,r,o,s,u,a,l,c,h,d,f;return M(function(m){switch(m.g){case 1:if(e={width:1/0,height:1/0},$t()){if(c=O.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,Z(m,15),!(h=c)){m.B(17);break}return T(m,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(Wn()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(y){ce("Tizen: Error detecting screen size, default screen size 1920x1080.")}m.B(3);break}if(ui()){e.width=1920,e.height=1080;try{n=new Windows.Media.Protection.ProtectionCapabilities,i=Windows.Media.Protection.ProtectionCapabilityResult,r=null;do r=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(r===i.maybe);r===i.probably&&(e.width=3840,e.height=2160)}catch(y){ce("Xbox: Error detecting screen size, default screen size 1920x1080.")}m.B(3);break}if(Xn()){try{o=JSON.parse(O.PalmSystem.deviceInfo),e.width=Math.max(1920,o.screenWidth),e.height=Math.max(1080,o.screenHeight)}catch(y){ce("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}m.B(3);break}if(Gu()){O.Hisense_Get4KSupportState&&O.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),m.B(3);break}if(!Yn()&&!Bu()){m.B(3);break}return s=!1,Z(m,9),T(m,O.msdk.device.getDisplayInfo(),11);case 11:u=m.h,s=u.resolution==="4K",le(m,10);break;case 9:return Q(m),Z(m,12),T(m,O.msdk.device.getDisplayInfoImmediate(),14);case 14:a=m.h,s=a.resolution==="4K",le(m,10);break;case 12:l=Q(m),ce("PlayStation: Failed to get the display info:",l);case 10:s?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),m.B(3);break;case 18:h=m.h;case 17:if(h){e.width=3840,e.height=2160,m.B(19);break}if(!(d=c)){m.B(20);break}return T(m,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:d=m.h;case 20:d&&(e.width=1920,e.height=1080);case 19:le(m,3);break;case 15:f=Q(m),si("Failed to check canDisplayType:",f);case 3:return m.return(e)}})}var Hc=null,Or=null;function ir(){}function Fe(e){if(!e)return"";if(e=he(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),O.TextDecoder&&!Yn())return e=new TextDecoder().decode(e),e.includes("�")&&si('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):i=e[n],65535>=i)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function ai(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new L(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ut(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Kc(i)}function li(e){function t(i){return n.byteLength<=i||32<=n[i]&&126>=n[i]}if(!e)return"";var n=he(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Fe(n);if(n[0]==254&&n[1]==255)return ai(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return ai(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return ai(e,!1);if(n[1]==0&&n[3]==0)return ai(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Fe(e);throw new L(2,2,2003)}function On(e){if(O.TextEncoder&&!Yn()){var t=new TextEncoder;return an(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return an(t)}function qc(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}function Kc(e){return D0.value()(e)}function Pt(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||"'"}):e||""}j("shaka.util.StringUtils",ir),ir.resetFromCharCode=function(){D0.g=void 0},ir.toUTF16=qc,ir.toUTF8=On,ir.fromBytesAutoDetect=li,ir.fromUTF16=ai,ir.fromUTF8=Fe;var D0=new Ur(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch(r){return!1}}for(var t={nc:65536};0<t.nc;t={nc:t.nc},t.nc/=2)if(e(t.nc))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.nc)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.nc));return r}}(t);return null});function xt(){}function N0(e){return e=Kc(he(e)),btoa(e)}function rr(e,t){return t=t==null?!0:t,e=N0(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function ln(e){e=O.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function or(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=O.parseInt(e.substr(2*i,2),16);return n}function ci(e){var t=he(e);e="",t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function ze(){for(var e=An.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];r instanceof Uint8Array?t.set(r,n):t.set(he(r),n),n+=r.byteLength}return t}j("shaka.util.Uint8ArrayUtils",xt),xt.concat=ze,xt.toHex=ci,xt.fromHex=or,xt.fromBase64=ln,xt.toBase64=rr,xt.toStandardBase64=N0;function gt(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Ze(e[0]);return t=new Ze(t[0]),[n.resolve(t).toString()]}t=t.map(function(s){return new Ze(s)}),n=[],e=g(e);for(var i=e.next();!i.done;i=e.next()){i=new Ze(i.value);for(var r=g(t),o=r.next();!o.done;o=r.next())n.push(i.resolve(o.value).toString())}return n}function sr(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function _0(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(s,u){var a=u;a.length!=22&&(a=rr(or(u),!1));var l=s;l.length!=22&&(l=rr(or(s),!1)),s={kty:"oct",kid:a,k:l},n.push(s),i.push(s.kid),r.push(u)}),e=JSON.stringify({keys:n});var o=JSON.stringify({kids:i});return o=[{initData:he(On(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+O.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(r)}}function br(e,t){if(t.length==1)return t[0];if(e=Ot(e,t),e!=null)return e;throw new L(2,4,4025,t)}function Ot(e,t){for(var n=g(U0[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.test(o.trim()))return o.trim()}return e==ye?"":null}function zc(e,t){var n=[];e=g(U0[e]);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())o=o.value,i.test(o.trim())&&n.push(o.trim())}return n}var ye="text",Qe={ua:"video",ha:"audio",Ka:ye,ag:"image",Zk:"application"},kA=1/15,U0={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function wn(){}function jr(e,t){return e=xe(e),t=xe(t),e.split("-")[0]==t.split("-")[0]}function ss(e,t){return e=xe(e),t=xe(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Wc(e,t){return e=xe(e),t=xe(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function xe(e){e=g(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=g(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=b0.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function O0(e,t){var n=Fr(e),i=Fr(t);return e!=n&&t!=i&&n==i}function ur(e,t){return e=xe(e),t=xe(t),t==e?4:ss(t,e)?3:Wc(t,e)?2:ss(e,t)?1:0}function Fr(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=b0.get(e)||e}function Xc(e){return e.language?xe(e.language):e.audio&&e.audio.language?xe(e.audio.language):e.video&&e.video.language?xe(e.video.language):"und"}function qu(e,t){e=xe(e);var n=new Set,i=g(t);for(t=i.next();!t.done;t=i.next())n.add(xe(t.value));for(i=g(n),t=i.next();!t.done;t=i.next())if(t=t.value,t==e)return t;for(i=g(n),t=i.next();!t.done;t=i.next())if(t=t.value,ss(t,e))return t;for(i=g(n),t=i.next();!t.done;t=i.next())if(t=t.value,Wc(t,e))return t;for(n=g(n),t=n.next();!t.done;t=n.next())if(t=t.value,ss(e,t))return t;return null}j("shaka.util.LanguageUtils",wn),wn.findClosestLocale=qu,wn.getLocaleForVariant=Xc,wn.getLocaleForText=function(e){return xe(e.language||"und")},wn.getBase=Fr,wn.relatedness=ur,wn.areSiblings=O0,wn.normalize=xe,wn.isSiblingOf=Wc,wn.isParentOf=ss,wn.areLanguageCompatible=jr,wn.areLocaleCompatible=function(e,t){return e=xe(e),t=xe(t),e==t};var b0=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function st(e){ve.call(this),this.j=xe(e),this.i=new Map,this.g=new Set,this.h=new Map}de(st,ve),p=st.prototype,p.release=function(){ve.prototype.release.call(this)},p.Lh=function(e){var t=this;this.g.clear(),e=g(e);for(var n=e.next();!n.done;n=e.next())this.g.add(xe(n.value));j0(this),e=Nr(this.g,function(i){return!t.h.has(i)}),e.length&&this.dispatchEvent(new G("unknown-locales",new Map().set("locales",e))),e=Nr(this.g,function(i){return t.h.has(i)}),e=new Map().set("locales",e.length?e:[this.j]),this.dispatchEvent(new G("locale-changed",e))},p.Ma=function(e,t,n){e=xe(e),n===void 0&&(n=Yc);var i=this.h.get(e)||new Map;return t.forEach(function(r,o){i.has(o)&&n!=Yc||i.set(o,r)}),this.h.set(e,i),j0(this),this.dispatchEvent(new G("locale-updated")),this},p.Dk=function(e){for(var t=g(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},p.resolve=function(e){var t=this.i.get(e);return t||(e=new Map().set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new G("unknown-localization",e)),"")},p.pj=function(){return this.g};function j0(e){for(var t=e.h,n=e.j,i=e.g,r=new Set,o={},s=g(i),u=s.next();!u.done;o={$c:o.$c},u=s.next()){o.$c=u.value,r.add(o.$c),r.add(Fr(o.$c)),u=Nr(t.keys(),function(l){return function(c){return O0(c,l.$c)}}(o)),u.sort();var a=g(u);for(u=a.next();!u.done;u=a.next())r.add(u.value);for(u=Nr(t.keys(),function(l){return function(c){return Fr(c)==l.$c}}(o)),u.sort(),a=g(u),u=a.next();!u.done;u=a.next())r.add(u.value)}for(r.add(n),n=[],r=g(r),u=r.next();!u.done;u=r.next())(u=t.get(u.value))&&n.push(u);for(n.reverse(),e.i.clear(),t=g(n),u=t.next();!u.done;u=t.next())u.value.forEach(function(l,c){e.i.set(c,l)});for(t=e.i.keys(),r=new Set,n=g(e.g),u=n.next();!u.done;u=n.next())u=e.h.get(u.value)||new Map,LA(u,t,r);0<r.size&&(i=new Map().set("locales",Array.from(i)).set("missing",Array.from(r)),e.dispatchEvent(new G("missing-localizations",i)))}function LA(e,t,n){t=g(t);for(var i=t.next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}j("shaka.ui.Localization",st),st.prototype.getCurrentLocales=st.prototype.pj,st.prototype.resolve=st.prototype.resolve,st.prototype.resolveDictionary=st.prototype.Dk,st.prototype.insert=st.prototype.Ma,st.prototype.changeLocale=st.prototype.Lh,st.prototype.release=st.prototype.release;var Yc=1;st.ConflictResolution={USE_OLD:0,USE_NEW:Yc},st.UNKNOWN_LOCALES="unknown-locales",st.UNKNOWN_LOCALIZATION="unknown-localization",st.MISSING_LOCALIZATIONS="missing-localizations",st.LOCALE_CHANGED="locale-changed",st.LOCALE_UPDATED="locale-updated";function Br(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Br.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function Ku(e){return e.h/(1-Math.pow(e.g,e.i))}function us(){this.h=new Br(2),this.j=new Br(5),this.g=0,this.i=128e3,this.l=16e3}us.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},us.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},us.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Ku(this.h),Ku(this.j))};function Ee(){this.g=new Du}p=Ee.prototype,p.release=function(){this.Za(),this.g=null},p.o=function(e,t,n,i){this.g&&(e=new F0(e,t,n,i),this.g.push(t,e))},p.ia=function(e,t,n,i){function r(s){o.Pa(e,t,r),n(s)}var o=this;this.o(e,t,r,i)},p.Pa=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Pa(),this.g.remove(t,r))}},p.Za=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,W(e.g[n]));for(e=g(t),t=e.next();!t.done;t=e.next())t.value.Pa();this.g.g={}}},j("shaka.util.EventManager",Ee),Ee.prototype.removeAll=Ee.prototype.Za,Ee.prototype.unlisten=Ee.prototype.Pa,Ee.prototype.listenOnce=Ee.prototype.ia,Ee.prototype.listen=Ee.prototype.o,Ee.prototype.release=Ee.prototype.release;function F0(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=RA(e,i),this.target.addEventListener(t,n,this.g)}F0.prototype.Pa=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function RA(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),PA(e)?t:t.capture||!1}function PA(e){var t=B0;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(r){t=!1}B0=t}return t||!1}var B0=void 0;function et(e){if(zu.has(e))return zu.get(e);if(O.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return zu.set(e,t),t}return O.MediaSource?(t=MediaSource.isTypeSupported(e),zu.set(e,t),t):!1}function ar(){return!!O.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var zu=new Map;function Jc(e,t){this.g=e,this.h=t}Jc.prototype.toString=function(){return"v"+this.g+"."+this.h};function He(e,t){var n=new Jc(5,0),i=G0,r=i.g,o=n.h-r.h;(0<(n.g-r.g||o)?i.i:i.h)(i.g,n,e,t)}function DA(e,t,n,i){ce([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function NA(e,t,n,i){si([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var G0=null;function as(){}as.prototype.extract=function(){},as.prototype.decode=function(){return[]},as.prototype.clear=function(){},as.prototype.getStreams=function(){return[]};function $c(){}$c.prototype.init=function(){},$c.prototype.parse=function(){return[]};function ls(){}ls.prototype.init=function(){},ls.prototype.i=function(){},ls.prototype.g=function(){},ls.prototype.j=function(){},j("shaka.media.IClosedCaptionParser",ls);function Zt(e){this.l=new $c,(e=Gr[e.toLowerCase()])&&(this.l=e()),this.h=new as,(e=Vr)&&(this.h=e())}Zt.prototype.init=function(e,t){t!==void 0&&t||(this.g(),this.l.init(e))},Zt.prototype.i=function(e){e=this.l.parse(e),e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=he(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},Zt.prototype.g=function(){this.h.clear()},Zt.prototype.j=function(){return this.h.getStreams()},j("shaka.media.ClosedCaptionParser",Zt),Zt.findDecoder=function(){return Vr},Zt.unregisterDecoder=function(){Vr=null},Zt.registerDecoder=function(e){Vr=e},Zt.findParser=function(e){return Gr[e]},Zt.unregisterParser=function(e){delete Gr[e]},Zt.registerParser=function(e,t){Gr[e]=t};var Gr={},Vr=null;function lr(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=cn,this.scroll=V0}j("shaka.text.CueRegion",lr);var cn=1;lr.units={PX:0,PERCENTAGE:cn,LINES:2};var V0="";lr.scrollMode={NONE:V0,UP:"up"};function H0(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function bn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function q0(e,t,n){if(n||(n=H0),e.length!=t.length)return!1;t=t.slice();var i={};e=g(e);for(var r=e.next();!r.done;i={Of:i.Of},r=e.next()){if(i.Of=r.value,r=t.findIndex(function(o){return function(s){return n(o.Of,s)}}(i)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function cs(e,t,n){if(n||(n=H0),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function je(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new lr,this.position=null,this.positionAlign=Xu,this.size=0,this.textAlign=hi,this.direction=ds,this.writingMode=ps,this.lineInterpretation=Yu,this.line=null,this.lineHeight="",this.lineAlign=cr,this.displayAlign=hs,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Y0,this.fontStyle=eh,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Ec:32,rows:15}}function K0(e,t){return e=new je(e,t,""),e.lineBreak=!0,e}je.prototype.clone=function(){var e=new je(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Wu(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!cs(e.nestedCues,t.nestedCues,Wu))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!cs(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}j("shaka.text.Cue",je),je.equal=Wu,je.prototype.clone=je.prototype.clone;var Xu="auto";je.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Xu};var hi="center",Zc={LEFT:"left",RIGHT:"right",CENTER:hi,START:"start",END:"end"};je.textAlign=Zc;var hs="after",z0={BEFORE:"before",CENTER:"center",AFTER:hs};je.displayAlign=z0;var ds="ltr";je.direction={HORIZONTAL_LEFT_TO_RIGHT:ds,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var ps="horizontal-tb";je.writingMode={HORIZONTAL_TOP_TO_BOTTOM:ps,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Yu=0;je.lineInterpretation={LINE_NUMBER:Yu,PERCENTAGE:1};var cr="start",Qc={CENTER:"center",START:cr,END:"end"};je.lineAlign=Qc;var W0={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};je.defaultTextColor=W0;var X0={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};je.defaultTextBackgroundColor=X0;var Y0=400;je.fontWeight={NORMAL:Y0,BOLD:700};var eh="normal",J0={NORMAL:eh,ITALIC:"italic",OBLIQUE:"oblique"};je.fontStyle=J0,je.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function ji(){}ji.prototype.destroy=function(){};function di(e,t,n){th[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,xf:t}}function Fi(e,t){for(var n=e.toLowerCase().split(";")[0],i=g([$0,ih,nh,Bi]),r=i.next();!r.done;r=i.next())if(r=th[n+"-"+r.value]){var o=r.xf(),s=o.isSupported(e,t);if(o.destroy(),s)return r.xf}return null}j("shaka.transmuxer.TransmuxerEngine",ji),ji.findTransmuxer=Fi,ji.unregisterTransmuxer=function(e,t){delete th[e.toLowerCase().split(";")[0]+"-"+t]},ji.registerTransmuxer=di,ji.prototype.destroy=ji.prototype.destroy;var th={},Bi=1,nh=2,ih=3,$0=4;ji.PluginPriority={FALLBACK:Bi,PREFERRED_SECONDARY:nh,PREFERRED:ih,APPLICATION:$0};function rh(){}function it(e,t){var n=e;return t&&!dr.includes(e)&&(n+='; codecs="'+t+'"'),n}function hr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Hr(e,t,n){var i=it(e,t);return t=hr(e,t),Fi(t)?(e=Fi(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function _A(e,t,n){var i=[t];return UA.forEach(function(r,o){var s=e[o];o=="codecs"?dr.includes(e.mimeType)||i.push('codecs="'+n+'"'):s&&i.push(r+'="'+s+'"')}),e.hdr=="PQ"&&i.push('eotf="smpte2084"'),i.join(";")}function Ju(e){return e.split(";")[0].split("/")[1]}function xn(e){var t=Q0(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1"}return e}function Jn(e){var t=[];e=g(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Q0(n.value),t.push(n[0]);return t.sort().join(",")}function In(e){return e.split(";")[0]}function Qt(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Z0(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Q0(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}j("shaka.util.MimeUtils",rh),rh.getFullTypeWithAllCodecs=hr,rh.getFullType=it;var UA=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),dr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function pi(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.G="",this.A=function(){},this.s=new Map}function fs(e){return tt[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Vr:!1}pi.prototype.destroy=function(){return this.j=this.i=null,this.s.clear(),Promise.resolve()};function OA(e,t,n,i,r){var o,s,u,a,l,c,h;return M(function(d){if(d.g==1)return T(d,Promise.resolve(),2);if(!e.i||!e.j)return d.return();if(n==null||i==null)return e.i.parseInit(he(t)),d.return();for(o=e.C?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:o},u=e.i.parseMedia(he(t),s,r),a=g(u),l=a.next();!l.done;l=a.next())c=l.value,e.A(c,r||null,s);h=u.filter(function(f){return f.startTime>=e.l&&f.startTime<e.m}),e.j.append(h),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),V(d)})}pi.prototype.remove=function(e,t){var n=this;return M(function(i){if(i.g==1)return T(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),V(i)})};function bA(e,t,n){e.l=t,e.m=n}function eg(e,t,n){if(e.G=t,t=e.s.get(t))for(var i=g(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(o){return o.endTime<=n}))&&e.j.append(r)}function tg(e,t,n){t.startTime+=n,t.endTime+=n,t=g(t.nestedCues);for(var i=t.next();!i.done;i=t.next())tg(e,i.value,n)}function jA(e,t,n,i,r){var o=n+" "+i,s=new Map;t=g(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),tg(e,a,r),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.G&&e.j.append([a]))}for(r=g(s.keys()),o=r.next();!o.done;o=r.next())for(o=o.value,e.s.has(o)||e.s.set(o,new Map),t=g(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.s.get(o).set(u,a);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}j("shaka.text.TextEngine",pi),pi.prototype.destroy=pi.prototype.destroy,pi.findParser=function(e){return tt[e]},pi.unregisterParser=function(e){delete tt[e]},pi.registerParser=function(e,t){tt[e]=t};var tt={};function FA(e,t){return e.concat(t)}function ng(){}function pr(e){return e!=null}function $n(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||i.buffer instanceof ArrayBuffer)return i;if(n.has(i))return null;var r=i.constructor==Array;if(i.constructor!=Object&&!r)return null;n.add(i);var o=r?[]:{},s;for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}var n=new WeakSet;return t(e)}function oh(e){var t={},n;for(n in e)t[n]=e[n];return t}function ig(){}function rg(e,t,n,i){var r=e.variants;if((t.length||n.length)&&(r=BA(r,t,n)),i.length){for(t=new Du,n=g(r),r=n.next();!r.done;r=n.next())r=r.value,t.push(String(r.video.width||0),r);var o=[];t.forEach(function(m,y){m=0;var v=[],A={};y=g(y);for(var S=y.next();!S.done;A={Qd:A.Qd},S=y.next())A.Qd=S.value,S=i.filter(function(x){return function(E){return x.Qd.decodingInfos[0][E]}}(A)).length,S>m?(m=S,v=[A.Qd]):S==m&&v.push(A.Qd);o.push.apply(o,W(v))}),r=o}n=new Set,t=new Set;var s=g(r);for(r=s.next();!r.done;r=s.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);n=Array.from(n).sort(function(m,y){return m.bandwidth-y.bandwidth});var u=[];for(r=new Map,n=g(n),s=n.next();!s.done;s=n.next()){s=s.value;var a=s.language+(s.channelsCount||0)+(s.audioSamplingRate||0)+s.roles.join(",")+s.label+s.groupId+s.fastSwitching,l=r.get(a)||[];if(l.length){var c=l[l.length-1],h=xn(c.codecs),d=xn(s.codecs);h!=d||s.bandwidth&&c.bandwidth&&!(s.bandwidth>c.bandwidth)||(l.push(s),u.push(s.id))}else l.push(s),u.push(s.id);r.set(a,l)}n=Array.from(t).sort(function(m,y){return m.bandwidth&&y.bandwidth?m.bandwidth-y.bandwidth:m.width-y.width}),t=ar();var f=[];for(r=new Map,n=g(n),s=n.next();!s.done;s=n.next()){if(s=s.value,a=Math.round(s.frameRate||0)+(s.hdr||"")+s.fastSwitching,l=r.get(a)||[],l.length){if(c=l[l.length-1],!t&&(h=xn(c.codecs),d=xn(s.codecs),h!==d))continue;s.width>c.width||s.height>c.height?(l.push(s),f.push(s.id)):s.width==c.width&&s.height==c.height&&(h=xn(c.codecs),d=xn(s.codecs),h!=d||s.bandwidth&&c.bandwidth&&!(s.bandwidth>c.bandwidth)||(l.push(s),f.push(s.id)))}else l.push(s),f.push(s.id);r.set(a,l)}e.variants=e.variants.filter(function(m){var y=m.audio;return m=m.video,!(y&&!u.includes(y.id)||m&&!f.includes(m.id))})}function BA(e,t,n){var i={};t=g(t);for(var r=t.next();!r.done;i={Wf:i.Wf},r=t.next())if(i.Wf=r.value,r=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.Wf)}}(i)),r.length){e=r;break}for(i={},n=g(n),t=n.next();!t.done;i={Mf:i.Mf},t=n.next())if(i.Mf=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Mf)}}(i)),t.length){e=t;break}return e}function GA(e,t,n){e.variants=e.variants.filter(function(i){return $u(i,t,n)})}function $u(e,t,n){function i(u,a,l){return u>=a&&u<=l}var r=e.video;if(r&&r.width&&r.height){var o=r.width,s=r.height;if(s>o&&(s=g([s,o]),o=s.next().value,s=s.next().value),!i(o,t.minWidth,Math.min(t.maxWidth,n.width))||!i(s,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function og(e,t,n){var i=!1;e=g(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var o=r.allowedByApplication;r.allowedByApplication=$u(r,t,n),o!=r.allowedByApplication&&(i=!0)}return i}function VA(e,t,n){return n=n===void 0?[]:n,M(function(i){return i.g==1?T(i,sg(e,t,0<t.offlineSessionIds.length,n),2):(KA(t),T(i,zA(t),0))})}function sg(e,t,n,i){var r,o;return M(function(s){if(s.g==1)return T(s,lg(t.variants,n,!1,i),2);r=null,e&&(o=e.g)&&(r=o.keySystem),t.variants=t.variants.filter(function(u){var a=HA(u,r);if(!a){var l=[];u.audio&&l.push(fg(u.audio)),u.video&&l.push(fg(u.video))}return a}),V(s)})}function HA(e,t){var n=ui(),i=Ce("Firefox")&&Vu(),r=e.video,o=r&&r.width||0,s=r&&r.height||0;if(n&&r&&(1920<o||1080<s)&&(r.codecs.includes("avc1.")||r.codecs.includes("avc3.")))return!1;if(r){if(n=gs(r.codecs),r.codecs.includes(",")){if(o=r.codecs.split(","),n=br("video",o),n=gs(n),o=br("audio",o),o=qr(o,r.mimeType),s=Hr(r.mimeType,o,"audio"),!et(s))return!1;n=[n,o].join()}if(o=Hr(r.mimeType,n,"video"),!et(o))return!1;r.codecs=n}if(r=e.audio,i&&r&&r.encrypted&&r.codecs.toLowerCase().includes("opus"))return!1;if(r){if(i=qr(r.codecs,r.mimeType),n=Hr(r.mimeType,i,"audio"),!et(n))return!1;r.codecs=i}return e.decodingInfos.some(function(u){return!(!u.supported||t&&(u=u.keySystemAccess)&&u.keySystem!=t)})}function ug(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=JSON.stringify(r),r=e[r],r instanceof Object?(r=ug(r),n.push(i+":"+r)):(r=JSON.stringify(r),n.push(i+":"+r))}return"{"+n.join(",")+"}"}function ag(e,t){var n,i,r,o,s,u,a;return M(function(l){if(l.g==1){for(n=function(c,h){if(c){var d=oh(c);return d.supported=c.supported&&h.supported,d.powerEfficient=c.powerEfficient&&h.powerEfficient,d.smooth=c.smooth&&h.smooth,h.keySystemAccess&&!d.keySystemAccess&&(d.keySystemAccess=h.keySystemAccess),d}return h},i=null,r=[],o={},s=g(t),u=s.next();!u.done;o={Bd:o.Bd,Cd:o.Cd},u=s.next())a=u.value,o.Cd=ug(a),o.Bd=gg,o.Bd[o.Cd]?i=n(i,o.Bd[o.Cd]):r.push(qA(a).then(function(c){return function(h){var d=null;h=g(h||[]);for(var f=h.next();!f.done;f=h.next())d=n(d,f.value);d&&(c.Bd[c.Cd]=d,i=n(i,d))}}(o)));return T(l,Promise.all(r),2)}i&&e.decodingInfos.push(i),V(l)})}function qA(e){var t=[""];e.video&&(t=Qt(e.video.contentType).split(","));var n=[""];e.audio&&(n=Qt(e.audio.contentType).split(","));var i=[];t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var o={},s=g(n),u=s.next();!u.done;o={Ac:o.Ac},u=s.next())u=u.value,o.Ac=$n(e),e.video&&(o.Ac.video.contentType=it(In(o.Ac.video.contentType),r)),e.audio&&(o.Ac.audio.contentType=it(In(o.Ac.audio.contentType),u)),i.push(new Promise(function(a){return function(l,c){navigator.mediaCapabilities.decodingInfo(a.Ac).then(function(h){l(h)}).catch(c)}}(o)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function lg(e,t,n,i){var r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x;return M(function(E){switch(E.g){case 1:if(e.some(function(w){return w.decodingInfos.length}))return E.return();r={},o=g(i),s=o.next();case 2:if(s.done){E.B(4);break}r.Rf=s.value,u=!1,a=g(e),l=a.next();case 5:if(l.done){E.B(7);break}c=l.value,h=cg(c,t,n).filter(function(w){return function(I){return I=I[0],(I.keySystemConfiguration&&I.keySystemConfiguration.keySystem)===w.Rf}}(r)),d=g(h),f=d.next();case 8:if(f.done){E.B(10);break}return m=f.value,T(E,ag(c,m),9);case 9:f=d.next(),E.B(8);break;case 10:c.decodingInfos.length&&(u=!0),l=a.next(),E.B(5);break;case 7:if(u)return E.return();r={Rf:r.Rf},s=o.next(),E.B(2);break;case 4:y=g(e),l=y.next();case 12:if(l.done){E.B(0);break}v=l.value,A=cg(v,t,n).filter(function(w){return w=w[0],w=w.keySystemConfiguration&&w.keySystemConfiguration.keySystem,!w||!i.includes(w)}),S=g(A),f=S.next();case 15:if(f.done){l=y.next(),E.B(12);break}return x=f.value,T(E,ag(v,x),16);case 16:f=S.next(),E.B(15)}})}function cg(e,t,n){var i=e.audio,r=e.video,o=[],s=[];if(r)for(var u=g(r.fullMimeTypes),a=u.next();!a.done;a=u.next()){a=a.value;var l=Qt(a);if(l.includes(",")&&!i){var c=l.split(","),h=In(a);l=br("video",c),c=br("audio",c),c=qr(c,h),h=Hr(h,c,"audio"),s.push({contentType:h,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=gs(l),a={contentType:Hr(In(a),l,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":a.transferFunction="srgb";break;case"PQ":a.transferFunction="pq";break;case"HLG":a.transferFunction="hlg"}r.colorGamut&&(a.colorGamut=r.colorGamut),o.push(a)}if(i)for(u=g(i.fullMimeTypes),a=u.next();!a.done;a=u.next())l=a.value,a=In(l),l=qr(Qt(l),a),a=Hr(a,l,"audio"),s.push({contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(u=[],o.length==0&&o.push(null),s.length==0&&s.push(null),o=g(o),a=o.next();!a.done;a=o.next())for(a=a.value,l=g(s),h=l.next();!h.done;h=l.next())h=h.value,c={type:n?"file":"media-source"},a&&(c.video=a),h&&(c.audio=h),u.push(c);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];e=[],n=new Map,s=g(s);for(var d=s.next();!d.done;d=s.next())o=d.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=g(n.keys()),a=o.next();!a.done;a=o.next()){for(a=a.value,l=[],h=g(u),c=h.next();!c.done;c=h.next()){c=Object.assign({},c.value);var f=n.get(a),m={keySystem:a,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t};for(f=g(f),d=f.next();!d.done;d=f.next()){if(d=d.value,d.initData&&d.initData.length){for(var y=new Set,v=g(d.initData),A=v.next();!A.done;A=v.next())y.add(A.value.initDataType);m.initDataType=d.initData[0].initDataType}d.distinctiveIdentifierRequired&&(m.distinctiveIdentifier="required"),d.persistentStateRequired&&(m.persistentState="required"),d.sessionType&&(m.sessionTypes=[d.sessionType]),i&&(m.audio?(m.audio.encryptionScheme=m.audio.encryptionScheme||d.encryptionScheme,m.audio.robustness=m.audio.robustness||d.audioRobustness):m.audio={encryptionScheme:d.encryptionScheme,robustness:d.audioRobustness},m.audio.robustness==""&&delete m.audio.robustness),r&&(m.video?(m.video.encryptionScheme=m.video.encryptionScheme||d.encryptionScheme,m.video.robustness=m.video.robustness||d.videoRobustness):m.video={encryptionScheme:d.encryptionScheme,robustness:d.videoRobustness},m.video.robustness==""&&delete m.video.robustness)}c.keySystemConfiguration=m,l.push(c)}e.push(l)}return e}function qr(e,t){return e.toLowerCase()=="flac"?bi()?"fLaC":"flac":e.toLowerCase()==="opus"?bi()&&Ju(t)=="mp4"?"Opus":"opus":e}function gs(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function KA(e){e.textStreams=e.textStreams.filter(function(t){return t=it(t.mimeType,t.codecs),fs(t)})}function zA(e){var t,n,i,r,o,s,u;return M(function(a){switch(a.g){case 1:t=[],n=g(e.imageStreams),i=n.next();case 2:if(i.done){a.B(4);break}if(r=i.value,o=r.mimeType,o=="application/mp4"&&r.codecs=="mjpg"&&(o="image/jpg"),ea.has(o)){a.B(5);break}if(s=YA.get(o),!s){ea.set(o,!1),a.B(5);break}return T(a,WA(s),7);case 7:u=a.h,ea.set(o,u);case 5:ea.get(o)&&t.push(r),i=n.next(),a.B(2);break;case 4:e.imageStreams=t,V(a)}})}function WA(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Kr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=[];s&&u.push(s),o&&u.push(o);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var h=g(t.roles),d=h.next();!d.done;d=h.next())c.add(d.value);if(n)for(h=g(n.roles),d=h.next();!d.done;d=h.next())c.add(d.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:u.join(", "),audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Zu(e){return{id:e.id,active:!1,type:ye,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function sh(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function uh(e){return e.__shaka_id||(e.__shaka_id=XA++),e.__shaka_id}function hg(e){var t=dg(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function ah(e){var t=dg(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function dg(e){var t=e.language;return{id:uh(e),active:!1,type:"",bandwidth:0,language:xe(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function ms(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Qu(e){return e.filter(function(t){return ms(t)})}function vs(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=qu(xe(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return xe(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if(e=pg(r,n),e.length)return e}else if(e=r.filter(function(a){return a.roles.length==0}),e.length)return e;return e=r.map(function(a){return a.roles}).reduce(FA,[]),e.length?pg(r,e[0]):r}function pg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function fg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}j("shaka.util.StreamUtils",ig),ig.meetsRestrictions=$u;var gg={},XA=0,ea=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),YA=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ge(){var e=this;this.A=null,this.m=!1,this.i=new us,this.H=new Ee,navigator.connection&&navigator.connection.addEventListener&&this.H.o(navigator.connection,"change",function(){if(e.m&&e.g.useNetworkInformation){e.i=new us,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.u=[],this.C=1,this.I=!1,this.h=this.s=this.g=this.j=null,this.G=new te(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.l=null}p=Ge.prototype,p.stop=function(){this.A=null,this.m=!1,this.u=[],this.C=1,this.s=this.j=null,this.h&&(this.h.disconnect(),this.h=null),this.G.stop(),this.l=null},p.release=function(){this.H.release(),this.G=null},p.init=function(e){this.A=e},p.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:O.devicePixelRatio,t=O.screen.height*n,n*=O.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:O.devicePixelRatio;t=Math.min(t,this.s.clientHeight*i),n=Math.min(n,this.s.clientWidth*i)}var r=this.u.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)});if(r.length||(r=this.u),i=r,e&&r.length!=this.u.length&&(i=this.u.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),e=lh(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=JA(e),e=g(e),r=e.next();!r.done;r=e.next())if(r=r.value,r.height>=t&&r.width>=n){t=r.height,n=r.width;break}e=lh(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=lh(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){r=e[i];for(var o=isNaN(this.C)?1:Math.abs(this.C),s=o*r.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=i+1;a<e.length;a++)if(r.bandwidth!=e[a].bandwidth){u=e[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,t>=s&&t<=o&&(n.bandwidth!=r.bandwidth||n.bandwidth==r.bandwidth&&n.video&&r.video&&(n.video.width<r.video.width||n.video.height<r.video.height))&&(n=r)}return this.j=Date.now(),n},p.enable=function(){this.m=!0},p.disable=function(){this.m=!1},p.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.j!=null&&this.m&&mg(this))},p.trySuggestStreams=function(){this.j!=null&&this.m&&mg(this)},p.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.l?this.l.getBandwidthEstimate(e):e},p.setVariants=function(e){this.u=e},p.playbackRateChanged=function(e){this.C=e},p.setMediaElement=function(e){var t=this;this.s=e,this.h&&(this.h.disconnect(),this.h=null),this.s&&"ResizeObserver"in O&&(this.h=new ResizeObserver(function(){t.G.X($A)}),this.h.observe(this.s))},p.setCmsdManager=function(e){this.l=e},p.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function mg(e){if(!e.I){var t=e.i;if(!(t.g>=t.i))return;e.I=!0,e.j-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.j<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function lh(e,t,n,i,r){if(e.l){var o=e.l.Yh();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return $u(s,t,{width:r,height:i})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function JA(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}j("shaka.abr.SimpleAbrManager",Ge),Ge.prototype.configure=Ge.prototype.configure,Ge.prototype.setCmsdManager=Ge.prototype.setCmsdManager,Ge.prototype.setMediaElement=Ge.prototype.setMediaElement,Ge.prototype.playbackRateChanged=Ge.prototype.playbackRateChanged,Ge.prototype.setVariants=Ge.prototype.setVariants,Ge.prototype.getBandwidthEstimate=Ge.prototype.getBandwidthEstimate,Ge.prototype.trySuggestStreams=Ge.prototype.trySuggestStreams,Ge.prototype.segmentDownloaded=Ge.prototype.segmentDownloaded,Ge.prototype.disable=Ge.prototype.disable,Ge.prototype.enable=Ge.prototype.enable,Ge.prototype.chooseVariant=Ge.prototype.chooseVariant,Ge.prototype.init=Ge.prototype.init,Ge.prototype.release=Ge.prototype.release,Ge.prototype.stop=Ge.prototype.stop;var $A=1;j("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),j("shaka.config.CodecSwitchingStrategy",{Kl:"reload",Ti:"smooth"});function ta(e,t,n,i){for(n=n===void 0?!0:n,i=i===void 0?!1:i,this.h=e,this.g=new Set([e]),t=t||[],e=g(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,i)}ta.prototype.add=function(e,t,n){return vg(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function vg(e,t,n,i){var r;if(!(r=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(r=e.audio&&t.audio)){r=e.audio;var o=t.audio;r=!!((!r.channelsCount||!o.channelsCount||2<r.channelsCount||2<o.channelsCount)&&r.channelsCount!=o.channelsCount||n&&!yg(r,o)||!Tg(r.roles,o.roles)||i&&r.groupId!==o.groupId)}return!(i=r)&&(i=e.video&&t.video)&&(e=e.video,t=t.video,i=!((!n||yg(e,t))&&Tg(e.roles,t.roles))),!i}ta.prototype.values=function(){return this.g.values()};function yg(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return Jn(i)}),t=t.codecs.split(",").map(function(i){return Jn(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Tg(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Eg(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new zr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Eg.prototype.create=function(e){var t=this,n=this.h=="smooth"&&ar(),i=e.filter(function(r){return vg(t.i,r,!n,t.g)});return i.length?new ta(i[0],i,!n,this.g):this.j.create(e)};function zr(e,t,n,i,r,o,s,u,a,l,c){this.A=e,this.C=t,this.i=n,this.j=i,this.G=r,this.m=o,this.h=s===void 0?"":s,this.l=u===void 0?"":u,this.s=a===void 0?"reload":a,this.u=l===void 0?!1:l,this.g=c===void 0?"":c}zr.prototype.create=function(e){var t=[];t=ZA(e,this.A);var n=e.filter(function(i){return i.primary});return t=t.length?t:n.length?n:e,e=QA(t,this.C),e.length&&(t=e),this.m&&(e=rw(t,this.m),e.length&&(t=e)),this.j&&(e=iw(t,this.j),e.length&&(t=e)),this.i&&(e=nw(t,this.i),e.length&&(t=e)),this.h&&(e=ew(t,this.h),e.length&&(t=e)),this.l&&(e=tw(t,this.l),e.length&&(t=e)),e=ow(t,this.G),e.length&&(t=e),this.g&&(e=sw(t,this.g),e.length&&(t=e)),new ta(t[0],t,!(this.s=="smooth"&&ar()),this.u)};function ZA(e,t){t=xe(t);var n=qu(t,e.map(function(i){return Xc(i)}));return n?e.filter(function(i){return n==Xc(i)}):[]}function QA(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function ew(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function tw(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function nw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function iw(e,t){return t=="AUTO"&&(t=O.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function rw(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function ow(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function sw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function uw(){this.g=ys,this.i=new Map().set(ys,2).set(Wr,1),this.h=0}function Sg(e,t,n){e.i.set(ys,n).set(Wr,t)}var Wr=0,ys=1;function Ag(e,t){var n=jn();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.s=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function wg(e){var t,n;return M(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new L(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.s),T(i,new Promise(function(r){new te(r).X(n/1e3)}),2))}e.h*=e.m,V(i)})}function jn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Le(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}Le.prototype.resolve=function(){},Le.prototype.reject=function(){};function Xe(e,t){this.promise=e,this.i=t,this.g=!1}function fr(e){return new Xe(Promise.reject(e),function(){return Promise.resolve()})}function ch(){var e=Promise.reject(new L(2,7,7001));return e.catch(function(){}),new Xe(e,function(){return Promise.resolve()})}function Xr(e){return new Xe(Promise.resolve(e),function(){return Promise.resolve()})}function xg(e){return new Xe(e,function(){return e.catch(function(){})})}Xe.prototype.abort=function(){return this.g=!0,this.i()};function Ig(e){return new Xe(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Xe.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Xe.prototype.Ta=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=aw(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new Le,s=new L(2,7,7001);return this.promise.then(n(!0),n(!1)),new Xe(o,function(){return i()})};function aw(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}j("shaka.util.AbortableOperation",Xe),Xe.prototype.chain=Xe.prototype.Ta,Xe.prototype.finally=Xe.prototype.finally,Xe.all=Ig,Xe.prototype.abort=Xe.prototype.abort,Xe.notAbortable=xg,Xe.completed=Xr,Xe.aborted=ch,Xe.failed=fr;function Yr(){this.g=[]}function gr(e,t){e.g.push(t.finally(function(){bn(e.g,t)}))}Yr.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function _e(e,t,n,i,r,o){ve.call(this),this.i=!1,this.m=new Yr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.C=i||null,this.H=r||null,this.G=o||null,this.s=this.u=!1}de(_e,ve),p=_e.prototype,p.ph=function(e){this.u=e},p.qh=function(e){this.s=e};function fi(e,t,n,i){n=n||Rg;var r=ia[e];(!r||n>=r.priority)&&(ia[e]={priority:n,xf:t,qk:i===void 0?!1:i})}function Cg(e,t){for(var n=g(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=g(e.h),i=e.next();!i.done;i=e.next())t.h.add(i.value)}p.vk=function(e){this.g.add(e)},p.Uk=function(e){this.g.delete(e)},p.Nh=function(){this.g.clear()},p.wk=function(e){this.h.add(e)},p.Vk=function(e){this.h.delete(e)},p.Oh=function(){this.h.clear()};function ut(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),ve.prototype.release.call(this),this.m.destroy()},p.request=function(e,t,n){var i=this,r=new Lg;if(this.i){var o=Promise.reject(new L(2,7,7001));return o.catch(function(){}),new na(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?$n(t.retryParameters):jn(),t.uris=$n(t.uris),o=lw(this,e,t,n);var s=o.Ta(function(){return Mg(i,e,t,n,new Ag(t.retryParameters,!1),0,null,r)}),u=s.Ta(function(d){return cw(i,e,d,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var h=u.Ta(function(d){var f=Date.now()-c,m=d.response;return m.timeMs+=l,m.timeMs+=f,d.Sj||!i.l||m.fromCache||t.method=="HEAD"||e!=Cn||i.l(m.timeMs,m.data.byteLength,kg(n)),i.G&&i.G(e,m,n),m},function(d){throw d&&(d.severity=2),d});return o=new na(h.promise,function(){return h.abort()},r),gr(this.m,o),o};function lw(e,t,n,i){function r(u){o=o.Ta(function(){return n.body&&(n.body=an(n.body)),u(t,n,i)})}var o=Xr(void 0);e.C&&r(e.C),e=g(e.g);for(var s=e.next();!s.done;s=e.next())r(s.value);return o.Ta(void 0,function(u){throw u instanceof L&&u.code==7001?u:new L(2,1,1006,u)})}function Mg(e,t,n,i,r,o,s,u){e.u&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.s&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.H&&e.H(t,i,n.uris[o],n.uris[o-1]);var a=new Ze(n.uris[o]),l=a.Zb,c=!1;l||(l=location.protocol,l=l.slice(0,-1),Nu(a,l),n.uris[o]=a.toString()),l=l.toLowerCase();var h=(l=ia[l])?l.xf:null;if(!h)return fr(new L(2,1,1e3,a));var d=l.qk,f=null,m=null,y=!1,v=!1,A;return xg(wg(r)).Ta(function(){if(e.i)return ch();A=Date.now();var S=0;n.requestStartTime=Date.now();var x=h(n.uris[o],n,t,function(I,k,R){f&&f.stop(),m&&m.X(w/1e3),e.l&&t==Cn&&(S++,n.packetNumber=S,e.l(I,k,kg(i),n),c=!0,u.g=R)},function(I){e.j&&e.j(I,n,t),v=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!d)return x;var E=n.retryParameters.connectionTimeout;E&&(f=new te(function(){y=!0,x.abort()}),f.X(E/1e3));var w=n.retryParameters.stallTimeout;return w&&(m=new te(function(){y=!0,x.abort()})),x}).Ta(function(S){f&&f.stop(),m&&m.stop(),S.timeMs==null&&(S.timeMs=Date.now()-A);var x={response:S,Sj:c};return!v&&e.j&&e.j(S.headers,n,t),x},function(S){if(f&&f.stop(),m&&m.stop(),e.A){var x=null,E=0;S instanceof L&&(x=S,S.code==1001&&(E=S.data[1])),e.A(n,x,E,y)}if(e.i)return ch();if(y&&(S=new L(1,1,1003,n.uris[o],t)),S instanceof L){if(S.code==7001)throw S;if(S.code==1010)throw s;if(S.severity==1)return x=new Map().set("error",S),x=new G("retry",x),e.dispatchEvent(x),o=(o+1)%n.uris.length,Mg(e,t,n,i,r,o,S,u)}throw S})}function cw(e,t,n,i){var r=Xr(void 0),o={};e=g(e.h);for(var s=e.next();!s.done;o={Tf:o.Tf},s=e.next())o.Tf=s.value,r=r.Ta(function(u){return function(){var a=n.response;return a.data&&(a.data=an(a.data)),u.Tf(t,a,i)}}(o));return r.Ta(function(){return n},function(u){var a=2;if(u instanceof L){if(u.code==7001)throw u;a=u.severity}throw new L(a,1,1007,u)})}function kg(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.oe)return!1}return!0}j("shaka.net.NetworkingEngine",_e),_e.prototype.request=_e.prototype.request,_e.prototype.destroy=_e.prototype.destroy,_e.makeRequest=ut,_e.defaultRetryParameters=function(){return jn()},_e.prototype.clearAllResponseFilters=_e.prototype.Oh,_e.prototype.unregisterResponseFilter=_e.prototype.Vk,_e.prototype.registerResponseFilter=_e.prototype.wk,_e.prototype.clearAllRequestFilters=_e.prototype.Nh,_e.prototype.unregisterRequestFilter=_e.prototype.Uk,_e.prototype.registerRequestFilter=_e.prototype.vk,_e.unregisterScheme=function(e){delete ia[e]},_e.registerScheme=fi,_e.prototype.setForceHTTPS=_e.prototype.qh,_e.prototype.setForceHTTP=_e.prototype.ph;function Lg(){this.g=0}_e.NumBytesRemainingClass=Lg;function na(e,t,n){Xe.call(this,e,t),this.h=n}de(na,Xe),_e.PendingRequest=na;var Cn=1;_e.RequestType={MANIFEST:0,SEGMENT:Cn,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},_e.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var Rg=3;_e.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Rg};var ia={};function Jr(e){this.g=!1,this.h=new Le,this.i=e}Jr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Pe(e,t){if(e.g)throw t instanceof L&&t.code==7003?t:new L(2,7,7003,t)}function Ts(e){for(var t=new Map,n=g(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function hh(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function De(e,t){this.h=Ut(e),this.i=t==Pg,this.g=0}p=De.prototype,p.Ea=function(){return this.g<this.h.byteLength},p.La=function(){return this.g},p.getLength=function(){return this.h.byteLength},p.$=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw gi()}},p.za=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw gi()}},p.V=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw gi()}},p.ri=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw gi()}},p.td=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw gi()}if(2097151<t)throw new L(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},p.Rb=function(e){if(this.g+e>this.h.byteLength)throw gi();var t=he(this.h,this.g,e);return this.g+=e,t},p.skip=function(e){if(this.g+e>this.h.byteLength)throw gi();this.g+=e},p.Ek=function(e){if(this.g<e)throw gi();this.g-=e},p.seek=function(e){if(0>e||e>this.h.byteLength)throw gi();this.g=e},p.Qc=function(){for(var e=this.g;this.Ea()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=he(this.h,e,this.g-e),this.g+=1,Fe(e)};function gi(){return new L(2,3,3e3)}j("shaka.util.DataViewReader",De),De.prototype.readTerminatedString=De.prototype.Qc,De.prototype.seek=De.prototype.seek,De.prototype.rewind=De.prototype.Ek,De.prototype.skip=De.prototype.skip,De.prototype.readBytes=De.prototype.Rb,De.prototype.readUint64=De.prototype.td,De.prototype.readInt32=De.prototype.ri,De.prototype.readUint32=De.prototype.V,De.prototype.readUint16=De.prototype.za,De.prototype.readUint8=De.prototype.$,De.prototype.getLength=De.prototype.getLength,De.prototype.getPosition=De.prototype.La,De.prototype.hasMoreData=De.prototype.Ea;var Pg=1;De.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Pg};function Re(){this.i=[],this.h=[],this.g=!1}p=Re.prototype,p.box=function(e,t){return e=Dg(e),this.i[e]=hw,this.h[e]=t,this},p.Y=function(e,t){return e=Dg(e),this.i[e]=Ng,this.h[e]=t,this},p.stop=function(){this.g=!0},p.parse=function(e,t,n){for(e=new De(e,0),this.g=!1;e.Ea()&&!this.g;)this.rd(0,e,t,n)},p.rd=function(e,t,n,i){var r=t.La();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.V(),s=t.V(),u=ra(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.La()+8>t.getLength()){this.g=!0;return}o=t.td(),a=!0}var l=this.h[s];if(l){var c=null,h=null;if(this.i[s]==Ng){if(i&&t.La()+4>t.getLength()){this.g=!0;return}h=t.V(),c=h>>>24,h&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(i=s-t.La(),t=0<i?t.Rb(i):new Uint8Array(0),t=new De(t,0),l({name:u,parser:this,partialOkay:n||!1,version:c,flags:h,reader:t,size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.La(),t.getLength()-t.La()))}};function fe(e){for(var t=$r(e);e.reader.Ea()&&!e.parser.g;)e.parser.rd(e.start+t,e.reader,e.partialOkay)}function Gi(e){for(var t=$r(e),n=e.reader.V(),i=0;i<n&&(e.parser.rd(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function hn(e){var t=$r(e);for(e.reader.skip(78);e.reader.Ea()&&!e.parser.g;)e.parser.rd(e.start+t,e.reader,e.partialOkay)}function dh(e){var t=$r(e);e.reader.skip(8);var n=e.reader.za();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ea()&&!e.parser.g;)e.parser.rd(e.start+t,e.reader,e.partialOkay)}function mr(e){return function(t){e(t.reader.Rb(t.reader.getLength()-t.reader.La()))}}function Dg(e){var t=0;e=g(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function ra(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function $r(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}j("shaka.util.Mp4Parser",Re),Re.headerSize=$r,Re.typeToString=ra,Re.allData=mr,Re.audioSampleEntry=dh,Re.visualSampleEntry=hn,Re.sampleDescription=Gi,Re.children=fe,Re.prototype.parseNext=Re.prototype.rd,Re.prototype.parse=Re.prototype.parse,Re.prototype.stop=Re.prototype.stop,Re.prototype.fullBox=Re.prototype.Y,Re.prototype.box=Re.prototype.box;var hw=0,Ng=1;function _g(e){var t=this;this.g=[],this.h=[],this.data=[],new Re().box("moov",fe).box("moof",fe).Y("pssh",function(n){if(!(1<n.version)){var i=he(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(ci(n.reader.Rb(16))),0<n.version){i=n.reader.V();for(var r=0;r<i;r++){var o=ci(n.reader.Rb(16));t.h.push(o)}}}}).parse(e)}function oa(e,t,n,i){var r=e.length,o=t.length+16+r;0<i&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Ut(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,1>i?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,0<i)for(u.setUint32(a,n.size),a+=4,t=g(n),n=t.next();!n.done;n=t.next())n=or(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function ph(e,t){return e=li(e),Zr(e,t)}function Zr(e,t){return e=dw(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function fh(e){return vh.has(e)?vh.get(e):""}function dw(e){function t(r,o){o=o===void 0?!1:o;for(var s=[];e[i];)if(e.charCodeAt(i)==60){if(e.charCodeAt(i+1)===47){o=i+2,i=e.indexOf(">",i),o=e.substring(o,i);var u=o.indexOf(r);if(u==-1){var a=r.indexOf(".");0<a&&(u=o.indexOf(r.substring(0,a)))}if(u==-1)throw r=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(r.length-1)+"\nColumn: "+(r[r.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}else if(e.charCodeAt(i+1)===33){if(e.charCodeAt(i+2)==45){for(;i!==-1&&(e.charCodeAt(i)!==62||e.charCodeAt(i-1)!=45||e.charCodeAt(i-2)!=45||i==-1);)i=e.indexOf(">",i+1);i===-1&&(i=e.length)}else if(e.charCodeAt(i+2)===91&&e.charCodeAt(i+8)===91&&e.substr(i+3,5).toLowerCase()==="cdata"){u=e.indexOf("]]>",i),u==-1?(s.push(e.substr(i+9)),i=e.length):(s.push(e.substring(i+9,u)),i=u+3);continue}i++;continue}e:{a=o,i++;var l=n(),c={};for(u=[];e.charCodeAt(i)!==62&&e[i];){var h=e.charCodeAt(i);if(64<h&&91>h||96<h&&123>h){h=n();for(var d=e.charCodeAt(i);d&&d!==39&&d!==34&&!(64<d&&91>d||96<d&&123>d)&&d!==62;)i++,d=e.charCodeAt(i);var f=i+1;if(i=e.indexOf(e[i],f),f=e.slice(f,i),d===39||d===34){if(i===-1){for(a={tagName:l,attributes:c,children:u,parent:null},l=0;l<u.length;l++)typeof u[l]!="string"&&(u[l].parent=a);u=a;break e}}else f=null,i--;h.startsWith("xmlns:")&&vh.set(f,h.split(":")[1]),l==="tt"&&h==="xml:space"&&f==="preserve"&&(a=!0),c[h]=f}i++}for(e.charCodeAt(i-1)!==47?(i++,u=t(l,a)):i++,a={tagName:l,attributes:c,children:u,parent:null},l=u.length,c=0;c<l;c++)h=u[c],typeof h!="string"?h.parent=a:c==l-1&&h=="\n"&&u.pop();u=a}if(s.push(u),typeof u=="string")break;u.tagName[0]==="?"&&u.children&&(s.push.apply(s,W(u.children)),u.children=[])}else u=i,i=e.indexOf("<",i)-1,i===-2&&(i=e.length),u=e.slice(u,i+1),o?0<u.length&&s.push(u):(s.length&&u.length==1&&u[0]=="\n"||0<u.trim().length)&&s.push(u),i++;return s}function n(){for(var r=i;"\r\n	>/= ".indexOf(e[i])===-1&&e[i];)i++;return e.slice(r,i)}var i=0;return t("")}function sa(e){return typeof e=="string"}function Ug(e){var t=[];if(!e.children)return[];e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Ue(e,t){var n=[];if(!e.children)return[];e=g(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function nt(e){return typeof e=="string"?Pt(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Pt(e))}function Mn(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=nt(e))&&(e=e.trim()),e):null}function kn(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=g(e.children);for(var i=e.next();!i.done;i=e.next())kn(i.value,t,n)}return n}function Ln(e,t){return e=Ue(e,t),e.length!=1?null:e[0]}function mi(e,t,n){return e=Og(e,t,n),e.length!=1?null:e[0]}function Te(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r==null?i:r}function vi(e,t,n){return t=fh(t),e.attributes[t+":"+n]||null}function Og(e,t,n){t=fh(t);var i=[];if(e.children){e=g(e.children);for(var r=e.next();!r.done;r=e.next())(r=r.value)&&r.tagName===t+":"+n&&i.push(r)}return i}function Zn(e,t,n){t=g(t);for(var i=t.next();!i.done;i=t.next())if(i=vi(e,i.value,n))return i;return null}function Vi(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Qn(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function ua(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function aa(e){return e=Number(e),e%1===0?e:null}function yi(e){return e=Number(e),e%1===0&&0<e?e:null}function It(e){return e=Number(e),e%1===0&&0<=e?e:null}function la(e){return e=Number(e),isNaN(e)?null:e}function gh(e){return e?e.toLowerCase()==="true":!1}function pw(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ca(e){var t=[];e=Pt(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=g(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),o=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,position:o?Number(o[1])-1:null,pc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].pc=n.slice(1))}return t}function bg(e,t){var n=ca(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.pc)?jg(e[n],r,i,Mn(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(W(t.children))))}}function jg(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function mh(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var i=document.createElement(e.tagName),r;for(r in e.attributes)i.setAttribute(r,e.attributes[r]);if(t&&e.parent&&e.parent.tagName!="?xml"&&mh(e.parent,!0,!1).appendChild(i),n)for(e=g(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=mh(t,!1,!0),i.appendChild(n);return i}var vh=new Map([]);function ha(e){var t=this;this.G=e,this.J=new Set,this.m=this.u=null,this.ka=this.aa=!1,this.K=0,this.g=null,this.C=new Ee,this.i=new Map,this.A=new Map,this.l=new Le,this.h=null,this.s=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.W=new Map,this.ea=new Map,this.M=new te(function(){return xw(t)}),this.P=!1,this.O=[],this.S=!1,this.L=new te(function(){Mw(t)}),this.l.catch(function(){}),this.j=new Jr(function(){return fw(t)}),this.Z=!1,this.H=this.I=null}p=ha.prototype,p.destroy=function(){return this.j.destroy()};function fw(e){return M(function(t){switch(t.g){case 1:return e.C.release(),e.C=null,e.l.reject(),e.L.stop(),e.L=null,e.M.stop(),e.M=null,T(t,Xg(e),2);case 2:if(!e.m){t.B(3);break}return Z(t,4),T(t,e.m.setMediaKeys(null),6);case 6:le(t,5);break;case 4:Q(t);case 5:e.m=null;case 3:e.g=null,e.J.clear(),e.u=null,e.A=new Map,e.h=null,e.s=function(){},e.G=null,e.Z=!1,e.I=null,V(t)}})}p.configure=function(e){this.h=e,this.L&&this.L.wa(this.h.updateExpirationTime)};function gw(e,t,n){return e.ka=!0,e.A=new Map,e.P=n,Bg(e,t)}function Fg(e,t,n){e.A=new Map,n=g(n);for(var i=n.next();!i.done;i=n.next())e.A.set(i.value,{initData:null,initDataType:null});for(n=g(e.h.persistentSessionsMetadata),i=n.next();!i.done;i=n.next())i=i.value,e.A.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.P=0<e.A.size,Bg(e,t)}function mw(e,t,n,i,r,o){var s=new Map;return r={audioCapabilities:r,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,r),qg(e,s,[])}function Bg(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S;return M(function(x){if(x.g==1){if(n=Aw(e))for(i=g(t),r=i.next();!r.done;r=i.next())o=r.value,o.video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for(s=t.some(function(E){return!!(E.video&&E.video.drmInfos.length||E.audio&&E.audio.drmInfos.length)}),s||(u=Ts(e.h.servers),Lw(t,u)),a=new Set,l=g(t),r=l.next();!r.done;r=l.next())for(c=r.value,h=Yg(c),d=g(h),f=d.next();!f.done;f=d.next())m=f.value,a.add(m);for(y=g(a),f=y.next();!f.done;f=y.next())v=f.value,Rw(v,Ts(e.h.servers),Ts(e.h.advanced||{}),e.h.keySystemsMapping);return T(x,lg(t,e.P,e.Z,e.h.preferredKeySystems),2)}return Pe(e.j),A=s||Object.keys(e.h.servers).length,A?(S=qg(e,void 0,t),x.return(s?S:S.catch(function(){}))):(e.aa=!0,x.return(Promise.resolve()))})}function Gg(e){var t;return M(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.I){n.B(2);break}return T(n,e.I,3);case 3:return Pe(e.j),n.return();case 2:return Z(n,4),e.I=e.m.setMediaKeys(e.u),T(n,e.I,6);case 6:le(n,5);break;case 4:t=Q(n),e.s(new L(2,6,6003,t.message));case 5:Pe(e.j),V(n)}})}function vw(e,t){return M(function(n){if(n.g==1)return T(n,Gg(e),2);Es(e,t.initDataType,he(t.initData)),V(n)})}p.ac=function(e){var t=this;return M(function(n){if(n.g==1)return t.u?(t.m=e,t.C.ia(t.m,"play",function(){for(var i=g(t.O),r=i.next();!r.done;r=i.next())Th(t,r.value);t.S=!0,t.O=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.C.o(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Xg(t)}),t.H=t.g&&t.g.initData.find(function(i){return 0<i.initData.length})||null,t.H||t.g.keySystem!=="com.apple.fps"||t.A.size?T(n,Gg(t),2):n.B(2)):(t.C.ia(e,"encrypted",function(){t.s(new L(2,6,6010))}),n.return());Vg(t).catch(function(){}),t.H||t.A.size||t.h.parseInbandPsshEnabled||t.C.o(t.m,"encrypted",function(i){return vw(t,i)}),V(n)})};function yw(e){var t,n,i,r,o;return M(function(s){switch(s.g){case 1:if(!e.u||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.B(2);break}return t=ut([e.g.serverCertificateUri],e.h.retryParameters),Z(s,3),n=e.G.hc.request(5,t),T(s,n.promise,5);case 5:i=s.h,e.g.serverCertificate=he(i.data),le(s,4);break;case 3:throw r=Q(s),new L(2,6,6017,r);case 4:if(e.j.g)return s.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?s.return():(Z(s,6),T(s,e.u.setServerCertificate(e.g.serverCertificate),8));case 8:le(s,0);break;case 6:throw o=Q(s),new L(2,6,6004,o.message)}})}function Tw(e,t){var n,i,r;return M(function(o){if(o.g==1)return T(o,zg(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(i=[],(r=e.i.get(n))&&(r.Db=new Le,i.push(r.Db)),i.push(n.remove()),T(o,Promise.all(i),3)):o.return();e.i.delete(n),V(o)})}function Vg(e){var t,n,i,r,o;return M(function(s){if(s.g==1)return e.A.size?(e.A.forEach(function(u,a){zg(e,a,u)}),T(s,e.l,3)):s.B(2);if(s.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&kw(e))return s.return(e.l);e.l=new Le,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=g(n),r=i.next();!r.done;r=i.next())o=r.value,Es(e,o.initDataType,o.initData);return Ss(e)&&e.l.resolve(),s.return(e.l)})}function Es(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var i=e.i.values();i=g(i);for(var r=i.next();!r.done;r=i.next())if(Oi(n,r.value.initData))return}0<e.i.size&&Ss(e)&&(e.l.resolve(),e.l=new Le,e.l.catch(function(){})),ww(e,t,n,e.g.sessionType)}}function Hg(e){return e=e.i.keys(),e=Nc(e,function(t){return t.sessionId}),Array.from(e)}p.Hg=function(){var e=this,t=this.i.keys();return t=Nc(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},p.Xd=function(){var e=1/0,t=this.i.keys();t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},p.Xe=function(){return hh(this.ea)};function qg(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m,y,v,A;return M(function(S){switch(S.g){case 1:if(i=new Map,n.length){r=Ew(e,n,i),S.B(2);break}return T(S,Sw(e,t),3);case 3:r=S.h;case 2:if(o=r,!o)throw new L(2,6,6001);for(Pe(e.j),Z(S,4),e.J.clear(),s=o.getConfiguration(),u=s.audioCapabilities||[],a=s.videoCapabilities||[],l=g(u),c=l.next();!c.done;c=l.next())h=c.value,e.J.add(h.contentType.toLowerCase());for(d=g(a),c=d.next();!c.done;c=d.next())f=c.value,e.J.add(f.contentType.toLowerCase());if(n.length){var x=o.keySystem,E=i.get(o.keySystem),w=[],I=[],k=[],R=[],D=[],P=new Set,C=new Set;Jg(E,w,I,R,k,D,P,C);var N=e.P?"persistent-license":"temporary";for(x={keySystem:x,encryptionScheme:w[0],licenseServerUri:I[0],distinctiveIdentifierRequired:E[0].distinctiveIdentifierRequired,persistentStateRequired:E[0].persistentStateRequired,sessionType:E[0].sessionType||N,audioRobustness:E[0].audioRobustness||"",videoRobustness:E[0].videoRobustness||"",serverCertificate:R[0],serverCertificateUri:k[0],initData:D,keyIds:P},0<C.size&&(x.keySystemUris=C),E=g(E),C=E.next();!C.done;C=E.next())C=C.value,C.distinctiveIdentifierRequired&&(x.distinctiveIdentifierRequired=C.distinctiveIdentifierRequired),C.persistentStateRequired&&(x.persistentStateRequired=C.persistentStateRequired);E=x}else E=o.keySystem,C=t.get(o.keySystem),x=[],w=[],I=[],k=[],R=[],D=new Set,Jg(C.drmInfos,x,w,k,I,R,D),E={keySystem:E,encryptionScheme:x[0],licenseServerUri:w[0],distinctiveIdentifierRequired:C.distinctiveIdentifier=="required",persistentStateRequired:C.persistentState=="required",sessionType:C.sessionTypes[0]||"temporary",audioRobustness:(C.audioCapabilities?C.audioCapabilities[0].robustness:"")||"",videoRobustness:(C.videoCapabilities?C.videoCapabilities[0].robustness:"")||"",serverCertificate:k[0],serverCertificateUri:I[0],initData:R,keyIds:D};if(e.g=E,!e.g.licenseServerUri)throw new L(2,6,6012,e.g.keySystem);return T(S,o.createMediaKeys(),6);case 6:if(m=S.h,Pe(e.j),e.u=m,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.u)){S.B(7);break}return Z(S,8),T(S,e.u.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(y=S.h,y!="usable")throw new L(2,6,6018);Pe(e.j),le(S,7,4);break;case 8:throw v=Q(S,4),v instanceof L?v:new L(2,6,6019,v.message);case 7:return e.aa=!0,T(S,yw(e),11);case 11:Pe(e.j),le(S,0);break;case 4:throw A=Q(S),Pe(e.j,A),e.g=null,e.J.clear(),A instanceof L?A:new L(2,6,6002,A.message)}})}function Ew(e,t,n){for(var i=g(t),r=i.next();!r.done;r=i.next()){var o=g(Yg(r.value));for(r=o.next();!r.done;r=o.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(n.size==1&&n.has(""))throw new L(2,6,6e3);for(i={},e=g(e.h.preferredKeySystems),r=e.next();!r.done;i={Sf:i.Sf},r=e.next())for(i.Sf=r.value,o=g(t),r=o.next();!r.done;r=o.next())if(r=r.value.decodingInfos.find(function(l){return function(c){return c.supported&&c.keySystemAccess!=null&&c.keySystemAccess.keySystem==l.Sf}}(i)))return r.keySystemAccess;for(e=g([!0,!1]),r=e.next();!r.done;r=e.next())for(i=r.value,o=g(t),r=o.next();!r.done;r=o.next()){var s=g(r.value.decodingInfos);for(r=s.next();!r.done;r=s.next()){var u=r.value;if(u.supported&&u.keySystemAccess){r=n.get(u.keySystemAccess.keySystem);var a=g(r);for(r=a.next();!r.done;r=a.next())if(!!r.value.licenseServerUri==i)return u.keySystemAccess}}}return null}function Sw(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v;return M(function(A){switch(A.g){case 1:if(t.size==1&&t.has(""))throw new L(2,6,6e3);for(i=g(t.values()),r=i.next();!r.done;r=i.next())o=r.value,o.audioCapabilities.length==0&&delete o.audioCapabilities,o.videoCapabilities.length==0&&delete o.videoCapabilities;s=g(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){A.B(4);break}if(a=u.value,!t.has(a)){A.B(3);break}return l=t.get(a),Z(A,6),T(A,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return n=A.h,A.return(n);case 6:Q(A);case 7:Pe(e.j);case 3:u=s.next(),A.B(2);break;case 4:c=g([!0,!1]),h=c.next();case 9:if(h.done){A.B(11);break}d=h.value,f=g(t.keys()),u=f.next();case 12:if(u.done){h=c.next(),A.B(9);break}if(m=u.value,y=t.get(m),v=y.drmInfos.some(function(S){return!!S.licenseServerUri}),v!=d){A.B(13);break}return Z(A,15),T(A,navigator.requestMediaKeySystemAccess(m,[y]),17);case 17:return n=A.h,A.return(n);case 15:Q(A);case 16:Pe(e.j);case 13:u=f.next(),A.B(12);break;case 11:return A.return(n)}})}function Aw(e){return e=Ts(e.h.clearKeys),e.size==0?null:_0(e)}function yh(e){Ss(e)&&e.l.resolve()}function Kg(e,t){new te(function(){t.loaded=!0,yh(e)}).X(Dw)}function zg(e,t,n){var i,r,o,s,u,a,l;return M(function(c){switch(c.g){case 1:try{i=e.u.createSession("persistent-license")}catch(h){return r=new L(2,6,6005,h.message),e.s(r),c.return(Promise.reject(r))}return e.C.o(i,"message",function(h){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.S?e.O.push(h):Th(e,h)}),e.C.o(i,"keystatuseschange",function(h){return Wg(e,h)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Zg:1/0,Db:null,type:"persistent-license"},e.i.set(i,o),Z(c,2),T(c,i.load(t),4);case 4:return s=c.h,Pe(e.j),s||(e.i.delete(i),u=e.h.persistentSessionOnlinePlayback?1:2,e.s(new L(u,6,6013)),o.loaded=!0),Kg(e,o),yh(e),c.return(i);case 2:a=Q(c),Pe(e.j,a),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.s(new L(l,6,6005,a.message)),o.loaded=!0,yh(e);case 3:return c.return(Promise.resolve())}})}function ww(e,t,n,i){try{var r=e.u.createSession(i)}catch(o){e.s(new L(2,6,6005,o.message));return}e.C.o(r,"message",function(o){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.S?e.O.push(o):Th(e,o)}),e.C.o(r,"keystatuseschange",function(o){return Wg(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Zg:1/0,Db:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(o){t=o,o instanceof L||(t=new L(2,6,6016,o)),e.s(t);return}e.h.logLicenseExchange&&rr(n),r.generateRequest(t,n).catch(function(o){if(!e.j.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.s(new L(2,6,6006,o.message,o,u))}})}function Th(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y;M(function(v){switch(v.g){case 1:if(n=t.target,e.h.logLicenseExchange&&rr(t.message),i=e.i.get(n),r=e.g.licenseServerUri,o=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(r=o.individualizationServer),s=ut([r],e.h.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),o&&o.headers)for(u in o.headers)s.headers[u]=o.headers[u];if(jc(e.g.keySystem)){var A=ai(s.body,!0,!0);if(A.includes("PlayReadyKeyMessage")){A=Zr(A,"PlayReadyKeyMessage");var S=kn(A,"HttpHeader");S=g(S);for(var x=S.next();!x.done;x=S.next()){var E=x.value;x=kn(E,"name")[0],E=kn(E,"value")[0],s.headers[nt(x)]=nt(E)}A=kn(A,"Challenge")[0],s.body=ln(nt(A))}else s.headers["Content-Type"]="text/xml; charset=utf-8"}return a=Date.now(),Z(v,2),c=e.G.hc.request(2,s),T(v,c.promise,4);case 4:l=v.h,le(v,3);break;case 2:return h=Q(v),e.j.g||(d=new L(2,6,6007,h),e.i.size==1?(e.s(d),i&&i.Db&&i.Db.reject(d)):(i&&i.Db&&i.Db.reject(d),e.i.delete(n),Ss(e)&&(e.l.resolve(),e.M.X(.1)))),v.return();case 3:return e.j.g?v.return():(e.K+=(Date.now()-a)/1e3,e.h.logLicenseExchange&&rr(l.data),Z(v,5),T(v,n.update(l.data),7));case 7:le(v,6);break;case 5:return f=Q(v),m=new L(2,6,6008,f.message),e.s(m),i&&i.Db&&i.Db.reject(m),v.return();case 6:if(e.j.g)return v.return();y=new G("drmsessionupdate"),e.G.onEvent(y),i&&(i.Db&&i.Db.resolve(),Kg(e,i)),V(v)}})}function Wg(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(jc(e.g.keySystem)&&s.byteLength==16&&(rs()||Yn())){u=Ut(s);var a=u.getUint32(0,!0),l=u.getUint16(4,!0),c=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,c,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(i=!0),s=ci(s).slice(0,32),e.W.set(s,o)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Db&&(e.i.delete(t),t.close().catch(function(){})),Ss(e)&&(e.l.resolve(),e.M.X(Nw))}function xw(e){var t=e.W,n=e.ea;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.s(new L(2,6,6014)),e.G.vf(hh(n))}function Iw(){var e,t,n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D;return M(function(P){if(P.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],i={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},r=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],o=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],s={videoCapabilities:r,audioCapabilities:o,initDataTypes:["cenc","sinf","skd","keyids"]},u=[null,"cenc","cbcs","cbcs-1-9"],a=new Map,l=function(C,N){var _,U,B,H,F,X,me,we;return M(function(Ne){switch(Ne.g){case 1:return Z(Ne,2),T(Ne,N.createMediaKeys(),4);case 4:le(Ne,3);break;case 2:return Q(Ne),Ne.return();case 3:U=(_=N.getConfiguration().sessionTypes)?_.includes("persistent-license"):!1,os()&&(U=!1),B=N.getConfiguration().videoCapabilities,H=N.getConfiguration().audioCapabilities,F={persistentState:U,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},a.has(C)&&a.get(C)?F=a.get(C):a.set(C,F),(X=B[0].encryptionScheme)&&!F.encryptionSchemes.includes(X)&&F.encryptionSchemes.push(X),(me=B[0].robustness)&&!F.videoRobustnessLevels.includes(me)&&F.videoRobustnessLevels.push(me),(we=H[0].robustness)&&!F.audioRobustnessLevels.includes(we)&&F.audioRobustnessLevels.push(we),V(Ne)}})},c=function(C,N,_,U){var B,H,F,X,me,we,Ne,Me,Et;return M(function(qe){switch(qe.g){case 1:for(Z(qe,2),B=$n(s),H=g(B.videoCapabilities),F=H.next();!F.done;F=H.next())X=F.value,X.encryptionScheme=N,X.robustness=_;for(me=g(B.audioCapabilities),F=me.next();!F.done;F=me.next())we=F.value,we.encryptionScheme=N,we.robustness=U;return Ne=$n(B),Ne.persistentState="required",Ne.sessionTypes=["persistent-license"],Me=[Ne,B],T(qe,navigator.requestMediaKeySystemAccess(C,Me),4);case 4:return Et=qe.h,T(qe,l(C,Et),5);case 5:le(qe,0);break;case 2:Q(qe),V(qe)}})},h=function(C,N,_,U){var B,H,F;return M(function(X){switch(X.g){case 1:return Z(X,2),B={type:"media-source",video:{contentType:r[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:o[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:C,video:{encryptionScheme:N,robustness:_},audio:{encryptionScheme:N,robustness:U}}},T(X,navigator.mediaCapabilities.decodingInfo(B),4);case 4:return H=X.h,F=H.keySystemAccess,T(X,l(C,F),5);case 5:le(X,0);break;case 2:Q(X),V(X)}})},d=g(e),f=d.next();!f.done;f=d.next())m=f.value,a.set(m,null);for(y=[],v=g(u),A=v.next();!A.done;A=v.next())for(S=A.value,x=g(e),f=x.next();!f.done;f=x.next())E=f.value,E==="org.w3.clearkey"&&bi()||(y.push(c(E,S,"","")),y.push(h(E,S,"","")));for(w=g(e),f=w.next();!f.done;f=w.next())for(I=f.value,k=g(i[I]||[]),R=k.next();!R.done;R=k.next())D=R.value,y.push(c(I,null,D,"")),y.push(c(I,null,"",D)),y.push(h(I,null,D,"")),y.push(h(I,null,"",D));return T(P,Promise.all(y),2)}return P.return(hh(a))})}function Cw(e){var t;return M(function(n){if(n.g==1)return t=new Promise(function(i,r){new te(r).X(Pw)}),Z(n,2),T(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return le(n,0);Q(n),V(n)})}function Xg(e){var t;return M(function(n){return t=Array.from(e.i.entries()),e.i.clear(),T(n,Promise.all(t.map(function(i){i=g(i);var r=i.next().value,o=i.next().value;return M(function(s){if(s.g==1)return Z(s,2),e.ka||e.A.has(r.sessionId)||o.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?T(s,Cw(r),5):T(s,r.remove(),5);if(s.g!=2)return le(s,0);Q(s),V(s)})})),0)})}function Yg(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Mw(e){e.i.forEach(function(t,n){var i=t.Zg,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.G.onExpirationUpdated(n.sessionId,r),t.Zg=r)})}function Ss(e){return e=e.i.values(),SA(e,function(t){return t.loaded})}function kw(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.W.get(n.value)!=="usable")return!1;return!0}function Lw(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Jg(e,t,n,i,r,o,s,u){var a=[],l={};e=g(e);for(var c=e.next();!c.done;l={Da:l.Da},c=e.next()){if(l.Da=c.value,t.includes(l.Da.encryptionScheme)||t.push(l.Da.encryptionScheme),l.Da.keySystem=="org.w3.clearkey"&&l.Da.licenseServerUri.startsWith("data:application/json;base64,")?a.includes(l.Da.licenseServerUri)||a.push(l.Da.licenseServerUri):n.includes(l.Da.licenseServerUri)||n.push(l.Da.licenseServerUri),r.includes(l.Da.serverCertificateUri)||r.push(l.Da.serverCertificateUri),l.Da.serverCertificate&&(i.some(function(f){return function(m){return Oi(m,f.Da.serverCertificate)}}(l))||i.push(l.Da.serverCertificate)),l.Da.initData){c={};for(var h=g(l.Da.initData),d=h.next();!d.done;c={De:c.De},d=h.next())c.De=d.value,o.some(function(f){return function(m){var y=f.De;return m.keyId&&m.keyId==y.keyId?!0:m.initDataType==y.initDataType&&Oi(m.initData,y.initData)}}(c))||o.push(c.De)}if(l.Da.keyIds)for(c=g(l.Da.keyIds),h=c.next();!h.done;h=c.next())s.add(h.value);if(l.Da.keySystemUris&&u)for(c=g(l.Da.keySystemUris),h=c.next();!h.done;h=c.next())u.add(h.value)}if(a.length==1)n.push(a[0]);else if(0<a.length){for(t=[],a=g(a),i=a.next();!i.done;i=a.next())i=O.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,W(i.keys));a=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+O.btoa(a))}}function Rw(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(r)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),O.cast&&O.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Pw=1,Dw=5,Nw=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Eh(e,t,n){this.h=e,this.i=t,this.g=n}function $g(e,t){return M(function(n){if(n.g==1)return T(n,VA(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||rg(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(ms))throw new L(2,4,4032);return n.return(Zg(e,t))})}function Zg(e,t){var n=og(t.variants,e.h.restrictions,e.i);if(t){var i=e.g?e.g.g:null;if(i&&e.g.u)for(var r=g(t.variants),o=r.next();!o.done;o=r.next())o=o.value,Sh(e,i.keySystem,o.video),Sh(e,i.keySystem,o.audio);Qg(e,t)}return n}function Sh(e,t,n){if(n){n=g(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=g(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,Es(e.g,r.initDataType,r.initData)}}}function Qg(e,t){e=e.g?e.g.Xe():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,r=!1,o=new Set,s=new Set;t=g(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var a=[];u.audio&&a.push(u.audio),u.video&&a.push(u.video),a=g(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.keyIds.size){l=g(l.keyIds);for(var c=l.next();!c.done;c=l.next()){c=c.value;var h=e[n?"00":c];h?em.includes(h)&&s.add(h):o.add(c)}}u.allowedByApplication?u.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new L(2,4,4012,e)}var em=["output-restricted","internal-error"];function As(){}function tm(e,t){if(t){var n=Rn[t.toLowerCase()];if(n)return n}throw new L(2,4,4e3,e,t)}j("shaka.media.ManifestParser",As),As.unregisterParserByMime=function(e){delete Rn[e]},As.registerParserByMime=function(e,t){Rn[e]=t},As.registerParserByExtension=function(){He("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},As.AccessibilityPurpose={bm:"visually impaired",wl:"hard of hearing"};var Rn={};function _w(e,t){function n(){o=!0}function i(c){u.push(c),fe(c)}var r=e=he(e),o=!1,s,u=[],a=[];if(new Re().box("moov",i).box("trak",i).box("mdia",i).box("minf",i).box("stbl",i).Y("stsd",function(c){s=c,u.push(c),Gi(c)}).Y("encv",n).Y("enca",n).Y("dvav",function(c){a.push({box:c,Bb:1701733238})}).Y("dva1",function(c){a.push({box:c,Bb:1701733238})}).Y("dvh1",function(c){a.push({box:c,Bb:1701733238})}).Y("dvhe",function(c){a.push({box:c,Bb:1701733238})}).Y("hev1",function(c){a.push({box:c,Bb:1701733238})}).Y("hvc1",function(c){a.push({box:c,Bb:1701733238})}).Y("avc1",function(c){a.push({box:c,Bb:1701733238})}).Y("avc3",function(c){a.push({box:c,Bb:1701733238})}).Y("ac-3",function(c){a.push({box:c,Bb:1701733217})}).Y("ec-3",function(c){a.push({box:c,Bb:1701733217})}).Y("ac-4",function(c){a.push({box:c,Bb:1701733217})}).Y("mp4a",function(c){a.push({box:c,Bb:1701733217})}).parse(e),o)return e;if(a.length==0||!s)throw ci(e),new L(2,3,3019,t);a.reverse(),t=g(a);for(var l=t.next();!l.done;l=t.next())l=l.value,r=Uw(r,s,l.box,u,l.Bb);return rs()&&Gc()?(t=new Uint8Array(e.byteLength+r.byteLength),t.set(r),t.set(e,r.byteLength),t):r}function Uw(e,t,n,i,r){var o=Ow.value(),s=e.subarray(n.start,n.start+n.size),u=Ut(s),a=new Uint8Array(n.size+o.byteLength);for(a.set(s,0),s=Ut(a),s.setUint32(4,r),a.set(o,n.size),r=u.getUint32(4),s.setUint32(n.size+16,r),nm(a,0,a.byteLength),r=new Uint8Array(e.byteLength+a.byteLength),n=ui()||rs()?n.start:n.start+n.size,o=e.subarray(n),r.set(e.subarray(0,n)),r.set(a,n),r.set(o,n+a.byteLength),e=g(i),i=e.next();!i.done;i=e.next())i=i.value,nm(r,i.start,i.size+a.byteLength);return a=Ut(r,t.start),t=$r(t),e=a.getUint32(t),a.setUint32(t,e+1),r}function nm(e,t,n){e=Ut(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Ow=new Ur(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function bt(e,t,n,i,r,o,s){this.R=e,this.$a=t,this.Ja=n,this.nd=i===void 0?null:i,this.timescale=r===void 0?null:r,this.g=o===void 0?null:o,this.aesKey=s===void 0?null:s,this.mimeType=this.codecs=null}bt.prototype.Ib=function(){return this.$a},bt.prototype.Fb=function(){return this.Ja},bt.prototype.Zd=function(){return this.g};function Ah(e,t){return e===t?!0:e&&t?e.Ib()==t.Ib()&&e.Fb()==t.Fb()&&cs(e.R().sort(),t.R().sort())&&Oi(e.Zd(),t.Zd()):e==t}j("shaka.media.InitSegmentReference",bt),bt.prototype.getEndByte=bt.prototype.Fb,bt.prototype.getStartByte=bt.prototype.Ib;function ne(e,t,n,i,r,o,s,u,a,l,c,h,d,f,m,y){for(l=l===void 0?[]:l,f=f===void 0?Hi:f,this.startTime=e,this.i=this.endTime=t,this.G=n,this.$a=i,this.Ja=r,this.ma=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=l,this.tilesLayout=c===void 0?"":c,this.A=h===void 0?null:h,this.h=d===void 0?null:d,this.status=f,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=m===void 0?null:m,this.u=null,this.j=0,this.s=y===void 0?!1:y,this.kf=this.oe=!1,e=g(this.g),t=e.next();!t.done;t=e.next())t.value.li();this.s&&this.g.length&&this.g[this.g.length-1].ki(),this.C=this.mimeType=this.codecs=null}p=ne.prototype,p.R=function(){return this.G()},p.getStartTime=function(){return this.startTime},p.rj=function(){return this.endTime},p.Ib=function(){return this.$a},p.Fb=function(){return this.Ja},p.Lj=function(){return this.tilesLayout},p.Kj=function(){return this.A},p.tc=function(){return this.status},p.ik=function(){this.status=rm},p.Wg=function(){this.preload=!0},p.$j=function(){return this.preload},p.nf=function(){this.l=!1},p.Xj=function(){return this.l},p.li=function(){this.oe=!0},p.Zj=function(){return this.oe},p.ki=function(){this.kf=!0},p.Yj=function(){return this.kf},p.ji=function(){this.m=!0},p.Tj=function(){return this.m},p.Fi=function(e){this.u=e},p.Jj=function(){return this.u},p.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},p.wh=function(e){this.h==null?si("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},p.Qk=function(e){this.C=e},p.Zd=function(){return this.C};function im(e,t){e.ma=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())im(n.value,t)}j("shaka.media.SegmentReference",ne),ne.prototype.getSegmentData=ne.prototype.Zd,ne.prototype.setSegmentData=ne.prototype.Qk,ne.prototype.syncAgainst=ne.prototype.wh,ne.prototype.offset=ne.prototype.offset,ne.prototype.getThumbnailSprite=ne.prototype.Jj,ne.prototype.setThumbnailSprite=ne.prototype.Fi,ne.prototype.hasByterangeOptimization=ne.prototype.Tj,ne.prototype.markAsByterangeOptimization=ne.prototype.ji,ne.prototype.isLastPartial=ne.prototype.Yj,ne.prototype.markAsLastPartial=ne.prototype.ki,ne.prototype.isPartial=ne.prototype.Zj,ne.prototype.markAsPartial=ne.prototype.li,ne.prototype.isIndependent=ne.prototype.Xj,ne.prototype.markAsNonIndependent=ne.prototype.nf,ne.prototype.isPreload=ne.prototype.$j,ne.prototype.markAsPreload=ne.prototype.Wg,ne.prototype.markAsUnavailable=ne.prototype.ik,ne.prototype.getStatus=ne.prototype.tc,ne.prototype.getTileDuration=ne.prototype.Kj,ne.prototype.getTilesLayout=ne.prototype.Lj,ne.prototype.getEndByte=ne.prototype.Fb,ne.prototype.getStartByte=ne.prototype.Ib,ne.prototype.getEndTime=ne.prototype.rj,ne.prototype.getStartTime=ne.prototype.getStartTime,ne.prototype.getUris=ne.prototype.R;var Hi=0,rm=1;ne.Status={$k:Hi,$l:rm,Cl:2};function ws(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function wh(e){return!e||ws(e)?null:e.length?e.end(e.length-1):null}function xh(e,t){return!e||!e.length||ws(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function om(e,t){if(!e||!e.length||ws(e))return 0;var n=0;e=g(qi(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function bw(e,t,n){return!e||!e.length||ws(e)?null:(e=qi(e).findIndex(function(i,r,o){return i.start>t&&(r==0||o[r-1].end-t<=n)}),0<=e?e:null)}function qi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Ih(){}function sm(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function um(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Ch(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function jw(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=Fe(he(e.data,1,n)),r=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=Fe(he(e.data,3+n,o)),u;return i==="-->"?u=Fe(he(e.data,4+n+o)):u=an(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=u,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Fe(he(e.data,1,i)),e=Fe(he(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Fe(he(e.data,1,i)),e=Fe(he(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Fe(he(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=an(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Fe(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Fe(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=an(e.data),t):null}function vr(e){for(var t=0,n=[];sm(e,t);){var i=Ch(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),o=Ch(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)},(o=jw(r))&&n.push(o),t+=r.size+10}um(e,t)&&(t+=10)}return n}function Qr(e,t){for(var n=t=t===void 0?0:t,i=0;sm(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Ch(e,t+6),um(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}j("shaka.util.Id3Utils",Ih),Ih.getID3Data=Qr,Ih.getID3Frames=vr;function am(e,t){var n=null,i=null,r=null,o=e.V();return t&1&&(r=e.td()),t&2&&e.skip(4),t&8&&(n=e.V()),t&16&&(i=e.V()),{trackId:o,Vd:n,Ue:i,dm:r}}function da(e,t){return t==1?(t=e.V(),e=e.V(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.V()}}function pa(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.V(),e.skip(4),e=e.za(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function lm(e,t,n){var i=e.V(),r=[],o=null;n&1&&(o=e.V()),n&4&&e.skip(4);for(var s=0;s<i;s++){var u={hh:null,sampleSize:null,zf:null};n&256&&(u.hh=e.V()),n&512&&(u.sampleSize=e.V()),n&1024&&e.skip(4),n&2048&&(u.zf=t==0?e.V():e.ri()),r.push(u)}return{hm:i,wi:r,ej:o}}function cm(e){e.skip(6),e.skip(2),e.skip(8);var t=e.za();return e.skip(2),e.skip(2),e.skip(2),e=e.za()+e.za()/65536,{channelCount:t,sampleRate:e}}function hm(e){return e=e.V(),{gb:ra(e)}}function Fw(e){var t=null,n=null,i=e.Rb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.za()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.za(),e.za(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ze:n}}function xs(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function jt(e){return(10>e?"0":"")+e}function Ti(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=he(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Mh(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new De(n,0).V(),e.g=8*i,e.i-=i)}function Ft(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Mh(e)}e.h<<=t,e.g-=t}function pe(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Mh(e),n=t-n,0<n?i<<n|pe(e,n):i}function kh(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Mh(e),t+kh(e)}function Dt(e){Ft(e,1+kh(e))}function z(e){var t=kh(e);return pe(e,t+1)-1}function eo(e){return e=z(e),1&e?1+e>>>1:-1*(e>>>1)}function $(e){return pe(e,1)===1}function Ae(e){return pe(e,8)}function fa(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=eo(e),i=(n+i+256)%256),n=i===0?n:i}function Bw(e){return Ae(e),z(e),z(e)}j("shaka.util.ExpGolomb",Ti);function Oe(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.A=this.C=null,this.i=[],this.h=[],this.G=null,this.l=[],this.H=this.s=this.u=null}p=Oe.prototype,p.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},p.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Rh(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var o=!!(e[r+1]&64),s=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.I=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.I:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,df:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var l=(o[u+1]&31)<<8|o[u+2],c=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(0<c)for(var h=u+5,d=c;2<d;){var f=o[h+1]+2;switch(o[h]){case 5:var m=Kc(o.subarray(h+2,h+f));s.audio==-1&&m==="Opus"?(s.audio=l,s.audioCodec="opus"):s.video==-1&&m==="AV01"&&(s.video=l,s.videoCodec="av1");break;case 106:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 122:s.audio==-1&&(s.audio=l,s.audioCodec="ec3");break;case 124:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 127:s.audioCodec=="opus"&&(m=null,o[h+2]===128&&(m=o[h+3]),m!=null&&(this.H={channelCount:m&15?m&15:2,bj:m,sampleRate:48e3}))}h+=f,d-=f}break;case 15:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 17:s.audio==-1&&(s.audio=l,s.audioCodec="aac-loas");break;case 21:s.df==-1&&(s.df=l);break;case 27:s.video==-1&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=l,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=l,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=l,s.audioCodec="ec3")}u+=c+5}o=s,o.video!=-1&&(this.K=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.C=o.audio,this.A=o.audioCodec),o.df!=-1&&(this.G=o.df),i&&!this.J&&(i=!1,r=t-188),this.J=!0;break;case this.K:u=e.subarray(u,r+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.C:u=e.subarray(u,r+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.G:u=e.subarray(u,r+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:i=!0}}return this};function Lh(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.u==null&&(e.u=r),n.pts=dm(r,e.u),e.u=n.pts,n.dts=n.pts,i&64&&(i=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.s==null&&(e.s=i),n.dts=dm(i,e.s)),e.s=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}p.pk=function(e){return He("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.bh(e)},p.bh=function(e,t,n){var i=e.pts?e.pts/9e4:null;e=e.data;var r=e.byteLength,o=1;this.m=="hvc"&&(o=2);for(var s=n||0,u=[],a=-1,l=0,c,h=0;h<r;++h){var d=e[h];if(d){if(2<=s&&d==1){if(t&&!u.length&&a==-1&&(d=h-(3<s?3:s),n&&d!=0&&(d=e.subarray(0,d),t.data=ze(t.data,d),t.fullData=ze(t.fullData,d))),0<=a?(s=h-((3<s?3:s)+1),u.push({data:e.subarray(a+o,s+1),fullData:e.subarray(a,s+1),type:l,time:i})):t&&!u.length&&(a=h-s,0<a&&(a=e.subarray(0,a),t.data=ze(t.data,a),t.fullData=ze(t.fullData,a))),h>=r-o)return u;h++,a=h,l=this.m=="hvc"?e[h]>>1&63:e[h]&31}s=0}else s++;h>=r-1&&0<=a&&0<=s&&(c={data:e.subarray(a+o,r),fullData:e.subarray(a,r),type:l,time:i})}return c&&u.push(c),!u.length&&t&&(t.data=ze(t.data,e),t.fullData=ze(t.fullData,e)),u},p.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())n=ze.apply(xt,W(n.value)),(n=Lh(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:vr(n.data),dts:n.dts,pts:n.pts});return e},p.rc=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=g(this.i),n=t.next();!n.done;n=t.next()){var i=ze.apply(xt,W(n.value)),r=Lh(this,i);n=this.h.length?this.h[this.h.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?(this.h.length&&r.dts<(n.dts||0)&&(e=!0),this.h.push(r)):this.h.length&&(i=r?r.data:i)&&(n=this.h.pop(),n.data=ze(n.data,i),this.h.push(n))}e&&(this.h=this.h.sort(function(o,s){var u=(o.pts||0)-(s.pts||0);return(o.dts||0)-(s.dts||0)||u}))}return this.h},p.jd=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=g(this.j),i=n.next();!i.done;i=n.next()){var r=ze.apply(xt,W(i.value)),o=Lh(this,r);i=this.g.length?this.g[this.g.length-1]:null,o&&o.pts!=null&&o.dts!=null&&(!i||i.pts!=o.pts&&i.dts!=o.dts)?(this.g.length&&o.dts<(i.dts||0)&&(t=!0),this.g.push(o)):this.g.length&&(r=o?o.data:r)&&(i=this.g.pop(),i.data=ze(i.data,r),this.g.push(i))}if(e){for(n=[],i=g(this.g),r=i.next();!r.done;r=i.next())if(r=r.value,r.nalus=this.bh(r,s,void 0),r.nalus.length){n.push(r);var s=r.nalus[r.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(u,a){var l=(u.pts||0)-(a.pts||0);return(u.dts||0)-(a.dts||0)||l}))}return e?this.g:(e=this.g,this.g=[],e)},p.getStartTime=function(e){if(e=="audio"){e=null;var t=this.rc();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.jd(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},p.Wd=function(){return{audio:this.A,video:this.m}},p.bf=function(){for(var e=[],t=g(this.jd()),n=t.next();!n.done;n=t.next())e.push.apply(e,W(n.value.nalus));return e},p.Qj=function(){He("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ng();return{height:e.height,width:e.width}},p.Ng=function(){return this.m=="hvc"?Vw(this):Gw(this)};function Gw(e){var t={height:null,width:null,gb:null};if(e=e.bf(),!e.length||(e=e.find(function(d){return d.type==7}),!e))return t;e=new Ti(e.data);var n=Ae(e),i=Ae(e),r=Ae(e);if(Dt(e),Hw.includes(n)){var o=z(e);if(o===3&&Ft(e,1),Dt(e),Dt(e),Ft(e,1),$(e)){o=o!==3?8:12;for(var s=0;s<o;s++)$(e)&&(6>s?fa(e,16):fa(e,64))}}if(Dt(e),o=z(e),o===0)z(e);else if(o===1)for(Ft(e,1),Dt(e),Dt(e),o=z(e),s=0;s<o;s++)Dt(e);Dt(e),Ft(e,1),o=z(e),s=z(e);var u=pe(e,1);u===0&&Ft(e,1),Ft(e,1);var a=0,l=0,c=0,h=0;return $(e)&&(a=z(e),l=z(e),c=z(e),h=z(e)),t.height=String((2-u)*(s+1)*16-2*c-2*h),t.width=String(16*(o+1)-2*a-2*l),t.gb="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2),t}function Vw(e){var t={height:null,width:null,gb:null};if(e=e.bf(),!e.length||(e=e.find(function(E){return E.type==33}),!e))return t;var n=new Ti(e.fullData,!0);Ae(n),Ae(n),pe(n,4);var i=pe(n,3);$(n);var r=pe(n,2),o=pe(n,1),s=pe(n,5),u=pe(n,32);e=Ae(n);for(var a=Ae(n),l=Ae(n),c=Ae(n),h=Ae(n),d=Ae(n),f=Ae(n),m=[],y=[],v=0;v<i;v++)m.push($(n)),y.push($(n));if(0<i)for(v=i;8>v;v++)pe(n,2);for(v=0;v<i;v++)m[v]&&pe(n,88),y[v]&&Ae(n);z(n),i=z(n),i==3&&pe(n,1),m=z(n),y=z(n);var A=v=0,S=0,x=0;return $(n)&&(v+=z(n),A+=z(n),S+=z(n),x+=z(n)),t.width=String(m-(v+A)*(i===1||i===2?2:1)),t.height=String(y-(S+x)*(i===1?2:1)),n=function(E){for(var w=0,I=0;32>I;I++)w|=(E>>I&1)<<31-I;return w>>>0}(u),o=o==1?"H":"L",r="hvc1"+("."+["","A","B","C"][r]+s),r+="."+n.toString(16).toUpperCase(),r+="."+o+f,d&&(r+="."+d.toString(16).toUpperCase()),h&&(r+="."+h.toString(16).toUpperCase()),c&&(r+="."+c.toString(16).toUpperCase()),l&&(r+="."+l.toString(16).toUpperCase()),a&&(r+="."+a.toString(16).toUpperCase()),e&&(r+="."+e.toString(16).toUpperCase()),t.gb=r,t}function dm(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Is(e){return!(0>Rh(e))}function Rh(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}j("shaka.util.TsParser",Oe),Oe.syncOffset=Rh,Oe.probe=Is,Oe.prototype.getVideoInfo=Oe.prototype.Ng,Oe.prototype.getVideoResolution=Oe.prototype.Qj,Oe.prototype.getVideoNalus=Oe.prototype.bf,Oe.prototype.getCodecs=Oe.prototype.Wd,Oe.prototype.getStartTime=Oe.prototype.getStartTime,Oe.prototype.getVideoData=Oe.prototype.jd,Oe.prototype.getAudioData=Oe.prototype.rc,Oe.prototype.getMetadata=Oe.prototype.getMetadata,Oe.prototype.parseNalus=Oe.prototype.bh,Oe.prototype.parseAvcNalus=Oe.prototype.pk,Oe.prototype.parse=Oe.prototype.parse,Oe.prototype.clearData=Oe.prototype.clearData,Oe.Timescale=9e4;var Hw=[100,110,122,244,44,83,86,118,128,138,139,134];function Cs(e,t,n){this.g=null,this.s=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&ce("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,He("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{ce("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(ce("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||ce(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function pm(e){e.g&&e.i.classList.add("shaka-hidden")}Cs.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function fm(e,t,n){var i=qw,r=Yw;switch(t.mimeType){case"video/webm":i=Kw;break;case"video/mp4":i=zw}switch(n){case"DASH":r=Xw;break;case"HLS":r=Ww}e.g&&(e.s=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(i),e.j||e.g.setStreamingFormat(r))}j("shaka.lcevc.Dec",Cs),Cs.prototype.release=Cs.prototype.release;var qw=0,Kw=1,zw=2,Ww=0,Xw=1,Yw=-1;function gm(e,t,n,i){var r=this;this.i=e,this.aa=n,this.A=null,this.H=t,this.h={},this.I={},this.Fa={},this.g=null,this.ka=!1,this.W=i||null,this.j={},this.u=new Ee,this.s={},this.J=null,this.M=new Le,this.O="",this.sa=!1,this.l=mm(this,this.M),this.G=!1,this.K=new Jr(function(){return $w(r)}),this.C=!1,this.Z="UNKNOWN",this.Ha=this.Ia=!1,this.Aa=new Le,this.m=!1,this.xa=!0,this.ra=this.P=this.Ga=this.S=this.L=this.ea=null,this.qa=new Le}function mm(e,t){if(O.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.u.o(n,"startstreaming",function(){e.xa=!0}),e.u.o(n,"endstreaming",function(){e.xa=!1}),e.u.ia(n,"sourceopen",function(){URL.revokeObjectURL(e.O),t.resolve()}),e.u.ia(e.i,"playing",function(){e.sa=!0}),e.O=Ea(n),e.i.src=e.O,n}return n=new MediaSource,e.u.ia(n,"sourceopen",function(){URL.revokeObjectURL(e.O),t.resolve()}),e.u.ia(e.i,"playing",function(){e.sa=!0}),e.O=Ea(n),e.i.src=e.O,n}function Jw(e,t){var n,i,r,o,s,u,a,l,c,h,d;return M(function(f){if(f.g==1)return e.createSegmentIndex?T(f,e.createSegmentIndex(),2):f.B(2);if(!e.segmentIndex)return f.return(!1);if(e.segmentIndex.getNumReferences()==0)return f.return(!0);for(n=Qe,i=new Set,r=g(e.segmentIndex),o=r.next();!o.done;o=r.next())if(s=o.value,u=s.mimeType||e.mimeType||"",a=s.codecs||e.codecs||"",l=u+":"+a,!i.has(l)){if(i.add(l),t==n.Ka){if(c=it(u,a),!fs(c))return f.return(!1)}else if(t==n.ua?a=gs(a):t==n.ha&&(a=qr(a,u)),h=_A(e,u,a),d=hr(u,a),!et(h)&&!Fi(d))return f.return(!1)}return f.return(!0)})}p=gm.prototype,p.destroy=function(){return this.K.destroy()};function $w(e){var t,n,i,r,o,s,u,a;return M(function(l){if(l.g==1){t=[];for(n in e.j)for(i=e.j[n],r=i[0],e.j[n]=i.slice(0,1),r&&t.push(r.p.catch(ng)),o=g(i.slice(1)),s=o.next();!s.done;s=o.next())u=s.value,u.p.reject(new L(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.H&&t.push(e.H.destroy());for(a in e.s)t.push(e.s[a].destroy());return T(l,Promise.all(t),2)}e.u&&(e.u.release(),e.u=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.H=null,e.h={},e.s={},e.J=null,e.j={},e.W=null,e.L=null,e.aa=null,V(l)})}p.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,o,s,u,a,l;return M(function(c){switch(c.g){case 1:return o=Qe,T(c,r.M,2);case 2:r.C=t,r.Z=n,r.Ia=i,r.Ha=!r.C&&r.Z=="HLS"&&!r.Ia,r.L=null,s=g(e.keys()),u=s.next();case 3:if(u.done){c.B(0);break}return a=u.value,l=e.get(a),T(c,ga(r,a,l,l.codecs),6);case 6:r.m?(r.j[o.ha]=[],r.j[o.ua]=[]):r.j[a]=[],u=s.next(),c.B(3)}})};function ga(e,t,n,i){var r,o,s,u,a,l,c,h,d,f,m,y;return M(function(v){switch(v.g){case 1:return r=Qe,o=vA,s=yA,T(v,Jw(n,t),2);case 2:if(s.call(o,v.h,"Type negotiation should happen before MediaSourceEngine.init!"),u=it(n.mimeType,i),t==r.Ka){ma(e,u,e.C,n.external),v.B(0);break}if(a=e.A.forceTransmux,(!et(u)||!e.C&&dr.includes(u))&&(a=!0),l=hr(n.mimeType,i),!a){v.B(4);break}if(c=Ot(r.ha,(i||"").split(",")),h=Ot(r.ua,(i||"").split(",")),!c||!h){v.B(5);break}return e.m=!0,T(v,ga(e,r.ha,n,c),6);case 6:return T(v,ga(e,r.ua,n,h),7);case 7:return v.return();case 5:(d=Fi(l))&&(f=d(),e.s[t]=f,u=f.convertCodecs(t,l));case 4:m=u+e.A.addExtraFeaturesToSourceBuffer(u),Pe(e.K);try{y=e.l.addSourceBuffer(m)}catch(A){throw new L(2,3,3015,A,"The mediaSource_ status was "+e.l.readyState+" expected 'open'",null)}e.C&&(y.mode=l2),e.u.o(y,"error",function(){var A=e.j[t][0];A.p.reject(new L(2,3,3014,e.i.error?e.i.error.code:0,A.uri))}),e.u.o(y,"updateend",function(){return Ei(e,t)}),e.h[t]=y,e.I[t]=u,e.Fa[t]=!!n.drmInfos.length,V(v)}})}p.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function ma(e,t,n,i){e.g||(e.g=new pi(e.H),e.g&&(e.g.A=e.A.modifyCueCallback));var r=e.g;i=i||e.ka,e=e.Z,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=(0,tt[t])(),r.i.setSequenceMode?r.i.setSequenceMode(n):He("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):He("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.C=i)}function vm(e){return e.G?!1:e.l?e.l.readyState=="ended":!0}function Ph(e,t){return e.G||!Object.keys(e.h).length?e=null:t==ye?e=e.g.g:(e=to(e,t),e=!e||ws(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function va(e,t){return e.G?null:t==ye?e.g.h:wh(to(e,t))}function Zw(e,t,n){return e.G?0:t==ye?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=to(e,t),om(e,n))}p.Wb=function(){var e={total:this.G?[]:qi(this.i.buffered),audio:this.G?[]:qi(to(this,"audio")),video:this.G?[]:qi(to(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function to(e,t){try{return e.h[t].buffered}catch(n){return null}}function Qw(e,t,n,i,r,o){var s=null,u=he(n);if(dr.includes(r))o=vr(u),o.length&&i&&((t=o.find(function(h){return h.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(s=Math.round(t.data)/1e3),e.aa.onMetadata([{cueTime:i.startTime,data:u,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(r.includes("/mp4")&&i&&i.timestampOffset==0&&i.ma&&i.ma.timescale){var a=i.ma.timescale;if(!isNaN(a)){var l=0,c=!1;new Re().box("moof",fe).box("traf",fe).Y("tfdt",function(h){l=da(h.reader,h.version).baseMediaDecodeTime/a,c=!0,h.parser.stop()}).parse(n,!0),c&&(s=l)}}else!r.includes("/mp4")&&!r.includes("/webm")&&Is(u)&&(e.L?e.L.clearData():e.L=new Oe,u=e.L.parse(u),t=u.getStartTime(t),t!=null&&(s=t),u=u.getMetadata(),u.length)&&e.aa.onMetadata(u,o,i?i.endTime:null);return s}function ya(e,t,n,i,r,o,s,u,a,l){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,l=l===void 0?!1:l;var c,h,d,f,m,y,v,A,S,x,E,w,I,k;return M(function(R){switch(R.g){case 1:if(c=Qe,t!=c.Ka){R.B(2);break}if(!e.C){R.B(3);break}return T(R,e.Aa,4);case 4:h=R.h,e.g.u=h;case 3:return T(R,OA(e.g,n,i?i.startTime:null,i?i.endTime:null,i?i.R()[0]:null),5);case 5:return R.return();case 2:if(l||!e.m){R.B(6);break}return T(R,ya(e,c.ha,n,i,r,o,s,u,a,!0),7);case 7:return T(R,ya(e,c.ua,n,i,r,o,s,u,a,!0),8);case 8:return R.return();case 6:if(!e.h[t])return R.return();if(d=e.h[t].timestampOffset,f=e.I[t],e.s[t]&&(f=e.s[t].getOriginalMimeType()),i&&(m=Qw(e,t,n,i,f,d),m!=null&&(e.S==null&&t==c.ua&&(e.S=m,e.Ga=i.startTime,e.P!=null&&(y=0,e.Ga==e.ra&&(y=e.S-e.P),e.qa.resolve(y))),e.P==null&&t==c.ha&&(e.P=m,e.ra=i.startTime,e.S!=null&&(v=0,e.Ga==e.ra&&(v=e.S-e.P),e.qa.resolve(v))),A=i.startTime-m,S=Math.abs(d-A),(.001<=S||s||u)&&(!a||0<A||!d)&&(d=A,e.Ha&&(at(e,t,function(){return no(e,t)},null),at(e,t,function(){return io(e,t,d)},null))),x=t==c.ua||!(c.ua in e.h),e.C&&x&&e.Aa.resolve(d))),o&&t==c.ua&&(e.g||ma(e,"application/cea-608",e.C,!1),e.J||(E=f.split(";",1)[0],e.J=new Zt(E)),i?(w=e.J.i(n),w.length&&jA(e.g,w,i.startTime,i.endTime,d)):e.J.init(n,u)),!e.s[t]){R.B(9);break}return T(R,e.s[t].transmux(n,r,i,e.l.duration,t),10);case 10:n=R.h;case 9:if(n=r2(e,n,i?i.startTime:null,t,i?i.R()[0]:null),!i||!e.C||t==c.Ka){R.B(11);break}if(!s&&!u){R.B(11);break}if(I=i.startTime,e.Z!="HLS"||e.m||t!=c.ha||!e.h[c.ua]){R.B(13);break}return T(R,e.qa,14);case 14:k=R.h,.1<Math.abs(k)&&(I-=k);case 13:at(e,t,function(){return no(e,t)},null),at(e,t,function(){return io(e,t,I)},null);case 11:return T(R,at(e,t,function(){var D=n;if(t=="video"&&e.W){var P=e.W;P.g&&P.g.appendBuffer(D,"video",P.s,-d)}e.h[t].appendBuffer(D)},i?i.R()[0]:null),15);case 15:V(R)}})}function e2(e,t){var n=va(e,"video")||0;eg(e.g,t,n)}function t2(e){e.g&&eg(e.g,"",0)}p.remove=function(e,t,n){var i=this,r;return M(function(o){return o.g==1?(r=Qe,e==r.Ka?T(o,i.g.remove(t,n),0):T(o,at(i,e,function(){return Ta(i,e,t,n)},null),4)):i.m?T(o,at(i,r.ha,function(){return Ta(i,r.ha,t,n)},null),0):o.B(0)})};function ym(e,t){var n;return M(function(i){return i.g==1?(n=Qe,t==n.Ka?e.g?T(i,e.g.remove(0,1/0),0):i.return():T(i,at(e,t,function(){return Ta(e,t,0,e.l.duration)},null),4)):e.m?T(i,at(e,n.ha,function(){return Ta(e,n.ha,0,e.l.duration)},null),0):i.B(0)})}p.flush=function(e){var t=this,n;return M(function(i){return i.g==1?(n=Qe,e==n.Ka?i.return():T(i,at(t,e,function(){t.i.currentTime-=.001,Ei(t,e)},null),2)):t.m?T(i,at(t,n.ha,function(){var r=n.ha;t.i.currentTime-=.001,Ei(t,r)},null),0):i.B(0)})};function n2(e,t,n,i,r,o,s,u,a){var l,c,h;return M(function(d){return d.g==1?(l=Qe,t==l.Ka?(o||(e.g.u=n),bA(e.g,i,r),d.return()):(c=[],T(d,u2(e,t,s,u,a),2))):(h=d.h,h||(c.push(at(e,t,function(){return no(e,t)},null)),e.m&&c.push(at(e,l.ha,function(){return no(e,l.ha)},null))),o||(c.push(at(e,t,function(){return io(e,t,n)},null)),e.m&&c.push(at(e,l.ha,function(){return io(e,l.ha,n)},null))),c.push(at(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=r,e.h[t].appendWindowStart=i,Ei(e,t)},null)),e.m&&c.push(at(e,l.ha,function(){var f=l.ha;e.h[f].appendWindowStart=0,e.h[f].appendWindowEnd=r,e.h[f].appendWindowStart=i,Ei(e,f)},null)),T(d,Promise.all(c),0))})}function i2(e,t,n){var i;return M(function(r){return r.g==1?(i=Qe,t==i.Ka?r.return():(t==i.ua&&(e.Aa=new Le),at(e,t,function(){return no(e,t)},null),e.m&&at(e,i.ha,function(){return no(e,i.ha)},null),T(r,at(e,t,function(){return io(e,t,n)},null),2))):e.m?T(r,at(e,i.ha,function(){return io(e,i.ha,n)},null),0):r.B(0)})}p.endOfStream=function(e){var t=this;return M(function(n){return T(n,Dh(t,function(){vm(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},p.vb=function(e){var t=this;return M(function(n){return T(n,Dh(t,function(){if(e<t.l.duration)for(var i in t.h){var r={start:function(){},p:new Le,uri:null};t.j[i].unshift(r)}t.l.duration=e,t.ea=e}),0)})},p.getDuration=function(){return this.l.duration};function Ta(e,t,n,i){i<=n?Ei(e,t):e.h[t].remove(n,i)}function no(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,Ei(e,t)}function io(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Ei(e,t)}function Ei(e,t){if(!e.G){var n=e.j[t][0];n&&(n.p.resolve(),Nh(e,t))}}function at(e,t,n,i){return Pe(e.K),n={start:n,p:new Le,uri:i},e.j[t].push(n),e.j[t].length==1&&Tm(e,t),n.p}function Dh(e,t){var n,i,r,o,s,u,a;return M(function(l){switch(l.g){case 1:Pe(e.K),n=[],i={};for(r in e.h)i.Id=new Le,o={start:function(c){return function(){return c.Id.resolve()}}(i),p:i.Id,uri:null},e.j[r].push(o),n.push(i.Id),e.j[r].length==1&&o.start(),i={Id:i.Id};return Z(l,2),T(l,Promise.all(n),4);case 4:le(l,3);break;case 2:throw s=Q(l),s;case 3:return Z(l,5,6),T(l,t(),6);case 6:Yt(l);for(u in e.h)Nh(e,u);Jt(l,0);break;case 5:throw a=Q(l),new L(2,3,3015,a,e.i.error||"No error in the media element",null)}})}function Nh(e,t){e.j[t].shift(),Tm(e,t)}function Tm(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new L(2,3,3017,t)):n.p.reject(new L(2,3,3015,i,e.i.error||"No error in the media element",n.uri)),Nh(e,t)}}function r2(e,t,n,i,r){var o=n==null,s=e.Fa[i];return n=e.aa.uj(),(o=e.A.insertFakeEncryptionInInit&&o&&s)&&(n=jc(n),o=Wn()||ui()||Bc()||rs()&&Gc()&&n),o&&Ju(e.I[i])=="mp4"&&(t=_w(t,r)),t}function o2(e,t,n,i){return at(e,t,function(){t!==ye&&(ar()&&(e.s[t]&&(e.s[t].destroy(),delete e.s[t]),i&&(e.s[t]=i),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.I[t]=n),Ei(e,t))},null)}function s2(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D;return M(function(P){switch(P.g){case 1:n=Qe,e.G=!0,e.m=!1,i=e.i.currentTime,r=e.i.autoplay,o=e.i.paused,e.sa&&(e.i.autoplay=!1),oi(P,2),e.u.Za(),s=[];for(u in e.s)s.push(e.s[u].destroy());for(a in e.j)for(l=e.j[a],c=l[0],e.j[a]=l.slice(0,1),c&&s.push(c.p.catch(ng)),h=g(l.slice(1)),d=h.next();!d.done;d=h.next())f=d.value,f.p.reject(new L(2,7,7003,void 0));for(m in e.h){y=e.h[m];try{e.l.removeSourceBuffer(y)}catch(C){}}return T(P,Promise.all(s),4);case 4:return e.s={},e.h={},v=e.l.duration,e.M=new Le,e.l=mm(e,e.M),T(P,e.M,5);case 5:!isNaN(v)&&v?e.l.duration=v:!isNaN(e.ea)&&e.ea&&(e.l.duration=e.ea),A=new Le,S=e.l.sourceBuffers,x=t.size,E=0,w=function(){E++,E===x&&(A.resolve(),e.u.Pa(S,"addsourcebuffer",w))},e.u.o(S,"addsourcebuffer",w),I=g(t.keys()),k=I.next();case 6:return k.done?(e.i.currentTime=i,T(P,A,2)):(R=k.value,D=t.get(R),T(P,ga(e,R,D,D.codecs),9));case 9:e.m?(e.j[n.ha]=[],e.j[n.ua]=[]):e.j[R]=[],k=I.next(),P.B(6);break;case 2:Yt(P),e.G=!1,Pe(e.K),e.u.ia(e.i,"canplaythrough",function(){e.K.g||(e.i.autoplay=r,o||e.i.play())}),Jt(P,0)}})}function Em(e,t){return Dh(e,function(){return s2(e,t)})}function u2(e,t,n,i,r){var o,s,u,a,l,c,h,d,f,m,y,v,A,S,x;return M(function(E){return E.g==1?(o=Qe,t==o.Ka||(s=Jn(Qt(e.I[t])),u=In(e.I[t]),l=!1,c=it(n,i),h=e.A.forceTransmux,(!et(c)||!e.C&&dr.includes(c))&&(h=!0),h&&(d=hr(n,i),f=Fi(d))&&(a=f(),m=Ot(o.ha,(i||"").split(",")),y=Ot(o.ua,(i||"").split(",")),m&&y?(l=!0,v=y,t==o.ha&&(v=m),c=a.convertCodecs(t,hr(n,v))):c=a.convertCodecs(t,d)),A=Jn(Qt(c)),S=In(c),s===A&&u===S)?E.return(!1):(x=!0,(e.m||l&&a&&!e.s[t])&&(x=!1),x&&e.A.codecSwitchingStrategy==="smooth"&&ar()?T(E,o2(e,t,c,a),3):(a&&a.destroy(),T(E,Em(e,r),3)))):E.return(!0)})}function a2(e,t,n,i){if(t==ye)var r=!1;else{r=Jn(Qt(e.I[t]));var o=In(e.I[t]),s=it(n,i),u=e.A.forceTransmux;(!et(s)||!e.C&&dr.includes(s))&&(u=!0),n=hr(n,i),u&&(u=Fi(n))&&(u=u(),s=u.convertCodecs(t,n),u.destroy()),t=Jn(Qt(s)),s=In(s),r=r!==t||o!==s}return r?e.A.codecSwitchingStrategy!=="smooth"||!ar()||e.m:!1}var Ea=O.URL.createObjectURL,l2="sequence";function ee(e,t,n){this.i=e,this.A=t,this.s=this.j=1/0,this.g=1,this.h=this.l=null,this.C=0,this.I=!0,this.J=0,this.G=n===void 0?!0:n,this.H=0,this.u=!1,this.m=e}p=ee.prototype,p.getDuration=function(){return this.j},p.zj=function(){return this.g},p.Ei=function(e){this.i=e},p.vb=function(e){this.j=e},p.Dj=function(){return this.i},p.Ai=function(e){this.C=e},p.Tc=function(e){this.I=e},p.Bf=function(e){this.s=e},p.$e=function(){return this.s},p.nh=function(e){this.A=e},p.qj=function(){return this.A},p.oi=function(e,t){if(e.length!=0){var n=(Date.now()+this.C)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.uf(e[0].start+t),this.g=e.reduce(function(r,o){return Math.max(r,o.end-o.start)},this.g),this.h=Math.max(this.h,i),this.i!=null&&this.G&&!this.u&&(this.i=n-this.h-this.g)}}},p.le=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.C)/1e3;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime));this.uf(t),this.h=Math.max(this.h,n),this.i!=null&&this.G&&!this.u&&(this.i=i-this.h-this.g)}},p.Aj=function(){return this.h},p.mf=function(){this.u=!0},p.ck=function(){return this.u},p.Ci=function(e){this.m=e},p.tj=function(){return this.m},p.uf=function(e){this.l=this.l==null?e:Math.min(this.l,e)},p.Xg=function(e){this.g=Math.max(this.g,e)},p.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},p.U=function(){return this.j==1/0&&!this.I},p.Mc=function(){return this.j!=1/0&&!this.I},p.Hb=function(){return Math.max(this.J,this.sc()-this.s)},p.Hi=function(e){this.J=e},p.sc=function(){return this.U()||this.Mc()?Math.min(Math.max(0,(Date.now()+this.C)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},p.Yd=function(e){var t=Math.max(this.l,this.J);return this.s==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.sc()-this.s+e,this.Xb()))},p.Ic=function(){return this.Yd(0)},p.Xb=function(){return Math.max(0,this.sc()-(this.U()||this.Mc()?this.A:0))},p.Ni=function(){return!(this.i==null||this.h!=null&&this.G)},p.zi=function(e){this.H=e},p.ij=function(){return this.H},j("shaka.media.PresentationTimeline",ee),ee.prototype.getAvailabilityTimeOffset=ee.prototype.ij,ee.prototype.setAvailabilityTimeOffset=ee.prototype.zi,ee.prototype.usingPresentationStartTime=ee.prototype.Ni,ee.prototype.getSeekRangeEnd=ee.prototype.Xb,ee.prototype.getSeekRangeStart=ee.prototype.Ic,ee.prototype.getSafeSeekRangeStart=ee.prototype.Yd,ee.prototype.getSegmentAvailabilityEnd=ee.prototype.sc,ee.prototype.setUserSeekStart=ee.prototype.Hi,ee.prototype.getSegmentAvailabilityStart=ee.prototype.Hb,ee.prototype.isInProgress=ee.prototype.Mc,ee.prototype.isLive=ee.prototype.U,ee.prototype.offset=ee.prototype.offset,ee.prototype.notifyMaxSegmentDuration=ee.prototype.Xg,ee.prototype.notifyMinSegmentStartTime=ee.prototype.uf,ee.prototype.getInitialProgramDateTime=ee.prototype.tj,ee.prototype.setInitialProgramDateTime=ee.prototype.Ci,ee.prototype.isStartTimeLocked=ee.prototype.ck,ee.prototype.lockStartTime=ee.prototype.mf,ee.prototype.getMaxSegmentEndTime=ee.prototype.Aj,ee.prototype.notifySegments=ee.prototype.le,ee.prototype.notifyTimeRange=ee.prototype.oi,ee.prototype.getDelay=ee.prototype.qj,ee.prototype.setDelay=ee.prototype.nh,ee.prototype.getSegmentAvailabilityDuration=ee.prototype.$e,ee.prototype.setSegmentAvailabilityDuration=ee.prototype.Bf,ee.prototype.setStatic=ee.prototype.Tc,ee.prototype.setClockOffset=ee.prototype.Ai,ee.prototype.getPresentationStartTime=ee.prototype.Dj,ee.prototype.setDuration=ee.prototype.vb,ee.prototype.setPresentationStartTime=ee.prototype.Ei,ee.prototype.getMaxSegmentDuration=ee.prototype.zj,ee.prototype.getDuration=ee.prototype.getDuration;function Sm(e,t,n){this.j=n,this.l=e,this.u=Am(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.s=0,this.A=t,this.i=function(){}}Sm.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function c2(e,t){e.i=t}function h2(e){this.g=e}function Am(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=g(qi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function _h(e,t,n,i,r){var o=this;this.A=r,this.g=e,this.C=t,this.u=n,this.l=new Ee,this.j=!1,this.H=e.readyState,this.G=this.i=0,this.h=i,this.s=!1,this.l.o(e,"waiting",function(){return Uh(o)}),this.m=new te(function(){Uh(o)}).wa(this.u.gapJumpTimerTime)}_h.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.C=this.A=null},_h.prototype.$g=function(){this.s=!0,Uh(this)};function Uh(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.H&&(e.H=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,i=Am(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.u!=i)&&(t.m=o,t.g=r,t.u=i,t.h=!1),r=o-t.m,(i=r>=t.A&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.s++,t.j(new G("stalldetected"))),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=bw(n,t,e.u.gapDetectionThreshold),i!=null&&(i!=0||e.s))&&(r=n.start(i),(navigator.userAgent.match(/Edge\//)||ui())&&(r=Math.ceil(100*(r+.01))/100),r>=e.C.Xb()||.001>r-t||(i!=0&&n.end(i-1),e.g.currentTime=r,t==e.i&&(e.i=r),e.G++,e.A(new G("gapjumped"))))}}}function ro(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=d2.value().get(t),n.ia(e,t,i))}var d2=new Ur(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function wm(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.s=!1,this.h=new Ee,this.i=new Mm(e),ro(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Im(r,r.j())})}wm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Oh(e){return e.s?e.g.currentTime:e.j()}function xm(e,t){0<e.g.readyState?km(e.i,t):ro(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Im(e,e.j())})}function Im(e,t){.001>Math.abs(e.g.currentTime-t)?Cm(e):(e.h.ia(e.g,"seeking",function(){Cm(e)}),km(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function Cm(e){e.s=!0,e.h.o(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Mm(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new te(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}Mm.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function km(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.wa(.1)}function Lm(e){this.h=e,this.j=!1,this.g=null,this.i=new Ee}p=Lm.prototype,p.dg=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,i=t.g;0>t.g&&(i=Math.max(0,n+t.g)),n!=i?(t.i.ia(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=i):t.j=!0}}var t=this;ro(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},p.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},p.eg=function(e){this.g=this.j?this.g:e},p.Oe=function(){return(this.j?this.h.currentTime:this.g)||0},p.Eh=function(){return 0},p.Dh=function(){return 0},p.ni=function(){};function Rm(e,t,n,i,r,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.C=t.minBufferTime||0,this.l=n,this.A=r,this.u=null,this.s=p2(e,n,o),this.j=new _h(e,t.presentationTimeline,n,this.s,o),this.h=new wm(e,function(){e:{var u=s.j;u.j=!0,u.s=!1;var a=Oh(s.h);if(u=Dm(s,a),.001<Math.abs(u-a)){if(a=!1,!$t()||$t()&&Vu())a=!0;else{var l=Date.now()/1e3;(!s.u||s.u<l-1)&&(s.u=l,a=!0)}if(a){xm(s.h,u),u=void 0;break e}}s.A(),u=void 0}return u},function(u){var a=s.j;a.g.seeking&&!a.j&&(a.j=!0,a.i=u)},function(){var u=i;return u==null?u=1/0>s.g.getDuration()?s.g.Ic():s.g.Xb():0>u&&(u=s.g.Xb()+u),Pm(s,Nm(s,u))}),this.m=new te(function(){if(s.i.readyState!=0&&!s.i.paused){var u=Oh(s.h),a=s.g.Ic(),l=s.g.Xb();3>l-a&&(a=l-3),u<a&&(u=Dm(s,u),s.i.currentTime=u)}})}p=Rm.prototype,p.dg=function(){this.m.wa(.25)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},p.eg=function(e){xm(this.h,e)},p.Oe=function(){var e=Oh(this.h);return 0<this.i.readyState&&!this.i.paused?Nm(this,e):e},p.Eh=function(){return this.s?this.s.s:0},p.Dh=function(){return this.j.G},p.ni=function(){this.j.$g()};function Pm(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Dm(e,t){var n=Math.max(e.C,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Ic(),o=e.g.Xb(),s=e.g.getDuration();3>o-r&&(r=o-3);var u=e.g.Yd(n),a=e.g.Yd(i);return n=e.g.Yd(n+i),t>=s?Pm(e,t):t>o?o:t<r?xh(e.i.buffered,a)?a:n:t>=u||xh(e.i.buffered,t)?t:n}function Nm(e,t){var n=e.g.Ic();return t<n?n:(e=e.g.Xb(),t>e?e:t)}function p2(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new Sm(new h2(e),t.stallThreshold,n),c2(t,function(){i?e.currentTime+=i:(e.pause(),e.play())}),t}function Se(e){this.T=e,this.l=null,this.i=0,this.m=!1}p=Se.prototype,p.getNumReferences=function(){return this.T.length},p.getNumEvicted=function(){return this.i},p.release=function(){this.m||(this.T=[],this.l&&this.l.stop(),this.l=null)},p.jk=function(){this.m=!0},p.qc=function(e){for(var t=g(this.T),n=t.next();!n.done;n=t.next())e(n.value)},p.find=function(e){for(var t=this.T.length-1,n=t;0<=n;--n){var i=this.T[n],r=n<t?this.T[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.T.length&&e<this.T[0].startTime?this.i:null},p.get=function(e){return this.T.length==0?null:(e-=this.i,0>e||e>=this.T.length?null:this.T[e])},p.offset=function(e){if(!this.m)for(var t=g(this.T),n=t.next();!n.done;n=t.next())n.value.offset(e)},p.qf=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.T=this.T.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.T.push.apply(this.T,W(e))}},p.je=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.T.length==0||i.endTime>n.T[0].startTime)}),this.qf(e),this.hb(t)},p.hb=function(e){if(!this.m){var t=this.T.length;this.T=this.T.filter(function(n){return n.endTime>e}),this.i+=t-this.T.length}},p.dd=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.T.length&&this.T[this.T.length-1].startTime>=t;)this.T.pop();for(;this.T.length&&this.T[0].endTime<=e;)this.T.shift(),n||this.i++;this.T.length!=0&&(e=this.T[this.T.length-1],t=new ne(e.startTime,t,e.G,e.$a,e.Ja,e.ma,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.T[this.T.length-1]=t)}},p.Ff=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new te(function(){var i=t();i?n.T.push.apply(n.T,W(i)):(n.l.stop(),n.l=null)}),this.l.wa(e))},Se.prototype[Symbol.iterator]=function(){return this.dc(0)},Se.prototype.dc=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var o=-1;if(r&&0<r.g.length)for(var s=r.g.length-1;0<=s;--s){var u=r.g[s];if(e>=u.startTime&&e<u.endTime){if(!t){for(;s&&!u.l;)s--,u=r.g[s];if(!u.l)return si("No independent partial segment found!"),null}n?i--:i++,o=s-1;break}}return new en(this,i,o,n)};function bh(e,t,n){return e=new ne(e,e+t,function(){return n},0,null,null,e,e,e+t),new Se([e])}j("shaka.media.SegmentIndex",Se),Se.forSingleSegment=bh,Se.prototype.getIteratorForTime=Se.prototype.dc,Se.prototype.updateEvery=Se.prototype.Ff,Se.prototype.fit=Se.prototype.dd,Se.prototype.evict=Se.prototype.hb,Se.prototype.mergeAndEvict=Se.prototype.je,Se.prototype.offset=Se.prototype.offset,Se.prototype.get=Se.prototype.get,Se.prototype.find=Se.prototype.find,Se.prototype.markImmutable=Se.prototype.jk,Se.prototype.release=Se.prototype.release,Se.prototype.getNumEvicted=Se.prototype.getNumEvicted,Se.prototype.getNumReferences=Se.prototype.getNumReferences;function en(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}en.prototype.xd=function(e){this.reverse=e},en.prototype.dj=function(){return this.h},en.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.s&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},en.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.s&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},j("shaka.media.SegmentIterator",en),en.prototype.next=en.prototype.next,en.prototype.current=en.prototype.current,en.prototype.currentPosition=en.prototype.dj,en.prototype.setReverse=en.prototype.xd;function We(){Se.call(this,[]),this.g=[]}de(We,Se),p=We.prototype,p.clone=function(){var e=new We;return e.g=this.g.slice(),e},p.release=function(){for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},p.qc=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.qc(e)},p.find=function(e){for(var t=0,n=g(this.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},p.get=function(e){for(var t=0,n=g(this.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},p.offset=function(){},p.qf=function(){},p.hb=function(){},p.je=function(){},p.dd=function(){},p.Ff=function(){},j("shaka.media.MetaSegmentIndex",We),We.prototype.updateEvery=We.prototype.Ff,We.prototype.fit=We.prototype.dd,We.prototype.mergeAndEvict=We.prototype.je,We.prototype.evict=We.prototype.hb,We.prototype.merge=We.prototype.qf,We.prototype.offset=We.prototype.offset,We.prototype.get=We.prototype.get,We.prototype.find=We.prototype.find,We.prototype.forEachTopLevelReference=We.prototype.qc,We.prototype.release=We.prototype.release;function Ms(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Ze(),this.h=new te(function(){t.g.mi(.25*t.i)})}Ms.prototype.release=function(){this.set(this.Hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ms.prototype.set=function(e){this.i=e,_m(this)},Ms.prototype.Hc=function(){return this.g.Hc()};function _m(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Ze()!=t&&e.g.rh(t);return}catch(n){}e.h.wa(.25),e.g.Ze()!=0&&e.g.rh(0)}function Um(e){var t=this;this.h=e,this.g=new Set,this.i=new te(function(){Om(t,!1)}).wa(.25)}Um.prototype.release=function(){this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function Om(e,t){for(var n=g(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function f2(){this.g=null,this.h=[]}function jh(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=g(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function g2(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=g(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function m2(){this.i=this.h=null,this.g=[]}function Fh(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Sa(){this.Pe=this.ii=this.A=this.C=this.K=this.G=this.u=this.j=this.J=this.m=this.i=this.S=this.W=this.M=this.O=this.P=this.l=this.s=NaN,this.L=0,this.H=this.I=NaN,this.g=new f2,this.h=new m2}function Aa(e,t,n,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.s=i}function v2(e,t){e.l=t,e=g(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function ks(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.dc(t,!0,e.s)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!(!t||(n=!0,t.preload&&t.Ja!=null&&(n=!1),t.tc()==2&&(n=!1),n&&t.ma&&bm(e,t.ma),n&&!e.h.has(t)&&(n=new Gh(e.l),Bm(n,t,e.i),e.h.set(t,n)),e.i.fastSwitching&&t.oe&&t.kf))););Bh(e)}}function bm(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(i){return Ah(i,t)})){var n=new Gh(e.l);Bm(n,t,e.i),e.j.set(t,n)}}function jm(e,t){t=g(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Ls(e,n)}function Fn(e){jm(e,e.h),jm(e,e.j),e.g=null}Aa.prototype.hb=function(e,t){t=t===void 0?!1:t;for(var n=g(this.h.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&Ls(this,i);t&&Bh(this)},Aa.prototype.xd=function(e){this.s=e,this.g&&this.g.xd(e)};function Bh(e){for(var t=Array.from(e.h.keys()),n={},i=g(e.j.keys()),r=i.next();!r.done;n={Ee:n.Ee},r=i.next())n.Ee=r.value,t.some(function(o){return function(s){return Ah(s.ma,o.Ee)}}(n))||Ls(e,n.Ee)}function Fm(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var i=n.pop();i&&Ls(e,i)}Bh(e)}function y2(e,t){t&&t!==e.i&&(Fn(e),e.i=t)}function Ls(e,t){var n=e.h;t instanceof bt&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Gh(e){this.g=e,this.wf=this.vh=null}function Bm(e,t,n){var i=new Uint8Array(0);e.wf=e.g(t,n,function(r){return M(function(o){if(o.g==1)return 0<i.byteLength?i=ze(i,r):i=r,e.vh?T(o,e.vh(i),3):o.B(0);i=new Uint8Array(0),V(o)})})}Gh.prototype.abort=function(){this.wf&&this.wf.abort()};function Vh(e){ve.call(this);var t=this;this.g=new Set,this.i=e,this.h=new te(function(){for(var n=t.i(),i=g(t.g),r=i.next();!r.done;r=i.next())r=r.value,r.endTime<n.start&&(t.g.delete(r),r=new G("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).wa(2)}de(Vh,ve),Vh.prototype.release=function(){this.g.clear(),this.h.stop(),ve.prototype.release.call(this)};function wa(e){ve.call(this),this.g=new Map,this.h=e}de(wa,ve),wa.prototype.release=function(){this.g.clear(),ve.prototype.release.call(this)};function T2(e,t){var n=e.g.get(t);return n||(n={re:[],pg:null,contentType:t},e.g.set(t,n)),n}function E2(e,t,n){var i=T2(e,t.contentType);S2(e,i),e={nd:t,position:n},i=i.re,t=i.findIndex(function(r){return r.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}wa.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.pg;e:{for(var r=n.re,o=r.length-1;0<=o;o--){var s=r[o];if(s.position<=e){r=s.nd;break e}}r=null}o=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),s=r&&i&&r.label&&i.label&&i.label!==r.label;var u=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!cs(i.roles,r.roles),(s||u||i)&&Gm(this,e,r.contentType)&&(n.pg=r,i=new G("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),o&&Gm(this,e,r.contentType)&&(n.pg=r,JSON.stringify(r),n=new G("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function Gm(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function S2(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.re;t.re=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.re=[]}function xa(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Ia(e){var t=In(e),n=t.split("/")[0];return e=Qt(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ze:null,colorGamut:null}}function A2(e,t){function n(E){v=E.name;var w=E.reader;w.skip(24);var I=w.za(),k=w.za();w.skip(50),h=String(I),c=String(k),E.reader.Ea()&&fe(E)}function i(E){var w=cm(E.reader);d=w.channelCount,f=w.sampleRate,r(E.name)}function r(E){switch(E=E.toLowerCase(),E){case"avc1":case"avc3":s.push(E+".42E01E"),a=!0;break;case"hev1":case"hvc1":s.push(E+".1.6.L93.90"),a=!0;break;case"dvh1":case"dvhe":s.push(E+".05.04"),a=!0;break;case"vp09":s.push(E+".00.10.08"),a=!0;break;case"av01":s.push(E+".0.01M.08"),a=!0;break;case"mp4a":o.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":o.push(E),u=!0}}var o=[],s=[],u=!1,a=!1,l=null,c=null,h=null,d=null,f=null,m=null,y=null,v;if(new Re().box("moov",fe).box("trak",fe).box("mdia",fe).Y("mdhd",function(E){l=pa(E.reader,E.version).language}).box("minf",fe).box("stbl",fe).Y("stsd",Gi).box("mp4a",function(E){var w=cm(E.reader);d=w.channelCount,f=w.sampleRate,E.reader.Ea()?fe(E):r(E.name)}).box("esds",function(E){E=E.reader;for(var w="mp4a",I,k;E.Ea();){I=E.$();for(var R=E.$();R&128;)R=E.$();if(I==3)E.za(),R=E.$(),R&128&&E.za(),R&64&&E.skip(E.$()),R&32&&E.za();else if(I==4)k=E.$(),E.skip(12);else if(I==5)break}k&&(w+="."+xs(k),I==5&&E.Ea()&&(I=E.$(),k=(I&248)>>3,k===31&&E.Ea()&&(k=32+((I&7)<<3)+((E.$()&224)>>5)),w+="."+k)),o.push(w),u=!0}).box("ac-3",i).box("ec-3",i).box("ac-4",i).box("Opus",i).box("fLaC",i).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(E){var w=v||"";switch(v){case"dvav":w="avc3";break;case"dva1":w="avc1"}E=E.reader,E.skip(1),E=w+"."+xs(E.$())+xs(E.$())+xs(E.$()),s.push(E),a=!0}).box("hvcC",function(E){var w=v||"";switch(v){case"dvh1":w="hvc1";break;case"dvhe":w="hev1"}var I=E.reader;I.skip(1),E=I.$();var k=["","A","B","C"][E>>6],R=E&31,D=I.V(),P=(E&32)>>5?"H":"L";E=[I.$(),I.$(),I.$(),I.$(),I.$(),I.$()],I=I.$();for(var C=0,N=0;32>N&&(C|=D&1,N!=31);N++)C<<=1,D>>=1;for(w=w+("."+k+R)+("."+xs(C,!0)),w+="."+P+I,k="",R=E.length;R--;)((P=E[R])||k)&&(k="."+P.toString(16).toUpperCase()+k);w+=k,s.push(w),a=!0}).box("dvcC",function(E){var w=v||"";switch(v){case"hvc1":w="dvh1";break;case"hev1":w="dvhe";break;case"avc1":w="dva1";break;case"avc3":w="dvav";break;case"av01":w="dav1"}var I=E.reader;I.skip(2),E=I.$(),I=I.$(),s.push(w+"."+jt(E>>1&127)+"."+jt(E<<5&32|I>>3&31)),a=!0}).box("dvvC",function(E){var w=v||"";switch(v){case"hvc1":w="dvh1";break;case"hev1":w="dvhe";break;case"avc1":w="dva1";break;case"avc3":w="dvav";break;case"av01":w="dav1"}var I=E.reader;I.skip(2),E=I.$(),I=I.$(),s.push(w+"."+jt(E>>1&127)+"."+jt(E<<5&32|I>>3&31)),a=!0}).Y("vpcC",function(E){var w=v||"",I=E.reader;E=I.$();var k=I.$();I=I.$()>>4&15,s.push(w+"."+jt(E)+"."+jt(k)+"."+jt(I)),a=!0}).box("av1C",function(E){var w=v||"";switch(v){case"dav1":w="av01"}var I=E.reader;I.skip(1),E=I.$(),I=I.$();var k=E>>>5,R=(I&64)>>6;s.push(w+"."+k+"."+jt(E&31)+(I>>>7?"H":"M")+"."+jt(k===2&&R?(I&32)>>5?12:10:R?10:8)+"."+((I&16)>>4)+"."+((I&8)>>3)+((I&4)>>2)+(I&3)+"."+jt(1)+"."+jt(1)+"."+jt(1)+".0"),a=!0}).box("enca",dh).box("encv",hn).box("sinf",fe).box("frma",function(E){E=hm(E.reader).gb,r(E)}).box("colr",function(E){s=s.map(function(k){if(k.startsWith("av01.")){var R=E.reader,D=R.La(),P=R.Rb(4),C=String.fromCharCode(P[0]);if(C+=String.fromCharCode(P[1]),C+=String.fromCharCode(P[2]),C+=String.fromCharCode(P[3]),C==="nclx"){P=R.za(),C=R.za();var N=R.za(),_=R.$()>>7,U=k.split(".");U.length==10&&(U[6]=jt(P),U[7]=jt(C),U[8]=jt(N),U[9]=String(_),k=U.join("."))}R.seek(D)}return k});var w=Fw(E.reader),I=w.colorGamut;m=w.ze,y=I}).parse(e||t,!0),!o.length&&!s.length)return null;var A=u&&!a,S=new Map;if(a){var x=new Zt("video/mp4");for(e&&x.init(e),x.i(t),e=g(x.j()),t=e.next();!t.done;t=e.next())t=t.value,S.set(t,t);x.g()}return{type:A?"audio":"video",mimeType:A?"audio/mp4":"video/mp4",codecs:Hh(o.concat(s)).join(", "),language:l,height:c,width:h,channelCount:d,sampleRate:f,closedCaptions:S,ze:m,colorGamut:y}}function Hh(e){var t=new Set,n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=Jn(i);t.has(r)||(n.push(i),t.add(r))}return t=zc("audio",n),i=zc("video",n),e=zc(ye,n),i=w2(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function w2(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")});return t?et('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function x2(e){var t=null;return new Re().box("moov",fe).box("trak",fe).box("mdia",fe).box("minf",fe).box("stbl",fe).Y("stsd",Gi).box("encv",hn).box("enca",dh).box("sinf",fe).box("schi",fe).Y("tenc",function(n){n=n.reader,n.$(),n.$(),n.$(),n.$(),t=ci(n.Rb(16))}).parse(e,!0),t}function qh(e,t,n){var i,r,o,s,u;return M(function(a){if(a.g==1)return i=t,i.cryptoKey?a.B(2):T(a,i.fetchKey(),3);if(r=i.iv,!r)for(r=he(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n,s=r.byteLength-1;0<=s;s--)r[s]=o&255,o>>=8;return t.blockCipherMode=="CBC"?u={name:"AES-CBC",iv:r}:u={name:"AES-CTR",counter:r,length:64},a.return(O.crypto.subtle.decrypt(u,i.cryptoKey,e))})}function yr(e,t,n,i,r){return e=ut(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Vm(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.C=1,this.u=this.j=null,this.J=0,this.H=!1,this.i=new Map,this.G=!1,this.K=null,this.A=!1,this.m=new Jr(function(){return I2(n)}),this.L=Date.now()/1e3,this.s=new Map,this.I={projection:null,hfov:null},this.O=0,this.M=1/0}p=Vm.prototype,p.destroy=function(){return this.m.destroy()};function I2(e){var t,n,i,r,o,s,u;return M(function(a){if(a.g==1){for(t=[],n=g(e.i.values()),i=n.next();!i.done;i=n.next())r=i.value,Rs(r),t.push(Ps(r)),r.ba&&(Fn(r.ba),r.ba=null);for(o=g(e.s.values()),s=o.next();!s.done;s=o.next())u=s.value,Fn(u);return T(a,Promise.all(t),2)}e.i.clear(),e.s.clear(),e.g=null,e.l=null,e.h=null,V(a)})}p.configure=function(e){if(this.h=e,this.K=new Ag({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.ba&&(Fn(t.ba),t.ba=null),t=g(this.s.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Fn(this.s.get(n)),this.s.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(ye))&&t.ba&&(Fn(t.ba),t.ba=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.ba&&(Fn(t.ba),t.ba=null),t=g(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.ba?(Fm(n.ba,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Fn(n.ba),n.ba=null)):0<e.segmentPrefetchLimit&&(n.ba=Kh(this,n.stream));e.disableAudioPrefetch||P2(this)};function C2(e,t,n){e.l.presentationTimeline.U()||(e.O=t,e.M=n)}p.start=function(e){var t=this;return M(function(n){if(n.g==1)return T(n,R2(t,e||new Map),2);Pe(t.m),t.G=!0,V(n)})};function M2(e,t){var n,i,r,o,s,u;M(function(a){switch(a.g){case 1:return n=Qe,e.J++,i=e.J,Z(a,2),T(a,ym(e.g.oa,n.Ka),4);case 4:le(a,3);break;case 2:r=Q(a),e.g&&e.g.onError(r);case 3:o=it(t.mimeType,t.codecs),ma(e.g.oa,o,e.l.sequenceMode,t.external),s=e.g.oa.H,(s.isTextVisible()||e.h.alwaysStreamText)&&e.J==i&&(u=Km(e,t),e.i.set(n.Ka,u),dn(e,u,0)),V(a)}})}function k2(e){var t=e.i.get(ye);t&&(Rs(t),Ps(t).catch(function(){}),e.i.delete(ye)),e.u=null}function Hm(e,t){for(var n=0>e.g.Ua(),i=g(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.va&&r.va.xd(n),r.ba&&r.ba.xd(n);for(i=g(e.s.values()),r=i.next();!r.done;r=i.next())r.value.xd(n);(n=e.i.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Sc&&(oo(e,t,!1,0,!1),n.Sc=i):(t=n.Sc)&&(n.Sc=null,oo(e,t,!0,0,!1)))}function qm(e,t,n,i,r,o){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,o=o===void 0?!1:o,e.j=t,e.G&&(t.video&&oo(e,t.video,n,i,r,o),t.audio&&oo(e,t.audio,n,i,r,o))}function Ca(e,t){M(function(n){if(n.g==1)return e.u=t,e.G?t.segmentIndex?n.B(2):T(n,t.createSegmentIndex(),2):n.return();oo(e,t,!0,0,!1),V(n)})}function oo(e,t,n,i,r,o){var s=e.i.get(t.type);s||t.type!=ye?s&&(s.Sc&&(t.trickModeVideo?(s.Sc=t,t=t.trickModeVideo):s.Sc=null),s.stream!=t||r)&&(e.s.has(t)?s.ba=e.s.get(t):s.ba&&y2(s.ba,t),t.type==ye&&(r=it(t.mimeType,t.codecs),ma(e.g.oa,r,e.l.sequenceMode,t.external)),e.s.has(s.stream)||s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.va=null,s.Gh=!!o,n?s.Sd?s.If=!0:s.ib?(s.zc=!0,s.Te=i,s.If=!0):(Rs(s),Yh(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)})):s.ib||s.Tb||dn(e,s,0),L2(e,s).catch(function(u){e.g&&e.g.onError(u)})):M2(e,t)}function L2(e,t){var n,i;return M(function(r){if(r.g==1)return t.Cb?(n=t.stream,i=t.Cb,n.segmentIndex?r.B(2):T(r,n.createSegmentIndex(),2)):r.return();if(t.Cb!=i||t.stream!=n)return r.return();var o=e.g.Ye(),s=va(e.g.oa,t.type),u=t.stream.segmentIndex.find(t.rb?t.rb.endTime:o),a=u==null?null:t.stream.segmentIndex.get(u);u=a&&a.Ja?a.Ja-a.$a:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.ma)&&(u+=(a.Ja?a.Ja-a.$a:null)||0),a=e.g.getBandwidthEstimate(),o=8*u/a<(s||0)-o-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.Cb.h.g>u):o=!1,o&&t.Cb.abort(),V(r)})}p.ve=function(){if(this.g)for(var e=this.g.Ye(),t=g(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var r=this.g.oa;if(r.G?r=!1:i==ye?(r=r.g,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=to(r,i),r=xh(r,e)),!r){if(n.ba&&(n.ba.g=null),n.type==="audio"){r=g(this.s.values());for(var o=r.next();!o.done;o=r.next())o.value.g=null}n.va=null,(va(this.g.oa,i)!=null||n.ib)&&Ma(this,n),n.Cb&&(n.Cb.abort(),n.Cb=null),i===ye&&(i=this.g.oa,i.J&&i.J.g()),n.ve=!0}}};function Ma(e,t){t.Sd||t.zc||(t.ib?(t.zc=!0,t.Te=0):Ph(e.g.oa,t.type)==null?t.Tb==null&&dn(e,t,0):(Rs(t),Yh(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function R2(e,t){var n,i,r,o,s,u,a,l,c,h;return M(function(d){if(d.g==1){if(n=Qe,!e.j)throw new L(2,5,5006);return i=new Map,r=new Set,e.j.audio&&(i.set(n.ha,e.j.audio),r.add(e.j.audio)),e.j.video&&(i.set(n.ua,e.j.video),r.add(e.j.video)),e.u&&(i.set(n.Ka,e.u),r.add(e.u)),o=e.g.oa,T(d,o.init(i,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Pe(e.m),e.updateDuration(),s=g(i.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=i.get(a),e.i.has(a)||(c=Km(e,l),t.has(l.id)&&(h=t.get(l.id),v2(h,function(f,m,y){return ka(f,m,y||null,e.h.retryParameters,e.g.hc)}),c.ba=h),e.i.set(a,c),dn(e,c,0));V(d)})}function Km(e,t){return{stream:t,type:t.type,va:null,ba:Kh(e,t),rb:null,md:null,lf:null,jf:null,hf:null,Sc:null,endOfStream:!1,ib:!1,Tb:null,zc:!1,Te:0,If:!1,Sd:!1,ve:!0,fh:!1,ae:!1,Cb:null}}function Kh(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===ye&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===ye&&e.h.disableTextPrefetch)return null;if(e.s.has(t))return e.s.get(t);var n=e.i.get(t.type);return(n=n&&n.ba)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Aa(e.h.segmentPrefetchLimit,t,function(i,r,o){return ka(i,r,o||null,e.h.retryParameters,e.g.hc)},0>e.g.Ua()):null}function P2(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,i={},r=g(e.l.variants),o=r.next();!o.done;i={jb:i.jb},o=r.next())if(i.jb=o.value,i.jb.audio)if(e.s.has(i.jb.audio)){if(o=e.s.get(i.jb.audio),Fm(o,t),!(0<t&&n.some(function(u){return function(a){return jr(u.jb.audio.language,a)}}(i)))){var s=e.i.get(i.jb.audio.type);o!==(s&&s.ba)&&Fn(o),e.s.delete(i.jb.audio)}}else 0>=t||!n.some(function(u){return function(a){return jr(u.jb.audio.language,a)}}(i))||!(o=Kh(e,i.jb.audio))||(i.jb.audio.segmentIndex||i.jb.audio.createSegmentIndex(),e.s.set(i.jb.audio,o))}p.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.oa.vb(e):this.g.oa.vb(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function D2(e,t){var n,i,r,o,s,u;return M(function(a){switch(a.g){case 1:if(Pe(e.m),t.ib||t.Tb==null||t.Sd)return a.return();if(t.Tb=null,!t.zc){a.B(2);break}return T(a,Yh(e,t,t.If,t.Te),3);case 3:return a.return();case 2:if(t.stream.segmentIndex){a.B(4);break}return n=t.stream,Z(a,5),T(a,t.stream.createSegmentIndex(),7);case 7:le(a,6);break;case 5:return i=Q(a),T(a,Jh(e,t,i),8);case 8:return a.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.ib||t.Tb||dn(e,t,0),a.return();case 4:Z(a,9),r=N2(e,t),r!=null&&(dn(e,t,r),t.ae=!1),le(a,10);break;case 9:return o=Q(a),T(a,Jh(e,t,o),11);case 11:return a.return();case 10:if(s=Array.from(e.i.values()),!e.G||!s.every(function(l){return l.endOfStream})){a.B(0);break}return T(a,e.g.oa.endOfStream(),13);case 13:Pe(e.m),u=e.g.oa.getDuration(),u!=0&&u<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.vb(u),V(a)}})}function N2(e,t){if(Wh(t))return e2(e.g.oa,t.stream.originalId||""),null;if(t.type==ye&&t2(e.g.oa),!e.g.oa.xa&&t.type!=ye)return e.h.updateIntervalSeconds/2;var n=e.g.Ye();if(t.type==="audio")for(var i=g(e.s.keys()),r=i.next();!r.done;r=i.next())r=e.s.get(r.value),r.hb(n,!0),ks(r,n);i=t.rb?t.rb.endTime:n,r=Zw(e.g.oa,t.type,n);var o=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.C),s=e.l.presentationTimeline.getDuration()-i,u=va(e.g.oa,t.type);if(1e-6>s&&u)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(ye))&&Wh(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,r>=o)return e.h.updateIntervalSeconds/2;if(r=_2(e,t,n,u),!r)return e.h.updateIntervalSeconds;for(o=1/0,s=Array.from(e.i.values()),s=g(s),u=s.next();!u.done;u=s.next())u=u.value,Wh(u)||u.va&&!u.va.current()||(o=Math.min(o,u.rb?u.rb.endTime:n));return i>=o+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.ba&&t.va&&!e.s.has(t.stream)&&(t.ba.hb(r.startTime),ks(t.ba,r.startTime)),U2(e,t,n,r).catch(function(){}),null)}function _2(e,t,n,i){if(t.va)return t.va.current();if(t.rb||i)return t.va=t.stream.segmentIndex.dc(t.rb?t.rb.endTime:i,!1,0>e.g.Ua()),t.va&&t.va.next().value;i=e.h.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=0>e.g.Ua();var o=null;return i&&(t.va=t.stream.segmentIndex.dc(r,!1,e),o=t.va&&t.va.next().value),o||(t.va=t.stream.segmentIndex.dc(n,!1,e),o=t.va&&t.va.next().value),o}function U2(e,t,n,i){var r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x;return M(function(E){switch(E.g){case 1:if(r=Qe,o=t.stream,s=t.va,t.ib=!0,Z(E,2),i.tc()==2)throw new L(1,1,1011);return T(E,j2(e,t,i),4);case 4:return Pe(e.m),e.A?E.return():(u=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",a=O.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&a&&u&&(e.l.type!="HLS"||i.m)?(h=new Uint8Array(0),f=d=!1,y=function(w){var I,k,R;return M(function(D){switch(D.g){case 1:if(d||(f=!0,Pe(e.m),e.A))return D.return();if(Z(D,2),h=O2(h,w),I=!1,k=0,new Re().box("mdat",function(P){k=P.size+P.start,I=!0}).parse(h,!1,!0),!I){D.B(4);break}return R=h.subarray(0,k),h=h.subarray(k),T(D,zh(e,t,n,o,i,R,!0),5);case 5:t.ba&&t.va&&ks(t.ba,i.startTime,!0);case 4:le(D,0);break;case 2:m=Q(D),V(D)}})},T(E,Xh(e,t,i,y),9)):(l=Xh(e,t,i),T(E,l,7)));case 7:return c=E.h,Pe(e.m),e.A?E.return():(Pe(e.m),t.zc?(t.ib=!1,dn(e,t,0),E.return()):T(E,zh(e,t,n,o,i,c),6));case 9:if(v=E.h,m)throw m;if(f){E.B(10);break}return d=!0,Pe(e.m),e.A?E.return():t.zc?(t.ib=!1,dn(e,t,0),E.return()):T(E,zh(e,t,n,o,i,v),10);case 10:t.ba&&t.va&&ks(t.ba,i.startTime,!0);case 6:if(Pe(e.m),e.A)return E.return();t.rb=i,s.next(),t.ib=!1,t.fh=!1,A=e.g.oa.Wb(),S=A[t.type],JSON.stringify(S),t.zc||e.g.$g(i,t.stream),dn(e,t,0),le(E,0);break;case 2:if(x=Q(E),Pe(e.m,x),e.A)return E.return();if(t.ib=!1,x.code==7001)t.ib=!1,Rs(t),dn(e,t,0),E.B(0);else if(t.type==r.Ka&&e.h.ignoreTextStreamFailures)e.i.delete(r.Ka),E.B(0);else if(x.code==3017)b2(e,t,x),E.B(0);else return t.ae=!0,x.category==1&&t.ba&&Ls(t.ba,i),x.severity=2,T(E,Jh(e,t,x),0)}})}function O2(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function b2(e,t,n){if(!Array.from(e.i.values()).some(function(r){return r!=t&&r.fh})){if(0<e.h.maxDisabledTime&&e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var i=Math.round(100*e.C);if(20<i)e.C-=.2;else if(4<i)e.C-=.04;else{t.ae=!0,e.A=!0,e.g.onError(n);return}t.fh=!0}dn(e,t,4)}function j2(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m;return M(function(y){switch(y.g){case 1:if(i=Qe,r=[],o=Math.max(0,Math.max(n.appendWindowStart,e.O)-.1),s=Math.min(n.appendWindowEnd,e.M)+.01,u=Jn(t.stream.codecs),a=In(t.stream.mimeType),l=n.timestampOffset,l==t.lf&&o==t.jf&&s==t.hf&&u==t.Tg&&a==t.Ug){y.B(2);break}if(c=t.Tg&&t.Ug&&a2(e.g.oa,t.type,a,u),!c){y.B(3);break}if(h=null,t.type===i.ua?h=e.i.get(i.ha):t.type===i.ha&&(h=e.i.get(i.ua)),!h){y.B(3);break}return T(y,Ps(h).catch(function(){}),5);case 5:h.md=null,Ma(e,h);case 3:return T(y,zm(e,t,l,o,s,n,u,a),2);case 2:return Ah(n.ma,t.md)||(t.md=n.ma,n.l&&n.ma&&(d=Xh(e,t,n.ma),f=function(){var v,A,S,x,E,w,I;return M(function(k){switch(k.g){case 1:return Z(k,2),T(k,d,4);case 4:return v=k.h,Pe(e.m),A=null,S=new Map,x={projection:null,hfov:null},E=new Re,E.box("moov",fe).box("trak",fe).box("mdia",fe).Y("mdhd",function(R){A=pa(R.reader,R.version).timescale}).box("hdlr",function(R){switch(R=R.reader,R.skip(8),R.Qc()){case"soun":S.set(i.ha,A);break;case"vide":S.set(i.ua,A)}A=null}).box("minf",fe).box("stbl",fe).Y("stsd",Gi).box("encv",hn).box("avc1",hn).box("avc3",hn).box("hev1",hn).box("hvc1",hn).box("dvav",hn).box("dva1",hn).box("dvh1",hn).box("dvhe",hn).box("vexu",fe).box("proj",fe).Y("prji",function(R){R=R.reader.Qc(),x.projection=R}).box("hfov",function(R){R=R.reader.V()/1e3,x.hfov=R}).parse(v),G2(e,x),S.has(t.type)?n.ma.timescale=S.get(t.type):A!=null&&(n.ma.timescale=A),w=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,T(k,e.g.Jh(t.type,v),5);case 5:return T(k,ya(e.g.oa,t.type,v,null,t.stream,w),6);case 6:le(k,0);break;case 2:throw I=Q(k),t.md=null,I}})},e.g.lk(n.startTime,n.ma),r.push(f()))),e.l.sequenceMode&&(m=t.rb?t.rb.j:null,n.j!=m&&r.push(i2(e.g.oa,t.type,n.startTime))),T(y,Promise.all(r),0)}})}function zm(e,t,n,i,r,o,s,u){var a,l,c,h;return M(function(d){if(d.g==1)return a=Qe,l=new Map,e.j.audio&&l.set(a.ha,e.j.audio),e.j.video&&l.set(a.ua,e.j.video),Z(d,2),t.jf=i,t.hf=r,s&&(t.Tg=s),u&&(t.Ug=u),t.lf=n,c=e.l.sequenceMode||e.l.type=="HLS",T(d,n2(e.g.oa,t.type,n,i,r,c,o.mimeType||t.stream.mimeType,o.codecs||t.stream.codecs,l),4);if(d.g!=2)return le(d,0);throw h=Q(d),t.jf=null,t.hf=null,t.Tg=null,t.Ug=null,t.lf=null,h})}function zh(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u,a,l,c,h,d,f,m,y;return M(function(v){switch(v.g){case 1:return u=i.closedCaptions&&0<i.closedCaptions.size,l=i.emsgSchemeIdUris!=null&&0<i.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,c=e.h.parsePrftBox&&!e.H,h=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",d=null,r.ma&&(d=r.ma.timescale),f=h&&d&&i.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(l||c||f)&&(a=new Re),l&&a.Y("emsg",function(A){var S=i.emsgSchemeIdUris;if(A.version===0)var x=A.reader.Qc(),E=A.reader.Qc(),w=A.reader.V(),I=A.reader.V(),k=A.reader.V(),R=A.reader.V(),D=r.startTime+I/w;else w=A.reader.V(),D=A.reader.td()/w+r.timestampOffset,I=D-r.startTime,k=A.reader.V(),R=A.reader.V(),x=A.reader.Qc(),E=A.reader.Qc();A=A.reader.Rb(A.reader.getLength()-A.reader.La()),(S&&S.includes(x)||e.h.dispatchAllEmsgBoxes)&&(x=="urn:mpeg:dash:event:2012"?e.g.nk():(S=new Map().set("detail",{startTime:D,endTime:D+k/w,schemeIdUri:x,value:E,timescale:w,presentationTimeDelta:I,eventDuration:k,id:R,messageData:A}),S=new G("emsg",S),S.cancelable=!0,e.g.onEvent(S),!S.defaultPrevented&&(x=="https://aomedia.org/emsg/ID3"||x=="https://developer.apple.com/streaming/emsg-id3")&&(x=vr(A),x.length&&r)&&e.g.onMetadata([{cueTime:r.startTime,data:A,frames:x,dts:r.startTime,pts:r.startTime}],0,r.endTime)))}),c&&a.Y("prft",function(A){if(!e.H&&r.ma.timescale){var S=A.reader,x=A.version;S.V(),A=S.V();var E=S.V();A=1e3*A+E/Math.pow(2,32)*1e3,x===0?S=S.V():(x=S.V(),S=S.V(),S=x*Math.pow(2,32)+S),A=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+A).getTime(),S=new Map().set("detail",{wallClockTime:A,programStartDate:new Date(A-S/r.ma.timescale*1e3)}),S=new G("prft",S),e.g.onEvent(S),e.H=!0}}),f&&a.box("moof",fe).box("traf",fe).Y("tfdt",function(A){var S,x,E,w,I,k;return M(function(R){return S=da(A.reader,A.version),x=S.baseMediaDecodeTime,x?(E=-x/d,w=Number(t.lf)||0,w<E?(I=t.jf,k=t.hf,T(R,zm(e,t,E,I,k,r),0)):R.B(0)):R.return()})}),(l||c||f)&&a.parse(o,!1,s),T(v,F2(e,t,n),2);case 2:return Pe(e.m),m=t.ve,t.ve=!1,y=t.Gh,t.Gh=!1,T(v,e.g.Jh(t.type,o),3);case 3:return T(v,ya(e.g.oa,t.type,o,r,i,u,m,y,s),4);case 4:Pe(e.m),V(v)}})}function F2(e,t,n){var i,r,o,s;return M(function(u){if(u.g==1)return i=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),r=Ph(e.g.oa,t.type),r==null?u.return():(o=n-r,s=o-i,s<=e.h.evictionGoal?u.return():T(u,e.g.oa.remove(t.type,r,r+s),2));Pe(e.m),V(u)})}function Wh(e){return e&&e.type==ye&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Xh(e,t,n,i){var r,o,s,u,a;return M(function(l){switch(l.g){case 1:if(r=n.Zd())return l.return(r);if(o=null,t.ba){var c=t.ba,h=c.h;n instanceof bt&&(h=c.j),h.has(n)?(c=h.get(n),i&&(c.vh=i),o=c.wf):o=null}return o||(o=ka(n,t.stream,i||null,e.h.retryParameters,e.g.hc)),s=0,t.va&&(s=t.va.h),t.Cb=o,T(l,o.promise,2);case 2:if(u=l.h,t.Cb=null,a=u.data,!n.aesKey){l.B(3);break}return T(l,qh(a,n.aesKey,s),4);case 4:a=l.h;case 3:return l.return(a)}})}function ka(e,t,n,i,r){var o=e instanceof ne?e:void 0,s=o?1:0;return e=yr(e.R(),e.$a,e.Ja,i,n),e.contentType=t.type,r.request(Cn,e,{type:s,stream:t,segment:o})}function Yh(e,t,n,i){var r,o;return M(function(s){if(s.g==1)return t.zc=!1,t.If=!1,t.Te=0,t.Sd=!0,t.rb=null,t.va=null,t.ba&&!e.s.has(t.stream)&&Fn(t.ba),i?(r=e.g.Ye(),o=e.g.oa.getDuration(),T(s,e.g.oa.remove(t.type,r+i,o),3)):T(s,ym(e.g.oa,t.type),4);if(s.g!=3)return Pe(e.m),n?T(s,e.g.oa.flush(t.type),3):s.B(3);Pe(e.m),t.Sd=!1,t.endOfStream=!1,t.ib||t.Tb||dn(e,t,0),V(s)})}function dn(e,t,n){var i=t.type;(i!=ye||e.i.has(i))&&(t.Tb=new ns(function(){var r;return M(function(o){if(o.g==1)return Z(o,2),T(o,D2(e,t),4);if(o.g!=2)return le(o,0);r=Q(o),e.g&&e.g.onError(r),V(o)})}).X(n))}function Rs(e){e.Tb!=null&&(e.Tb.stop(),e.Tb=null)}function Ps(e){return M(function(t){return e.Cb?T(t,e.Cb.abort(),0):t.B(0)})}function Jh(e,t,n){var i;return M(function(r){if(r.g==1)return T(r,wg(e.K),2);Pe(e.m),i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<i&&(n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),V(r)})}function B2(e){var t,n,i,r,o,s;return M(function(u){return u.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.L<n?u.return(!1):(e.L=t,i=Qe,(r=e.i.get(i.ha))&&(r.md=null,Ma(e,r),Ps(r).catch(function(){})),(o=e.i.get(i.ua))&&(o.md=null,Ma(e,o),Ps(o).catch(function(){})),s=new Map,e.j.audio&&s.set(i.ha,e.j.audio),e.j.video&&s.set(i.ua,e.j.video),T(u,Em(e.g.oa,s),2))):u.return(!0)})}function G2(e,t){if(e.I.projection!=t.projection||e.I.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new G("spatialvideoinfo",n)}else n=new G("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.I=t}}function La(){}function Ds(e,t,n,i,r){var o=r in i,s=o?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,u=o||s,a=!0,l;for(l in t){var c=r+"."+l,h=o?i[r]:n[l];u||l in n?t[l]===void 0?h===void 0||u?delete e[l]:e[l]=$n(h):s?e[l]=t[l]:h.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=$n(h)),c=Ds(e[l],t[l],h,i,c),a=a&&c):typeof t[l]!=typeof h||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=h.constructor?(si("Invalid config, wrong type for "+c),a=!1):(typeof n[l]=="function"&&n[l].length!=t[l].length&&ce("Unexpected number of arguments for "+c),e[l]=t[l]):(si("Invalid config, unrecognized key "+c),a=!1)}return a}function Ns(e,t){for(var n={},i=n,r=0,o=0;r=e.indexOf(".",r),!(0>r);)(r==0||e[r-1]!="\\")&&(o=e.substring(o,r).replace(/\\\./g,"."),i[o]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function so(e,t){return e&&t}function Wm(e,t){function n(s){for(var u=g(Object.keys(s)),a=u.next();!a.done;a=u.next())a=a.value,o(s[a])&&Object.keys(s[a]).length===0||r(s[a])||typeof s[a]=="function"?delete s[a]:o(s[a])&&(n(s[a]),Object.keys(s[a]).length===0&&delete s[a])}function i(s,u){return Object.keys(s).reduce(function(a,l){var c=s[l];return u.hasOwnProperty(l)?o(c)&&o(u[l])?(c=i(c,u[l]),(0<Object.keys(c).length||!o(c))&&(a[l]=c)):r(c)&&r(u[l])||Number.isNaN(c)&&Number.isNaN(u[l])||c!==u[l]&&(a[l]=c):a[l]=c,a},{})}function r(s){return Array.isArray(s)&&s.length===0}function o(s){return s&&typeof s=="object"&&!Array.isArray(s)}return e=i(e,t),n(e),e}j("shaka.util.ConfigUtils",La),La.getDifferenceFromConfigObjects=Wm,La.convertToConfigObject=Ns,La.mergeConfigObjects=Ds;function pn(){}function Xm(e){return e=li(e),new Ze(e).cc}function _s(e,t,n){function i(u){Ut(o).setUint32(s,u.byteLength,!0),s+=4,o.set(he(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new L(2,6,6015);var r;typeof t=="string"?r=qc(t,!0):r=t,e=li(e),e=qc(e,!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function Ym(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=li(e).split("skd://").pop(),_s(e,n,t))}function $h(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}j("shaka.util.FairPlayUtils",pn),pn.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Fe(t.data)}catch(r){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(r){}e&&(t.data=an(ln(n)))}},pn.expressplayFairPlayRequest=function(e,t){$h(e,t)},pn.conaxFairPlayRequest=function(e,t){$h(e,t)},pn.ezdrmFairPlayRequest=function(e,t){$h(e,t)},pn.verimatrixFairPlayRequest=function(e,t){e===2&&(e=he(t.body),e=rr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=On("spc="+e))},pn.expressplayInitDataTransform=function(e,t,n){return Ym(e,t,n)},pn.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=li(e).split("skd://").pop().split("?").shift(),n=O.atob(n);var i=new ArrayBuffer(2*n.length);i=k0(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return _s(e,i,t)},pn.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=li(e).split(";").pop(),_s(e,n,t))},pn.verimatrixInitDataTransform=function(e,t,n){return Ym(e,t,n)},pn.initDataTransform=_s,pn.defaultGetContentId=Xm,pn.isFairPlaySupported=function(){var e;return M(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Z(t,2),T(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Q(t),t.return(!1))})};function Zh(){}function uo(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:jn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(c,h,d){return Hu()&&h=="skd"&&(h=d.serverCertificate,d=Xm(c),c=_s(c,d,h)),c},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ui(),minHdcpVersion:"",ignoreDuplicateInitData:!ju()};(ui()||Yn())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",i=!1;ju()||os()||Ce("Tizen 4")||Ce("Tizen 5")||Ce("Tizen 6")||Fu()||Xn()&&Fc()===53||Xn()&&Fc()===68||!(!$t()||$t()&&Vu()||$t()&&Ce("Fuchsia"))||Gc()&&rs()||(n="smooth",i=!0),i={retryParameters:jn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Ra,manifestPreprocessorTXml:Pa,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:i,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(os()||ju()||Fu()||Yn()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Ra,manifestPreprocessorTXml:Pa,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var r={retryParameters:jn(),failureCallback:function(c){return so([c])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Yn()||Bu(),dontChooseCodecs:!1,shouldFixTimestampOffset:Xn()||Wn()};(Xn()||Wn()||$t()||Gu())&&(r.stallSkip=0);var o={trackSelectionCallback:function(c){return M(function(h){return h.return(c)})},downloadSizeCallback:function(c){var h;return M(function(d){return d.g==1?navigator.storage&&navigator.storage.estimate?T(d,navigator.storage.estimate(),3):d.return(!0):(h=d.h,d.return(h.usage+c<.95*h.quota))})},progressCallback:function(c,h){return so([c,h])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:nr()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(c){return so([c],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(c,h){return so([c,h])}};var s=!1,u=!1,a=!0;Vc()&&(u=s=!0,a=!1);var l={drm:t,manifest:i,streaming:r,mediaSource:n,offline:o,abrFactory:function(){return new Ge},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:s,skipPlayDetection:u,supportsMultipleMediaElements:a}};return o.trackSelectionCallback=function(c){return M(function(h){return h.return(V2(c,l.preferredAudioLanguage,l.preferredVideoHdrLevel))})},l}function Ki(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Ds(e,t,n||uo(),i,"")}function V2(e,t,n){var i=n;i=="AUTO"&&(i=O.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var r=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=i)});n=[];var o=qu(t,r.map(function(u){return u.language}));o&&(n=r.filter(function(u){return xe(u.language)==o})),n.length==0&&(n=r.filter(function(u){return u.primary})),n.length==0&&(r.map(function(u){return u.language}),n=r);var s=n.filter(function(u){return u.height&&480>=u.height});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[r])),e=g(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=ye&&n.type!="image"||t.push(n);return t}function Ra(e){return so([e],e)}function Pa(e){return so([e],e)}j("shaka.util.PlayerConfiguration",Zh),Zh.mergeConfigObjects=Ki,Zh.createDefault=uo;function Si(e,t,n,i){ve.call(this),this.M=e,this.S=t,this.xa=i.networkingEngine,this.A=n,this.s=null,this.sa=0,this.Ia=i.cd,this.G=i.gk,this.Xa=i.hk,this.g=i.config,this.j=this.H=this.h=null,this.ea=!1,this.I=i.tk,this.qa=!1,this.l=null,this.aa=!1,this.i=this.C=null,this.Z=!1,this.L=new Map,this.ra=!1,this.Aa=i.rk,this.W=new Sa,this.m=new Le,this.O=null,this.u=!1,this.Fa=i.aj,this.ka=null,this.Ha=i.$i,this.P=!1,this.K=[],this.J=[]}de(Si,ve);function Us(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function H2(e){if(e.J)for(var t=g(e.J),n=t.next();!n.done;n=t.next())n=n.value,n();e.J=null}function Jm(e,t){if(e.O=t,e.P=!0,e.K){t=g(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}p=Si.prototype,p.getStartTime=function(){return this.A},p.fd=function(){return this.M},p.Jg=function(){return this.h};function q2(e){return e.Z=!0,e.i}function K2(e){return e.ea=!0,e.j}function z2(e){return e.qa=!0,e.I}p.getStats=function(){return this.W};function W2(e){return e.aa=!0,e.l}function X2(e){return e.ra=!0,e.L}p.start=function(){var e=this;(function(){var t;return M(function(n){switch(n.g){case 1:return T(n,Promise.resolve(),2);case 2:return Z(n,3),T(n,Y2(e),5);case 5:return Os(e),T(n,J2(e),6);case 6:if(Os(e),e.s||(e.s=new zr(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ha){var i=e.g.abrFactory;e.C=i,e.i=i(),e.i.configure(e.g.abr)}if(e.Fa){i=e.h.presentationTimeline.U();var r=Qu(e.h.variants);r=e.s.create(r),e.i.configure(e.g.abr),e.i.setVariants(Array.from(r.values())),(r=e.i.chooseVariant(!0))&&(e.ka=r,r.video&&$m(e,r.video,i),r.audio&&$m(e,r.audio,i))}return T(n,void 0,7);case 7:Os(e),e.m.resolve(),le(n,0);break;case 3:t=Q(n),e.m.reject(t),V(n)}})})()},p.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):ve.prototype.dispatchEvent.call(this,e)},p.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new G("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Os(e){if(e.u)throw new L(2,7,7003)}function Qh(e,t){e.dispatchEvent(new G("onstatechange",new Map().set("state",t)))}function Y2(e){var t,n,i,r,o;return M(function(s){if(s.g==1)return Qh(e,"manifest-parser"),e.j||(e.H=tm(e.M,e.S),e.j=e.H(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,Qh(e,"manifest"),e.h?s.B(2):(n=e,T(s,e.j.start(e.M,e.Xa),3));if(s.g!=2&&(n.h=s.h),i=new G("manifestparsed",void 0),e.dispatchEvent(i),e.h.variants.length==0)throw new L(2,4,4036);$2(e.h),r=Date.now()/1e3,o=r-t,e.W.J=o,V(s)})}function J2(e){var t,n,i,r,o;return M(function(s){switch(s.g){case 1:Qh(e,"drm-engine"),e.sa=Date.now()/1e3,e.l=e.Ia(),e.G.g=e.l,e.l.configure(e.g.drm);var u=e.G;if(t=og(e.h.variants,u.h.restrictions,u.i),!t){s.B(2);break}return n=new G("trackschanged",void 0),T(s,Promise.resolve(),3);case 3:Os(e),e.dispatchEvent(n);case 2:return i=Qu(e.h.variants),T(s,Fg(e.l,i,e.h.offlineSessionIds),4);case 4:return Os(e),T(s,$g(e.G,e.h),5);case 5:if(r=s.h,!r){s.B(0);break}return o=new G("trackschanged",void 0),T(s,Promise.resolve(),7);case 7:e.dispatchEvent(o),V(s)}})}p.configure=function(e,t){e=Ns(e,t),Ki(this.g,e)},p.getConfiguration=function(){return $n(this.g)};function $m(e,t,n){var i,r,o,s,u;M(function(a){if(a.g==1)return i=e.g.streaming.segmentPrefetchLimit||2,r=new Aa(i,t,function(l,c,h){return ka(l,c,h||null,e.g.streaming.retryParameters,e.xa)},!1),e.L.set(t.id,r),T(a,t.createSegmentIndex(),2);o=e.A||0,(u=(s=t.segmentIndex.dc(o))?s.current():null)||(u=t.segmentIndex.get(0)),u&&(n?u.ma&&bm(r,u.ma):ks(r,u.startTime)),V(a)})}p.Yk=function(){return this.m},p.destroy=function(){var e=this,t,n,i;return M(function(r){switch(r.g){case 1:if(e.u=!0,!e.j||e.ea){r.B(2);break}return T(r,e.j.stop(),2);case 2:if(!e.i||e.Z){r.B(4);break}return T(r,e.i.stop(),4);case 4:if(e.I&&!e.qa&&e.I.release(),!e.l||e.aa){r.B(6);break}return T(r,e.l.destroy(),6);case 6:if(0<e.L.size&&!e.ra)for(t=g(e.L.values()),n=t.next();!n.done;n=t.next())i=n.value,Fn(i);V(r)}})};function $2(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}j("shaka.media.PreloadManager",Si),Si.prototype.destroy=Si.prototype.destroy,Si.prototype.waitForFinish=Si.prototype.Yk;function Da(e,t){ve.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Xc:null,Wc:ao,Kc:function(i,r){return Tr(n,"enter",i,r)}},{Xc:bs,Wc:ao,Kc:function(i,r){return Tr(n,"enter",i,r)}},{Xc:js,Wc:ao,Kc:function(i,r){return Tr(n,"enter",i,r)}},{Xc:ao,Wc:bs,Kc:function(i,r){return Tr(n,"exit",i,r)}},{Xc:ao,Wc:js,Kc:function(i,r){return Tr(n,"exit",i,r)}},{Xc:bs,Wc:js,Kc:function(i,r){return Tr(n,"skip",i,r)}},{Xc:js,Wc:bs,Kc:function(i,r){return Tr(n,"skip",i,r)}}],this.h=new Ee,this.h.o(this.i,"regionremove",function(i){n.g.delete(i.region)})}de(Da,ve),Da.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ve.prototype.release.call(this)},Da.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=g(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),o=e<i.startTime?bs:e>i.endTime?js:ao;this.g.set(i,o);for(var s=g(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.Xc==r&&u.Wc==o&&u.Kc(i,t)}}};function Tr(e,t,n,i){t=new G(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var bs=1,ao=2,js=3;function ed(e,t,n){var i,r,o,s,u,a,l;return M(function(c){switch(c.g){case 1:var h=new Ze(e).sb.split("/").pop().split(".");return i=h.length==1?"":h.pop().toLowerCase(),(r=Z2[i])?c.return(r):(o=0,s=ut([e],n),Z(c,2),s.method="HEAD",T(c,t.request(o,s).promise,4));case 4:u=c.h,r=u.headers["content-type"],le(c,3);break;case 2:if(a=Q(c),!a||a.code!=1002&&a.code!=1001){c.B(3);break}return s.method="GET",T(c,t.request(o,s).promise,6);case 6:l=c.h,r=l.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}var Z2={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Zm(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(s){return Zm(s,e)}).join("");var n=[],i=700<=e.fontWeight,r=e.fontStyle=="italic",o=e.textDecoration.includes("underline");return i&&n.push(["b"]),r&&n.push(["i"]),o&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=Qm(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=Qm(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(s,u){var a=g(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function Qm(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function td(e,t){var n=[];e=g(ev(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,W(td(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=Zm(i,t),n.push(r)}return n}function ev(e){var t=[],n={};e=g(e);for(var i=e.next();!i.done;n={Be:n.Be},i=e.next())n.Be=i.value,t.some(function(r){return function(o){return Wu(r.Be,o)}}(n))||t.push(n.Be);return t}function Q2(e){function t(i){for(var r=5381,o=i.length;o;)r=33*r^i.charCodeAt(--o);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(i){}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Bt(e,t){this.g=null;for(var n=g(Array.from(e.textTracks)),i=n.next();!i.done;i=n.next())i=i.value,i.kind!=="metadata"&&i.kind!=="chapters"&&(i.mode="disabled",i.label==t&&(this.g=i));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}p=Bt.prototype,p.configure=function(){},p.remove=function(e,t){return this.g?(tv(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},p.append=function(e){var t=td(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};t=g(t);for(var r=t.next();!r.done;i={Zc:i.Zc},r=t.next())i.Zc=r.value,e.some(function(o){return function(s){return s.startTime==o.Zc.startTime&&s.endTime==o.Zc.endTime&&s.text==o.Zc.payload}}(i))||(r=Q2(i.Zc))&&n.push(r);for(e=n.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?n.indexOf(s)-n.indexOf(o):n.indexOf(o)-n.indexOf(s)}),e=g(e),i=e.next();!i.done;i=e.next())this.g.addCue(i.value)},p.destroy=function(){return this.g&&(tv(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},p.isTextVisible=function(){return this.g.mode=="showing"},p.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function tv(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var i=g(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}j("shaka.text.SimpleTextDisplayer",Bt),Bt.prototype.setTextVisibility=Bt.prototype.setTextVisibility,Bt.prototype.isTextVisible=Bt.prototype.isTextVisible,Bt.prototype.destroy=Bt.prototype.destroy,Bt.prototype.append=Bt.prototype.append,Bt.prototype.remove=Bt.prototype.remove,Bt.prototype.configure=Bt.prototype.configure;function Gt(){}p=Gt.prototype,p.configure=function(){},p.remove=function(){},p.append=function(){},p.destroy=function(){},p.isTextVisible=function(){return!1},p.setTextVisibility=function(){},j("shaka.text.StubTextDisplayer",Gt),Gt.prototype.setTextVisibility=Gt.prototype.setTextVisibility,Gt.prototype.isTextVisible=Gt.prototype.isTextVisible,Gt.prototype.destroy=Gt.prototype.destroy,Gt.prototype.append=Gt.prototype.append,Gt.prototype.remove=Gt.prototype.remove,Gt.prototype.configure=Gt.prototype.configure;function nv(){}function q(e){return document.createElement(e)}function Ye(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function Ai(e){for(;e.firstChild;)e.removeChild(e.firstChild)}j("shaka.util.Dom",nv),nv.removeAllChildren=Ai;function Vt(e,t,n){var i=this;this.m=!1,this.h=[],this.A=e,this.u=t,this.l=null,this.g=q("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.u.appendChild(this.g),n&&n.captionsUpdatePeriod||He("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.G=new te(function(){i.A.paused||lo(i)}).wa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Ee,this.j.o(document,"fullscreenchange",function(){lo(i,!0)}),this.j.o(this.A,"seeking",function(){lo(i,!0)}),this.j.o(this.A,"resize",function(){var r=i.A,o=r.videoWidth;r=r.videoHeight,o&&r?i.l=o/r:i.l=null}),this.s=null,"ResizeObserver"in O&&(this.s=new ResizeObserver(function(){lo(i,!0)}),this.s.observe(this.g)),this.C=new Map}p=Vt.prototype,p.configure=function(e){this.G&&this.G.wa(e.captionsUpdatePeriod)},p.append=function(e){var t=[].concat(W(this.h)),n={};e=g(ev(e));for(var i=e.next();!i.done;n={Ce:n.Ce},i=e.next())n.Ce=i.value,t.some(function(r){return function(o){return Wu(o,r.Ce)}}(n))||this.h.push(n.Ce);lo(this)},p.destroy=function(){return this.g&&(this.u.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.G&&this.G.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.s&&(this.s.disconnect(),this.s=null)),Promise.resolve()},p.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),lo(this,n>this.h.length),!0},p.isTextVisible=function(){return this.m},p.setTextVisibility=function(e){this.m=e};function ex(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function iv(e,t,n,i,r){var o=!1,s=[],u=[];t=g(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,r.push(a);var l=e.i.get(a),c=a.startTime<=i&&a.endTime>i,h=l?l.Ri:null;l&&(s.push(l.og),l.Rc&&s.push(l.Rc),c||(o=!0,e.i.delete(a),l=null)),c&&(u.push(a),l?ex(e,h)||(o=!0):(tx(e,a,r),l=e.i.get(a),h=l.Ri,o=!0)),0<a.nestedCues.length&&h&&iv(e,a.nestedCues,h,i,r),r.pop()}if(o){for(i=g(s),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(u.sort(function(d,f){return d.startTime!=f.startTime?d.startTime-f.startTime:d.endTime-f.endTime}),u=g(u),a=u.next();!a.done;a=u.next())i=e.i.get(a.value),i.Rc?(i.Rc.contains(n)&&i.Rc.removeChild(n),n.appendChild(i.Rc),i.Rc.appendChild(i.og)):n.appendChild(i.og)}}function lo(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=g(e.C.values());for(var i=t.next();!i.done;i=t.next())Ai(i.value);Ai(e.g),e.i.clear(),e.C.clear()}e.m&&iv(e,e.h,e.g,n,[])}}function tx(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var o=q(r);if(r!="br"&&ix(e,o,t,n,i),n=null,t.region&&t.region.id){var s=t.region,u=e.l===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==cn?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==cn?"%":"px"),e.C.has(n))n=e.C.get(n);else{r=q("span");var a=s.heightUnits==cn?"%":"px",l=s.widthUnits==cn?"%":"px",c=s.viewportAnchorUnits==cn?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute",r.style.height=s.heightUnits===2?5.33*s.height+"%":s.height+a,r.style.width=s.widthUnits===2?s.width*u+"%":s.width+l,s.viewportAnchorUnits===2?(a=s.viewportAnchorY/75*100,l=s.viewportAnchorX/(e.l===4/3?160:210)*100,a-=s.regionAnchorY*s.height*5.33/100,l-=s.regionAnchorX*s.width*u/100,r.style.top=a+"%",r.style.left=l+"%"):(r.style.top=s.viewportAnchorY-s.regionAnchorY*s.height/100+c,r.style.left=s.viewportAnchorX-s.regionAnchorX*s.width/100+c),s.heightUnits!==0&&s.widthUnits!==0&&s.viewportAnchorUnits!==0&&(s=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=s+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.C.set(n,r),n=r}}r=o,i&&(r=q("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.i.set(t,{og:o,Ri:r,Rc:n})}function nx(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Xu?n:e==="left"||e==="start"&&t===ds||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===ds?"line-right":"center"}function ix(e,t,n,i,r){var o=t.style,s=n.nestedCues.length==0,u=1<i.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return" ".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=nd(n.linePadding,n,e.u),o.paddingRight=nd(n.linePadding,n,e.u),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",n.backgroundColor&&(o.backgroundColor=n.backgroundColor),o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=q("span"),t.appendChild(l);n.border&&(l.style.border=n.border),!r&&((t=rv(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=rv(i,function(c){return c.fontFamily}))&&(l.style.fontFamily=t),a&&(l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=nd(n.fontSize,n,e.u),i=n.line,i!=null&&(s=n.lineInterpretation,s==Yu&&(s=1,u=16,e.l&&1>e.l&&(u=32),i=0>i?100+i/u*100:i/u*100),s==1&&(o.position="absolute",n.writingMode==ps?(o.width="100%",n.lineAlign==cr?o.top=i+"%":n.lineAlign=="end"&&(o.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==cr?o.left=i+"%":n.lineAlign=="end"&&(o.right=100-i+"%")):(o.height="100%",n.lineAlign==cr?o.right=i+"%":n.lineAlign=="end"&&(o.left=100-i+"%")))),o.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==ps?o.paddingLeft=n.position:o.paddingTop=n.position),e=nx(n),e=="line-left"?o.cssFloat="left":e=="line-right"&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==ps?o.width=n.size+"%":o.height=n.size+"%")}function nd(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function rv(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}j("shaka.text.UITextDisplayer",Vt),Vt.prototype.setTextVisibility=Vt.prototype.setTextVisibility,Vt.prototype.isTextVisible=Vt.prototype.isTextVisible,Vt.prototype.remove=Vt.prototype.remove,Vt.prototype.destroy=Vt.prototype.destroy,Vt.prototype.append=Vt.prototype.append,Vt.prototype.configure=Vt.prototype.configure;function rx(e,t){function n(o){for(var s=o,u=g(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(1e3*s%1e3),(10>o?"0":"")+o+":"+(10>u?"0":"")+u+":"+(10>a?"0":"")+a+"."+(100>s?10>s?"00":"0":"")+s}var i=td(e);e="WEBVTT\n\n",i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case hi:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}j("shaka.text.WebVttGenerator",function(){});function ov(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}ov.prototype.configure=function(e){this.g=e};function ox(e){e.i=!1,e.l=!0,e.j=!1}function sx(e,t,n){try{if(!e.g.enabled)return t;var i=id(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=_a;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=Oa;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=uv;break e}r=void 0}i.ot=r,i.su=!0;var o=Na(i);return rd(t,o)}catch(s){return tr("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function id(e){return e.g.sessionId||(e.g.sessionId=O.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function co(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,id(e)),n.pr=e.h.Ua();var r=n.ot===Ua||n.ot===Oa;if(e.j&&r&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=ux(e,n),i)i=hx(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var o=Na(e);o&&(t.uris=t.uris.map(function(s){return rd(s,o)}))}}}function ux(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(i,r){return n.includes(r)&&(i[r]=t[r]),i},{}):t}function ax(e){if(e.type===0)return dx;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Oa:Ua;if(t=="audio")return _a;if(t=="text")return e.mimeType==="application/mp4"?ba:od}}function lx(e,t){if(t=e.h.Wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function sv(e,t){if(t=e.h.Wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):0}function cx(e,t){var n=e.h.Jb();if(!n.length)return NaN;e=n[0],n=g(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Ua:return e.videoBandwidth||NaN;case _a:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Na(e){function t(h){return 100*n(h/100)}function n(h){return Math.round(h)}function i(h){return!Number.isNaN(h)&&h!=null&&h!==""&&h!==!1}var r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(h){return encodeURIComponent(h)},rtp:t,tb:n},s=Object.keys(e||{}).sort();s=g(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(i(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var c=void 0;c=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,r.push(c)}}return r.join(",")}function hx(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=g(t);for(var s=t.next();!s.done;s=t.next())s=s.value,r[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=Na(r[e]))&&(n["CMCD-"+i[e]]=o);return n}function rd(e,t){return!t||e.includes("offline:")?e:(e=new Ze(e),e.g.set("CMCD",t),e.toString())}var uv="m",_a="a",Ua="v",Oa="av",dx="i",od="c",ba="tt";j("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Ti:"s",OTHER:"o"});function fn(e){this.h=e,this.g=null}p=fn.prototype,p.configure=function(e){this.h=e},p.Yh=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(cv)?1e3*this.g.get(cv):null},p.Xh=function(){return this.h.enabled&&this.g&&this.g.has(lv)?1e3*this.g.get(lv):null},p.Ej=function(){return this.h.enabled&&this.g&&this.g.has(hv)?this.g.get(hv):null},p.Fj=function(){return this.h.enabled&&this.g&&this.g.has(dv)?this.g.get(dv):null},p.getBandwidthEstimate=function(e){var t=this.Xh();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function av(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}j("shaka.util.CmsdManager",fn),fn.prototype.getBandwidthEstimate=fn.prototype.getBandwidthEstimate,fn.prototype.getRoundTripTime=fn.prototype.Fj,fn.prototype.getResponseDelay=fn.prototype.Ej,fn.prototype.getEstimatedThroughput=fn.prototype.Xh,fn.prototype.getMaxBitrate=fn.prototype.Yh;var lv="etp",cv="mb",hv="rd",dv="rtt";function pv(){this.g=null,this.h=[]}function sd(e,t){return M(function(n){if(n.g==1)return e.g?T(n,new Promise(function(i){return e.h.push(i)}),2):n.B(2);e.g=t,V(n)})}pv.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function b(e,t){ve.call(this);var n=this;this.l=md,this.Hf=this.h=null,this.qa=!1,this.Le=new Ee,this.me=new Ee,this.m=new Ee,this.Ia=new Ee,this.ob=new Ee,this.G=this.I=this.C=this.J=null,this.Me=0,this.W=new pv,this.ra=this.Xf=this.aa=this.i=this.Xa=this.H=this.j=this.ie=this.L=this.Fh=this.ea=this.O=this.ke=this.M=this.Jf=this.K=this.Lb=null,this.Ha=!1,this.xa=this.s=null,this.Zf=1e9,this.ye=[],this.S=NaN,this.g=wi(this),this.P=null,this.Ne=-1,this.Fa=null,this.ka={width:1/0,height:1/0},this.Gf=new Eh(this.g,this.ka,null),this.Lf=[],this.A=null,this.Aa=new zr(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Kb=this.g.preferredTextLanguage,this.ue=this.g.preferredTextRole,this.se=this.g.preferForcedSubs,this.qe=[],t&&t(this),this.O=Ix(this),this.ea=new fn(this.g.cmsd),this.J=Sv(this),this.J.ph(this.g.streaming.forceHTTP),this.J.qh(this.g.streaming.forceHTTPS),this.Nb=this.Z=this.u=null,this.cg=!1,this.$f=new te(function(){return M(function(i){if(i.g==1)return n.Z?T(i,n.ac(n.Nb,!0),3):i.B(0);if(i.g!=4)return T(i,n.load(n.Z),4);n.cg?n.Nb.pause():n.Nb.play(),n.Z=null,n.cg=!1,V(i)})}),Ha&&(this.u=Ha(),this.u.configure(this.g.ads),this.ob.o(this.u,"ad-content-pause-requested",function(i){var r,o;return M(function(s){if(s.g==1)return n.$f.stop(),n.Z?s.B(0):(n.Nb=n.h,n.cg=n.h.ended,r=i.saveLivePosition||!1,o=n,T(s,n.Rh(!0,r),3));o.Z=s.h,V(s)})}),this.ob.o(this.u,"ad-content-resume-requested",function(i){if(i=i.offset||0,n.Z){var r=n.Z;r.A&&i&&(r.A+=i)}n.$f.X(.1)}),this.ob.o(this.u,"ad-content-attach-requested",function(){return M(function(i){return n.h||!n.Nb?i.B(0):T(i,n.ac(n.Nb,!0),0)})})),this.Le.o(O,"online",function(){pd(n),n.gh()}),this.Kf=new te(function(){for(var i=Date.now()/1e3,r=!1,o=!0,s=g(n.i.variants),u=s.next();!u.done;u=s.next())u=u.value,0<u.disabledUntilTime&&u.disabledUntilTime<=i&&(u.disabledUntilTime=0,r=!0),0<u.disabledUntilTime&&(o=!1);o&&n.Kf.stop(),r&&fo(n,!1,void 0,!1,!1)}),this.sa=null,e&&(He("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.ac(e,!0))}de(b,ve);function ja(e){e.L!=null&&(pm(e.L),e.L.release(),e.L=null)}function px(e,t){t.lcevc.enabled?(ja(e),e.L==null&&(e.L=new Cs(e.h,e.Fh,t.lcevc),e.I&&(e.I.W=e.L))):ja(e)}function Be(e,t){return new G(e,t)}p=b.prototype,p.destroy=function(){var e=this,t;return M(function(n){switch(n.g){case 1:return e.l==Bn?n.return():(ja(e),t=e.detach(),e.l=Bn,T(n,t,2));case 2:return T(n,e.qg(),3);case 3:if(e.Le&&(e.Le.release(),e.Le=null),e.me&&(e.me.release(),e.me=null),e.m&&(e.m.release(),e.m=null),e.Ia&&(e.Ia.release(),e.Ia=null),e.ob&&(e.ob.release(),e.ob=null),e.xa=null,e.g=null,e.A=null,e.Hf=null,e.O=null,e.ea=null,!e.J){n.B(4);break}return T(n,e.J.destroy(),5);case 5:e.J=null;case 4:e.s&&(e.s.release(),e.s=null),ve.prototype.release.call(e),V(n)}})};function fv(){if(O.Promise||ce("A Promise implementation or polyfill is required"),!(O.Promise&&O.Uint8Array&&Array.prototype.forEach)||Ce("Trident/"))return!1;var e=bi();return e&&9>e||!(O.MediaKeys&&O.navigator&&O.navigator.requestMediaKeySystemAccess&&O.MediaKeySystemAccess&&O.MediaKeySystemAccess.prototype.getConfiguration)?!1:Un()?!0:is("application/x-mpegurl")}function ho(e,t){e.dispatchEvent(Be("onstatechange",new Map().set("state",t)))}p.ac=function(e,t){t=t===void 0?!0:t;var n=this,i,r,o;return M(function(s){switch(s.g){case 1:if(n.l==Bn)throw new L(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){s.B(2);break}return T(s,n.detach(),2);case 2:return T(s,ud(n,"attach"),4);case 4:if(s.h)return s.return();if(Z(s,5,6),i||(ho(n,"attach"),r=function(){var u=fd(n);u&&go(n,u)},n.me.o(e,"error",r),n.h=e),!t||!Un()||n.I){s.B(6);break}return T(s,ad(n),6);case 6:Yt(s),n.W.release(),Jt(s,0);break;case 5:return o=Q(s),T(s,n.detach(),10);case 10:throw o}})},p.Hh=function(e){this.Fh=e},p.detach=function(e){e=e===void 0?!1:e;var t=this;return M(function(n){if(n.g==1){if(t.l==Bn)throw new L(2,7,7e3);return T(n,t.yc(!1,e),2)}if(n.g!=3)return T(n,ud(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.me.Za(),t.h=null),ho(t,"detach"),t.u&&!e&&t.u.release()}finally{t.W.release()}V(n)})};function ud(e,t){var n;return M(function(i){return i.g==1?(n=++e.Me,T(i,sd(e.W,t),2)):n!=e.Me?(e.W.release(),i.return(!0)):i.return(!1)})}p.yc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,o,s,u,a,l,c,h;return M(function(d){switch(d.g){case 1:return n.l!=Bn&&(n.l=md),T(d,ud(n,"unload"),2);case 2:return d.h?d.return():(oi(d,3),n.Ha=!1,ho(n,"unload"),e&&!Un()&&(e=!1),ja(n),i=n.qe.map(function(f){return f()}),n.qe=[],T(d,Promise.all(i),5));case 5:if(n.dispatchEvent(Be("unloading")),n.ke&&(n.ke.release(),n.ke=null),n.h&&(n.m.Za(),n.Ia.Za()),n.Kf.stop(),n.Lb&&(n.Lb.release(),n.Lb=null),n.Jf&&(n.Jf.stop(),n.Jf=null),!n.H){d.B(6);break}return T(d,n.H.stop(),7);case 7:n.H=null,n.Xa=null;case 6:if(!n.s){d.B(8);break}return T(d,n.s.stop(),8);case 8:if(!n.j){d.B(10);break}return T(d,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),!Hu("webkit")||!n.C){d.B(12);break}return T(d,n.C.destroy(),13);case 13:n.C=null;case 12:if(!n.I){d.B(14);break}return T(d,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.u&&!t&&n.u.onAssetUnload(),n.Z&&!t&&(n.Z.destroy(),n.Z=null),t||n.$f.stop(),n.O&&ox(n.O),n.ea&&(n.ea.g=null),n.h&&Ai(n.h),!n.h||!n.h.src){d.B(16);break}return T(d,new Promise(function(f){return new te(f).X(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.C){d.B(18);break}return T(d,n.C.destroy(),19);case 19:n.C=null;case 18:if(n.sa&&n.aa!=n.sa.fd()&&(n.sa.u||n.sa.destroy(),n.sa=null),n.aa=null,n.Xf=null,n.M=null,n.i){for(r=g(n.i.variants),o=r.next();!o.done;o=r.next())for(s=o.value,u=g([s.audio,s.video]),a=u.next();!a.done;a=u.next())(l=a.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=g(n.i.textStreams),a=c.next();!a.done;a=c.next())h=a.value,h.segmentIndex&&h.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(gg={},bu.clear()),n.i=null,n.A=new Sa,n.Yf=null,n.Fa=null,n.P=null,n.Ne=-1,n.ye=[],n.S=NaN,dd(n);case 3:Yt(d),n.W.release(),Jt(d,4);break;case 4:if(e&&Un()&&!n.I&&n.h)return T(d,ad(n),0);d.B(0)}})},p.Xk=function(e){this.ra=e},p.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,o,s,u,a,l,c,h,d,f,m,y,v;return M(function(A){switch(A.g){case 1:if(i.l==Bn)throw new L(2,7,7e3);return r=null,o="",e instanceof Si?(r=e,o=r.fd()||""):o=e||"",T(A,sd(i.W,"load"),2);case 2:if(i.W.release(),!i.h)throw new L(2,7,7002);if(!i.aa){A.B(3);break}return i.aa=o,T(A,i.yc(!1),3);case 3:if(s=++i.Me,u=function(){return M(function(S){if(S.g==1)return i.Me==s?S.B(0):r?T(S,r.destroy(),3):S.B(3);throw new L(2,7,7e3)})},a=function(S,x){return M(function(E){switch(E.g){case 1:return oi(E,2),T(E,sd(i.W,x),4);case 4:return T(E,u(),5);case 5:return T(E,S(),6);case 6:return T(E,u(),7);case 7:r&&i.g&&(r.g=i.g);case 2:Yt(E),i.W.release(),Jt(E,0)}})},Z(A,5,6),t==null&&r&&(t=r.getStartTime()),i.ra=t,i.Ha=!1,i.dispatchEvent(Be("loading")),r){n=r.S,A.B(8);break}if(n){A.B(8);break}return T(A,a(function(){return M(function(S){if(S.g==1)return T(S,yv(i,o),2);n=S.h,V(S)})},"guessMimeType_"),8);case 8:if(l=!!r,r){Jm(r,i),i.A=r.getStats(),A.B(11);break}return T(A,mv(i,o,t,n,!0),12);case 12:(r=A.h)?(Jm(r,i),i.A=r.getStats(),r.start(),r.m.catch(function(){})):i.A=new Sa;case 11:if(c=!r,h=Date.now()/1e3,i.A=r?r.getStats():new Sa,i.aa=o,i.Xf=n||null,c)return T(A,a(function(){return M(function(S){return T(S,vx(i,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(i.I){A.B(15);break}return T(A,a(function(){return M(function(S){return T(S,ad(i),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return T(A,a(function(){return M(function(S){return T(S,r.m,0)})},"waitForFinish"),17);case 17:return i.g=r.getConfiguration(),i.Gf=r.G,i.Xa=r.H,i.H=K2(r),i.H&&i.H.setMediaElement&&i.h&&i.H.setMediaElement(i.h),i.ke=z2(r),i.ie=r.Aa,i.i=r.Jg(),(d=r.s)&&(i.Aa=d),l&&i.h&&i.h.nodeName==="AUDIO"&&(fx(i),i.configure("manifest.disableVideo",!0)),i.C=W2(r),T(A,a(function(){return M(function(S){return T(S,i.C.ac(i.h),0)})},"drmEngine_.attach"),18);case 18:return!(f=r.C)||i.xa&&i.xa==f||(i.s=q2(r),i.xa=r.C,typeof i.s.setMediaElement!="function"&&(He("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.s.setMediaElement=function(){}),typeof i.s.setCmsdManager!="function"&&(He("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.s.setCmsdManager=function(){}),typeof i.s.trySuggestStreams!="function"&&(He("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.s.trySuggestStreams=function(){})),m=X2(r),y=r.ka,T(A,a(function(){return M(function(S){return T(S,mx(i,h,y,m),0)})},"loadInner_"),19);case 19:H2(r),A.B(14);break;case 20:return T(A,a(function(){return M(function(S){return T(S,yx(i,h,n),0)})},"srcEqualsInner_"),14);case 14:i.dispatchEvent(Be("loaded"));case 6:if(Yt(A),!r){A.B(22);break}return T(A,r.destroy(),22);case 22:i.sa=null,Jt(A,0);break;case 5:if(v=Q(A),v.code==7e3){A.B(24);break}return T(A,i.yc(!1),24);case 24:throw v}})};function fx(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}p.Tk=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i;return M(function(r){return r.g==1?T(r,gv(n),2):r.g!=3?(i=r.h,T(r,n.yc(e,t),3)):r.return(i)})},p.Rh=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return M(function(r){return r.g==1?T(r,gv(n,t),2):r.g!=3?(i=r.h,T(r,n.detach(e),3)):r.return(i)})};function gv(e,t){t=t===void 0?!1:t;var n,i;return M(function(r){if(r.g==1)return n=null,e.i&&e.H&&e.Xa&&e.aa?(i=e.h.currentTime,e.U()&&!t&&(i=null),T(r,vv(e,e.aa,i,e.Xf,!0,!1,!1),3)):r.B(2);if(r.g!=2){n=r.h,e.Lf.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var o=n,s=e.H,u=e.Xa;o.h=e.i,o.j=s,o.H=u,o=n,s=e.xa,o.i=e.s,o.C=s,n.s=e.Aa,n.start(),e.i=null,e.H=null,e.Xa=null,e.s=null,e.xa=null}return r.return(n)})}p.preload=function(e,t,n){t=t===void 0?null:t;var i=this,r;return M(function(o){return o.g==1?T(o,mv(i,e,t,n),2):((r=o.h)?r.start():go(i,new L(2,7,7005)),o.return(r))})},p.qg=function(){var e=this,t,n,i,r;return M(function(o){for(t=[],n=g(e.Lf),i=n.next();!i.done;i=n.next())r=i.value,r.u||t.push(r.destroy());return e.Lf=[],T(o,Promise.all(t),0)})};function mv(e,t,n,i,r){r=r===void 0?!1:r;var o,s,u;return M(function(a){return a.g==1?i?a.B(2):T(a,yv(e,t),3):(a.g!=2&&(i=a.h),gx(e,i)?a.return(null):(o=!1,s=!0,r&&(e.s&&e.xa==e.g.abrFactory&&(s=!1),e.h&&e.h.nodeName==="AUDIO"&&(o=!0)),u=vv(e,t,n,i||null,!r,o,s),r||(u=u.then(function(l){return e.Lf.push(l),l})),a.return(u)))})}function vv(e,t,n,i,r,o,s){r=r===void 0?!0:r,o=o===void 0?!1:o,s=s===void 0?!0:s;var u,a,l,c,h,d,f,m,y,v,A,S,x,E,w;return M(function(I){return I.g==1?(u=null,a=$n(e.g),o&&(a.manifest.disableVideo=!0),l=function(){return u.P&&u.u?null:u},c=function(){return l()?l().getConfiguration():e.g},h=function(k,R){l()?u.configure(k,R):e.configure(k,R)},e.ka.width!=1/0||e.ka.height!=1/0?I.B(2):T(I,P0(),3)):(I.g!=2&&(d=I.h,e.ka.width=d.width,e.ka.height=d.height),f=new Eh(a,e.ka,null),m={networkingEngine:e.J,filter:function(k){var R,D;return M(function(P){if(P.g==1)return T(P,$g(f,k),2);if(P.g!=4)return R=P.h,R?(D=Be("trackschanged"),T(P,Promise.resolve(),4)):P.B(0);u.dispatchEvent(D),V(P)})},makeTextStreamsForClosedCaptions:function(k){return kx(e,k)},onTimelineRegionAdded:function(k){var R=u.I;e:{for(var D=g(R.g),P=D.next();!P.done;P=D.next())if(P=P.value,P.schemeIdUri==k.schemeIdUri&&P.id==k.id&&P.startTime==k.startTime&&P.endTime==k.endTime){D=P;break e}D=null}D==null&&(R.g.add(k),k=new G("regionadd",new Map([["region",k]])),R.dispatchEvent(k))},onEvent:function(k){return u.dispatchEvent(k)},onError:function(k){return u.onError(k)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return c().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){h("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&u.P&&e.j.updateDuration()},newDrmInfo:function(k){var R=u.l,D=R?R.g:null;D&&R.u&&Sh(f,D.keySystem,k)},onManifestUpdated:function(){var k=new Map().set("isLive",e.U());u.dispatchEvent(Be("manifestupdated",k)),Us(u,!1,function(){e.u&&e.u.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},onMetadata:function(k,R,D,P){var C=k;k=="com.apple.hls.interstitial"&&(C="com.apple.quicktime.HLS",k={startTime:R,endTime:D,values:P},e.u)&&e.u.onInterstitialMetadata(e,e.h,k),k={},P=g(P);for(var N=P.next();!N.done;k={Qf:k.Qf},N=P.next())k.Qf=N.value,Us(u,!1,function(_){return function(){ld(e,R,D,C,_.Qf)}}(k))},disableStream:function(k){return e.disableStream(k,e.g.streaming.maxDisabledTime)}},y=new Vh(function(){return e.Oa()}),y.addEventListener("regionadd",function(k){var R=k.region;Bs(e,"timelineregionadded",R,u),Us(u,!1,function(){e.u&&e.u.onDashTimedMetadata(R)})}),v=null,a.streaming.observeQualityChanges&&(v=new wa(function(){return e.Wb()}),v.addEventListener("qualitychange",function(k){Uv(e,k.quality,k.position)}),v.addEventListener("audiotrackchange",function(k){Uv(e,k.quality,k.position,!0)})),A=!0,S={hc:e.J,onError:function(k){return u.onError(k)},vf:function(k){Us(u,!0,function(){e:{var R=k,D=Be("keystatuschanged");e.dispatchEvent(D);var P=Object.keys(R);P.length==1&&P[0]==""&&(P=["00"],R={"00":R[""]}),D=P.length==1&&P[0]=="00";var C=!1;if(P.length){P=g(e.i.variants);for(var N=P.next();!N.done;N=P.next()){N=N.value;var _=[];N.audio&&_.push(N.audio),N.video&&_.push(N.video),_=g(_);for(var U=_.next();!U.done;U=_.next()){var B=U.value;if(U=N.allowedByKeySystem,B.keyIds.size){N.allowedByKeySystem=!0,B=g(B.keyIds);for(var H=B.next();!H.done;H=B.next())H=H.value,((H=R[D?"00":H])||e.C.H)&&(N.allowedByKeySystem=N.allowedByKeySystem&&!!H&&!em.includes(H))}U!=N.allowedByKeySystem&&(C=!0)}}}if(C&&(gn(e),!po(e)))break e;(R=e.j.j)&&!R.allowedByKeySystem&&fo(e)}})},onExpirationUpdated:function(k,R){var D=Be("expirationupdated");u.dispatchEvent(D),(D=u.j)&&D.onExpirationUpdated&&D.onExpirationUpdated(k,R)},onEvent:function(k){u.dispatchEvent(k),k.type=="drmsessionupdate"&&A&&(A=!1,k=Date.now()/1e3-u.sa,(e.A||u.getStats()).j=k,e.L&&pm(e.L))}},x=Sv(e,l),Cg(e.J,x),E=function(){return e.cd(S)},w={config:a,hk:m,tk:y,rk:v,cd:E,gk:f,networkingEngine:x,aj:r,$i:s},u=new Si(t,i,n,w),I.return(u))})}function yv(e,t){var n,i;return M(function(r){return r.g==1?(n=e.g.manifest.retryParameters,T(r,ed(t,e.J,n),2)):(i=r.h,i=="application/x-mpegurl"&&nr()&&(i="application/vnd.apple.mpegurl"),r.return(i))})}function gx(e,t){if(!Un())return!0;if(t){if((e.h||R0()).canPlayType(t)=="")return!1;if(!(Un()&&t in Rn))return!0;if(Z0(t))return nr()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function ad(e){var t,n,i,r,o;return M(function(s){if(s.g==1)return ho(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):He("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.Yf=t,i=xx(e.h,n,{uj:function(){return e.keySystem()},onMetadata:function(u,a,l){Tv(e,u,a,l)}},e.L),i.configure(e.g.mediaSource),r=e.g.manifest,o=r.segmentRelativeVttTiming,i.ka=o,T(s,i.M,2);e.I=i,V(s)})}function mx(e,t,n,i){var r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D;return M(function(P){switch(P.g){case 1:ho(e,"load"),r=e.h,e.K=new Ms({Ze:function(){return r.playbackRate},Hc:function(){return r.defaultPlaybackRate},rh:function(C){r.playbackRate=C},mi:function(C){r.currentTime+=C}}),o=function(){return Fa(e)},s=function(){return kv(e)},e.m.o(r,"playing",o),e.m.o(r,"pause",o),e.m.o(r,"ended",o),e.m.o(r,"ratechange",s),px(e,e.g),e.Kb=e.g.preferredTextLanguage,e.ue=e.g.preferredTextRole,e.se=e.g.preferForcedSubs,gd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(C,N,_){e.i&&e.j&&C!=e.j.j&&Ga(e,C,!0,N===void 0?!1:N,_===void 0?0:_)}),e.s.setMediaElement(r),e.s.setCmsdManager(e.ea),e.j=Cx(e),e.j.configure(e.g.streaming),e.l=St,r.textTracks&&e.m.o(r.textTracks,"addtrack",function(C){if(C.track)switch(C=C.track,C.kind){case"chapters":Ev(e,C)}}),e.dispatchEvent(Be("streaming")),u=n;case 2:for((l=e.j.j)||u||(u=Rv(e,!0)),c=[],a=l||u,h=g([a.video,a.audio]),d=h.next();!d.done;d=h.next())(f=d.value)&&!f.segmentIndex&&c.push(f.createSegmentIndex());if(!(0<c.length)){P.B(4);break}return T(P,Promise.all(c),4);case 4:if(!a||a.disabledUntilTime!=0){P.B(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(a),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&ce("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),gd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),C2(e.j,e.g.playRangeStart,e.g.playRangeEnd),m=function(C){e.G=Ax(e,C),e.Lb=wx(e,C),Av(e,r,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||m(e.ra),l){P.B(7);break}if(!e.g.streaming.startAtSegmentBoundary){P.B(8);break}return y=e.i.presentationTimeline,v=e.ra||e.h.currentTime,A=y.Ic(),S=y.Xb(),v<A?v=A:v>S&&(v=S),T(P,Lx(u,v),9);case 9:x=P.h,m(x);case 8:Ga(e,u,!0,!1,0);case 7:return e.G.dg(),E=e.uc().find(function(C){return C.active}),E||((w=vs(e.i.textStreams,e.Kb,e.ue,e.se)[0]||null)&&Fh(e.A.h,w,!0),u&&(w?(Rx(e,u.audio,w)&&(e.qa=!0),e.qa&&e.I.H.setTextVisibility(!0),Nv(e)):e.qa=!1),w&&(e.g.streaming.alwaysStreamText||e.Nc())&&Ca(e.j,w)),T(P,e.j.start(i),10);case 10:e.g.abr.enabled&&(e.s.enable(),_v(e)),gn(e),po(e),e.i.variants.some(function(C){return C.primary}),((I=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(k=function(){return Lv(e)},e.m.o(r,"timeupdate",k)),I||(R=function(){return Ba(e)},e.m.o(r,"timeupdate",R),Ba(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(D=function(){var C,N;return M(function(_){if(_.g==1)return C=e.h.duration-e.h.currentTime,isNaN(C)||!(C<=e.g.streaming.preloadNextUrlWindow)?_.B(0):(e.m.Pa(r,"timeupdate",D),N=e,T(_,e.preload(e.i.nextUrl),4));N.sa=_.h,V(_)})},e.m.o(r,"timeupdate",D)),e.m.o(r,"ended",function(){e.load(e.sa||e.i.nextUrl)}))),e.u&&e.u.onManifestUpdated(I),e.Ha=!0,e.m.ia(r,"loadedmetadata",function(){e.A.m=Date.now()/1e3-t}),V(P)}})}function vx(e,t){var n,i,r,o,s;return M(function(u){return u.g==1?(n=Qe,i=Date.now()/1e3,r=!0,e.C=e.cd({hc:e.J,onError:function(a){go(e,a)},vf:function(){},onExpirationUpdated:function(){var a=Be("expirationupdated");e.dispatchEvent(a)},onEvent:function(a){e.dispatchEvent(a),a.type=="drmsessionupdate"&&r&&(r=!1,e.A.j=Date.now()/1e3-i)}}),e.C.configure(e.g.drm),o={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?In(t):"",codecs:t?Qt(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},s.fullMimeTypes.add(it(s.mimeType,s.codecs)),t.startsWith("audio/")?(s.type=n.ha,o.audio=s):o.video=s,e.C.Z=!0,T(u,Fg(e.C,[o],[]),2)):T(u,e.C.ac(e.h),0)})}function yx(e,t,n){var i,r,o,s,u,a,l,c,h,d,f;return M(function(m){if(m.g==1)return ho(e,"src-equals"),i=e.h,e.G=new Lm(i),r=!1,e.qe.push(function(){r=!0}),e.ra!=null&&e.G.eg(e.ra),e.K=new Ms({Ze:function(){return i.playbackRate},Hc:function(){return i.defaultPlaybackRate},rh:function(y){i.playbackRate=y},mi:function(y){i.currentTime+=y}}),o=e.g.streaming.rebufferingGoal,Av(e,i,o),s=function(){return Fa(e)},u=function(){return kv(e)},e.m.o(i,"playing",s),e.m.o(i,"pause",s),e.m.o(i,"ended",s),e.m.o(i,"ratechange",u),i.preload!="none"&&e.m.ia(i,"loadedmetadata",function(){e.A.m=Date.now()/1e3-t}),i.audioTracks&&(e.m.o(i.audioTracks,"addtrack",function(){return gn(e)}),e.m.o(i.audioTracks,"removetrack",function(){return gn(e)}),e.m.o(i.audioTracks,"change",function(){return gn(e)})),i.textTracks&&(e.m.o(i.textTracks,"addtrack",function(y){if(y.track)switch(y=y.track,y.kind){case"metadata":Sx(e,y);break;case"chapters":Ev(e,y);break;default:gn(e)}}),e.m.o(i.textTracks,"removetrack",function(){return gn(e)}),e.m.o(i.textTracks,"change",function(){return gn(e)})),i.src=sx(e.O,e.aa,n),(Wn()||Xn())&&i.load(),i.preload!="none"&&!i.autoplay&&Z0(n)&&bi()&&i.load(),e.l=mt,e.dispatchEvent(Be("streaming")),a=new Le,ro(i,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.G.dg(),a.resolve()}),ro(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var y;return M(function(v){if(v.g==1)return Tx(e),y=Fs(e),y.find(function(A){return A.mode!="disabled"})?(0<y.length&&(e.qa=!0),v.B(2)):T(v,new Promise(function(A){e.m.ia(i.textTracks,"change",A),new te(A).X(1)}),2);if(r)return v.return();Ex(e),V(v)})}),i.error?a.reject(fd(e)):i.preload=="none"&&(ce('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),e.m.ia(i,"error",function(){a.reject(fd(e))}),l=new Promise(function(y,v){new te(v).X(e.g.streaming.loadTimeout)}),T(m,Promise.race([a,l]),2);((c=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(h=function(){return Lv(e)},e.m.o(i,"timeupdate",h)),c||(d=function(){return Ba(e)},e.m.o(i,"timeupdate",d),Ba(e)),e.u&&(e.u.onManifestUpdated(c),c&&(f=e.Oa().end,e.m.o(i,"progress",function(){var y=e.Oa().end;f!=y&&(e.u.onManifestUpdated(e.U()),f=y)}))),e.Ha=!0,V(m)})}function Tx(e){var t=e.g.preferredAudioLanguage;t!=""&&e.jh(t,e.g.preferredVariantRole)}function Ex(e){var t=e.g.preferredTextLanguage;t!=""&&e.kh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function Sx(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.o(t,"cuechange",function(){if(t.activeCues){for(var i=[],r={},o=g(t.activeCues),s=o.next();!s.done;r={fb:r.fb},s=o.next())r.fb=s.value,ld(e,r.fb.startTime,r.fb.endTime,r.fb.type,r.fb.value),e.u&&e.u.onCueMetadataChange(r.fb.value),r.fb.type=="com.apple.quicktime.HLS"&&r.fb.startTime!=null&&(s=i.find(function(u){return function(a){return a.startTime==u.fb.startTime&&a.endTime==u.fb.endTime}}(r)),s||(s={startTime:r.fb.startTime,endTime:r.fb.endTime,values:[]},i.push(s)),s.values.push(r.fb.value));for(i=g(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(u){return u.key=="X-ASSET-URI"||u.key=="X-ASSET-LIST"})&&e.u&&(r.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.u.onInterstitialMetadata(e,e.h,r))}});var n=new te(function(){var i=Mx(e);i=g(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Sa().X(.5);e.qe.push(function(){n.stop()})}}function Tv(e,t,n,i){t=g(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.data&&r.cueTime&&r.frames){var o=r.cueTime+n,s=i;s&&o>s&&(s=o);for(var u=g(r.frames),a=u.next();!a.done;a=u.next())ld(e,o,s,"org.id3",a.value);e.u&&e.u.onHlsTimedMetadata(r,o)}}function ld(e,t,n,i,r){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(Be("metadata",t))}function Ev(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new te(function(){t.mode="hidden"}).Sa().X(.5);e.qe.push(function(){n.stop()})}}p.yk=function(){for(var e=this.W;e.g;)e.release()},p.cd=function(e){return new ha(e)};function Sv(e,t){function n(r){t()?t().dispatchEvent(r):e.dispatchEvent(r)}function i(r){t()?Us(t(),!0,r):r()}return t||(t=function(){return null}),new _e(function(r,o,s,u){var a=t()?t().i:e.s;a&&a.segmentDownloaded(r,o,s,u)},function(r,o,s){o=new Map().set("headers",r).set("request",o).set("requestType",s),n(Be("downloadheadersreceived",o)),i(function(){if(e.ea){var u=e.ea;if(u.h.enabled){var a=r["cmsd-static"];if(a)try{var l=new Map,c=a.split(",");for(a=0;a<c.length;a++){var h=c[a].split("=");l.set(h[0],av(h[1]))}}catch(v){}if(l=r["cmsd-dynamic"]){try{var d=new Map,f=l.split(";");for(l=1;l<f.length;l++){var m=f[l].split("=");d.set(m[0],av(m[1]))}var y=d}catch(v){y=null}y&&(u.g=y)}}}})},function(r,o,s,u){r=new Map().set("request",r).set("error",o).set("httpResponseCode",s).set("aborted",u),n(Be("downloadfailed",r))},function(r,o,s){i(function(){var u=e.O,a=s;if(a=a===void 0?{}:a,u.g.enabled)if(o.method==="HEAD")co(u,o);else switch(r){case 0:try{if(u.g.enabled){if(a.type){e:{switch(a.type){case 4:var l="d";break e;case 3:case 2:l="h";break e;case 5:l="s";break e}l=void 0}u.m=l}co(u,o,{ot:uv,su:!u.i})}}catch(U){tr("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",U)}break;case Cn:try{if(u.g.enabled){var c=a.segment;l=0,c&&(l=c.endTime-c.startTime);var h={d:1e3*l,st:u.h.U()?"l":"v"};h.ot=ax(a);var d=h.ot===Ua||h.ot===_a||h.ot===Oa||h.ot===ba,f=a.stream;if(f){var m=u.h.Ua();if(d&&(h.bl=lx(u,f.type),h.ot!==ba)){var y=sv(u,f.type);h.dl=m?y/Math.abs(m):y}if(f.bandwidth&&(h.br=f.bandwidth/1e3),f.segmentIndex&&c){var v=f.segmentIndex.dc(c.endTime,!0,0>m);if(v){var A=v.next().value;if(A&&A!=c){if(!cs(c.R(),A.R())){var S=A.R()[0],x=o.uris[0],E=new URL(S),w=new URL(x);if(E.origin!==w.origin)var I=S;else{for(var k=E.pathname.split("/").slice(1),R=w.pathname.split("/").slice(1,-1);k[0]===R[0];)k.shift(),R.shift();for(;R.length;)R.shift(),k.unshift("..");I=k.join("/")}h.nor=I}if((A.$a||A.Ja)&&(c.$a!=A.$a||c.Ja!=A.Ja)){var D=A.$a+"-";A.Ja&&(D+=A.Ja),h.nrr=D}}}var P=u.h.Ua()||1,C=sv(u,f.type)||500,N=f.bandwidth,_=N?N*(c.endTime-c.startTime)/1e3/(C/P/1e3)*u.g.rtpSafetyFactor:NaN;isNaN(_)||(h.rtp=_)}}d&&h.ot!==ba&&(h.tb=cx(u,h.ot)/1e3),co(u,o,h)}}catch(U){tr("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",U)}break;case 2:case 5:case 6:co(u,o,{ot:"k"});break;case 4:co(u,o,{ot:"o"})}})},function(r,o,s,u){(r=t()?t().j:e.H)&&r.banLocation&&r.banLocation(u)},function(r,o){if(o.data){o=o.data.byteLength;var s=t()?t().getStats():e.A;s&&(s.Pe=isNaN(s.Pe)?o:s.Pe+o,r===0&&(s.ii=o))}})}function Ax(e,t){return new Rm(e.h,e.i,e.g.streaming,t,function(){e.Lb&&Om(e.Lb,!0),e.j&&e.j.ve(),e.M&&Er(e)},function(n){return e.dispatchEvent(n)})}function wx(e,t){t=new Da(e.ke,e.U()||0<t),t.addEventListener("enter",function(i){Bs(e,"timelineregionenter",i.region)}),t.addEventListener("exit",function(i){Bs(e,"timelineregionexit",i.region)}),t.addEventListener("skip",function(i){var r=i.region;i.seeking||(Bs(e,"timelineregionenter",r),Bs(e,"timelineregionexit",r))});var n=new Um(e.h);return n.g.add(t),e.ie&&n.g.add(e.ie),n}function Av(e,t,n){e.M=new uw,e.M.g=Wr,Sg(e.M,n,Math.min(.5,n/2)),dd(e),e.Jf=new te(function(){Er(e)}).wa(.25),e.m.o(t,"waiting",function(){return Er(e)}),e.m.o(t,"stalled",function(){return Er(e)}),e.m.o(t,"canplaythrough",function(){return Er(e)}),e.m.o(t,"progress",function(){return Er(e)})}function Er(e){switch(e.l){case mt:if(e.h.ended)var t=!0;else{var n=wh(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case St:e:if(e.h.ended||vm(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.sc();var i=wh(e.h.buffered);if(i!=null&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=om(e.h.buffered,e.h.currentTime),n=e.M;var r=t,o=n.i.get(n.g);t=n.g,i=r||i>=o?ys:Wr,n.g=i,(t=t!=i)&&i===ys&&(n.h=Date.now()),t&&dd(e)}function xx(e,t,n,i){return new gm(e,t,n,i)}function Ix(e){return new ov({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},Wb:function(){return e.Wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Ua:function(){return e.Ua()},Gb:function(){return e.Gb()},Jb:function(){return e.Jb()},U:function(){return e.U()}},e.g.cmcd)}function Cx(e){return new Vm(e.i,{Ye:function(){return e.G?e.G.Oe():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},Ua:function(){return e.Ua()},oa:e.I,hc:e.J,onError:function(t){return go(e,t)},onEvent:function(t){return e.dispatchEvent(t)},nk:function(){e.H&&e.H.update&&e.H.update()},$g:function(t,n){var i=t.startTime,r=t.endTime,o=n.type,s=n.codecs.includes(",");if(e.G){e.G.ni();var u=Ph(e.I,o);!e.U()&&e.h.paused&&u!=null&&0<u&&e.G.Oe()<u&&e.G.eg(u)}Er(e),i=new Map().set("start",i).set("end",r).set("contentType",o).set("isMuxed",s),e.dispatchEvent(Be("segmentappended",i)),e.s&&n.fastSwitching&&t.oe&&t.kf&&e.s.trySuggestStreams()},lk:function(t,n){(n=n.nd)&&e.ie&&E2(e.ie,n,t)},Jh:function(t,n){var i=e.C;if(i.h.parseInbandPsshEnabled&&!i.H&&["audio","video"].includes(t)){n=new _g(he(n));var r=0,o=g(n.data);for(t=o.next();!t.done;t=o.next())r+=t.value.length;if(r==0)i=Promise.resolve();else{for(r=new Uint8Array(r),o=0,n=g(n.data),t=n.next();!t.done;t=n.next())t=t.value,r.set(t,o),o+=t.length;Es(i,"cenc",r),i=i.l}}else i=Promise.resolve();return i},onMetadata:function(t,n,i){Tv(e,t,n,i)},disableStream:function(t,n){return e.disableStream(t,n)}})}p.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Ns(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(He("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(He("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(He("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&nr(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){He("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(He("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(He("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(He("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(He("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(He("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(He("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(He("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(He("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){He("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=Ki(this.g,e,wi(this)),wv(this),n};function wv(e){if(e.Gf=new Eh(e.g,e.ka,e.C),e.H){var t=$n(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.C&&e.C.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=Bn&&Zg(e.Gf,e.i)&&gn(e)}catch(o){go(e,o)}e.s&&po(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||fo(e)}if(e.J&&(e.J.ph(e.g.streaming.forceHTTP),e.J.qh(e.g.streaming.forceHTTPS)),e.I)if(e.I.configure(e.g.mediaSource),e.I.ka=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.Yf!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):He("Text displayer w/ configure",'Text displayer should have a "configure" method!');var i=e.I,r=i.H;i.H=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.j=n),e.Yf=t,e.j&&(t=e.j,(n=t.i.get(ye))&&oo(t,n.stream,!0,0,!0))}else t=e.I.H,t.configure&&t.configure(e.g.textDisplayer);e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),_v(e)),e.M&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Sg(e.M,t,Math.min(.5,t/2))),e.i&&gd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.u&&e.u.configure(e.g.ads),e.O&&e.O.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}p.getConfiguration=function(){var e=wi(this);return Ki(e,this.g,wi(this)),e},p.Zh=function(){var e=wi(this);return Ki(e,this.g,wi(this)),Wm(this.g,wi(this))},p.Vh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Oa().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},p.Ck=function(){for(var e in this.g)delete this.g[e];Ki(this.g,wi(this),wi(this)),wv(this)},p.gd=function(){return this.l},p.Kg=function(){return this.i?this.i.type:null},p.Bj=function(){return this.h},p.Gb=function(){return this.J},p.fd=function(){return this.aa},p.Ve=function(){return this.u?this.u:null},p.U=function(){return this.i?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},p.Mc=function(){return this.i?this.i.presentationTimeline.Mc():!1},p.Lc=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},p.Oa=function(){if(this.i){if(!this.Ha&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Ic(),end:e.Xb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},p.Rj=function(){this.U()&&(this.h.currentTime=this.Oa().end)},p.ei=function(){return this.Ha},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.C?this.C.g:null},p.Xd=function(){return this.C?this.C.Xd():1/0},p.Hg=function(){return this.C?this.C.Hg():[]},p.Xe=function(){return this.C?this.C.Xe():{}},p.ce=function(){return this.M?this.M.g==Wr:!1},p.Ua=function(){return this.h?this.K?this.K.i:1:0},p.Uc=function(e){var t=this;e==0?ce("A trick play rate of 0 is unsupported!"):(this.Ia.Za(),this.h.paused&&this.h.play(),this.K.set(e),this.l==St&&(this.s.playbackRateChanged(e),Hm(this.j,1<Math.abs(e))),this.U()&&this.Ia.o(this.h,"timeupdate",function(){var n=t.h.currentTime,i=t.Oa(),r=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(i.end)&&t.bd():Math.floor(n)<=Math.floor(i.start+r)&&t.bd()}))},p.bd=function(){var e=this.K.Hc();this.l==mt&&this.K.set(e),this.l==St&&(this.K.set(e),this.s.playbackRateChanged(e),Hm(this.j,!1)),this.Ia.Za()},p.Jb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=g(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,ms(r)){var o=Kr(r);o.active=r==e,o.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(s){return ah(s)}):[]},p.uc=function(){if(this.i){for(var e=this.j?this.j.u:null,t=[],n=g(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=Zu(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?Fs(this).map(function(o){return hg(o)}):[]},p.We=function(){var e=this.ye;return this.i&&(e=this.i.imageStreams),e.map(function(t){return sh(t)})},p.fj=function(e){var t=this,n,i,r,o;return M(function(s){return s.g==1?t.l!=St&&t.l!=mt?s.return(null):(n=t.ye,t.i&&(n=t.i.imageStreams),(i=n.find(function(u){return u.id==e}))?i.segmentIndex?s.B(2):T(s,i.createSegmentIndex(),2):s.return(null)):s.g!=4?(r=[],i.segmentIndex.qc(function(u){var a=xv(u.tilesLayout||i.tilesLayout);if(a){a=a.rows*a.Ec;for(var l=u.i-u.startTime,c=0;c<a;c++)r.push(t.Mg(e,u.startTime+l*c/a))}}),T(s,Promise.all(r),4)):(o=s.h,s.return(o.filter(function(u){return u})))})};function xv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Ec:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}p.Mg=function(e,t){var n=this,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E;return M(function(w){return w.g==1?n.l!=St&&n.l!=mt?w.return(null):(i=n.ye,n.i&&(i=n.i.imageStreams),(r=i.find(function(I){return I.id==e}))?r.segmentIndex?w.B(2):T(w,r.createSegmentIndex(),2):w.return(null)):(o=r.segmentIndex.find(t),o==null||(s=r.segmentIndex.get(o),u=xv(s.tilesLayout||r.tilesLayout),!u)?w.return(null):(a=r.width||0,l=r.height||0,c=a/u.Ec,h=l/u.rows,d=u.Ec*u.rows,f=s.i-s.startTime,m=s.A||f/d,y=s.startTime,A=v=0,1<d&&(S=Math.floor((t-s.startTime)/m),y=s.startTime+S*m,v=S%u.Ec*c,A=Math.floor(S/u.Ec)*h),x=!1,(E=s.u)&&(x=!0,h=E.height,v=E.positionX,A=E.positionY,c=E.width),w.return({segment:s,imageHeight:l,imageWidth:a,height:h,positionX:v,positionY:A,startTime:y,duration:m,uris:s.R(),width:c,sprite:x})))})},p.lh=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(i){return i.id==e.id});t&&t!=this.j.u&&(Fh(this.A.h,t,!1),Ca(this.j,t),Va(this),this.Kb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Fs(this),t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,uh(n)==e.id?n.mode=this.qa?"showing":"hidden":n.mode="disabled";Va(this)}},p.Af=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var i=this.i.variants.find(function(o){return o.id==e.id});if(i&&ms(i)){var r=this.j.j;this.g.abr.enabled&&(r.video!=i.video||r.audio&&i.audio&&r.audio.language==i.audio.language&&r.audio.channelsCount==i.audio.channelsCount)&&ce("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Ga(this,i,!1,t,n),this.Aa=new Eg(i,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),po(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=g(t),n=t.next();!n.done;n=t.next())if(n=n.value,uh(n)==e.id){Pv(this,n);break}}},p.hj=function(){return bv(this.Jb())},p.Ij=function(){return bv(this.uc())},p.gj=function(){return Array.from(Ov(this.Jb()))},p.Hj=function(){return Array.from(Ov(this.uc()))},p.jh=function(e,t,n,i,r){if(n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,this.i&&this.G){this.Aa=new zr(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,r),e=function(s,u){return s.video||u.video?s.video&&u.video?Math.abs((s.video.height||0)-(u.video.height||0))+Math.abs((s.video.width||0)-(u.video.width||0)):1/0:0},t=this.j.j,r=this.Aa.create(this.i.variants),n=null,r=g(r.values());for(var o=r.next();!o.done;o=r.next())o=o.value,ms(o)&&(!n||e(n,t)>e(o,t))&&(n=o);n!=t&&(n?(e=Kr(n),this.Af(e,!0,i)):fo(this))}else this.h&&this.h.audioTracks&&(i=vs(this.Jb(),e,t||"",!1)[0])&&this.Af(i)},p.kh=function(e,t,n){n=n===void 0?!1:n,this.i&&this.G?(this.Kb=e,this.ue=t||"",this.se=n,(e=vs(this.i.textStreams,this.Kb,this.ue,this.se)[0]||null)&&e!=this.j.u&&(Fh(this.A.h,e,!1),this.g.streaming.alwaysStreamText||this.Nc())&&(Ca(this.j,e),Va(this))):(e=vs(this.uc(),e,t||"",n)[0])&&this.lh(e)},p.Jk=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.G){for(var i=null,r=g(this.i.variants),o=r.next();!o.done;o=r.next())if(o=o.value,o.audio.label==e){i=o;break}i!=null&&(this.Aa=new zr(i.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),fo(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=g(n),i=n.next();!i.done;i=n.next())i=i.value,i.label==e&&(t=i);t&&Pv(this,t)}},p.Nc=function(){var e=this.qa;return this.I&&this.l==St?this.I.H.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Fs(this).some(function(t){return t.mode=="showing"}):e},p.Wh=function(){return this.h&&this.h.src&&this.h.textTracks?Iv(this).map(function(e){return hg(e)}):[]},p.kj=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=xe(e),n=Iv(this).filter(function(u){return xe(u.language)==t});if(!n||!n.length)return[];e=[];var i=new Set;n=g(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value)&&r.cues){r=g(r.cues);for(var o=r.next();!o.done;o=r.next()){var s=o.value;(o=s.id)&&o!=""||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},i.has(o)||(e.push(s),i.add(o))}}return e};function Fs(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function Mx(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function Iv(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}p.Cf=function(e){if(e=!!e,this.qa!=e){if(this.qa=e,this.l==St)this.I.H.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.u||(e=vs(this.i.textStreams,this.Kb,this.ue,this.se),0<e.length&&(Ca(this.j,e[0]),Va(this))):k2(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Fs(this);t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}Nv(this)}},p.Cj=function(){if(this.G)var e=this.G.Oe();else{if(this.ra==null)return new Date;e=this.ra}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},p.$h=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},p.$e=function(){return this.U()&&this.i?this.i.presentationTimeline.$e():null},p.Wb=function(){if(this.l==St)return this.I.Wb();var e={total:[],audio:[],video:[],text:[]};return this.l==mt&&(e.total=qi(this.h.buffered)),e},p.getStats=function(){if(this.l!=St&&this.l!=mt)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Fa(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.A;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.A.S=this.G.Dh(),this.A.W=this.G.Eh()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.A;var i=Number(n.totalVideoFrames);t.P=Number(n.droppedVideoFrames),t.O=i,this.A.M=Number(n.corruptedVideoFrames)}if(this.C?(n=this.C,n=n.K?n.K:NaN):n=NaN,this.A.u=n,this.l==St){if(n=this.j.j,t=this.j.u,n){i=this.K?this.K.i:1;var r=i*n.bandwidth;t&&t.bandwidth&&(r+=i*t.bandwidth),this.A.C=r}n&&n.video&&(t=this.A,i=n.video.height||NaN,t.s=n.video.width||NaN,t.l=i),this.U()&&(n=this.$h().valueOf()+1e3*e.currentTime,this.A.G=(Date.now()-n)/1e3),this.i&&(this.A.I=this.i.periodCount,this.A.H=this.i.gapCount,this.i.presentationTimeline&&(this.A.K=this.i.presentationTimeline.g)),n=this.s.getBandwidthEstimate(),this.A.A=n}this.l==mt&&(n=this.A,t=e.videoHeight||NaN,n.s=e.videoWidth||NaN,n.l=t);var o=this.A;e=o.s,n=o.l,t=o.C,i=o.O,r=o.P;var s=o.M,u=o.W,a=o.S,l=o.A,c=o.i,h=o.m,d=o.J,f=o.j,m=jh(o.g,"playing"),y=jh(o.g,"paused"),v=jh(o.g,"buffering"),A=o.u,S=o.G,x=o.K,E=o.ii,w=o.Pe,I=o.L,k=o.I,R=o.H,D=g2(o.g),P=[];o=g(o.h.g);for(var C=o.next();!C.done;C=o.next())C=C.value,P.push({timestamp:C.timestamp,id:C.id,type:C.type,fromAdaptation:C.fromAdaptation,bandwidth:C.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:r,corruptedFrames:s,stallsDetected:u,gapsJumped:a,estimatedBandwidth:l,completionPercent:c,loadLatency:h,manifestTimeSeconds:d,drmTimeSeconds:f,playTime:m,pauseTime:y,bufferingTime:v,licenseTime:A,liveLatency:S,maxSegmentDuration:x,manifestSizeBytes:E,bytesDownloaded:w,nonFatalErrorCount:I,manifestPeriodCount:k,manifestGapCount:R,stateHistory:D,switchHistory:P}},p.Wi=function(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=this,a,l,c,h,d,f,m,y,v,A,S,x;return M(function(E){switch(E.g){case 1:if(u.l!=St&&u.l!=mt)throw new L(1,7,7004);if(n!="subtitles"&&n!="captions"&&ce("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){E.B(2);break}return T(E,cd(u,e),3);case 3:i=E.h;case 2:if(a=[],u.u&&(a=u.u.getCuePoints()),u.l!=mt){E.B(4);break}return s&&(n="forced"),T(E,Cv(u,e,t,n,i,o||"",a),5);case 5:if(l=xe(t),c=u.uc(),h=c.find(function(w){return xe(w.language)==l&&w.label==(o||"")&&w.kind==n}))return gn(u),E.return(h);throw new L(1,2,2012);case 4:if(d=Qe,f=u.h.duration,u.i&&(f=u.i.presentationTimeline.getDuration()),f==1/0)throw new L(1,4,4033);if(!a.length){E.B(6);break}return T(E,hd(u,e,u.J,u.g.streaming.retryParameters),7);case 7:m=E.h,y=Mv(u,m,i,a),v=new Blob([y],{type:"text/vtt"}),e=Ea(v),i="text/vtt";case 6:if(A={id:u.Zf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:bh(0,f,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:d.Ka,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it(i||"",r||"")])},S=it(A.mimeType,A.codecs),x=fs(S),!x)throw new L(2,2,2014,i);return u.i.textStreams.push(A),gn(u),E.return(Zu(A))}})},p.Xi=function(e,t){var n=this,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S;return M(function(x){switch(x.g){case 1:if(n.l!=St&&n.l!=mt)throw new L(1,7,7004);if(t){x.B(2);break}return T(x,cd(n,e),3);case 3:t=x.h;case 2:if(t!="text/vtt")throw new L(1,2,2017,e);if(i=Qe,r=n.h.duration,n.i&&(r=n.i.presentationTimeline.getDuration()),r==1/0)throw new L(1,4,4045);return T(x,hd(n,e,n.J,n.g.streaming.retryParameters),4);case 4:if(o=x.h,s=tt[t],!s)throw new L(2,2,2014,t);for(u=s(),a={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},l=he(o),c=u.parseMedia(l,a,e),h=[],d={},f=g(c),m=f.next();!m.done;d={Md:d.Md,Bc:d.Bc},m=f.next())d.Bc=m.value,d.Md=null,y=function(E){return function(){return E.Md==null&&(E.Md=gt([e],[E.Bc.payload])),E.Md||[]}}(d),v=new ne(d.Bc.startTime,d.Bc.endTime,y,0,null,null,0,0,1/0),d.Bc.payload.includes("#xywh")&&(A=d.Bc.payload.split("#xywh=")[1].split(","),A.length===4&&v.Fi({height:parseInt(A[3],10),positionX:parseInt(A[0],10),positionY:parseInt(A[1],10),width:parseInt(A[2],10)})),h.push(v);return S={id:n.Zf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se(h),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.ag,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it(t||"","")])},n.l==mt?n.ye.push(S):n.i.imageStreams.push(S),gn(n),x.return(sh(S))}})},p.Vi=function(e,t,n){var i=this,r,o,s,u;return M(function(a){switch(a.g){case 1:if(i.l!=St&&i.l!=mt)throw new L(1,7,7004);if(n){a.B(2);break}return T(a,cd(i,e),3);case 3:n=a.h;case 2:return r=[],i.u&&(r=i.u.getCuePoints()),T(a,Cv(i,e,t,"chapters",n,"",r),4);case 4:if(o=a.h,s=i.Wh(),u=s.find(function(l){return l.language==t}),!u){a.B(5);break}return T(a,new Promise(function(l,c){i.m.ia(o,"load",l),i.m.ia(o,"error",function(){c(new L(1,2,2015))})}),6);case 6:return gn(i),a.return(u);case 5:throw new L(1,2,2012)}})};function cd(e,t){var n;return M(function(i){switch(i.g){case 1:return Z(i,2),T(i,ed(t,e.J,e.g.streaming.retryParameters),4);case 4:n=i.h,le(i,3);break;case 2:Q(i);case 3:if(n)return i.return(n);throw new L(1,2,2011,t)}})}function Cv(e,t,n,i,r,o,s){var u,a,l,c;return M(function(h){if(h.g==1)return r!="text/vtt"||s.length?T(h,hd(e,t,e.J,e.g.streaming.retryParameters),3):h.B(2);h.g!=2&&(u=h.h,a=Mv(e,u,r,s),l=new Blob([a],{type:"text/vtt"}),t=Ea(l),r="text/vtt"),c=document.createElement("track");var d=e.O,f=t;try{if(d.g.enabled){var m=id(d);m.ot=od,m.su=!0;var y=Na(m),v=rd(f,y)}else v=f}catch(A){tr("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",A),v=f}return c.src=v,c.label=o,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),h.return(c)})}function hd(e,t,n,i){var r,o,s;return M(function(u){if(u.g==1){r=Cn,o=ut([t],i),o.method="GET";var a=e.O;try{a.g.enabled&&co(a,o,{ot:od,su:!0})}catch(l){tr("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return T(u,n.request(r,o).promise,2)}return s=u.h,u.return(s.data)})}function Mv(e,t,n,i){var r=tt[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=he(t),t=n.parseMedia(t,e,null),rx(t,i);throw new L(2,2,2014,n)}p.Pk=function(e,t){this.ka.width=e,this.ka.height=t},p.gh=function(e){if(this.l==St){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=g(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.ae||i.ib||i.Tb||(i.ae=!1,dn(t,i,e));t=!0}}else t=!1;return t},p.Jg=function(){return ce("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},p.yj=function(){return this.Xa};function wi(e){var t=uo();return t.streaming.failureCallback=function(n){if(e.U()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.gh(i))}},t.textDisplayFactory=function(){if(e.Hf){var n=e.getConfiguration();return new Vt(e.h,e.Hf,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new Bt(e.h,"Shaka Player TextTrack"):new Gt},t}p.uh=function(e){this.Hf=e};function kx(e,t){for(var n=new Set,i=g(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=g(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var o=g(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new We,l=r.closedCaptions.get(s);u={id:e.Zf++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:ye,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([it(u,"")])},t.textStreams.push(u),n.add(s)}}}function Lx(e,t){var n,i,r,o,s;return M(function(u){return u.g==1?(n=e.audio,i=e.video,r=function(a,l){var c,h,d;return M(function(f){return f.g==1?a?T(f,a.createSegmentIndex(),2):f.return(null):(h=(c=a.segmentIndex.dc(l))?c.next().value:null,h?(d=h.startTime,f.return(d)):f.return(null))})},T(u,r(n,t),2)):u.g!=3?(o=u.h,T(u,r(i,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function dd(e){var t=e.ce();if(e.A&&e.M&&e.G){var n=e.K;if(n.j=t,_m(n),e.O&&(n=e.O,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),Fa(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ne<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.P&&(e.P=Math.min(e.P+ ++e.Ne*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(Be("buffering",t))}function kv(e){var t=e.h.playbackRate;t!=0&&(e.K&&e.K.set(t),t=Be("ratechange"),e.dispatchEvent(t))}function Fa(e){if(e.A&&e.M){var t=e.A.g,n="playing";e.M.g==Wr?n="buffering":e.h.paused?n="paused":e.h.ended&&(n="ended");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Be("statechanged",n)))}}function Lv(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.Vh();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.Uc(i):r==1&&t!==e.K.Hc()&&e.bd()}if(n&&(n=e.Oa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var o=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,u=s+i,a=Math.max(0,s-i),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?u=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(u=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?a=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(a=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.P||typeof s!="number"||(e.P=s);var h=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.Fa&&e.P!==null&&typeof s=="number"&&e.Ne<h&&Date.now()-e.Fa>1e3*o&&(o=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.P=Math.max(e.P-(s-o)/2,o+i),e.Fa=Date.now()),r&&e.P!==null&&(u=e.P+i,a=e.P-i),s=n.end-e.h.currentTime,i=0,e.l==mt&&(r=e.h.buffered,0<r.length&&(i=r.end(r.length-1),i=Math.max(l,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=1e3*e.g.streaming.liveSync.panicThreshold,o=Date.now()-e.M.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&o<=r?t!=c&&e.Uc(c):u&&l&&s-i>u?(t!=l&&e.Uc(l),e.Fa=null):a&&c&&s-i<a?(t!=c&&e.Uc(c),e.Fa=null):t!==e.K.Hc()&&(e.bd(),e.Fa=Date.now())}}function Ba(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.S)?(e.S=n,t=!0):(n=Math.max(e.S,n),e.S!=n&&(e.S=n,t=!0))),t){var i;e.S==0?i=Be("started"):e.S==25?i=Be("firstquartile"):e.S==50?i=Be("midpoint"):e.S==75?i=Be("thirdquartile"):e.S==100&&(i=Be("complete")),i&&e.dispatchEvent(i)}}}function po(e){try{Qg(e.Gf,e.i)}catch(n){return go(e,n),!1}var t=Qu(e.i.variants);return t=e.Aa.create(t),e.s.setVariants(Array.from(t.values())),!0}function Rv(e,t){return t=t===void 0?!1:t,po(e)?e.s.chooseVariant(t):null}function fo(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var o=Rv(e);o&&Ga(e,o,r,t,n,i)}function Ga(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e.j.j;if(t==s)i&&qm(e.j,t,i,r,!0);else{var u=e.A.h;u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),qm(e.j,t,i,r,o,n),i=null,s&&(i=Kr(s)),t=Kr(t),n?(n=new Map().set("oldTrack",i).set("newTrack",t),e.L&&fm(e.L,t,e.Kg()),n=Be("adaptation",n),mo(e,n)):Dv(e,i,t)}}function Pv(e,t){var n=Array.from(e.h.audioTracks).find(function(i){return i.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=ah(n),t=ah(t),Dv(e,n,t))}function Rx(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var i=xe(e.g.preferredTextLanguage);return n=xe(n.language),e.g.autoShowText==2?jr(n,i):e.g.autoShowText==3?t?(e=xe(t.language),jr(n,i)&&!jr(e,n)):!1:(ce("Invalid autoShowText setting!"),!1)}function gn(e){var t=Be("trackschanged");mo(e,t)}function Dv(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.L&&fm(e.L,n,e.Kg()),n=Be("variantchanged",t),mo(e,n)}function Va(e){var t=Be("textchanged");mo(e,t)}function Nv(e){var t=Be("texttrackvisibility");mo(e,t)}function _v(e){e.g.abr.enabled||pd(e);var t=new Map().set("newStatus",e.g.abr.enabled);mo(e,Be("abrstatuschanged",t))}function pd(e,t){if(t=t===void 0?!0:t,e.l==St){e.Kf.stop();for(var n=g(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&po(e)}}p.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===Bn||!navigator.onLine)return!1;if(this.i.variants.some(function(o){var s=o[e.type];return s&&s.id!==e.id&&!o.disabledUntilTime?e.type=="audio"?e.language===s.language:!0:!1})){for(var n=g(this.i.variants),i=n.next();!i.done;i=n.next()){i=i.value;var r=i[e.type];r&&r.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}return this.Kf.wa(1),t=this.Wb().video.reduce(function(o,s){return o+s.end-s.start},0),fo(this,!1,t,!0,!1),!0}return!1};function go(e,t){var n,i,r;return M(function(o){switch(o.g){case 1:if(e.l==Bn)return o.return();if(t.severity===1&&e.A.L++,n=!0,!(e.Ha&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){o.B(2);break}return Z(o,3),T(o,B2(e.j),5);case 5:i=o.h,n=!i,le(o,2);break;case 3:Q(o),n=!0;case 2:if(!n)return o.return();t.severity===2&&pd(e,!1),r=Be("error",new Map().set("detail",t)),e.dispatchEvent(r),r.defaultPrevented&&(t.handled=!0),V(o)}})}function Bs(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Be(t,e))}function Uv(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Be(i?"audiotrackchanged":"mediaqualitychanged",t))}function fd(e){if(!e.h.error)return null;var t=e.h.error.code;if(t==1)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new L(2,3,3016,t,n,e.h.error.message)}function gd(e,t,n){0<t&&(e.U()||e.Hi(t)),t=e.getDuration(),n<t&&(e.U()||e.vb(n))}function mo(e,t){M(function(n){if(n.g==1)return T(n,Promise.resolve(),2);e.l!=Bn&&e.dispatchEvent(t),V(n)})}function Ov(e){var t=new Set;e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(xe(n.language)):t.add("und");return t}function bv(e){var t=new Map,n=new Map;e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",o=[];i.language&&(r=xe(i.language)),i.type=="variant"?o=i.audioRoles:o=i.roles,o&&o.length||(o=[""]),t.has(r)||t.set(r,new Set),o=g(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(r).add(s),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(s,i.label))}var u=[];return t.forEach(function(a,l){a=g(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var h=null;n.has(l)&&n.get(l).has(c)&&(h=n.get(l).get(c)),u.push({language:l,role:c,label:h})}}),u}j("shaka.Player",b),b.prototype.setVideoContainer=b.prototype.uh,b.prototype.getManifestParserFactory=b.prototype.yj,b.prototype.getManifest=b.prototype.Jg,b.prototype.retryStreaming=b.prototype.gh,b.prototype.setMaxHardwareResolution=b.prototype.Pk,b.prototype.addChaptersTrack=b.prototype.Vi,b.prototype.addThumbnailsTrack=b.prototype.Xi,b.prototype.addTextTrackAsync=b.prototype.Wi,b.prototype.getStats=b.prototype.getStats,b.prototype.getBufferedInfo=b.prototype.Wb,b.prototype.getSegmentAvailabilityDuration=b.prototype.$e,b.prototype.getPresentationStartTimeAsDate=b.prototype.$h,b.prototype.getPlayheadTimeAsDate=b.prototype.Cj,b.prototype.setTextTrackVisibility=b.prototype.Cf,b.prototype.getChapters=b.prototype.kj,b.prototype.getChaptersTracks=b.prototype.Wh,b.prototype.isTextTrackVisible=b.prototype.Nc,b.prototype.selectVariantsByLabel=b.prototype.Jk,b.prototype.selectTextLanguage=b.prototype.kh,b.prototype.selectAudioLanguage=b.prototype.jh,b.prototype.getTextLanguages=b.prototype.Hj,b.prototype.getAudioLanguages=b.prototype.gj,b.prototype.getTextLanguagesAndRoles=b.prototype.Ij,b.prototype.getAudioLanguagesAndRoles=b.prototype.hj,b.prototype.selectVariantTrack=b.prototype.Af,b.prototype.selectTextTrack=b.prototype.lh,b.prototype.getThumbnails=b.prototype.Mg,b.prototype.getAllThumbnails=b.prototype.fj,b.prototype.getImageTracks=b.prototype.We,b.prototype.getTextTracks=b.prototype.uc,b.prototype.getVariantTracks=b.prototype.Jb,b.prototype.cancelTrickPlay=b.prototype.bd,b.prototype.trickPlay=b.prototype.Uc,b.prototype.getPlaybackRate=b.prototype.Ua,b.prototype.isBuffering=b.prototype.ce,b.prototype.getKeyStatuses=b.prototype.Xe,b.prototype.getActiveSessionsMetadata=b.prototype.Hg,b.prototype.getExpiration=b.prototype.Xd,b.prototype.drmInfo=b.prototype.drmInfo,b.prototype.keySystem=b.prototype.keySystem,b.prototype.isFullyLoaded=b.prototype.ei,b.prototype.goToLive=b.prototype.Rj,b.prototype.seekRange=b.prototype.Oa,b.prototype.isAudioOnly=b.prototype.Lc,b.prototype.isInProgress=b.prototype.Mc,b.prototype.isLive=b.prototype.U,b.prototype.getAdManager=b.prototype.Ve,b.prototype.getAssetUri=b.prototype.fd,b.prototype.getNetworkingEngine=b.prototype.Gb,b.prototype.getMediaElement=b.prototype.Bj,b.prototype.getManifestType=b.prototype.Kg,b.prototype.getLoadMode=b.prototype.gd,b.prototype.resetConfiguration=b.prototype.Ck,b.prototype.getBufferFullness=b.prototype.Vh,b.prototype.getNonDefaultConfiguration=b.prototype.Zh,b.prototype.getConfiguration=b.prototype.getConfiguration,b.prototype.configure=b.prototype.configure,b.prototype.releaseAllMutexes=b.prototype.yk,b.prototype.destroyAllPreloads=b.prototype.qg,b.prototype.preload=b.prototype.preload,b.prototype.detachAndSavePreload=b.prototype.Rh,b.prototype.unloadAndSavePreload=b.prototype.Tk,b.prototype.load=b.prototype.load,b.prototype.updateStartTime=b.prototype.Xk,b.prototype.unload=b.prototype.yc,b.prototype.detach=b.prototype.detach,b.prototype.attachCanvas=b.prototype.Hh,b.prototype.attach=b.prototype.ac,b.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,o,s,u;return M(function(a){switch(a.g){case 1:if(t={},!e){a.B(2);break}return T(a,Iw(),3);case 3:t=a.h;case 2:var l={};if(Un())for(var c in Rn)l[c]=!0;c=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var h=c.next();!h.done;h=c.next())h=h.value,l[h]=Un()?!!Rn[h]:is(h);for(n=l,c='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(W(dr)),l={},c=g(c),h=c.next();!h.done;h=c.next()){h=h.value,l[h]=fs(h)?!0:Un()?et(h)||!!Fi(h):is(h);var d=h.split(";")[0];l[d]=l[d]||l[h]}return i=l,T(a,P0(),4);case 4:r=a.h,o={manifest:n,media:i,drm:t,hardwareResolution:r},s=vd;for(u in s)o[u]=s[u]();return a.return(o)}})},b.isBrowserSupported=fv,b.setAdManagerFactory=function(e){Ha=e},b.registerSupportPlugin=function(e,t){vd[e]=t},b.prototype.destroy=b.prototype.destroy;var Bn=0,md=1,St=2,mt=3;b.LoadMode={DESTROYED:Bn,NOT_LOADED:md,MEDIA_SOURCE:St,SRC_EQUALS:mt},b.version="v4.10.5";var jv=["4","10"];G0=new function(e){this.g=e,this.i=DA,this.h=NA}(new Jc(Number(jv[0]),Number(jv[1])));var vd={},Ha=null;function Fv(){this.g=[],this.i=this.l=this.j=this.h=0}function Px(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function oe(e,t,n){var i=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Ee,this.m.o(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.m.o(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}p=oe.prototype,p.getDuration=function(){return this.g.getDuration()},p.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.h.getRemainingTime()},p.isPaused=function(){return this.i},p.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.h.getAdSkippableState()},p.skip=function(){return this.h.skip()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.resume()},p.getVolume=function(){return this.h.getVolume()},p.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},p.isMuted=function(){return this.h.getVolume()==0},p.isLinear=function(){return this.g.isLinear()},p.resize=function(e,t){var n=!1,i=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return this.g.getMediaUrl()},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.g=null},j("shaka.ads.ClientSideAd",oe),oe.prototype.release=oe.prototype.release,oe.prototype.getPodIndex=oe.prototype.getPodIndex,oe.prototype.getTimeOffset=oe.prototype.getTimeOffset,oe.prototype.getMediaUrl=oe.prototype.getMediaUrl,oe.prototype.getAdvertiserName=oe.prototype.getAdvertiserName,oe.prototype.getCreativeAdId=oe.prototype.getCreativeAdId,oe.prototype.getAdId=oe.prototype.getAdId,oe.prototype.getVastMediaWidth=oe.prototype.getVastMediaWidth,oe.prototype.getVastMediaHeight=oe.prototype.getVastMediaHeight,oe.prototype.getVastMediaBitrate=oe.prototype.getVastMediaBitrate,oe.prototype.getDescription=oe.prototype.getDescription,oe.prototype.getTitle=oe.prototype.getTitle,oe.prototype.getPositionInSequence=oe.prototype.getPositionInSequence,oe.prototype.getSequenceLength=oe.prototype.getSequenceLength,oe.prototype.setMuted=oe.prototype.setMuted,oe.prototype.resize=oe.prototype.resize,oe.prototype.isLinear=oe.prototype.isLinear,oe.prototype.isMuted=oe.prototype.isMuted,oe.prototype.setVolume=oe.prototype.setVolume,oe.prototype.getVolume=oe.prototype.getVolume,oe.prototype.play=oe.prototype.play,oe.prototype.pause=oe.prototype.pause,oe.prototype.skip=oe.prototype.skip,oe.prototype.canSkipNow=oe.prototype.canSkipNow,oe.prototype.getTimeUntilSkippable=oe.prototype.getTimeUntilSkippable,oe.prototype.isSkippable=oe.prototype.isSkippable,oe.prototype.isPaused=oe.prototype.isPaused,oe.prototype.getRemainingTime=oe.prototype.getRemainingTime,oe.prototype.getMinSuggestedDuration=oe.prototype.getMinSuggestedDuration,oe.prototype.getDuration=oe.prototype.getDuration;function be(){}j("shaka.ads.Utils",be),be.ADS_LOADED="ads-loaded",be.AD_STARTED="ad-started",be.AD_FIRST_QUARTILE="ad-first-quartile",be.AD_MIDPOINT="ad-midpoint",be.AD_THIRD_QUARTILE="ad-third-quartile",be.AD_COMPLETE="ad-complete",be.AD_STOPPED="ad-stopped",be.AD_SKIPPED="ad-skipped",be.AD_VOLUME_CHANGED="ad-volume-changed",be.AD_MUTED="ad-muted",be.AD_PAUSED="ad-paused",be.AD_RESUMED="ad-resumed",be.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",be.CUEPOINTS_CHANGED="ad-cue-points-changed",be.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",be.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",be.AD_CLICKED="ad-clicked",be.AD_PROGRESS="ad-progress",be.AD_BUFFERING="ad-buffering",be.AD_IMPRESSION="ad-impression",be.AD_DURATION_CHANGED="ad-duration-changed",be.AD_CLOSED="ad-closed",be.AD_LOADED="ad-loaded",be.ALL_ADS_COMPLETED="all-ads-completed",be.AD_LINEAR_CHANGED="ad-linear-changed",be.AD_METADATA="ad-metadata",be.AD_RECOVERABLE_ERROR="ad-recoverable-error",be.AD_ERROR="ad-error",be.AD_BREAK_READY="ad-break-ready",be.AD_INTERACTION="ad-interaction",be.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",be.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",be.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function qa(e,t,n,i,r){var o=this;this.u=e,this.i=t,this.H=!1,this.A=this.s=null,this.I=NaN,this.l=r,this.j=null,this.h=new Ee,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.G=new google.ima.AdDisplayContainer(this.u,this.i),this.G.initialize(),this.m=new google.ima.AdsLoader(this.G),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.5"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.o(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){Dx(o,s)}),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){Bv(o,s)}),this.h.o(this.i,"ended",function(){o.m.contentComplete()}),this.h.ia(this.i,"play",function(){o.H=!0})}qa.prototype.configure=function(e){this.s=e},qa.prototype.stop=function(){this.g&&this.g.stop(),this.u&&Ai(this.u)},qa.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.G.destroy()};function Bv(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new G("ad-error",t)),za(e,null),e.l(new G("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Dx(e,t){if(e.l(new G("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.I))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.o(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.o(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.l(new G("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=g(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new G("ad-cue-points-changed",new Map().set("cuepoints",t)))}Nx(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Ka(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.o(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Ka(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in O?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Ka(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.o(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Ka(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.H||e.s.skipPlayDetection?e.g.start():e.h.ia(e.i,"play",function(){e.H=!0,e.g.start()})}catch(o){za(e,null)}}function Ka(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Nx(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new G(i,n))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Bv(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Gv(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,function(n){Gv(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){za(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){za(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.o(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Gv(e,t){var n=t.getAd();n?(e.j=new oe(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.s.supportsMultipleMediaElements||e.l(new G("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new G("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):ce("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function za(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.s.supportsMultipleMediaElements&&e.l(new G("ad-content-resume-requested")),e.l(new G("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function se(e,t,n,i,r){this.g=e,this.h=t,this.j=n,this.l=i,this.i=r}p=se.prototype,p.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.h},p.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.j()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l},p.getPositionInSequence=function(){return this.i},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.g=null},j("shaka.ads.InterstitialAd",se),se.prototype.release=se.prototype.release,se.prototype.getPodIndex=se.prototype.getPodIndex,se.prototype.getTimeOffset=se.prototype.getTimeOffset,se.prototype.getMediaUrl=se.prototype.getMediaUrl,se.prototype.getAdvertiserName=se.prototype.getAdvertiserName,se.prototype.getCreativeAdId=se.prototype.getCreativeAdId,se.prototype.getAdId=se.prototype.getAdId,se.prototype.getVastMediaWidth=se.prototype.getVastMediaWidth,se.prototype.getVastMediaHeight=se.prototype.getVastMediaHeight,se.prototype.getVastMediaBitrate=se.prototype.getVastMediaBitrate,se.prototype.getDescription=se.prototype.getDescription,se.prototype.getTitle=se.prototype.getTitle,se.prototype.getPositionInSequence=se.prototype.getPositionInSequence,se.prototype.getSequenceLength=se.prototype.getSequenceLength,se.prototype.setMuted=se.prototype.setMuted,se.prototype.resize=se.prototype.resize,se.prototype.isLinear=se.prototype.isLinear,se.prototype.isMuted=se.prototype.isMuted,se.prototype.setVolume=se.prototype.setVolume,se.prototype.getVolume=se.prototype.getVolume,se.prototype.play=se.prototype.play,se.prototype.pause=se.prototype.pause,se.prototype.skip=se.prototype.skip,se.prototype.canSkipNow=se.prototype.canSkipNow,se.prototype.getTimeUntilSkippable=se.prototype.getTimeUntilSkippable,se.prototype.isSkippable=se.prototype.isSkippable,se.prototype.isPaused=se.prototype.isPaused,se.prototype.getRemainingTime=se.prototype.getRemainingTime,se.prototype.getMinSuggestedDuration=se.prototype.getMinSuggestedDuration,se.prototype.getDuration=se.prototype.getDuration;function Wa(e,t,n,i){var r=this;this.H=e,this.C=t,this.i=n,this.G=null,this.l=!0,this.u=this.i,this.g=i,this.I=new Set,this.A=new Set,this.s=new Map,this.h=new b,Td(this),this.K=new Ee,this.j=new Ee,this.J=!1,this.m=null,this.K.o(this.i,"timeupdate",function(){if(!r.J){var o=r.m==null;r.m=r.i.currentTime,(o=Vv(r,o))&&Hv(r,o,1,1,Date.now())}}),new te(function(){var o,s,u,a,l,c,h,d,f,m;return M(function(y){switch(y.g){case 1:if(!r.A.size||r.J||r.m==null){y.B(0);break}o=!1,s=Array.from(r.A),u=r.C.Oa(),a=g(s),l=a.next();case 3:if(l.done){y.B(5);break}if(c=l.value,h=c.endTime||c.startTime,!(1<=u.start-h)){d=c.startTime-r.m,0<d&&10>=d&&(r.s.has(c)||r.s.set(c,r.h.preload(c.uri))),y.B(4);break}if(!r.s.has(c)){y.B(7);break}return T(y,r.s.get(c),8);case 8:(f=y.h)&&f.destroy(),r.s.delete(c);case 7:m=JSON.stringify(c),r.I.has(m)&&r.I.delete(m),r.A.delete(c),o=!0;case 4:l=a.next(),y.B(3);break;case 5:o&&yd(r),V(y)}})}).wa(1)}Wa.prototype.configure=function(e){this.H&&this.l==e.supportsMultipleMediaElements&&((this.l=!e.supportsMultipleMediaElements)?(this.u=this.i,this.G&&(this.G.parentElement&&this.H.removeChild(this.G),this.G=null)):(this.G||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.G=e),this.u=this.G))},Wa.prototype.stop=function(){this.j&&this.j.Za(),this.I.clear(),this.A.clear(),this.h.qg(),this.s.clear(),this.h.detach(),this.J=!1,this.m=null},Wa.prototype.release=function(){this.stop(),this.K&&this.K.release(),this.j&&this.j.release(),this.H&&Ai(this.H),this.h.destroy()};function _x(e,t){var n,i,r,o,s,u,a,l;M(function(c){if(c.g==1)return e.C.gd()==mt&&e.l?(ce("Unsupported interstitial when using single media element",t),c.return()):(Td(e),n=!1,T(c,Ux(e,t),2));if(i=c.h,i.length)for(r=g(i),o=r.next();!o.done;o=r.next())s=o.value,u=JSON.stringify(s),e.I.has(u)||(n=!0,e.I.add(u),e.A.add(s),a=!1,t.ic&&e.m==null?a=!0:s.startTime!=0||s.jg?e.m!=null&&(l=t.startTime-e.m,0<l&&10>=l&&(a=!0)):a=!0,a&&(e.s.has(s)||e.s.set(s,e.h.preload(s.uri))));else ce("Unsupported interstitial",t);n&&yd(e),V(c)})}function Vv(e,t,n){n=n===void 0?0:n;var i=0,r=null;if(e.A.size&&e.m!=null){var o=e.i.ended,s=Array.from(e.A).sort(function(l,c){return c.startTime-l.startTime});s=g(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=!1;if(t?a=u.ic:o?a=u.Pc:u.ic||u.Pc||(a=e.m-Math.round(1e3*u.startTime)/1e3,a=0<a&&(1>=a||!u.jg)),a){if(i==n){r=u;break}i++}}}return r}function Hv(e,t,n,i,r,o){o=o===void 0?0:o;var s,u,a,l,c,h,d,f,m,y,v,A,S,x;M(function(E){switch(E.g){case 1:if(s=Date.now(),!e.u.parentElement&&e.H&&e.H.appendChild(e.u),i==1&&n==1&&(n=Array.from(e.A).filter(function(w){return t.ic?w.ic==t.ic:t.Pc?w.Pc==t.Pc:.001>Math.abs(w.startTime-t.startTime)}).length),t.once&&(o++,e.A.delete(t),yd(e)),e.J=!0,!e.l||i!=1){E.B(2);break}return e.g(new G("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),u=new Le,a=function(w){return M(function(I){if(I.g==1)return w.state!="detach"?I.B(0):Vc()?T(I,new Promise(function(k){return new te(k).X(.1)}),3):I.B(3);u.resolve(),e.j.Pa(e.C,"onstatechange",a),V(I)})},e.j.o(e.C,"onstatechange",a),T(E,u,2);case 2:return e.l||(e.i.pause(),t.ud!=null&&t.ud!=0&&(e.i.currentTime+=t.ud)),l=!1,c=null,h=function(){if(!e.l&&t.ud==null)if(t.Df&&t.endTime)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var w=Date.now();e.i.currentTime+=(w-r)/1e3,r=w}},d=function(){var w,I;return M(function(k){if(k.g==1)return h(),c&&c.stop(),(w=Vv(e,t.ic,i-o))?(e.g(new G("ad-stopped")),e.j.Za(),Hv(e,w,n,++i,r,o),k.B(0)):e.l?T(k,e.h.detach(),4):T(k,e.h.yc(),4);e.l&&(I=t.ud,I==null&&(I=t.Df&&t.endTime?t.endTime-(e.m||0):(Date.now()-r)/1e3),e.g(new G("ad-content-resume-requested",new Map().set("offset",I)))),e.g(new G("ad-stopped")),e.j.Za(),e.J=!1,e.l||(h(),e.i.ended||e.i.play()),V(k)})},f=function(w){return M(function(I){return l?I.return():(l=!0,e.g(new G("ad-error",new Map().set("originalEvent",w))),T(I,d(),0))})},m=function(){return M(function(w){if(w.g==1)return l?w.return():(l=!0,T(w,d(),2));e.g(new G("ad-complete")),V(w)})},y=function(){return M(function(w){return l?w.return():(l=!0,e.g(new G("ad-skipped")),T(w,d(),0))})},v=new se(e.u,t.isSkippable,y,n,i),e.l||(v.setMuted(e.i.muted),v.setVolume(e.i.volume)),e.g(new G("ad-started",new Map().set("ad",v))),v.canSkipNow()&&e.g(new G("ad-skip-state-changed")),e.j.ia(e.h,"error",f),e.j.ia(e.h,"firstquartile",function(){h(),e.g(new G("ad-first-quartile"))}),e.j.ia(e.h,"midpoint",function(){h(),e.g(new G("ad-midpoint"))}),e.j.ia(e.h,"thirdquartile",function(){h(),e.g(new G("ad-third-quartile"))}),e.j.ia(e.h,"complete",m),e.j.o(e.u,"play",function(){e.g(new G("ad-resumed"))}),e.j.o(e.u,"pause",function(){e.g(new G("ad-paused"))}),e.j.o(e.u,"volumechange",function(){e.u.muted?e.g(new G("ad-muted")):e.g(new G("ad-volume-changed"))}),Z(E,4),t.eh&&(c=new te(function(){v.skip()}).X(t.eh)),Td(e),T(E,e.h.ac(e.u),6);case 6:return e.s.has(t)?T(E,e.s.get(t),10):T(E,e.h.load(t.uri),8);case 10:return A=E.h,e.s.delete(t),A?T(E,e.h.load(A),8):T(E,e.h.load(t.uri),8);case 8:S=(Date.now()-s)/1e3,e.g(new G("ads-loaded",new Map().set("loadTime",S))),e.l&&e.i.play(),le(E,0);break;case 4:x=Q(E),f(x),V(E)}})}function Ux(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H;return M(function(F){switch(F.g){case 1:if(n=[],!t||(i=t.values.find(function(X){return X.key=="X-ASSET-URI"}),r=t.values.find(function(X){return X.key=="X-ASSET-LIST"}),!i&&!r))return F.return(n);if(o=t.values.find(function(X){return X.key=="X-RESTRICT"}),u=s=!0,o&&o.data&&(a=o.data,s=!a.includes("SKIP"),u=!a.includes("JUMP")),l=null,(c=t.values.find(function(X){return X.key=="X-RESUME-OFFSET"}))&&(h=c.data,l=parseFloat(h),isNaN(l)&&(l=null)),d=null,(f=t.values.find(function(X){return X.key=="X-PLAYOUT-LIMIT"}))&&(m=f.data,d=parseFloat(m),isNaN(d)&&(d=null)),A=v=y=!1,(S=t.values.find(function(X){return X.key=="CUE"}))&&(x=S.data,y=x.includes("ONCE"),v=x.includes("PRE"),A=x.includes("POST")),E=!0,(w=t.values.find(function(X){return X.key=="X-TIMELINE-OCCUPIES"}))?(I=w.data,E=I.includes("RANGE")):!c&&e.C.U()&&(E=!0),i){if(k=i.data,!k)return F.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:k,isSkippable:s,jg:u,ud:l,eh:d,once:y,ic:v,Pc:A,Df:E}),F.B(2);break}if(!r){F.B(2);break}return R=r.data,R?(D=ut([R],jn()),P=e.C.Gb().request(7,D),Z(F,4),T(F,P.promise,6)):F.return(n);case 6:for(C=F.h,N=Fe(C.data),_=JSON.parse(N),U=g(_.ASSETS),B=U.next();!B.done;B=U.next())H=B.value,H.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:H.URI,isSkippable:s,jg:u,ud:l,eh:d,once:y,ic:v,Pc:A,Df:E});le(F,2);break;case 4:Q(F);case 2:return F.return(n)}})}function yd(e){for(var t=[],n={},i=g(e.A),r=i.next();!r.done;n={Ub:n.Ub},r=i.next())r=r.value,n.Ub={start:r.startTime,end:null},r.ic?(n.Ub.start=0,n.Ub.end=null):r.Pc?(n.Ub.start=-1,n.Ub.end=null):r.Df&&(n.Ub.end=r.endTime),t.find(function(o){return function(s){return o.Ub.start==s.start&&o.Ub.end==s.end}}(n))||t.push(n.Ub);e.g(new G("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Td(e){e.h.configure(e.C.Zh());var t=e.h.Gb();t.Nh(),t.Oh(),Cg(e.C.Gb(),t)}function zi(e){this.h=e||"",this.g=0}function vo(e){xi(e,/[ \t]+/gm)}function xi(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Sr(e){return e.g==e.h.length?null:(e=xi(e,/[^ \t\n]*/gm))?e[0]:null}function re(e,t,n,i,r){if(this.h=e,e=this.h.skipOffset)if(e=xi(new zi(e),Ox),e==null)e=null;else{var o=Number(e[2]),s=Number(e[3]);e=59<o||59<s?null:(Number(e[4])||0)/1e3+s+60*o+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=r,this.i=t,this.l=n,this.s=i,this.m=!1}p=re.prototype,p.getDuration=function(){return this.h.durationInSeconds},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return typeof this.j=="number"},p.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.s},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l?this.l:1},p.getPositionInSequence=function(){return this.i?this.i:1},p.getTitle=function(){return this.h.adTitle},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.h.adId},p.getCreativeAdId=function(){return this.h.creativeId},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.l=this.i=this.g=this.h=null},j("shaka.ads.MediaTailorAd",re),re.prototype.release=re.prototype.release,re.prototype.getPodIndex=re.prototype.getPodIndex,re.prototype.getTimeOffset=re.prototype.getTimeOffset,re.prototype.getMediaUrl=re.prototype.getMediaUrl,re.prototype.getAdvertiserName=re.prototype.getAdvertiserName,re.prototype.getCreativeAdId=re.prototype.getCreativeAdId,re.prototype.getAdId=re.prototype.getAdId,re.prototype.getVastMediaWidth=re.prototype.getVastMediaWidth,re.prototype.getVastMediaHeight=re.prototype.getVastMediaHeight,re.prototype.getVastMediaBitrate=re.prototype.getVastMediaBitrate,re.prototype.getDescription=re.prototype.getDescription,re.prototype.getTitle=re.prototype.getTitle,re.prototype.getPositionInSequence=re.prototype.getPositionInSequence,re.prototype.getSequenceLength=re.prototype.getSequenceLength,re.prototype.setMuted=re.prototype.setMuted,re.prototype.resize=re.prototype.resize,re.prototype.isLinear=re.prototype.isLinear,re.prototype.isMuted=re.prototype.isMuted,re.prototype.setVolume=re.prototype.setVolume,re.prototype.getVolume=re.prototype.getVolume,re.prototype.play=re.prototype.play,re.prototype.pause=re.prototype.pause,re.prototype.skip=re.prototype.skip,re.prototype.canSkipNow=re.prototype.canSkipNow,re.prototype.getTimeUntilSkippable=re.prototype.getTimeUntilSkippable,re.prototype.isSkippable=re.prototype.isSkippable,re.prototype.isPaused=re.prototype.isPaused,re.prototype.getRemainingTime=re.prototype.getRemainingTime,re.prototype.getMinSuggestedDuration=re.prototype.getMinSuggestedDuration,re.prototype.getDuration=re.prototype.getDuration;var Ox=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Gs(e,t,n,i){this.C=e,this.L=t,this.h=n,this.l=null,this.S=NaN,this.i=i,this.K=!1,this.A=null,this.j=[],this.O=[],this.M=this.G=this.g=null,this.H=new Map,this.m=[],this.u=[],this.I="",this.P=!0,this.J="",this.s=new Ee}Gs.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.s.Pa(t.target,t.type,t.listener);yo(this),this.m=[],this.u=[],this.I="",this.P=!0,this.J="",this.A=null,this.j=[],this.O=[],this.H.clear()},Gs.prototype.release=function(){this.stop(),this.s&&this.s.release()},Gs.prototype.onManifestUpdated=function(e){this.K=e,this.I!=""&&(jx(this,this.I,this.P),this.P=!1)},Gs.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next()){n=g(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function bx(e,t,n){var i,r,o,s,u,a,l,c,h,d,f;M(function(m){if(m.g==1)return i=ut([t],jn()),i.method="POST",n&&(r=JSON.stringify(n),i.body=On(r)),o=e.L.request(7,i),Z(m,2),T(m,o.promise,4);if(m.g!=2){if(s=m.h,u=Fe(s.data),a=JSON.parse(u),a.manifestUrl&&a.trackingUrl)l=new Ze(t),c=new Ze(a.trackingUrl),e.I=l.resolve(c).toString(),h=Date.now()/1e3,d=h-e.S,e.i(new G("ads-loaded",new Map().set("loadTime",d))),f=new Ze(a.manifestUrl),e.l.resolve(l.resolve(f).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return le(m,0)}if(Q(m),!e.J.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,m.return();e.l.resolve(e.J),e.l=null,V(m)})}function jx(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m,y,v,A;M(function(S){if(S.g==1)return i=ut([t],jn()),r=e.L.request(7,i),Z(S,2),T(S,r.promise,4);if(S.g!=2){if(o=S.h,s=[],u=Fe(o.data),a=JSON.parse(u),0<a.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(a.avails)){for(e.j=a.avails,l=g(e.j),c=l.next();!c.done;c=l.next())for(h=c.value,d=g(h.nonLinearAdsList),f=d.next();!f.done;f=d.next())for(m=f.value,y=g(m.nonLinearAdList),v=y.next();!v.done;v=y.next())A=v.value,Fx(e,A);s=e.getCuePoints(),e.i(new G("ad-cue-points-changed",new Map().set("cuepoints",s)))}}else e.j.length&&e.i(new G("ad-cue-points-changed",new Map().set("cuepoints",s))),yo(e),e.j=[];return n&&(e.K||0<s.length)&&Bx(e),le(S,0)}Q(S),V(S)})}function Fx(e,t){var n,i,r,o,s,u,a;M(function(l){if(l.g==1)return!t.staticResource||(n=qv(t),e.H.get(n))?l.return():(i=ut([t.staticResource],jn()),r=e.L.request(7,i),Z(l,2),e.H.set(n,[]),T(l,r.promise,4));if(l.g!=2)return o=l.h,s=Fe(o.data),u=JSON.parse(s),a=u.apps,e.H.set(n,a),le(l,0);Q(l),e.H.delete(n),V(l)})}function qv(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Bx(e){zv(e),e.K||(Kv(e),e.s.o(e.h,"seeked",function(){Kv(e)}),e.s.o(e.h,"ended",function(){yo(e)})),e.s.o(e.h,"timeupdate",function(){zv(e)})}function Kv(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,i,r=g(e.j),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=g(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!i)u.startTimeInSeconds<t&&(i=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}n&&i&&!e.O.includes(i.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function zv(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.G,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Ct(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Ct(e,"midpoint")):t>=o&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Ct(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&0<i&&0<r&&Ct(e,"skipStateChanged"),0<r&&(0>=i||i>r)&&yo(e)}if(!e.g||!e.g.isLinear()){e:for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.O.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}yo(e),e.M=r,e.g=new re(s,o+1,r.ads.length,!0,e.h),e.G=s,o===0&&Ct(e,"breakStart"),Wv(e);break}}if(!e.g){for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if(s=r.nonLinearAdsList[o],s.nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.H.get(qv(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){yo(e),u=e,a=g(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",u.C.appendChild(c)}e.M=r,e.g=new re(s,o+1,r.ads.length,!1,e.h),e.G=s,o===0&&Ct(e,"breakStart"),Wv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function yo(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.K||e.O.push(e.G.adId);var t=e.g.m;t!==void 0&&t?Ct(e,"skip"):Ct(e,"complete"),t=g(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.s.Pa(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Ct(e,"breakEnd"),e.g=null,e.G=null,e.M=null}}function Wv(e){var t=!1;e.h.paused?t=!0:(Ct(e,"impression"),Ct(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Ct(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Ct(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Ct(e,"impression"),Ct(e,"start"),t=!1):Ct(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Ct(e,"pause")}});for(var n=g(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.s.o(i.target,i.type,i.listener)}function Ct(e,t){var n=e.G.trackingEvents.find(function(r){return r.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(r){return r.eventType==t})),n){n=g(n.beaconUrls);for(var i=n.next();!i.done;i=n.next())(i=i.value)&&i!=""&&(i=ut([i],jn()),i.method="POST",e.L.request(7,i))}switch(t){case"impression":e.i(new G("ad-impression"));break;case"start":e.i(new G("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new G("ad-muted"));break;case"unmute":e.i(new G("ad-volume-changed"));break;case"resume":e.i(new G("ad-resumed"));break;case"pause":e.i(new G("ad-paused"));break;case"firstQuartile":e.i(new G("ad-first-quartile"));break;case"midpoint":e.i(new G("ad-midpoint"));break;case"thirdQuartile":e.i(new G("ad-third-quartile"));break;case"complete":e.i(new G("ad-complete")),e.i(new G("ad-stopped"));break;case"skip":e.i(new G("ad-skipped")),e.i(new G("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new G("ad-skip-state-changed"))}}function ue(e,t){this.g=e,this.i=null,this.h=t}p=ue.prototype,p.getDuration=function(){return this.i?this.i.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},p.isPaused=function(){return this.h.paused},p.isSkippable=function(){return this.g.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.h.currentTime+=this.getRemainingTime()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.play()},p.getVolume=function(){return this.h.volume},p.setVolume=function(e){this.h.volume=e},p.isMuted=function(){return this.h.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.h.muted=e},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.i=this.g=null},j("shaka.ads.ServerSideAd",ue),ue.prototype.release=ue.prototype.release,ue.prototype.getPodIndex=ue.prototype.getPodIndex,ue.prototype.getTimeOffset=ue.prototype.getTimeOffset,ue.prototype.getMediaUrl=ue.prototype.getMediaUrl,ue.prototype.getAdvertiserName=ue.prototype.getAdvertiserName,ue.prototype.getCreativeAdId=ue.prototype.getCreativeAdId,ue.prototype.getAdId=ue.prototype.getAdId,ue.prototype.getVastMediaWidth=ue.prototype.getVastMediaWidth,ue.prototype.getVastMediaHeight=ue.prototype.getVastMediaHeight,ue.prototype.getVastMediaBitrate=ue.prototype.getVastMediaBitrate,ue.prototype.getDescription=ue.prototype.getDescription,ue.prototype.getTitle=ue.prototype.getTitle,ue.prototype.getPositionInSequence=ue.prototype.getPositionInSequence,ue.prototype.getSequenceLength=ue.prototype.getSequenceLength,ue.prototype.setMuted=ue.prototype.setMuted,ue.prototype.resize=ue.prototype.resize,ue.prototype.isLinear=ue.prototype.isLinear,ue.prototype.isMuted=ue.prototype.isMuted,ue.prototype.setVolume=ue.prototype.setVolume,ue.prototype.getVolume=ue.prototype.getVolume,ue.prototype.play=ue.prototype.play,ue.prototype.pause=ue.prototype.pause,ue.prototype.skip=ue.prototype.skip,ue.prototype.canSkipNow=ue.prototype.canSkipNow,ue.prototype.getTimeUntilSkippable=ue.prototype.getTimeUntilSkippable,ue.prototype.isSkippable=ue.prototype.isSkippable,ue.prototype.isPaused=ue.prototype.isPaused,ue.prototype.getRemainingTime=ue.prototype.getRemainingTime,ue.prototype.getMinSuggestedDuration=ue.prototype.getMinSuggestedDuration,ue.prototype.getDuration=ue.prototype.getDuration;function Xv(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.H=NaN,this.i=i,this.I=!1,this.A=this.m=this.s=null,this.C="",this.G=[],this.h=new Ee,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new G("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){Gx(r,o)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new ue(o,r.l),r.A&&(r.m.i=r.A),r.i(new G("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var o=r.l.currentTime;r.s&&r.s>o&&(r.l.currentTime=r.s,r.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.A=o.getStreamData().adProgressData,r.m&&(r.m.i=r.A)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new G("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new G("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new G("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new G("ad-complete")),r.i(new G("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new G("ad-skipped")),r.i(new G("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=g(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});r.G=o,r.i(new G("ad-cue-points-changed",new Map().set("cuepoints",o)))})}p=Xv.prototype,p.configure=function(){},p.stop=function(){this.C="",this.s=null,this.G=[]},p.release=function(){this.stop(),this.h&&this.h.release()},p.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},p.getCuePoints=function(){return this.G};function Gx(e,t){e.i(new G("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.I||e.h.o(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.s=n,e.l.currentTime=i.start)}})}function J(){ve.call(this),this.g=this.h=this.i=this.j=null,this.m=new Fv,this.s=navigator.language,this.l=null}de(J,ve),p=J.prototype,p.setLocale=function(e){this.s=e},p.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},p.initInterstitial=function(e,t,n){var i=this;this.j&&this.j.release(),this.j=new Wa(e,t,n,function(r){return Xa(i,r)}),this.j.configure(this.l)},p.initClientSide=function(e,t,n){var i=this;if(!O.google||!google.ima||!google.ima.AdsLoader)throw new L(2,10,1e4);this.i&&this.i.release(),this.i=new qa(e,t,this.s,n,function(r){return Xa(i,r)}),this.i.configure(this.l)},p.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),ve.prototype.release.call(this)},p.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new G("ad-stopped")),this.dispatchEvent(new G("ad-content-attach-requested")),this.m=new Fv},p.requestClientSideAds=function(e){if(!this.i)throw new L(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.I=Date.now()/1e3,t.m.requestAds(e)},p.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new L(1,10,10001);var t=this.i;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},p.initMediaTailor=function(e,t,n){var i=this;this.h&&this.h.release(),this.h=new Gs(e,t,n,function(r){return Xa(i,r)})},p.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new L(1,10,10005);var i=this.h;return n=n===void 0?"":n,i.l?e=Promise.reject(new L(1,10,10004)):(i.l=new Le,bx(i,e,t),i.J=n||"",i.S=Date.now()/1e3,e=i.l),e},p.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new L(1,10,10005);var t=this.h;t.I=e,t.i(new G("ads-loaded",new Map().set("loadTime",0)))},p.initServerSide=function(e,t){var n=this;if(!O.google||!google.ima||!google.ima.dai)throw new L(2,10,10002);this.g&&this.g.release(),this.g=new Xv(e,t,this.s,function(i){return Xa(n,i)}),this.g.configure(this.l)},p.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new L(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&ce('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.5",n=this.g,n.j?e=Promise.reject(new L(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.I=!0),n.j=new Le,n.g.requestStream(e),n.C=t||"",n.H=Date.now()/1e3,e=n.j),e},p.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new L(1,10,10003);(e.mpt||e.mpv)&&ce('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.5",this.g.g.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){return He("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},p.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},p.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Px(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},p.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},p.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},p.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},p.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},p.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&_x(this.j,n)};function Xa(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}j("shaka.ads.AdManager",J),J.prototype.onInterstitialMetadata=J.prototype.onInterstitialMetadata,J.prototype.onCueMetadataChange=J.prototype.onCueMetadataChange,J.prototype.onHlsTimedMetadata=J.prototype.onHlsTimedMetadata,J.prototype.onDashTimedMetadata=J.prototype.onDashTimedMetadata,J.prototype.onManifestUpdated=J.prototype.onManifestUpdated,J.prototype.getStats=J.prototype.getStats,J.prototype.getCuePoints=J.prototype.getCuePoints,J.prototype.getServerSideCuePoints=J.prototype.getServerSideCuePoints,J.prototype.replaceServerSideAdTagParameters=J.prototype.replaceServerSideAdTagParameters,J.prototype.requestServerSideStream=J.prototype.requestServerSideStream,J.prototype.initServerSide=J.prototype.initServerSide,J.prototype.addMediaTailorTrackingUrl=J.prototype.addMediaTailorTrackingUrl,J.prototype.requestMediaTailorStream=J.prototype.requestMediaTailorStream,J.prototype.initMediaTailor=J.prototype.initMediaTailor,J.prototype.updateClientSideAdsRenderingSettings=J.prototype.updateClientSideAdsRenderingSettings,J.prototype.requestClientSideAds=J.prototype.requestClientSideAds,J.prototype.onAssetUnload=J.prototype.onAssetUnload,J.prototype.release=J.prototype.release,J.prototype.initClientSide=J.prototype.initClientSide,J.prototype.initInterstitial=J.prototype.initInterstitial,J.prototype.configure=J.prototype.configure,J.prototype.setLocale=J.prototype.setLocale,J.ADS_LOADED="ads-loaded",J.AD_STARTED="ad-started",J.AD_FIRST_QUARTILE="ad-first-quartile",J.AD_MIDPOINT="ad-midpoint",J.AD_THIRD_QUARTILE="ad-third-quartile",J.AD_COMPLETE="ad-complete",J.AD_STOPPED="ad-stopped",J.AD_SKIPPED="ad-skipped",J.AD_VOLUME_CHANGED="ad-volume-changed",J.AD_MUTED="ad-muted",J.AD_PAUSED="ad-paused",J.AD_RESUMED="ad-resumed",J.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",J.CUEPOINTS_CHANGED="ad-cue-points-changed",J.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",J.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",J.AD_CLICKED="ad-clicked",J.AD_PROGRESS="ad-progress",J.AD_BUFFERING="ad-buffering",J.AD_IMPRESSION="ad-impression",J.AD_DURATION_CHANGED="ad-duration-changed",J.AD_CLOSED="ad-closed",J.AD_LOADED="ad-loaded",J.ALL_ADS_COMPLETED="all-ads-completed",J.AD_LINEAR_CHANGED="ad-linear-changed",J.AD_METADATA="ad-metadata",J.AD_RECOVERABLE_ERROR="ad-recoverable-error",J.AD_ERROR="ad-error",J.AD_BREAK_READY="ad-break-ready",J.AD_INTERACTION="ad-interaction",J.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",J.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",J.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Ha=function(){return new J};function Yv(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof G){var i={};for(r in n)(t=n[r])&&typeof t=="object"?r=="detail"&&(i[r]=t):r in Event||(i[r]=t);return i}if(n instanceof Error){var r=new Set(["name","message","stack"]);for(i in n)r.add(i);for(t=g(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())r.add(i.value);for(t={},r=g(r),i=r.next();!i.done;i=r.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(r={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=g(qi(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,r.start.push(i.start),r.end.push(t);n=r}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Ed(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=Vx(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function Vx(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Jv="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Hx="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Sd=["loop","playbackRate"],qx=["pause","play"],Ya={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},Ja={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Ad={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},$v=[["getConfiguration","configure"]],Zv=[["isTextTrackVisible","setTextTrackVisibility"]],Kx="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),zx=["attach","attachCanvas","detach","load","unload"];function wd(e,t,n,i,r,o,s){var u=this;this.I=e,this.L=s,this.l=new te(t),this.M=n,this.u=!1,this.A=i,this.H=r,this.O=o,this.h=this.m=!1,this.K="",this.s=null,this.C=function(){return xd(u)},this.G=function(a,l){switch(a=Ed(l),a.type){case"event":var c=a.targetName,h=w0(a.event);u.A(c,h);break;case"update":c=a.update;for(h in c){a=u.g[h]||{};for(var d in c[h])a[d]=c[h][d]}u.u&&(u.M(),u.u=!1);break;case"asyncComplete":if(h=a.id,d=a.error,a=u.i[h],delete u.i[h],a)if(d){h=new L(d.severity,d.category,d.code);for(c in d)h[c]=d[c];a.reject(h)}else a.resolve()}},this.g={video:{},player:{}},this.J=0,this.i={},this.j=null,Hs.add(this)}p=wd.prototype,p.destroy=function(){return Hs.delete(this),Id(this),Pn&&ey(this),this.l&&(this.l.stop(),this.l=null),this.H=this.A=null,this.h=this.m=!1,this.G=this.C=this.j=this.i=this.g=this.s=null,Promise.resolve()},p.Ra=function(){return this.h},p.yf=function(){return this.K},p.init=function(){if(this.I.length)if(O.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Sa();var e=new chrome.cast.SessionRequest(this.I,[],null,this.L,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=g(Hs),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new Le,i.u=!0,$a(i,r)}},function(t){for(var n=g(Hs),i=n.next();!i.done;i=n.next())i=i.value,Za=t=="available",i.l.Sa()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Za&&this.l.X(Xx),(e=Pn)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Le,this.u=!0,$a(this,e)):Pn=null}else O.__onGCastApiAvailable!==ty&&(Qa=O.__onGCastApiAvailable||null,O.__onGCastApiAvailable=ty)},p.mh=function(e){this.s=e,this.h&&Vs(this,{type:"appData",appData:this.s})},p.cast=function(){var e=this;return M(function(t){if(!e.m)throw new L(1,8,8e3);if(!Za)throw new L(1,8,8001);if(e.h)throw new L(1,8,8002);return e.j=new Le,chrome.cast.requestSession(function(n){return $a(e,n)},function(n){return Qv(e,n)}),T(t,e.j,0)})};function Wx(e){e.h&&chrome.cast.requestSession(function(t){return $a(e,t)},function(t){return Qv(e,t)})}p.ed=function(){if(this.h){if(Id(this),Pn){ey(this);try{Pn.stop(function(){},function(){})}catch(e){}Pn=null}xd(this)}},p.get=function(e,t){var n=this;if(e=="video"){if(qx.includes(t))return function(){return n.ti.apply(n,[e,t].concat(W(An.apply(0,arguments))))}}else if(e=="player"){if(Ad[t]&&!this.get("player","isLive")())return function(){};if(Kx.includes(t))return function(){return n.ti.apply(n,[e,t].concat(W(An.apply(0,arguments))))};if(zx.includes(t))return function(){return n.zk.apply(n,[e,t].concat(W(An.apply(0,arguments))))};if(Ya[t]||Ja[t])return function(){return n.g[e][t]}}return this.g[e][t]},p.set=function(e,t,n){this.g[e][t]=n,Vs(this,{type:"set",targetName:e,property:t,value:n})};function $a(e,t){var n=e.O();Pn=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.G),xd(e),Vs(e,{type:"init",initState:n,appData:e.s}),e.j.resolve()}function Qv(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new L(2,8,n,t))}p.ti=function(e,t){Vs(this,{type:"call",targetName:e,methodName:t,args:An.apply(2,arguments)})},p.zk=function(e,t){var n=An.apply(2,arguments),i=new Le,r=this.J.toString();this.J++,this.i[r]=i;try{Vs(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};function ey(e){var t=Pn;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.G)}function xd(e){var t=Pn?Pn.status=="connected":!1;if(e.h&&!t){e.H();for(var n in e.g)e.g[n]={};Id(e)}e.h=t,e.K=t?Pn.receiver.friendlyName:"",e.l.Sa()}function Id(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new L(1,7,7e3))}}function Vs(e,t){t=Yv(t);var n=Pn;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},EA)}catch(i){throw t=new L(2,8,8005,i),n=new G("error",new Map().set("detail",t)),e.A("player",n),e.ed(),t}}var Xx=.02,Za=!1,Pn=null,Qa=null,Hs=new Set;function ty(e){if(Qa?O.__onGCastApiAvailable=Qa:delete O.__onGCastApiAvailable,Qa=null,e)for(var t=g(Hs),n=t.next();!n.done;n=t.next())n.value.init();typeof O.__onGCastApiAvailable=="function"&&O.__onGCastApiAvailable(e)}function Je(e,t,n,i){i=i===void 0?!1:i,ve.call(this);var r=this;this.i=e,this.h=t,this.m=this.s=this.j=this.u=this.l=null,this.G=n,this.C=i,this.A=new Map,this.g=new wd(n,function(){return ry(r)},function(){return oy(r)},function(o,s){return uy(r,o,s)},function(){return sy(r)},function(){return iy(r)},i),Yx(this)}de(Je,ve),p=Je.prototype,p.destroy=function(e){return e&&this.g.ed(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.l=this.i=null,ve.prototype.release.call(this),Promise.all(e)},p.vc=function(){return this.l},p.hd=function(){return this.u},p.ig=function(){return this.g.m&&Za},p.Ra=function(){return this.g.Ra()},p.yf=function(){return this.g.yf()},p.cast=function(){var e=this;return M(function(t){return t.g==1?T(t,e.g.cast(),2):e.h?T(t,e.h.yc(),0):t.return()})},p.mh=function(e){this.g.mh(e)},p.Ji=function(){Wx(this.g)},p.ed=function(){this.g.ed()},p.Mh=function(e,t){t=t===void 0?!1:t;var n=this;return M(function(i){if(i.g==1)return e==n.G&&t==n.C?i.return():(n.G=e,n.C=t,n.g.ed(),T(i,n.g.destroy(),2));n.g=null,n.g=new wd(e,function(){return ry(n)},function(){return oy(n)},function(r,o){return uy(n,r,o)},function(){return sy(n)},function(){return iy(n)},t),n.g.init(),V(i)})};function Yx(e){e.g.init(),e.m=new Ee;for(var t=g(Jv),n=t.next();!n.done;n=t.next())e.m.o(e.i,n.value,function(o){e.g.Ra()||(o=w0(o),e.j.dispatchEvent(o))});for(var i in Pu)e.m.o(e.h,Pu[i],function(o){e.g.Ra()||e.s.dispatchEvent(o)});e.l={},t={};for(var r in e.i)t.Fd=r,Object.defineProperty(e.l,t.Fd,{configurable:!1,enumerable:!0,get:function(o){return function(){return $x(e,o.Fd)}}(t),set:function(o){return function(s){var u=o.Fd;e.g.Ra()?e.g.set("video",u,s):e.i[u]=s}}(t)}),t={Fd:t.Fd};e.u={},ny(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return Zx(e,o)}})}),Jx(e),e.j=new ve,e.j.Ke=e.l,e.s=new ve,e.s.Ke=e.u}function Jx(e){var t=new Map;ny(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.A.set(n,i):e.A.set(i,n)):t.set(i,n)})}function ny(e,t){function n(a){return a=="constructor"||typeof i[a]!="function"?!1:!r.has(a)}var i=e.h,r=new Set,o;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=g(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function iy(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.fd(),startTime:null};e.i.pause();for(var n=g(Sd),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=g($v),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=g(Zv),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function ry(e){var t=new G("caststatuschanged");e.dispatchEvent(t)}function oy(e){var t=new G(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function sy(e){for(var t=g($v),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var s;(i=e.g.get("player","getTextTracks")())&&i.length&&(s=i.find(function(l){return l.active}));var u=e.g.get("player","isTextTrackVisible")();r&&(e.i.autoplay=!1,t=e.h.load(r,n));var a={};for(n=g(Sd),i=n.next();!i.done;i=n.next())i=i.value,a[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var l=g(Sd),c=l.next();!c.done;c=l.next())c=c.value,e.i[c]=a[c];for(l=g(Zv),c=l.next();!c.done;c=l.next()){var h=c.value;c=h[1],h=e.g.get("player",h[0])(),e.h[c](h)}e.h.Cf(u),s&&e.h.kh(s.language,s.roles,s.forced),e.i.autoplay=o,r&&e.i.play()}},function(l){l=new Map().set("detail",l),l=new G("error",l),e.h.dispatchEvent(l)})}function $x(e,t){if(t=="addEventListener")return function(i,r,o){return e.j.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.j.removeEventListener(i,r,o)};if(e.g.Ra()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ra()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Zx(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,i,r){return e.s.addEventListener(n,i,r)};if(t=="removeEventListener")return function(n,i,r){return e.s.removeEventListener(n,i,r)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Gb()};if(t=="getDrmEngine")return function(){return e.h.C};if(t=="getAdManager")return function(){return e.h.Ve()};if(t=="setVideoContainer")return function(n){return e.h.uh(n)};if(e.g.Ra()){if(t=="getManifest"||t=="drmInfo")return function(){return ce(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return ce(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ra()&&Object.keys(e.g.g.video).length==0&&(Ya[t]||Ja[t])||!e.g.Ra()?e.h[t].bind(e.h):e.g.get("player",t)}function uy(e,t,n){e.g.Ra()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.s.dispatchEvent(n))}j("shaka.cast.CastProxy",Je),Je.prototype.changeReceiverId=Je.prototype.Mh,Je.prototype.forceDisconnect=Je.prototype.ed,Je.prototype.suggestDisconnect=Je.prototype.Ji,Je.prototype.setAppData=Je.prototype.mh,Je.prototype.cast=Je.prototype.cast,Je.prototype.receiverName=Je.prototype.yf,Je.prototype.isCasting=Je.prototype.Ra,Je.prototype.canCast=Je.prototype.ig,Je.prototype.getPlayer=Je.prototype.hd,Je.prototype.getVideo=Je.prototype.vc,Je.prototype.destroy=Je.prototype.destroy;function vt(e,t,n,i){ve.call(this);var r=this;this.g=e,this.h=t,this.j=new Ee,this.J={video:e,player:t},this.H=n||function(){},this.K=i||function(o){return o},this.i=null,this.I=!1,this.s=!0,this.m=0,this.C=!1,this.A=!0,this.u=this.l=null,this.G=new te(function(){Cd(r)}),Qx(this)}de(vt,ve),p=vt.prototype,p.isConnected=function(){return this.I},p.Wj=function(){return this.s},p.Mk=function(e){this.i=e},p.cj=function(){this.i=null},p.Nk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},p.Lk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},p.Kk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,t,n;return M(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.J=null,e.H=null,e.I=!1,e.s=!0,e.l=null,e.u=null,ve.prototype.release.call(e),T(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),V(i)})};function Qx(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return ay(e)},t.onSenderDisconnected=function(){return ay(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&Ii(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),Ii(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return n4(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return t4(e,r)},t.start(),t=g(Jv);for(var n=t.next();!n.done;n=t.next())e.j.o(e.g,n.value,function(r){return ly(e,"video",r)});for(var i in Pu)e.j.o(e.h,Pu[i],function(r){return ly(e,"player",r)});e.j.o(e.g,"loadeddata",function(){e.C=!0}),e.j.o(e.h,"loading",function(){e.s=!1,To(e)}),e.j.o(e.g,"playing",function(){e.s=!1,To(e)}),e.j.o(e.g,"pause",function(){To(e)}),e.j.o(e.h,"unloading",function(){e.s=!0,To(e)}),e.j.o(e.g,"ended",function(){new te(function(){e.g&&e.g.ended&&(e.s=!0,To(e))}).X(r4)})}function ay(e){e.m=0,e.A=!0,e.I=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,To(e)}function To(e){var t;M(function(n){if(n.g==1)return T(n,Promise.resolve(),2);if(!e.h)return n.return();t=new G("caststatuschanged"),e.dispatchEvent(t),cy(e)||Ci(e),V(n)})}function e4(e,t,n){var i,r,o,s,u,a,l,c,h,d;M(function(f){switch(f.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.H(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,Z(f,5),T(f,e.h.load(t.manifest,t.startTime),7)):T(f,Promise.resolve(),3);case 7:le(f,3);break;case 5:return s=Q(f),u=new Map().set("detail",s),a=new G("error",u),e.h&&e.h.dispatchEvent(a),f.return();case 3:if(!e.h)return f.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(h in t.playerAfterLoad)d=t.playerAfterLoad[h],e.h[h](d);e.g.autoplay=o,t.manifest&&(e.g.play(),Ci(e)),V(f)}})}function ly(e,t,n){e.h&&(Cd(e),Ii(e,{type:"event",targetName:t,event:n},e.l))}function Cd(e){e.G.X(i4);for(var t={video:{},player:{}},n=g(Hx),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.U())for(var r in Ad)e.m%Ad[r]==0&&(t.player[r]=e.h[r]());for(var o in Ya)e.m%Ya[o]==0&&(t.player[o]=e.h[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Ii(e,{type:"update",update:t},e.l);for(var s in Ja)e.m%Ja[s]==0&&(t={player:{}},t.player[s]=e.h[s](),Ii(e,{type:"update",update:t},e.l));e.C&&(e.m+=1),cy(e)}function cy(e){return e.A&&(e.g.duration||e.h.U())?(Md(e),e.A=!1,!0):!1}function Md(e,t){var n={contentId:e.h.fd(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Ci(e,t===void 0?0:t,n)}function t4(e,t){var n=Ed(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.A=!0,e4(e,n.initState,n.appData),Cd(e);break;case"appData":e.H(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.J[i][r]=n;break;case"call":i=e.J[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.C=!1);var o=n.id,s=t.senderId;t=e.J[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return hy(e,s,o,null)},function(u){return hy(e,s,o,u)})}}function n4(e,t){var n=Ed(t.data);switch(n.type){case"PLAY":e.g.play(),Ci(e);break;case"PAUSE":e.g.pause(),Ci(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.g.play(),Ci(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),Ci(e));break;case"STOP":e.h.yc().then(function(){e.h&&Ci(e)});break;case"GET_STATUS":Md(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.g.volume,o=e.g.muted;t!=null&&(e.g.volume=Number(t)),i!=null&&(e.g.muted=i),r==e.g.volume&&o==e.g.muted||Ci(e);break;case"LOAD":e.m=0,e.C=!1,e.A=!1,t=n.media,i=n.currentTime,r=e.K(t.contentId),o=n.autoplay||!0,e.H(t.customData),o&&(e.g.autoplay=!0),e.h.load(r,i).then(function(){e.h&&Md(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),Ii(e,{requestId:Number(n.requestId),type:u},e.u)});break;default:Ii(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function hy(e,t,n,i){e.h&&Ii(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Ii(e,t,n,i){e.I&&(e=Yv(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ci(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?o4:e.h.ce()?u4:e.g.paused?a4:s4,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Ii(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}j("shaka.cast.CastReceiver",vt),vt.prototype.destroy=vt.prototype.destroy,vt.prototype.setContentArtist=vt.prototype.Kk,vt.prototype.setContentImage=vt.prototype.Lk,vt.prototype.setContentTitle=vt.prototype.Nk,vt.prototype.clearContentMetadata=vt.prototype.cj,vt.prototype.setContentMetadata=vt.prototype.Mk,vt.prototype.isIdle=vt.prototype.Wj,vt.prototype.isConnected=vt.prototype.isConnected;var i4=.5,r4=5,o4="IDLE",s4="PLAYING",u4="BUFFERING",a4="PAUSED";function dy(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(E){return E!=null&&E.g.trim()!=""})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(E){return E!=null&&E.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",c="black",h=kd(i,r,u,a,l,c);o<=s;o++){for(var d=n[o],f=-1,m=-1,y=0;y<d.length;y++)if(d[y]!=null&&d[y].g.trim()!==""){f=y;break}for(y=d.length-1;0<=y;y--)if(d[y]!=null&&d[y].g.trim()!==""){m=y;break}if(f===-1||m===-1)d=py(i,r),e.nestedCues.push(d);else{for(;f<=m;f++)if(y=d[f]){var v=y.l,A=y.i,S=y.j,x=y.h;(v!=u||A!=a||S!=l||x!=c)&&(h.payload&&e.nestedCues.push(h),h=kd(i,r,v,A,S,x),u=v,a=A,l=S,c=x),h.payload+=y.g}else h.payload+=" ";h.payload&&e.nestedCues.push(h),o!==s&&(h=py(i,r),e.nestedCues.push(h)),h=kd(i,r,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function kd(e,t,n,i,r,o){return e=new je(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=o,e}function py(e,t){return e=new je(e,t,""),e.lineBreak=!0,e}function fy(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function Ld(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.u=t,this.j=this.m=!1,this.l="white",this.s="black",qs(this)}function el(e,t,n){var i="CC"+((e.A<<1|e.u)+1),r=new je(t,n,"");r.lineInterpretation=1;var o=Ey.get(e.g);return o&&(r.line=o),(t=dy(r,i,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(o=Ey.get(e.g+3-t.cue.nestedCues.length))&&(r.line=o),t}function qs(e){Mi(e,0,15),e.g=1}function Eo(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Ks:i=Ty.has(n)?Ty.get(n):String.fromCharCode(n);break;case my:i=l4.get(n);break;case vy:e.i[e.g].pop(),i=c4.get(n);break;case yy:e.i[e.g].pop(),i=h4.get(n)}i&&e.i[e.g].push(new fy(i,e.m,e.j,e.s,e.l))}}function gy(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function Mi(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Ks=0,my=1,vy=2,yy=3,Ty=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),l4=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),c4=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),h4=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),Ey=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function tl(e,t){this.h=wy,this.s=new Ld(e,t),this.i=new Ld(e,t),this.g=this.j=new Ld(e,t),this.l=0,this.m=null}function Rd(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==nl&&e.h!==zs&&(r=el(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Mi(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Mi(n,0,15),i.g=15),e.h=nl,i.h=t,r}function Sy(e){e.h=d4,e.g=e.j,e.g.h=0}function Ay(e){tr("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=zs}var wy=0,d4=1,nl=3,zs=4,p4="black green blue cyan red yellow magenta black".split(" "),xy="white green blue cyan red yellow magenta white_italics".split(" ");function Iy(e,t){this.K=t,this.O=e,this.L=this.l=!1,this.m=this.s=this.I=this.M=this.J=0,this.H=m4,this.i=[],this.g=this.h=this.j=0,this.G=this.A=!1,this.C="white",this.u="black",Pd(this)}function Pd(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Dd())}function Dd(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Ar(e,t){Cy(e)&&(e.i[e.h][e.g]=new fy(t,e.G,e.A,e.u,e.C),e.g++)}function Cy(e){var t=e.g<e.m&&0<=e.g;return e.h<e.s&&0<=e.h&&t}Iy.prototype.isVisible=function(){return this.l};function wr(e,t,n){var i=new je(e.j,t,"");i.textAlign=e.H===f4?"left":e.H===g4?"right":hi;var r=i.region;switch(e.K&&(r.id+="svc"+e.K),r.id+="win"+e.O,r.height=e.s,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.J,r.viewportAnchorY=e.M,r.viewportAnchorUnits=e.L?cn:2,e.I){case v4:r.regionAnchorX=0,r.regionAnchorY=0;break;case y4:r.regionAnchorX=50,r.regionAnchorY=0;break;case T4:r.regionAnchorX=100,r.regionAnchorY=0;break;case E4:r.regionAnchorX=0,r.regionAnchorY=50;break;case S4:r.regionAnchorX=50,r.regionAnchorY=50;break;case A4:r.regionAnchorX=100,r.regionAnchorY=50;break;case w4:r.regionAnchorX=0,r.regionAnchorY=100;break;case x4:r.regionAnchorX=50,r.regionAnchorY=100;break;case I4:r.regionAnchorX=100,r.regionAnchorY=100}return(n=dy(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var f4=0,g4=1,m4=2,v4=0,y4=1,T4=2,E4=3,S4=4,A4=5,w4=6,x4=7,I4=8;function C4(){this.i=[],this.h=null,this.g=0}function M4(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new il(e.h)),e.h=null,e.g=0))}function il(e){this.g=0,this.h=e}il.prototype.Ea=function(){return this.g<this.h.length},il.prototype.La=function(){return this.g};function ct(e){if(!e.Ea())throw new L(2,2,3e3);return e.h[e.g++]}il.prototype.skip=function(e){if(this.g+e>this.h.length)throw new L(2,2,3e3);this.g+=e};function k4(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function L4(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=ct(t).value,t=null,n=g(Ws(e,n));for(var r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=wr(r,i,e.i)),Pd(r);return t}if(n===137)for(t=ct(t).value,t=g(Ws(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(n===138){for(n=ct(t).value,t=null,n=g(Ws(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=wr(r,i,e.i)),r.l=!1;return t}if(n===139){for(n=ct(t).value,t=null,n=g(Ws(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=wr(r,i,e.i):r.j=i,r.l=!r.l;return t}if(n===140)return t=ct(t).value,My(e,t,i);if(n===143)return i=My(e,255,i),ky(e),i;if(n===144)t.skip(1),i=ct(t).value,e.g&&(e.g.A=0<(i&128),e.g.G=0<(i&64));else if(n===145)i=ct(t).value,n=ct(t).value,t.skip(1),e.g&&(t=Ly((n&48)>>4,(n&12)>>2,n&3),e.g.C=Ly((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=ct(t).value,t=ct(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=ct(t).value,t.skip(1),e.g&&(e.g.H=i&3);else if(152<=n&&159>=n){if(n=(n&15)-8,r=e.h[n]!==null,!r){var o=new Iy(n,e.i);o.j=i,e.h[n]=o}i=ct(t).value,o=ct(t).value;var s=ct(t).value,u=ct(t).value,a=ct(t).value;t=ct(t).value,r&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.G=!1,t.A=!1,t.C="white",t.u="black"),t=e.h[n],t.l=0<(i&32),t.M=o&127,t.J=s,t.I=(u&240)>>4,t.L=0<(o&128),t.s=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return null}function Ws(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function My(e,t,n){var i=null;t=g(Ws(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=e.h[r];o.isVisible()&&(i=wr(o,n,e.i)),e.h[r]=null}return i}function ky(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Ly(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],R4[e<<2|t<<1|n]}var Ry=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),R4="black blue green cyan red magenta yellow white".split(" ");function So(){this.h=[],this.g=[],this.i=new C4,this.l=0,this.m=new Map([["CC1",new tl(0,0)],["CC2",new tl(0,1)],["CC3",new tl(1,0)],["CC4",new tl(1,1)]]),this.u=this.s=0,this.j=new Map,this.C=!0,this.A=new Set,Nd(this)}So.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Nd(this),e=g(this.j.values());for(var t=e.next();!t.done;t=e.next())ky(t.value)};function Nd(e){e.s=0,e.u=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=wy,n.g=n.j,n.m=null,qs(n.i),qs(n.j),qs(n.s);e.C=!0}So.prototype.extract=function(e,t){if(this.C){for(var n=g(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.C=!1}if(e=new De(e,0),!(8>e.getLength())&&e.$()===181&&e.za()===49&&e.V()===1195456820&&e.$()===3&&(n=e.$(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.$(),o=(r&4)>>2,s=e.$(),u=e.$();o&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,xb:s,bc:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},So.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),i=n.next();!i.done;i=n.next())(i=P4(this,i.value))&&t.push(i);for(n=g(this.g),i=n.next();!i.done;i=n.next())M4(this.i,i.value);for(n=g(this.i.i),i=n.next();!i.done;i=n.next())i=D4(this,i.value),t.push.apply(t,W(i));return this.i.i=[],this.h=[],this.g=[],t};function P4(e,t){var n=t.type;if((t.xb&112)===16){var i=t.xb>>3&1;n===0?e.s=i:e.u=i}if(i="CC"+((n<<1|(n?e.u:e.s))+1),n=e.m.get(i),t.xb===255&&t.bc===255||!t.xb&&!t.bc||!Py(t.xb)||!Py(t.bc))return 45<=++e.l&&Nd(e),null;e.l=0,t.xb&=127,t.bc&=127;var r=t.xb;if(1<=r&&15>=r||!t.xb&&!t.bc)return null;if(r=null,(t.xb&112)===16)e:{if(e.A.add(i),i=t.xb,e=t.bc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1];var o=(e&30)>>1;i="white",r=!1,7>o?i=xy[o]:o===7&&(r=!0),e=(e&1)===1,n.h!==zs&&(o=n.g,n.h===nl&&t!==o.g&&(n=1+t-o.h,gy(o,n,1+o.g-o.h,o.h),Mi(o,0,n-1),Mi(o,t+1,15-t)),o.g=t,o.m=e,o.j=r,o.l=i,o.s="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Eo(n.g,Ks,32),i=!1,t=xy[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",!(i&7)&&(t=p4[(e&14)>>1]),n.g.s=t;else if((i&247)===17&&(e&240)===48)Eo(n.g,my,e);else if((i&246)===18&&(e&224)===32)Eo(n.g,i&1?yy:vy,e);else if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.bc){case 32:Sy(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=Rd(n,2,e);break;case 38:i=Rd(n,3,e);break;case 39:i=Rd(n,4,e);break;case 40:Eo(n.g,Ks,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:qs(n.s),Ay(n);break;case 43:Ay(n);break;case 44:t=n.i,i=null,n.h!==zs&&(i=el(t,n.l,e)),Mi(t,0,15);break;case 45:t=n.g,n.h!==nl?i=null:(i=el(t,n.l,e),r=t.g-t.h+1,gy(t,r-1,r,t.h),Mi(t,0,r-1),Mi(t,t.g,15-t.g),n.l=e);break;case 46:Mi(n.j,0,15);break;case 47:t=null,n.h!==zs&&(t=el(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Sy(n),n.l=e,i=t}r=i;break e}r=null}else e=t.bc,Eo(n.g,Ks,t.xb),Eo(n.g,Ks,e);return r}function D4(e,t){var n=[];try{for(;t.Ea();){var i=ct(t).value,r=(i&224)>>5,o=i&31;if(r===7&&o!=0&&(r=ct(t).value&63),r!=0){e.A.add("svc"+r),e.j.has(r)||e.j.set(r,new k4(r));for(var s=e.j.get(r),u=t.La();t.La()-u<o;){r=t;var a=ct(r),l=a.value,c=a.pts;if(l===16){var h=ct(r);l=l<<16|h.value}if(0<=l&&31>=l){var d=c;if(s.g){var f=s.g;switch(r=null,l){case 8:!Cy(f)||0>=f.g&&0>=f.h||(0>=f.g?(f.g=f.m-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:if(f.isVisible()&&(r=wr(f,d,s.i)),f.h+1>=f.s){d=f;for(var m=0,y=1;16>y;y++,m++)d.i[m]=d.i[y];for(y=0;1>y;y++,m++)d.i[m]=Dd()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(r=wr(f,d,s.i)),f.i[f.h]=Dd(),f.g=0;break;case 12:f.isVisible()&&(r=wr(f,d,s.i)),Pd(f),d=f,d.h=0,d.g=0}var v=r}else v=null}else if(128<=l&&159>=l)v=L4(s,r,l,c);else{if(4096<=l&&4127>=l)d=l&255,8<=d&&15>=d?r.skip(1):16<=d&&23>=d?r.skip(2):24<=d&&31>=d&&r.skip(3);else if(4224<=l&&4255>=l)d=l&255,128<=d&&135>=d?r.skip(4):136<=d&&143>=d&&r.skip(5);else if(32<=l&&127>=l)r=l,s.g&&(r===127?Ar(s.g,"♪"):Ar(s.g,String.fromCharCode(r)));else if(160<=l&&255>=l)s.g&&Ar(s.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(r=l&255,s.g)if(Ry.has(r)){var A=Ry.get(r);Ar(s.g,A)}else Ar(s.g,"_")}else 4256<=l&&4351>=l&&s.g&&((l&255)!=160?Ar(s.g,"_"):Ar(s.g,"[CC]"));v=null}(r=v)&&n.push(r)}}}}catch(S){if(S instanceof L&&S.code===3e3)tr("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw S}return n}function Py(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}So.prototype.getStreams=function(){return Array.from(this.A)},j("shaka.cea.CeaDecoder",So),Vr=function(){return new So};function Dy(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(W(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function rl(){this.j=new Map,this.i=this.h=0,this.g=_d}rl.prototype.init=function(e){function t(o){o=o.name,o in ol&&(n.g=ol[o])}var n=this,i=[],r=[];if(new Re().box("moov",fe).box("mvex",fe).Y("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.V(),s=s.V(),n.h=o,n.i=s}).box("trak",fe).Y("tkhd",function(o){var s=o.reader;o=o.version,o==1?(s.skip(8),s.skip(8)):(s.skip(4),s.skip(4));var u=s.V();o==1?s.skip(8):s.skip(4),s.skip(4),s.skip(8),s.skip(2),s.skip(2),s.skip(2),s.skip(2),s.skip(36),s.za(),s.za(),s.za(),s.za(),i.push(u)}).box("mdia",fe).Y("mdhd",function(o){o=pa(o.reader,o.version),r.push(o.timescale)}).box("minf",fe).box("stbl",fe).Y("stsd",Gi).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("encv",hn).box("sinf",fe).box("frma",function(o){o=hm(o.reader).gb,o in ol&&(n.g=ol[o])}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new L(2,2,2010);this.g==_d&&ce("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},rl.prototype.parse=function(e){var t=this;if(this.g==_d)return[];var n=[],i=0,r=[];return new Re().box("moof",function(o){i=o.start,r=[],fe(o)}).box("traf",function(o){r.push({baseMediaDecodeTime:null,Vd:t.h,Ue:t.i,pi:[],timescale:9e4}),fe(o)}).Y("trun",function(o){var s=r[r.length-1];o=lm(o.reader,o.version,o.flags),s.pi.push(o)}).Y("tfhd",function(o){var s=r[r.length-1];o=am(o.reader,o.flags),s.Vd=o.Vd||t.h,s.Ue=o.Ue||t.i,o=o.trackId,t.j.has(o)&&(s.timescale=t.j.get(o))}).Y("tfdt",function(o){var s=r[r.length-1];o=da(o.reader,o.version),s.baseMediaDecodeTime=o.baseMediaDecodeTime}).box("mdat",function(o){for(var s=i-o.start-8,u=o.reader.La(),a=g(r),l=a.next();!l.done;l=a.next()){if(l=l.value,l.baseMediaDecodeTime===null)throw ce("Unable to find base media decode time for CEA captions!"),new L(2,2,2010);o.reader.seek(u),N4(t,o.reader,l.baseMediaDecodeTime,l.timescale,l.Vd,l.Ue,s,l.pi,n)}}).parse(e,!1),n};function N4(e,t,n,i,r,o,s,u,a){var l=0,c=o,h=u.map(function(m){return m.wi});for(h=[].concat.apply([],W(h)),h.length&&(c=h[0].sampleSize||o),t.skip(s+u[0].ej);t.Ea();){s=t.V();var d=t.$(),f=null;switch(f=!1,u=1,e.g){case Xs:f=d&31,f=f==6;break;case Ys:u=2,t.skip(1),f=d>>1&63,f=f==39||f==40;break;case Ud:u=2,t.skip(1),f=d>>1&63,f=f==23||f==24;break;default:return}if(f)for(d=0,l<h.length&&(d=h[l].zf||0),d=(n+d)/i,u=g(Dy(t.Rb(s-u))),f=u.next();!f.done;f=u.next())a.push({packet:f.value,pts:d});else try{t.skip(s-u)}catch(m){break}c-=s+4,c==0&&(n=l<h.length?n+(h[l].hh||r):n+r,l++,l<h.length?c=h[l].sampleSize||o:c=o)}}j("shaka.cea.Mp4CeaParser",rl);var _d=0,Xs=1,Ys=2,Ud=3,ol={avc1:Xs,avc3:Xs,hev1:Ys,hvc1:Ys,dvav:Xs,dva1:Xs,dvh1:Ys,dvhe:Ys,vvc1:Ud,vvi1:Ud};Gr["video/mp4"]=function(){return new rl};function sl(){this.g=null}sl.prototype.init=function(){},sl.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Oe;var t=[];if(e=he(e),!Is(e))return t;e=this.g.parse(e);var n=e.Wd(),i=e.bf();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=g(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=g(Dy(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},j("shaka.cea.TsCeaParser",sl),Gr["video/mp2t"]=function(){return new sl};function Ny(e,t,n){var i=j4(e),r=null;e=[];var o=[],s=null,u=new Set(i.map(function(l){return l.keyId}));u.delete(null);var a="cenc";if(1<u.size)throw new L(2,4,4010);if(!t){if(o=i.filter(function(l){return l.vd=="urn:mpeg:dash:sea:2012"}),1<o.length)throw new L(2,4,4050);o.length&&(s=B4(o[0])),(o=i.find(function(l){return l.vd=="urn:mpeg:dash:mp4protection:2011"}))&&o.encryptionScheme&&(a=o.encryptionScheme),o=i.filter(function(l){return l.vd=="urn:mpeg:dash:mp4protection:2011"?(r=l.init||r,!1):l.vd!="urn:mpeg:dash:sea:2012"}),o.length&&(e=b4(r,a,o,n,u),e.length==0&&(e=[sr("",a,r)]))}if(i.length&&!s&&(t||!o.length))for(e=[],t=g(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(sr(n,a,r));if(u=Array.from(u)[0]||null)for(a=g(e),t=a.next();!t.done;t=a.next())for(t=g(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=u;return{Qh:u,em:r,drmInfos:e,fg:s,Uh:!0}}function _4(e,t,n,i){var r=Ny(e,n,i);if(t.Uh)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=r.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=r.drmInfos),t.Uh=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return r.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),t.drmInfos.length==0))throw new L(2,4,4008);return r.Qh||t.Qh}function U4(e){var t=0,n=Ut(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,r&1||r+e>n.byteLength){n=[];break e}var o=he(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function O4(e){e=g(kn(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=g(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return nt(n)}return""}function ul(e){var t=mi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nt(t))?t:(e=mi(e.node,"urn:microsoft:playready","pro"),!e||!nt(e)||(e=nt(e),e=ln(e),e=U4(e).filter(function(n){return n.type===G4})[0],!e)?"":(e=ai(e.value,!0),(e=Zr(e,"WRMHEADER"))?O4(e):""))}function b4(e,t,n,i,r){var o=[];n=g(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=i[s.vd];if(u){var a;if((a=mi(s.node,"urn:microsoft:playready","pro"))&&nt(a)){a=nt(a),a=ln(a);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=[{initData:oa(a,l,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else a=null;if(l=null,s.vd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(l=r,l.size==0)l=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),h=new Uint8Array([]);l=[{initData:oa(h,c,l,1),initDataType:"cenc",keyId:s.keyId}]}a=sr(u,t,s.init||e||a||l),(u=V4.get(u))&&(a.licenseServerUri=u(s)),o.push(a)}}return o}function j4(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=F4(n.value))&&t.push(n);return t}function F4(e){var t=e.attributes.schemeIdUri,n=vi(e,"urn:mpeg:cenc:2013","default_KID"),i=Og(e,"urn:mpeg:cenc:2013","pssh").map(Mn),r=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new L(2,4,4009);var o=[];try{o=i.map(function(s){return{initDataType:"cenc",initData:ln(s),keyId:null}})}catch(s){throw new L(2,4,4007)}return{node:e,vd:t,keyId:n,init:0<o.length?o:null,encryptionScheme:r}}function B4(e){if(!O.crypto||!O.crypto.subtle)throw ce("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new L(2,4,4042);var t=mi(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new L(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new L(2,4,4051);if(t=mi(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new L(2,4,4051);if(e=t.attributes.IV,t=Pt(t.attributes.keyUriTemplate),!e||!t)throw new L(2,4,4051);if(e=or(e.substr(2)),e.byteLength!=16)throw new L(2,4,4048);return{dk:t,iv:e}}var G4=1,V4=new Map().set("com.widevine.alpha",function(e){var t=mi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nt(t))?t:(e=mi(e.node,"urn:microsoft","laurl"))&&Pt(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",ul).set("com.microsoft.playready.recommendation",ul).set("com.microsoft.playready.software",ul).set("com.microsoft.playready.hardware",ul).set("org.w3.clearkey",function(e){var t=mi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nt(t))?t:(e=mi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=nt(e))?e:""});function al(e,t,n,i,r,o){var s={RepresentationID:t,Number:n,SubNumber:i,Bandwidth:r,Time:o};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,l,c){if(u=="$$")return"$";var h=s[a];if(h==null)return u;switch(a=="RepresentationID"&&l&&(l=void 0),a=="Time"&&typeof h!="bigint"&&(.2<=Math.abs(h-Math.round(h))&&ce("Calculated $Time$ values must be close to integers"),h=Math.round(h)),c){case void 0:case"d":case"i":case"u":u=h.toString();break;case"o":u=h.toString(8);break;case"x":u=h.toString(16);break;case"X":u=h.toString(16).toUpperCase();break;default:u=h.toString()}return l=O.parseInt(l,10)||1,Array(Math.max(0,l-u.length)+1).join("0")+u})}function _y(e,t){var n=Gn(e,t,"timescale"),i=1;n&&(i=yi(n)||1),n=Gn(e,t,"duration"),(n=yi(n||""))&&(n/=i);var r=Gn(e,t,"startNumber"),o=Number(Gn(e,t,"presentationTimeOffset"))||0,s=It(r||"");if((r==null||s==null)&&(s=1),r=null,t=Ao(e,t,"SegmentTimeline")){t=Ue(t,"S"),r=i,e=e.ya.duration||1/0;for(var u=s,a=[],l=-o,c=0;c<t.length;++c){var h=t[c],d=t[c+1],f=Te(h,"t",It),m=Te(h,"d",It),y=Te(h,"r",aa);if(h=Te(h,"k",aa)||0,f!=null&&(f-=o),m){if(f=f!=null?f:l,y=y||0,0>y)if(d){if(d=Te(d,"t",It),d==null)break;if(f>=d)break;y=Math.ceil((d-f)/m)-1}else{if(e==1/0)break;if(f/r>=e)break;y=Math.ceil((e*r-f)/m)-1}for(0<a.length&&f!=l&&(a[a.length-1].end=f/r),d=0;d<=y;++d)l=f+m,a.push({start:f/r,end:l/r,Ch:f,Yb:h,Ik:a.length+u}),f=l}}r=a}return{timescale:i,eb:n,we:s,kc:o/i||0,Bh:o,timeline:r}}function Uy(e,t){return[t(e.N),t(e.Ba),t(e.Na)].filter(pr)}function Gn(e,t,n){t=Uy(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Ao(e,t,n){t=Uy(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=Ln(i.value,n));i=t.next());return e}function H4(e,t,n,i,r,o){for(var s=vi(e,"http://www.w3.org/1999/xlink","href"),u=vi(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=g(Object.keys(e.attributes)),l=a.next();!l.done;l=a.next()){l=l.value;var c=l.split(":"),h=fh("http://www.w3.org/1999/xlink");c[0]==h&&delete e.attributes[l]}if(5<=o)return fr(new L(2,4,4028));if(u!="onLoad")return fr(new L(2,4,4027));var d=gt([i],[s]);return r.request(0,ut(d,t)).Ta(function(f){if(f=ph(f.data,e.tagName),!f)return fr(new L(2,4,4001,s));for(e.children=[];f.children.length;){var m=f.children.shift();m.tagName&&(m.parent=e),e.children.push(m)}m=g(Object.keys(f.attributes));for(var y=m.next();!y.done;y=m.next())y=y.value,e.attributes[y]=f.attributes[y];return ll(e,t,n,d[0],r,o+1)})}function ll(e,t,n,i,r,o){if(o=o===void 0?0:o,vi(e,"http://www.w3.org/1999/xlink","href")){var s=H4(e,t,n,i,r,o);return n&&(s=s.Ta(void 0,function(){return ll(e,t,n,i,r,o)})),s}s=[];for(var u={},a=g(Ug(e)),l=a.next();!l.done;u={Yc:u.Yc},l=a.next())u.Yc=l.value,vi(u.Yc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(c){return function(h){return h!==c.Yc}}(u)):u.Yc.tagName!="SegmentTimeline"&&s.push(ll(u.Yc,t,n,i,r,o));return Ig(s).Ta(function(){return e})}function q4(e,t,n,i,r,o,s){var u,a=new Re().Y("sidx",function(l){u=K4(t,i,r,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new L(2,3,3004)}function K4(e,t,n,i,r,o,s){var u=[];s.reader.skip(4);var a=s.reader.V();if(a==0)throw new L(2,3,3005);if(s.version==0)var l=s.reader.V(),c=s.reader.V();else l=s.reader.td(),c=s.reader.td();s.reader.skip(2);var h=s.reader.za();for(e=e+s.size+c,c=0;c<h;c++){var d=s.reader.V(),f=(d&2147483648)>>>31;d&=2147483647;var m=s.reader.V();if(s.reader.skip(4),f==1)throw new L(2,3,3006);u.push(new ne(l/a+n,(l+m)/a+n,function(){return o},e,e+d-1,t,n,i,r)),l+=m,e+=d}return s.parser.stop(),u}function Wi(e){this.h=Ut(e),this.g=new De(this.h,0)}Wi.prototype.Ea=function(){return this.g.Ea()};function ki(e){var t=Oy(e);if(7<t.length)throw new L(2,3,3002);var n=0;t=g(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Oy(e);e:{i=g(z4);for(var r=i.next();!r.done;r=i.next())if(Oi(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.La();else{if(t.length==8&&t[1]&224)throw new L(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=r==0?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.La()+t<=e.h.byteLength?t:e.h.byteLength-e.g.La(),i=Ut(e.h,e.g.La(),t),e.g.skip(t),new W4(n,i)}function Oy(e){var t=e.g.La(),n=e.g.$();if(n==0)throw new L(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),he(e.h,t,n)}var z4=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function W4(e,t){this.id=e,this.g=t}function Od(e){if(8<e.g.byteLength)throw new L(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new L(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function X4(e,t,n,i,r,o,s,u,a){function l(){return r}var c=[];e=new Wi(e.g);for(var h=null,d=null;e.Ea();){var f=ki(e);if(f.id==187){var m=Y4(f);m&&(f=n*m.Wk,m=t+m.xk,h!=null&&c.push(new ne(h+s,f+s,l,d,m-1,o,s,u,a)),h=f,d=m)}}return h!=null&&c.push(new ne(h+s,i+s,l,d,null,o,s,u,a)),c}function Y4(e){var t=new Wi(e.g);if(e=ki(t),e.id!=179)throw new L(2,3,3013);if(e=Od(e),t=ki(t),t.id!=183)throw new L(2,3,3012);t=new Wi(t.g);for(var n=0;t.Ea();){var i=ki(t);if(i.id==241){n=Od(i);break}}return{Wk:e,xk:n}}function by(e,t,n){if(t=Ao(e,t,"Initialization"),!t)return null;var i=e.N.Ya(),r=t.attributes.sourceURL;r&&(i=gt(i,[Pt(r)])),r=0;var o=null;return(t=Te(t,"range",ua))&&(r=t.start,o=t.end),n=new bt(function(){return i},r,o,Gy(e),null,null,n),n.codecs=e.N.codecs,n.mimeType=e.N.mimeType,n}function J4(e,t,n){var i=Number(Gn(e,wo,"presentationTimeOffset"))||0,r=Gn(e,wo,"timescale"),o=1;r&&(o=yi(r)||1);var s=i/o||0,u=by(e,wo,n);$4(e,u);var a=oh(e);return{Gc:function(){var l=Ao(a,wo,"RepresentationIndex"),c=a.N.Ya();return l&&(l=Pt(l.attributes.sourceURL))&&(c=gt(c,[l])),l=Fy(a),jy(a,t,u,c,l.start,l.end,s)}}}function jy(e,t,n,i,r,o,s){var u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R;return M(function(D){if(D.g==1)return u=e.presentationTimeline,a=!e.Vb||!e.ya.ge,l=e.ya.start,c=e.ya.duration,h=e.N.mimeType.split("/")[1],d=t,f=null,m=[d(i,r,o,!1),h=="webm"?d(n.R(),n.$a,n.Ja,!0):null],d=null,T(D,Promise.all(m),2);if(y=D.h,v=y[0],A=y[1]||null,S=null,x=l-s,E=l,w=c?l+c:1/0,h=="mp4")var P=q4(v,r,i,n,x,E,w);else{if(P=new Wi(A),ki(P).id!=440786851)throw new L(2,3,3008);var C=ki(P);if(C.id!=408125543)throw new L(2,3,3009);P=C.g.byteOffset,C=new Wi(C.g);for(var N=null;C.Ea();){var _=ki(C);if(_.id==357149030){N=_;break}}if(!N)throw new L(2,3,3010);for(N=new Wi(N.g),_=1e6,C=null;N.Ea();){var U=ki(N);if(U.id==2807729)_=Od(U);else if(U.id==17545)if(U.g.byteLength==4)C=U.g.getFloat32(0);else if(U.g.byteLength==8)C=U.g.getFloat64(0);else throw new L(2,3,3003)}if(C==null)throw new L(2,3,3011);if(N=_/1e9,C*=N,_=ki(new Wi(v)),_.id!=475249515)throw new L(2,3,3007);P=X4(_,P,N,C,i,n,x,E,w)}for(S=P,I=g(S),k=I.next();!k.done;k=I.next())R=k.value,R.codecs=e.N.codecs,R.mimeType=e.N.mimeType;return u.le(S),f=new Se(S),a&&f.dd(E,w,!0),D.return(f)})}function wo(e){return e.wd}function Fy(e){var t=Ao(e,wo,"RepresentationIndex");return e=Gn(e,wo,"indexRange"),e=ua(e||""),t&&(e=Te(t,"range",ua,e)),e}function $4(e,t){if(By(e,t),!Fy(e))throw new L(2,4,4002)}function By(e,t){var n=e.N.mimeType.split("/")[1];if(e.N.contentType!=ye&&n!="mp4"&&n!="webm")throw new L(2,4,4006);if(n=="webm"&&!t)throw new L(2,4,4005)}function Gy(e){var t=e.N;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.qd,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.Ba.label||null,roles:e.roles||null,language:e.Ba.language||null}}function Z4(e,t,n){var i=by(e,Vy,n),r=Q4(e);if(!r.eb&&!r.timeline&&1<r.od.length)throw new L(2,4,4002);if(!r.eb&&!e.ya.duration&&!r.timeline&&r.od.length==1)throw new L(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new L(2,4,4002);var o=null,s=null;e.Na.id&&e.N.id&&(s=t[e.Na.id+","+e.N.id])&&(o=s.segmentIndex);var u=eI(e.ya.start,e.ya.duration,e.N.Ya,r,i,n,e.N.mimeType,e.N.codecs);return t=!o,o?o.je(u,e.presentationTimeline.Hb()):o=new Se(u),e.presentationTimeline.le(u),e.Vb&&e.ya.ge||o.dd(e.ya.start,e.ya.duration?e.ya.start+e.ya.duration:1/0,t),s&&(s.segmentIndex=o),{Gc:function(){return o&&o.getNumReferences()!=0||o.qf(u),Promise.resolve(o)}}}function Vy(e){return e.lc}function Q4(e){var t=tI(e);e=_y(e,Vy);var n=e.we;n==0&&(n=1);var i=0;return e.eb?i=e.eb*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{eb:e.eb,startTime:i,we:n,kc:e.kc,timeline:e.timeline,od:t}}function eI(e,t,n,i,r,o,s,u){var a=i.od.length;i.timeline&&i.timeline.length!=i.od.length&&(a=Math.min(i.timeline.length,i.od.length));for(var l=e-i.kc,c=t?e+t:1/0,h=[],d=i.startTime,f={},m=0;m<a;f={Nd:f.Nd,Kd:f.Kd},m++){f.Kd=i.od[m];var y=d;d=void 0,d=i.eb!=null?y+i.eb:i.timeline?i.timeline[m].end:y+t,f.Nd=null,y=new ne(e+y,e+d,function(v){return function(){return v.Nd==null&&(v.Nd=gt(n(),[v.Kd.kk])),v.Nd}}(f),f.Kd.start,f.Kd.end,r,l,e,c,[],"",null,null,Hi,o),y.codecs=u,y.mimeType=s,h.push(y)}return h}function tI(e){return[e.N.lc,e.Ba.lc,e.Na.lc].filter(pr).map(function(t){return Ue(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.Rg&&(e.Rg=!0);var n=Pt(t.attributes.media);return t=Te(t,"mediaRange",ua,{start:0,end:null}),{kk:n,start:t.start,end:t.end}})}function Hy(e,t,n,i,r,o,s,u,a){a||e.N.kd||(e.N.kd=Gn(e,xr,"initialization"));var l=e.N.kd?oI(e,s):null,c=nI(e);iI(c);var h=oh(e);if(c.be)return By(e,l),{Gc:function(){var v=al(c.be,h.N.id,null,null,h.bandwidth||null,null);return v=gt(h.N.Ya(),[v]),jy(h,t,l,v,0,null,c.kc)}};if(c.eb)return i||e.Ba.contentType==="image"||(e.presentationTimeline.Xg(c.eb),e.presentationTimeline.uf(e.ya.start)),{Gc:function(){return rI(h,c,r,l,o,s,u)}};var d=null;i=i=null,e.Na.id&&e.N.id&&(i=e.Na.id+","+e.N.id,i=n[i])&&(d=i.segmentIndex);var f=e.ya.start,m=e.ya.duration?f+e.ya.duration:1/0,y=!(e.Vb&&e.ya.ge);return d?(n=d,qy(n,c,f,m,y,l),n.hb(e.presentationTimeline.Hb())):d=new cl(c,e.N.id,e.bandwidth,e.N.Ya,f,m,l,y,s,e.N.ih),c.timeline&&e.Ba.contentType!=="image"&&e.presentationTimeline.oi(c.timeline,f),i&&e.Vb&&(i.segmentIndex=d),{Gc:function(){return d instanceof cl&&d.getNumReferences()==0&&qy(d,c,f,m,y,l),Promise.resolve(d)}}}function xr(e){return e.xc}function nI(e){var t=_y(e,xr),n=Gn(e,xr,"media"),i=Gn(e,xr,"index");return{eb:t.eb,timescale:t.timescale,we:t.we,kc:t.kc,Bh:t.Bh,timeline:t.timeline,pd:n&&Pt(n),be:i,mimeType:e.N.mimeType,codecs:e.N.codecs}}function iI(e){var t=e.be?1:0;if(t+=e.timeline?1:0,t+=e.eb?1:0,t==0)throw new L(2,4,4002);if(t!=1&&(e.be&&(e.timeline=null),e.eb=null),!e.be&&!e.pd)throw new L(2,4,4002)}function rI(e,t,n,i,r,o,s){function u(C){var N=(C-y)*m,_=N+t.kc,U=N+h;N=U+m;var B=Math.min(N,l());return U=new ne(U,B,function(){var H=_*v;return"BigInt"in O&&H>Number.MAX_SAFE_INTEGER&&(H=BigInt(_)*BigInt(v)),H=al(A,x,C,null,S,H),gt(E(),[H])},0,null,i,w,h,l(),[],"",null,null,Hi,o),U.codecs=e.N.codecs,U.mimeType=e.N.mimeType,U.i=N,U}function a(){var C=[Math.max(c.Hb(),h),Math.min(c.sc(),l())].map(function(N){return N-h});return C=[Math.ceil(C[0]/m),Math.ceil(C[1]/m)-1],e.N.ab&&C[1]++,C.map(function(N){return N+y})}function l(){var C=d!=null&&r[d]||f;return C?h+C:1/0}var c=e.presentationTimeline,h=e.ya.start,d=e.Na.id,f=e.ya.duration,m=t.eb,y=t.we,v=t.timescale,A=t.pd,S=e.bandwidth||null,x=e.N.id,E=e.N.Ya,w=h-t.kc,I=a();n=e.Vb?Math.max(I[0],I[1]-n+1):I[0],s=s||I[1],I=[];for(var k=n;k<=s;++k){var R=u(k);I.push(R)}var D=new Se(I);if(I=c.sc()<l(),k=c.U(),I||k){var P=Math.max(n,s+1);n=m,e.N.ab&&(n=.1),D.Ff(n,function(){var C=c.Hb();D.hb(C);var N=g(a());N.next(),N=N.next().value;for(var _=[];P<=N;){var U=u(P);_.push(U),P++}return C>l()&&!_.length?null:_})}return Promise.resolve(D)}function oI(e,t){var n=e.N.kd;if(n||(n=Gn(e,xr,"initialization")),!n)return null;n=Pt(n);var i=e.N.id,r=e.bandwidth||null,o=e.N.Ya;return t=new bt(function(){var s=al(n,i,null,null,r,null);return gt(o(),[s])},0,null,Gy(e),null,null,t),t.codecs=e.N.codecs,t.mimeType=e.N.mimeType,t}function cl(e,t,n,i,r,o,s,u,a,l){Se.call(this,[]),this.g=e,this.G=t,this.A=n,this.C=i,this.h=r,this.j=o,this.s=s,this.u=a,this.H=l,u&&Ky(this)}de(cl,Se),p=cl.prototype,p.getNumReferences=function(){return this.g?this.g.timeline.length:0},p.release=function(){Se.prototype.release.call(this),this.g=null},p.hb=function(e){if(this.g){for(var t=0,n=this.g.timeline,i=0;i<n.length&&n[i].end+this.h<=e;i+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.T.length>=t&&(this.T=this.T.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function qy(e,t,n,i,r,o){if(sI(e,o),e.g){if(n=e.g.timeline,e.g.pd=t.pd,n.length){var s=n[n.length-1];t=t.timeline.filter(function(u){return u.start>=s.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,W(t)),e.j!==i&&(e.j=i)}else e.g=t,e.h=n,e.j=i;r&&Ky(e)}function sI(e,t){if(e.s!==t){e.s=t,e=g(e.T);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&im(n,t)}}function Ky(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.hb(e.h)}}p.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.h;if(r=i<n?t[i+1].start+this.h:this.j===1/0?r.end+this.h:this.j,e>=o&&e<r)return i+this.i}return null},p.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.T[e];if(!n){var i=this.g.pd,r=this.g.timeline[e],o=r.Ik,s=this.g.Bh+r.Ch;n=this.h-this.g.kc;var u=this.h+r.end,a=u;e===this.getNumReferences()-1&&this.j!==1/0&&(a=this.j);for(var l=this.g.codecs,c=this.g.mimeType,h=[],d=(r.end-r.start)/r.Yb,f={},m=0;m<r.Yb;f={Od:f.Od,Vf:f.Vf},m++){var y=r.start+d*m,v=y+d;f.Vf=m+1,f.Od=null,y=new ne(this.h+y,this.h+v,function(A){return function(){return t.g?(A.Od==null&&(A.Od=zy(t.g.pd,t.G,o,t.A,s,A.Vf,t.C)),A.Od):[]}}(f),0,null,this.s,n,this.h,this.j,[],"",null,null,Hi,this.u),y.codecs=l,y.mimeType=c,this.H==0?0<m&&y.nf():m%this.H!=0&&y.nf(),h.push(y)}n=new ne(this.h+r.start,a,function(){return 0<r.Yb?[]:zy(i,t.G,o,t.A,s,null,t.C)},0,null,this.s,n,this.h,this.j,h,"",null,null,Hi,this.u,0<r.Yb),n.codecs=l,n.mimeType=c,n.i=u,this.T[e]=n}return n};function zy(e,t,n,i,r,o,s){return e=al(e,t,n,o,i||null,r),gt(s(),[e]).map(function(u){return u.toString()})}function xo(e){this.s=null,this.A=e,this.I=new Yr,this.i=[],this.h=null,this.m=[],this.C=null,this.H=[],this.G=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}xo.prototype.configure=function(e){this.s=e},xo.prototype.destroy=function(){return this.A=this.s=null,this.i=[],this.h=null,this.m=[],this.H=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.I.destroy()},xo.prototype.setManifestType=function(e){this.u=e};function Js(e,t){var n,i,r,o,s,u,a;return M(function(l){if(l.g==1)return n=gt(e.i,[uI(e,t)]),i=ut(n,e.s.retryParameters),r=e.A.networkingEngine.request(8,i),gr(e.I,r),Z(l,2),T(l,r.promise,4);if(l.g!=2)return o=l.h,s=Fe(o.data),u=JSON.parse(s),u.VERSION==1&&aI(e,u,o.uri),le(l,0);if((a=Q(l))&&a.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new te(function(){Js(e,t)}),e.g.X(e.G),V(l)})}function uI(e,t){if(!e.m.length)return t;t=new Ze(t);var n=e.C||e.m[0],i=Math.round(e.A.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),M0(r)&&Zo(t,r),t.toString()}function aI(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new te(function(){Js(e,i)}),(n=t.TTL)&&(e.G=n),e.g.X(e.G),e.m=t["PATHWAY-PRIORITY"]||[],e.H=t["PATHWAY-CLONES"]||[]}function Io(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}xo.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function $s(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r={},o=g(e.m),s=o.next();!s.done;r={Dc:r.Dc},s=o.next())if(r.Dc=s.value,s=t.get(r.Dc))i.push({dh:r.Dc,location:s});else if(s=e.H.find(function(a){return function(l){return l.xl==a.Dc}}(r))){var u=t.get(s["BASE-ID"]);u&&(s["URI-REPLACEMENT"].Si?(u=new Ze(u),_u(u,s["URI-REPLACEMENT"].Si),i.push({dh:r.Dc,location:u.toString()})):i.push({dh:r.Dc,location:u}))}for(r=Date.now(),o=g(e.j.keys()),s=o.next();!s.done;s=o.next())s=s.value,u=e.j.get(s),r>u&&e.j.delete(s);if(i=i.filter(function(a){for(var l=g(e.j.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new Ze(a.location).cc))return!1;return!0}),i.length&&(e.C=i[0].dh),i=i.map(function(a){return a.location}),!i.length&&e.h)for(r=g(e.h.split(",")),s=r.next();!s.done;s=r.next())(o=t.get(s.value))&&(e.C=e.h,i.push(o));if(!i.length)for(t=g(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:gt(e.i,i)}function Nt(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.u=this.s=!1,this.m=new Set}p=Nt.prototype,p.release=function(){for(var e=g(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},p.Oj=function(){return this.j},p.Lg=function(){return this.l.slice()},p.sj=function(){return this.i};function Wy(e,t){var n=[],i=[],r=[],o=[];e=g(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(h){return[Bd(h),h]}));var a=new Map(u.videoStreams.map(function(h){return[Fd(h),h]})),l=new Map(u.textStreams.map(function(h){return[tu(h),h]}));if(u=new Map(u.imageStreams.map(function(h){return[nu(h),h]})),t){var c=Qy(ye);l.set(tu(c),c),c=Qy("image"),u.set(nu(c),c)}n.push(s),i.push(a),r.push(l),o.push(u)}return{Ih:n,Pi:i,Ki:r,ci:o}}p.mg=function(e,t,n){n=n===void 0?!1:n;var i=this,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H,F;return M(function(X){if(X.g==1){if(r=Qe,!t&&e.length==1)return o=Wy(e,!1),s=o.Ih,u=o.Pi,a=o.Ki,l=o.ci,i.h=Array.from(s[0].values()),i.g=Array.from(u[0].values()),i.l=Array.from(a[0].values()),i.i=Array.from(l[0].values()),X.B(2);for(c=n?i.m.size:0,h=-1,d=0;d<e.length;d++)f=e[d],i.m.has(f.id)||(i.m.add(f.id),h==-1&&(h=d));return h==-1?X.return():(m=Wy(e,!0),y=m.Ih,v=m.Pi,A=m.Ki,S=m.ci,T(X,Promise.all([Xi(i,i.h,y,h,Zs,Co,c),Xi(i,i.g,v,h,Zs,Co,c),Xi(i,i.l,A,h,Zs,Co,c),Xi(i,i.i,S,h,Zs,Co,c)]),2))}if(x=0,E=[],i.g.length&&i.h.length)for(P=g(i.h),C=P.next();!C.done;C=P.next())for(N=C.value,_=g(i.g),U=_.next();!U.done;U=_.next())B=U.value,H=bc(N.drmInfos,B.drmInfos),N.drmInfos.length&&B.drmInfos.length&&!H.length||(F=x++,E.push({id:F,language:N.language,disabledUntilTime:0,primary:N.primary,audio:N,video:B,bandwidth:(N.bandwidth||0)+(B.bandwidth||0),drmInfos:H,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(w=i.g.length?i.g:i.h,I=g(w),k=I.next();!k.done;k=I.next())R=k.value,D=x++,E.push({id:D,language:R.language,disabledUntilTime:0,primary:R.primary,audio:R.type==r.ha?R:null,video:R.type==r.ua?R:null,bandwidth:R.bandwidth||0,drmInfos:R.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.j=E,V(X)})};function Xy(e){var t,n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U;return M(function(B){switch(B.g){case 1:if(t=Qe,e.length==1)return B.return(e[0]);for(n=e.map(function(H){return new Map(H.filter(function(F){return F.type===t.ha}).map(function(F){return[Bd(F),F]}))}),i=e.map(function(H){return new Map(H.filter(function(F){return F.type===t.ua}).map(function(F){return[Fd(F),F]}))}),r=e.map(function(H){return new Map(H.filter(function(F){return F.type===t.Ka}).map(function(F){return[tu(F),F]}))}),o=e.map(function(H){return new Map(H.filter(function(F){return F.type===t.ag}).map(function(F){return[nu(F),F]}))}),s=g(r),u=s.next();!u.done;u=s.next())a=u.value,l=Zy(t.Ka),a.set(tu(l),l);for(c=g(o),h=c.next();!h.done;h=c.next())d=h.value,f=Zy(t.ag),d.set(nu(f),f);return m=new Nt,T(B,Xi(m,[],n,0,hl,dl,0),2);case 2:return y=B.h,T(B,Xi(m,[],i,0,hl,dl,0),3);case 3:return v=B.h,T(B,Xi(m,[],r,0,hl,dl,0),4);case 4:return A=B.h,T(B,Xi(m,[],o,0,hl,dl,0),5);case 5:if(S=B.h,x=0,v.length&&y.length)for(R=g(y),D=R.next();!D.done;D=R.next())for(P=D.value,C=g(v),N=C.next();!N.done;N=C.next())_=N.value,U=x++,_.variantIds.push(U),P.variantIds.push(U);else for(E=v.concat(y),w=g(E),I=w.next();!I.done;I=w.next())k=I.value,k.variantIds=[x++];return B.return(v.concat(y).concat(A).concat(S))}})}function Xi(e,t,n,i,r,o,s){var u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k;return M(function(R){switch(R.g){case 1:for(u=[],a=0;a<n.length;a++)a>=i?u.push(new Set(n[a].values())):u.push(new Set);l=g(t),c=l.next();case 2:if(c.done){R.B(4);break}return h=c.value,T(R,lI(e,h,n,i,o,u,s),5);case 5:if(d=R.h,!d)throw new L(2,4,4037);c=l.next(),R.B(2);break;case 4:for(f=g(u),m=f.next();!m.done;m=f.next())for(y=m.value,v=g(y),A=v.next();!A.done;A=v.next())S=A.value,(x=cI(e,S,n,r,o,u))&&t.push(x);for(E=g(u),m=E.next();!m.done;m=E.next())for(w=m.value,I={},k=g(w),A=k.next();!A.done;I={Je:I.Je},A=k.next())if(I.Je=A.value,!jd(I.Je)&&t.some(function(D){return function(P){return bd(e,D.Je,P)}}(I)))throw new L(2,4,4037);return R.return(t)}})}function lI(e,t,n,i,r,o,s){return M(function(u){return u.g==1?($y(e,n,t,0<s),t.matchedStreams?t.segmentIndex?T(u,Yy(t,i+s),2):u.B(2):u.return(!1)):(Jy(t,i,r,o,s),u.return(!0))})}function Yy(e,t){var n,i,r,o,s,u,a;return M(function(l){if(l.g==1){for(n=[],i=e.matchedStreams,r=g(i),o=r.next();!o.done;o=r.next())s=o.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return T(l,Promise.all(n),2)}if(e.segmentIndex instanceof We)for(u=t;u<i.length;u++)a=i[u],a.segmentIndex&&e.segmentIndex.g.push(a.segmentIndex);V(l)})}function cI(e,t,n,i,r,o){if(jd(t))return null;var s=i(t);return $y(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return M(function(u){return s.segmentIndex?u.B(0):(s.segmentIndex=new We,T(u,Yy(s,0),0))})}),!s.matchedStreams||!s.matchedStreams.length?null:(Jy(s,0,r,o,0),s)}function Jy(e,t,n,i,r){var o=e.matchedStreams;for(t+=r;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if(e.type=="audio"&&ur(e.language,s.language)==0&&(u=!1),u&&(i[t-r].delete(s),s.fullMimeTypes))for(s=g(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function Zs(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=g(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function hl(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Co(e,t){function n(s,u){s||(s=[]),u=g(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=g(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),i=bc(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new L(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=g(t.closedCaptions),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.closedCaptions.set(r,o)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Zs(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Co(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Co(e.trickModeVideo,t)}function dl(e,t){var n=e.roles;n||(n=[]);for(var i=g(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=g(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,W(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=g(t.closedCaptions),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function $y(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=g(t);for(var r=t.next();!r.done;r=t.next()){if(r=hI(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function hI(e,t,n){var i={audio:Bd,video:Fd,text:tu,image:nu}[n.type],r=null,o=i(n);if(t.has(o))r=t.get(o);else{o={audio:function(l,c){return bd(e,l,c)},video:function(l,c){return bd(e,l,c)},text:dI,image:pI}[n.type];for(var s={audio:fI,video:gI,text:mI,image:vI}[n.type],u=g(t.values()),a=u.next();!a.done;a=u.next())a=a.value,!o(n,a)||n.fastSwitching!=a.fastSwitching||r&&!s(n,r,a)||(r=a)}return e.u&&!jd(r)&&t.delete(i(r)),r}function Qs(e,t){function n(i){if(!Gd.has(i)){var r=xn(i);Gd.set(i,r)}return Gd.get(i)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}p.xi=function(e){this.s=e},p.Gi=function(e){this.u=e};function bd(e,t,n){return!(!Qs(t,n)&&!e.s||t.drmInfos&&!L0(t.drmInfos,n.drmInfos))}function dI(e,t){return t.language?!(e.forced!==t.forced||ur(e.language,t.language)==0||t.kind!=e.kind):!0}function pI(){return!0}function fI(e,t,n){var i=Qs(e,t),r=Qs(e,n);if(i&&!r)return!1;if(!i&&r||(i=ur(e.language,t.language),r=ur(e.language,n.language),r>i))return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length?!0:r.length<i.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=eu(e.channelsCount,t.channelsCount,n.channelsCount),i==Vn?!0:i==Li?!1:(i=eu(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Vn?!0:i==Li?!1:!!(e.bandwidth&&e1(e.bandwidth,t.bandwidth,n.bandwidth)==Vn)))}function gI(e,t,n){var i=Qs(e,t),r=Qs(e,n);if(i&&!r)return!1;if(!i&&r||(i=eu(e.width*e.height,t.width*t.height,n.width*n.height),i==Vn))return!0;if(i==Li)return!1;if(e.frameRate){if(i=eu(e.frameRate,t.frameRate,n.frameRate),i==Vn)return!0;if(i==Li)return!1}return!!(e.bandwidth&&e1(e.bandwidth,t.bandwidth,n.bandwidth)==Vn)}function mI(e,t,n){var i=ur(e.language,t.language),r=ur(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function vI(e,t,n){return eu(e.width*e.height,t.width*t.height,n.width*n.height)==Vn}function Zy(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Qy(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function eu(e,t,n){if(t==e&&e!=n)return Li;if(n==e&&e!=t)return Vn;if(t>e){if(n<=e||n-e<t-e)return Vn;if(n-e>t-e)return Li}else{if(n>e)return Li;if(e-n<e-t)return Vn;if(e-n>e-t)return Li}return t1}function e1(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Vn:t<e?Li:t1}function jd(e){switch(e.type){case ye:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Fd(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Bd(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function tu(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function nu(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}j("shaka.util.PeriodCombiner",Nt),Nt.prototype.setUseStreamOnce=Nt.prototype.Gi,Nt.prototype.setAllowMultiTypeVariants=Nt.prototype.xi,Nt.prototype.combinePeriods=Nt.prototype.mg,Nt.prototype.getImageStreams=Nt.prototype.sj,Nt.prototype.getTextStreams=Nt.prototype.Lg,Nt.prototype.getVariants=Nt.prototype.Oj;var Vn=1,t1=0,Li=-1,Gd=new Map;function yI(e,t){var n=new DOMParser,i=TI.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(r){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function n1(e,t){try{var n=li(e);return yI(n,t)}catch(i){return null}}var TI=new Ur(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function pl(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.aa=1,this.C=[],this.l={tf:"",type:"",profiles:[],fc:null,ab:0,Ya:null,pe:0},this.s=new Map,this.u={},this.W={},this.m=new Nt,this.J=0,this.Z=new Br(5),this.K=new te(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.G.Pa(e.I,"timeupdate"),e.I.paused)){e.G.ia(e.I,"timeupdate",function(){return a1(e)});return}a1(e)}),this.O=new Yr,this.M=null,this.ea=[],this.P=1/0,this.H=!1,this.h=null,this.L=0,this.S=!1,this.G=new Ee,this.I=null}p=pl.prototype,p.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.U()&&this.K.Sa(),this.h&&this.h.configure(this.g),this.m&&(this.m.xi(this.g.dash.multiTypeVariantsAllowed&&ar()),this.m.Gi(this.g.dash.useStreamOnceInPeriodFlattening))},p.start=function(e,t){var n=this,i;return M(function(r){if(r.g==1)return n.H=t.isLowLatencyMode(),n.A=[e],n.j=t,T(r,Vd(n),2);if(i=r.h,n.j&&Hd(n,i),!n.j)throw new L(2,7,7001);return r.return(n.i)})},p.stop=function(){for(var e=g(Object.values(this.u)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.u={},this.s.clear(),this.l={tf:"",type:"",profiles:[],fc:null,ab:0,Ya:null,pe:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.O.destroy()},p.update=function(){var e=this,t;return M(function(n){if(n.g==1)return Z(n,2),T(n,Vd(e),4);if(n.g!=2)return le(n,0);if(t=Q(n),!e.j||!t)return n.return();e.j.onError(t),V(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.sc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.J=t.endTime-e,Hd(this,0))}}},p.banLocation=function(e){this.h&&this.h.banLocation(e)},p.setMediaElement=function(e){this.I=e};function Vd(e){var t,n,i,r,o,s,u,a,l,c;return M(function(h){return h.g==1?(t=4,n="MPD",i=NI(e),r=e.A,i.length?(r=i,n="Patch",t=6):1<e.A.length&&e.h&&(o=$s(e.h,"Location",!0),o.length&&(r=o)),s=ut(r,e.g.retryParameters),u=Date.now(),T(h,Kd(e,s,0,{type:t}),2)):h.g!=3?(a=h.h,e.j?(a.uri&&a.uri!=a.originalUri&&!e.A.includes(a.uri)&&e.A.unshift(a.uri),T(h,EI(e,a.data,a.uri,n),3)):h.return(0)):(l=Date.now(),c=(l-u)/1e3,e.Z.sample(1,c),h.return(c))})}function EI(e,t,n,i){var r,o,s,u,a,l,c,h,d,f;return M(function(m){if(m.g==1){if(r=t,o=e.g.dash.manifestPreprocessor,s=Ra,o!=s){if(He("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),u=n1(r,i),!u)throw new L(2,4,4001,n);o(u),r=On(u.outerHTML)}if(a=ph(r,i),!a)throw new L(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,c=Pa,l!=c&&l(a),i==="Patch"?m.return(SI(e,a)):e.g.dash.disableXlinkProcessing?m.return(i1(e,a,n)):(h=e.g.dash.xlinkFailGracefully,d=ll(a,e.g.retryParameters,h,n,e.j.networkingEngine),gr(e.O,d),T(m,d.promise,2))}return f=m.h,m.return(i1(e,f,n))})}function i1(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H,F,X,me,we,Ne,Me,Et,qe,$e,ke,wt,rt,ot,Wt,Xt,Dn,Di,$i,Ko,Ni,mc,Iu,Cu;return M(function(Kn){switch(Kn.g){case 1:for(e.h&&e.h.l.clear(),i=[n],r=[],o=new Map,s=Ue(t,"Location"),u=g(s),a=u.next();!a.done;a=u.next())l=a.value,c=l.attributes.serviceLocation,(h=Mn(l))&&(d=gt(i,[h])[0],c&&(e.h?Io(e.h,"Location",c,d):o.set(c,d)),r.push(d));if(e.h?(f=$s(e.h,"Location",!0),0<f.length&&(i=e.A=f)):r.length&&(i=e.A=r),e.l.tf=t.attributes.id||"",e.l.pe=Te(t,"publishTime",Vi)||0,e.C=Ue(t,"PatchLocation"),m=Promise.resolve(),(y=Ln(t,"ContentSteering"))&&e.j)for(v=y.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=v):(e.h=new xo(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=v,(A=Mn(y))&&(Te(y,"queryBeforeStart",gh,!1)?m=Js(e.h,A):Js(e.h,A))),S=g(o.keys()),x=S.next();!x.done;x=S.next())E=x.value,w=o.get(E),Io(e.h,"Location",E,w);if(I=Ue(t,"BaseURL"),R=!1,e.h)for(D=g(I),P=D.next();!P.done;P=D.next())C=P.value,N=C.attributes.serviceLocation,_=Mn(C),N&&_&&(Io(e.h,"BaseURL",N,_),R=!0);if(R&&e.h||(U=I.map(Mn),k=gt(i,U)),B=function(){return e.h&&R?$s(e.h,"BaseURL"):k||[]},e.l.Ya=B,H=0,I&&I.length&&(H=Te(I[0],"availabilityTimeOffset",la)||0),e.l.ab=H,F=e.g.dash.ignoreMinBufferTime,X=0,F||(X=Te(t,"minBufferTime",Qn)||0),e.J=Te(t,"minimumUpdatePeriod",Qn,-1),me=Te(t,"availabilityStartTime",Vi),we=Te(t,"timeShiftBufferDepth",Qn),Ne=e.g.dash.ignoreSuggestedPresentationDelay,Me=null,Ne||(Me=Te(t,"suggestedPresentationDelay",Qn)),Et=e.g.dash.ignoreMaxSegmentDuration,qe=null,Et||(qe=Te(t,"maxSegmentDuration",Qn)),$e=t.attributes.type||"static",e.l.type=$e,e.i)for(ke=e.i.presentationTimeline,wt=g(Object.values(e.u)),rt=wt.next();!rt.done;rt=wt.next())ot=rt.value,ot.segmentIndex&&ot.segmentIndex.hb(ke.Hb());else Wt=e.g.defaultPresentationDelay||1.5*X,Xt=Me!=null?Me:Wt,ke=new ee(me,Xt,e.g.dash.autoCorrectDrift);return ke.Tc($e=="static"),ke.U()&&!isNaN(e.g.availabilityWindowOverride)&&(we=e.g.availabilityWindowOverride),we==null&&(we=1/0),ke.Bf(we),Dn=t.attributes.profiles||"",e.l.profiles=Dn.split(","),Di={Vb:$e!="static",presentationTimeline:ke,Na:null,ya:null,Ba:null,N:null,bandwidth:0,Rg:!1,ab:H,fc:null,profiles:Dn.split(","),roles:null},e.L=0,$i=u1(e,Di,B,t),Ko=$i.duration,Ni=$i.periods,$e!="static"&&$i.Sh||ke.vb(Ko||1/0),e.S&&!e.H&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.H=e.j.isLowLatencyMode()),e.H&&ke.zi(e.P),ke.Xg(qe||1),T(Kn,m,2);case 2:return e.H&&(X=0,mc=Me!=null?Me:e.g.defaultPresentationDelay,ke.nh(mc)),e.i?(e.i.periodCount=Ni.length,e.i.gapCount=e.L,T(Kn,r1(e,Ni,!1),4)):T(Kn,e.m.mg(Ni,Di.Vb),6);case 6:if(e.i={presentationTimeline:ke,variants:e.m.j,textStreams:e.m.Lg(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:X||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:AI(t),nextUrl:wI(t),periodCount:Ni.length,gapCount:e.L,isLowLatency:e.S},!ke.Ni()){Kn.B(7);break}return Iu=Ue(t,"UTCTiming"),T(Kn,PI(e,B,Iu),8);case 8:if(Cu=Kn.h,!e.j)return Kn.return();ke.Ai(Cu);case 7:ke.mf();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),V(Kn)}})}function r1(e,t,n){var i;return M(function(r){if(r.g==1)return T(r,e.m.mg(t,!0,n),2);e.i.variants=e.m.j,i=e.m.Lg(),0<i.length&&(e.i.textStreams=i),e.i.imageStreams=e.m.i,e.j.filter(e.i),V(r)})}function SI(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P;return M(function(C){if(C.g==1){if(n=t.attributes.mpdId,i=Te(t,"originalPublishTime",Vi),!n||n!==e.l.tf||i!==e.l.pe)throw e.C=[],new L(1,4,4052);for(r=[],o=[],s=new Set,u=g(Ug(t)),a=u.next();!a.done;a=u.next())if(l=a.value,c=ca(l.attributes.sel||""),h=c[c.length-1],d=Mn(l)||"",h.name==="MPD")if(h.pc==="mediaPresentationDuration"){f=Mn(l)||"";var N=Qn(f);if(N!=null){e.l.fc=N;for(var _=g(e.s.values()),U=_.next();!U.done;U=_.next())U.value.fc=N}}else if(h.pc==="type"){for(e.i.presentationTimeline.Tc(d=="static"),e.l.type=d,N=g(e.s.values()),_=N.next();!_.done;_=N.next())_.value.Vb=d=="dynamic";d=="static"&&(e.J=-1)}else h.pc==="publishTime"?e.l.pe=Vi(d)||0:h.pc===null&&l.tagName==="add"&&o.push(l);else if(h.name==="PatchLocation")bg(e.C,l);else if(h.name==="Period"){if(l.tagName==="add")o.push(l);else if(l.tagName==="remove"&&h.id){for(N=h.id,e.i.periodCount--,_=g(e.s.keys()),U=_.next();!U.done;U=_.next())if(U=U.value,U.startsWith(N)){var B=e.s.get(U);Ao(B,xr,"SegmentTimeline").children=[],s1(e,U),e.s.delete(U)}}}else if(h.name==="SegmentTemplate"){if(_=ca(l.attributes.sel||""),N=_[_.length-1],N.pc){_=o1(e,_),U=Mn(l)||"",B=g(_);for(var H=B.next();!H.done;H=B.next())H=e.s.get(H.value),jg(H.N.xc,l.tagName,N.pc,U);N=_}else N=[];for(m=N,y=g(m),v=y.next();!v.done;v=y.next())A=v.value,s.add(A)}else if(h.name==="SegmentTimeline"||h.name==="S"){for(N=ca(l.attributes.sel||""),N=o1(e,N),_=g(N),U=_.next();!U.done;U=_.next())U=e.s.get(U.value),U=Ao(U,xr,"SegmentTimeline"),B=Ue(U,"S"),bg(B,l),U.children=B;for(S=N,x=g(S),v=x.next();!v.done;v=x.next())E=v.value,s.add(E)}for(w=g(s),v=w.next();!v.done;v=w.next())I=v.value,s1(e,I);for(k=g(o),R=k.next();!R.done;R=k.next())D=R.value,r.push.apply(r,W(u1(e,{Vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,Na:null,ya:null,Ba:null,N:null,bandwidth:0,Rg:!1,ab:e.l.ab,profiles:e.l.profiles,fc:e.l.fc,roles:null},e.l.Ya,D).periods));return r.length?(e.i.periodCount+=r.length,e.i.gapCount=e.L,T(C,r1(e,r,!0),2)):C.B(2)}e.l.type=="static"&&(P=e.l.fc,e.i.presentationTimeline.vb(P||1/0)),V(C)})}function o1(e,t){var n="",i="",r="";t=g(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.name==="Period"?n=o.id:o.name==="AdaptationSet"?i=o.id:o.name==="Representation"&&(r=o.id);if(t=[],r)t.push(n+","+r);else for(e=g(e.s.values()),r=e.next();!r.done;r=e.next())r=r.value,r.Na.id===n&&r.Ba.id===i&&r.N.id&&t.push(n+","+r.N.id);return t}function s1(e,t){var n=e.s.get(t),i=e.u[t];i.segmentIndex&&i.segmentIndex.hb(e.i.presentationTimeline.Hb());try{var r=Hy(n,function(o,s,u,a){return c1(e,o,s,u,a)},e.u,!0,e.g.dash.initialSegmentLimit,e.W,n.N.aesKey,null,!0);i.createSegmentIndex=function(){var o;return M(function(s){if(s.g==1)return i.segmentIndex?s.B(0):(o=i,T(s,r.Gc(),3));o.segmentIndex=s.h,V(s)})}}catch(o){if(t=n.N.contentType,t!=ye&&t!="application"&&t!="image"||o.code!=4002)throw o}}function AI(e){var t=Ln(e,"ServiceDescription");if(!t||(e=Ln(t,"Latency"),t=Ln(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function wI(e){if(e=Ue(e,"SupplementalProperty"),!e.length)return null;e=g(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function u1(e,t,n,i){var r=t.fc;r||(r=Te(i,"mediaPresentationDuration",Qn),e.l.fc=r);var o=[],s=0;i=Ue(i,"Period");for(var u=0;u<i.length;u++){var a=i[u],l=i[u+1],c=Te(a,"start",Qn,s),h=a.attributes.id,d=Te(a,"duration",Qn),f=null;if(l){var m=Te(l,"start",Qn);m!=null&&(f=m-c)}else r!=null&&(f=r-c);if(m=kA,f&&d&&Math.abs(f-d)>m&&f>d&&e.L++,f==null&&(f=d),!(e.M!==null&&h!==null&&c!==null&&c<e.M)||e.ea.includes(h)||u+1==i.length){if(c!==null&&(e.M===null||c>e.M)&&(e.M=c),s=xI(e,t,n,{start:c,duration:f,node:a,ge:f==null||!l}),o.push(s),t.Na.id&&f&&(e.W[t.Na.id]=f),f==null){s=null;break}s=c+f}}return e.ea=o.map(function(y){return y.id}),r!=null?{periods:o,duration:r,Sh:!1}:{periods:o,duration:s,Sh:!0}}function xI(e,t,n,i){t.Na=qd(e,i.node,null,n),t.ya=i,t.Na.ab=t.ab,t.Na.id||(t.Na.id="__shaka_period_"+i.start);var r=Ue(i.node,"EventStream");n=t.presentationTimeline.Hb(),r=g(r);for(var o=r.next();!o.done;o=r.next())DI(e,i.start,i.duration,o.value,n);if(n=Ue(i.node,"AdaptationSet").map(function(c){return II(e,t,c)}).filter(pr),t.Vb){for(i=[],r=g(n),o=r.next();!o.done;o=r.next()){o=g(o.value.Bk);for(var s=o.next();!s.done;s=o.next())i.push(s.value)}if(i.length!=new Set(i).size)throw new L(2,4,4018)}for(i=n.filter(function(c){return!c.Ah}),n=n.filter(function(c){return c.Ah}),n=g(n),r=n.next();!r.done;r=n.next()){r=r.value,o=r.Ah.split(" "),s=g(i);for(var u=s.next();!u.done;u=s.next()){var a=u.value;if(o.includes(a.id)){u={},a=g(a.streams);for(var l=a.next();!l.done;u={Ie:u.Ie},l=a.next())u.Ie=l.value,u.Ie.trickModeVideo=r.streams.find(function(c){return function(h){return xn(c.Ie.codecs)==xn(h.codecs)}}(u))}}}if(n=fl(e.g.disableAudio,i,"audio"),r=fl(e.g.disableVideo,i,"video"),o=fl(e.g.disableText,i,ye),i=fl(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new L(2,4,4004);return{id:t.Na.id,audioStreams:n,videoStreams:r,textStreams:o,imageStreams:i}}function fl(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,W(r.streams)),i},[])}function II(e,t,n){function i(C){switch(C){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function r(C){switch(C){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.Ba=qd(e,n,t.Na,null);var o=!1,s=Ue(n,"Role"),u=s.map(function(C){return C.attributes.value}).filter(pr),a=void 0,l=t.Ba.contentType==ye;l&&(a="subtitle"),s=g(s);for(var c=s.next();!c.done;c=s.next()){c=c.value;var h=c.attributes.schemeIdUri;if(h==null||h=="urn:mpeg:dash:role:2011")switch(c=c.attributes.value,c){case"main":o=!0;break;case"caption":case"subtitle":a=c}}var d,f;h=Ue(n,"EssentialProperty"),s=null;var m=!1;c=!1,h=g(h);for(var y=h.next();!y.done;y=h.next()){y=y.value;var v=y.attributes.schemeIdUri;v=="http://dashif.org/guidelines/trickmode"?s=y.attributes.value:v=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?d=r(parseInt(y.attributes.value,10)):v=="urn:mpeg:mpegB:cicp:ColourPrimaries"?f=i(parseInt(y.attributes.value,10)):v!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(v=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?m=!0:c=!0)}var A=null;for(h=Ue(n,"SupplementalProperty"),h=g(h),y=h.next();!y.done;y=h.next())y=y.value,v=y.attributes.schemeIdUri,v=="http://dashif.org/guidelines/last-segment-number"?A=parseInt(y.attributes.value,10)-1:v=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?d=r(parseInt(y.attributes.value,10)):v=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(f=i(parseInt(y.attributes.value,10)));h=Ue(n,"Accessibility");var S=new Map,x;for(h=g(h),y=h.next();!y.done;y=h.next())if(v=y.value,y=v.attributes.schemeIdUri,v=v.attributes.value,y=="urn:scte:dash:cc:cea-608:2015")if(y=1,v!=null){v=v.split(";");for(var E=g(v),w=E.next();!w.done;w=E.next()){var I=w.value,k=w=void 0;I.includes("=")?(I=I.split("="),w=I[0].startsWith("CC")?I[0]:"CC"+I[0],k=I[1]||"und"):(w="CC"+y,v.length==2?y+=2:y++,k=I),S.set(w,xe(k))}}else S.set("CC1","und");else if(y=="urn:scte:dash:cc:cea-708:2015")if(y=1,v!=null)for(v=g(v.split(";")),w=v.next();!w.done;w=v.next())w=w.value,I=E=void 0,w.includes("=")?(w=w.split("="),E="svc"+w[0],I=w[1].split(",")[0].split(":").pop()):(E="svc"+y,y++,I=w),S.set(E,xe(I));else S.set("svc1","und");else y=="urn:mpeg:dash:role:2011"?v!=null&&(u.push(v),v=="captions"&&(a="caption")):y=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(v=="1"?x="visually impaired":v=="2"&&(x="hard of hearing"));if(c)return null;c=Ue(n,"ContentProtection");var R=Ny(c,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),D=xe(t.Ba.language||"und"),P=t.Ba.label;if(c=Ue(n,"Representation"),n=c.map(function(C){return(C=CI(e,t,R,a,D,P,o,u,S,C,x,A))&&(C.hdr=C.hdr||d,C.colorGamut=C.colorGamut||f,C.fastSwitching=m),C}).filter(function(C){return!!C}),n.length==0){if(s=t.Ba.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||l||s)return null;throw new L(2,4,4003)}if(!t.Ba.contentType||t.Ba.contentType=="application")for(t.Ba.contentType=h1(n[0].mimeType,n[0].codecs),l=g(n),y=l.next();!y.done;y=l.next())y.value.type=t.Ba.contentType;for(l=t.Ba.id||"__fake__"+e.aa++,h=g(n),y=h.next();!y.done;y=h.next()){for(y=y.value,v=g(R.drmInfos),E=v.next();!E.done;E=v.next())E=E.value,E.keyIds=E.keyIds&&y.keyIds?new Set([].concat(W(E.keyIds),W(y.keyIds))):E.keyIds||y.keyIds;e.g.dash.enableAudioGroups&&(y.groupId=l)}return c=c.map(function(C){return C.attributes.id}).filter(pr),{id:l,contentType:t.Ba.contentType,language:D,fm:o,streams:n,drmInfos:R.drmInfos,Ah:s,Bk:c}}function CI(e,t,n,i,r,o,s,u,a,l,c,h){t.N=qd(e,l,t.Ba,null);var d=t.N.id;if(e.P=Math.min(e.P,t.N.ab),e.S=0<e.P,!RI(t.N))return null;var f=t.ya.start;t.bandwidth=Te(l,"bandwidth",yi)||0,t.roles=u;var m=t.N.contentType,y=m==ye||m=="application";m=m=="image";try{var v=void 0;if(n.fg){var A=t.N.Ya,S=gt(A(),[n.fg.dk]),x=ut(S,e.g.retryParameters);v={bitsKey:128,blockCipherMode:"CBC",iv:n.fg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var P,C,N;return M(function(_){if(_.g==1)return T(_,Kd(e,x,6),2);if(_.g!=3){if(P=_.h,!P.data||P.data.byteLength!=16)throw new L(2,4,4049);return C={name:"AES-CBC"},N=v,T(_,O.crypto.subtle.importKey("raw",P.data,C,!0,["decrypt"]),3)}N.cryptoKey=_.h,v.fetchKey=void 0,V(_)})}}}if(t.N.aesKey=v,A=function(P,C,N,_){return c1(e,P,C,N,_)},t.N.wd)var E=J4(t,A,v);else if(t.N.lc)E=Z4(t,e.u,v);else if(t.N.xc)E=Hy(t,A,e.u,!!e.i,e.g.dash.initialSegmentLimit,e.W,v,h,!1);else{var w=t.ya.duration||0,I=t.N.Ya;E={Gc:function(){var P=bh(f,w,I());return P.qc(function(C){C.mimeType=t.N.mimeType,C.codecs=t.N.codecs}),Promise.resolve(P)}}}}catch(P){if((y||m)&&P.code==4002)return null;throw P}h=Ue(l,"ContentProtection"),h=_4(h,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),h=new Set(h?[h]:[]),A=!1,Ue(l,"SupplementalProperty").some(function(P){return P.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&P.attributes.value=="JOC"})&&(A=!0),S=!1,y&&(S=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var k;if(m&&((l=Ue(l,"EssentialProperty").find(function(P){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(P.attributes.schemeIdUri)}))&&(k=l.attributes.value),!k))return null;var R;l=t.N.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(R="PQ"),y=t.N.id?t.Na.id+","+t.N.id:"",e.C.length&&d&&e.s.set(t.Na.id+","+d,MI(t));var D=y&&e.u[y]?e.u[y]:{id:e.aa++,originalId:t.N.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){D.segmentIndex&&(D.segmentIndex.release(),D.segmentIndex=null)},segmentIndex:null,mimeType:t.N.mimeType,codecs:l,frameRate:t.N.frameRate,pixelAspectRatio:t.N.pixelAspectRatio,bandwidth:t.bandwidth,width:t.N.width,height:t.N.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:h,language:r,originalLanguage:t.Ba.language,label:o,type:t.Ba.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.N.emsgSchemeIdUris,roles:u,forced:S,channelsCount:t.N.qd,audioSamplingRate:t.N.audioSamplingRate,spatialAudio:A,closedCaptions:a,hdr:R,colorGamut:void 0,videoLayout:void 0,tilesLayout:k,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([it(t.N.mimeType,t.N.codecs)])};return D.createSegmentIndex=function(){var P;return M(function(C){if(C.g==1)return D.segmentIndex?C.B(0):(P=D,T(C,E.Gc(),3));P.segmentIndex=C.h,V(C)})},y&&t.Vb&&!e.u[y]&&(e.u[y]=D),D}function MI(e){for(var t={},n=g(Object.keys(e)),i=n.next();!i.done;i=n.next())if(i=i.value,["period","adaptationSet","representation"].includes(i)){var r=e[i];t[i]={wd:null,lc:null,xc:r.xc,Ya:r.Ya,width:r.width,height:r.height,contentType:r.contentType,mimeType:r.mimeType,language:r.language,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,emsgSchemeIdUris:r.emsgSchemeIdUris,id:r.id,qd:r.qd,audioSamplingRate:r.audioSamplingRate,ab:r.ab,kd:r.kd}}else i=="periodInfo"?(r=e[i],t[i]={start:r.start,duration:r.duration,node:null,ge:r.ge}):t[i]=e[i];return t}function a1(e){var t,n;return M(function(i){switch(i.g){case 1:return t=0,Z(i,2),T(i,Vd(e),4);case 4:t=i.h,le(i,3);break;case 2:if(n=Q(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),Hd(e,t),V(i)}})}function Hd(e,t){if(!(0>e.J)){var n=e.J;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.K.X(Math.max(n-t,Ku(e.Z)))}}function qd(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,qd:null,audioSamplingRate:null,ab:0,ih:0},i=i||n.Ya;var r=t.attributes.id,o=Ue(t,"BaseURL"),s,u=!1;if(e.h)for(var a=g(o),l=a.next();!l.done;l=a.next()){var c=l.value;l=c.attributes.serviceLocation,c=Mn(c),l&&c&&(Io(e.h,r,l,c),u=!0)}u&&e.h||(s=o.map(Mn)),a=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,c=[t.attributes.codecs||n.codecs];var h=vi(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");h&&c.push(h),c=Hh(c).join(","),h=Te(t,"frameRate",pw)||n.frameRate;var d=t.attributes.sar||n.pixelAspectRatio,f=kI(Ue(t,"InbandEventStream"),n.emsgSchemeIdUris),m=Ue(t,"AudioChannelConfiguration");m=LI(m)||n.qd;var y=Te(t,"audioSamplingRate",It)||n.audioSamplingRate;a||(a=h1(l,c));var v=Ln(t,"SegmentBase"),A=Ln(t,"SegmentTemplate"),S=v&&Te(v,"availabilityTimeOffset",la)||0,x=A&&Te(A,"availabilityTimeOffset",la)||0,E=o&&o.length&&Te(o[0],"availabilityTimeOffset",la)||0;S=n.ab+E+S+x,x=null,(E=Ln(t,"SegmentSequenceProperties"))&&(E=Ln(E,"SAP"))&&(x=Te(E,"cadence",aa)),E=t.attributes.label;var w=Ue(t,"Label");return w&&w.length&&(w=w[0],nt(w)&&(E=nt(w))),{Ya:function(){return gt(i(),o.length?e.h&&u?$s(e.h,r):s||[]:[])},wd:v||n.wd,lc:Ln(t,"SegmentList")||n.lc,xc:A||n.xc,width:Te(t,"width",It)||n.width,height:Te(t,"height",It)||n.height,contentType:a,mimeType:l,codecs:c,frameRate:h,pixelAspectRatio:d,emsgSchemeIdUris:f,id:r,language:t.attributes.lang,qd:m,audioSamplingRate:y,ab:S,kd:null,ih:x||n.ih,label:E||null}}function kI(e,t){t=t.slice(),e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function LI(e){e=g(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function RI(e){var t=e.wd?1:0;return t+=e.lc?1:0,t+=e.xc?1:0,t==0?e.contentType==ye||e.contentType=="application":(t!=1&&(e.wd&&(e.lc=null),e.xc=null),!0)}function l1(e,t,n,i){var r,o,s,u,a,l,c;return M(function(h){if(h.g==1)return r=[Pt(n)],o=gt(t(),r),s=ut(o,e.g.retryParameters),s.method=i,u=e.j.networkingEngine.request(4,s),gr(e.O,u),T(h,u.promise,2);if(a=h.h,i=="HEAD"){if(!a.headers||!a.headers.date)return h.return(0);l=a.headers.date}else l=Fe(a.data);return c=Date.parse(l),isNaN(c)?h.return(0):h.return(c-Date.now())})}function PI(e,t,n){var i,r,o,s,u,a,l,c;return M(function(h){switch(h.g){case 1:i=n.map(function(d){return{scheme:d.attributes.schemeIdUri,value:d.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=g(i),s=o.next();case 2:if(s.done){h.B(4);break}switch(u=s.value,Z(h,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),h.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ce("NTP UTCTiming scheme is not supported");break;default:ce("Unrecognized scheme in UTCTiming element",a)}h.B(9);break;case 7:return T(h,l1(e,t,l,"HEAD"),10);case 10:return h.return(h.h);case 8:return T(h,l1(e,t,l,"GET"),11);case 11:return h.return(h.h);case 9:le(h,3);break;case 5:Q(h);case 3:s=o.next(),h.B(2);break;case 4:return ce("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}})}function DI(e,t,n,i,r){var o=i.attributes.schemeIdUri||"",s=i.attributes.value||"",u=Te(i,"timescale",It)||1;i=g(Ue(i,"Event"));for(var a=i.next();!a.done;a=i.next()){a=a.value;var l=Te(a,"presentationTime",It)||0,c=Te(a,"duration",It)||0;l=l/u+t,c=l+c/u,n!=null&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),c<r||(a={schemeIdUri:o,value:s,startTime:l,endTime:c,id:a.attributes.id||"",eventElement:mh(a),eventNode:a},e.j.onTimelineRegionAdded(a))}}function c1(e,t,n,i,r){var o,s,u,a;return M(function(l){return l.g==1?(o=Cn,s=r?0:1,u=yr(t,n,i,e.g.retryParameters),T(l,Kd(e,u,o,{type:s}),2)):(a=l.h,l.return(a.data))})}function h1(e,t){return t=it(e,t),fs(t)?ye:e.split("/")[0]}function Kd(e,t,n,i){return t=e.j.networkingEngine.request(n,t,i),gr(e.O,t),t.promise}function NI(e){var t=e.l.pe;if(!e.l.tf||!t||!e.C.length)return[];var n=Date.now()/1e3,i=e.C.filter(function(r){return r=It(r.attributes.ttl),!r||t+r>n}).map(Mn).filter(pr);return i.length?gt(e.A,i):[]}j("shaka.dash.DashParser",pl),Rn["application/dash+xml"]=function(){return new pl},Rn["video/vnd.mpeg.dash.mpd"]=function(){return new pl};function gl(){}j("shaka.dependencies",gl),gl.has=function(e){return zd.has(e)},gl.add=function(e,t){if(!p1[e])throw Error(e+" is not supported");e==d1?He("mux.js","mux.js is no longer used in Shaka Player."):zd.set(e,function(){return t})};var d1="muxjs",p1={gm:d1,ISOBoxer:"ISOBoxer"};gl.Allowed=p1;var zd=new Map([["ISOBoxer",function(){return O.ISOBoxer}]]);function f1(e,t,n){this.type=e,this.g=t,this.segments=n||null}function g1(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}g1.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function m1(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function iu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Y(e,t,n){return(e=iu(e,t))?e.value:n||null}function Ie(e,t){if(e=iu(e,t),!e)throw new L(2,4,4023,t);return e.value}function v1(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.Yb=n}function y1(e,t){this.name=e,this.value=t}function mn(e,t){return e.filter(function(n){return n.name==t})}function T1(e,t){return e.filter(function(n){return Ie(n,"TYPE")==t})}function At(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Mo(e,t,n){return n=n===void 0?0:n,(e=At(e,t))?Number(e.value):n}function Yi(e,t,n){return t?E1(e,[t],n):[]}function E1(e,t,n){if(!t.length)return[];t=gt(e,t),e=[],t=g(t);for(var i=t.next();!i.done;i=t.next())e.push(S1(i.value,n));return e}function S1(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),o=t.get(r);if(o)e=e.replace(i,o);else throw new L(2,4,4039,r)}}return e}function _I(){this.g=0}function Wd(e,t){t=Fe(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new L(2,4,4015);t=0;for(var i=!0,r=g(n),o=r.next();!o.done;o=r.next())if(o=o.value,/^#(?!EXT)/m.test(o)||i)i=!1;else if(o=Xd(e,o),--e.g,A1.includes(o.name)){t=1;break}else o.name=="EXT-X-STREAM-INF"&&(i=!0);for(r=[],i=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=Xd(e,s),UI.includes(s.name)){if(t!=1)throw new L(2,4,4017);s=n.splice(o,n.length-o),n=[],i=[],o=[],u=null,s=g(s);for(var a=s.next();!a.done;a=s.next())a=a.value,/^(#EXT)/.test(a)?(a=Xd(e,a),A1.includes(a.name)?r.push(a):a.name=="EXT-X-MAP"?u=a:a.name=="EXT-X-PART"?o.push(a):a.name=="EXT-X-PRELOAD-HINT"?Y(a,"TYPE")=="PART"?o.push(a):Y(a,"TYPE")=="MAP"&&(a.name="EXT-X-MAP",u=a):i.push(a)):/^#(?!EXT)/m.test(a)||(a=a.trim(),u&&i.push(u),n.push(new v1(a,i,o)),i=[],o=[]);return o.length&&(u&&i.push(u),n.push(new v1("",i,o))),new f1(t,r,n)}r.push(s),s.name=="EXT-X-STREAM-INF"&&(s.attributes.push(new y1("URI",u)),i=!0)}}return new f1(t,r)}function Xd(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new L(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new zi(i);var o;(o=xi(i,/^([^,=]+)(?:,|$)/g))&&(r=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=xi(i,s);)n.push(new y1(o[1],o[2]||o[3])),vo(i)}return new g1(e,t,n,r)}var A1="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),UI="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function w1(){}function x1(e){try{var t=Yd(e);return Xr({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return fr(n)}}function Yd(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new L(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new L(2,1,1004,e);var n=t[0];e=O.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=ln(e):r=On(e),{data:r,contentType:n}}j("shaka.net.DataUriPlugin",w1),w1.parse=x1,fi("data",x1);function ml(){var e=this;this.g=this.h=null,this.C=1,this.u=new Map,this.I=new Map,this.O=new Map,this.O.set("video",new Map),this.O.set("audio",new Map),this.O.set(ye,new Map),this.O.set("image",new Map),this.ob=new Set,this.i=new Map,this.j=null,this.M="",this.Ia=new _I,this.J=-1,this.ea=1/0,this.aa=this.Nb=!1,this.A=new te(function(){if(e.W&&!e.g.continueLoadingWhenPaused&&(e.S.Pa(e.W,"timeupdate"),e.W.paused)){e.S.ia(e.W,"timeupdate",function(){return K1(e)});return}K1(e)}),this.xa=Sl,this.m=null,this.Xa=0,this.s=1/0,this.Fa=this.Aa=this.P=0,this.Z=new Yr,this.G=new Map,this.H=new Map,this.sa=new Map,this.qa=new Map,this.L=new Map,this.ra=new Map,this.Ga=new Map,this.Lb=this.K=!1,this.Kb=new Br(5),this.l=null,this.ka=!0,this.Ha=new Set,this.S=new Ee,this.W=null}p=ml.prototype,p.configure=function(e){this.g=e,this.l&&this.l.configure(this.g)},p.start=function(e,t){var n=this,i;return M(function(r){return r.g==1?(n.h=t,n.K=t.isLowLatencyMode(),T(r,ip(n,[e]),2)):r.g!=3?(i=r.h,n.M=i.uri,T(r,jI(n,i.data,e),3)):r.return(n.m)})},p.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.Z&&(e.push(this.Z.destroy()),this.Z=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.u.clear(),this.sa.clear(),this.qa.clear(),this.L.clear(),this.ra.clear(),this.Ga.clear(),this.Ha.clear(),this.l&&this.l.destroy(),this.S&&(this.S.release(),this.S=null),Promise.all(e)},p.update=function(){var e=this,t,n,i,r,o,s,u,a,l,c,h;return M(function(d){if(d.g==1){if(!Ht(e))return d.return();for(t=[],n=Array.from(e.i.values()),e.s=1/0,e.m.gapCount=0,i=n.filter(function(f){return f.stream.segmentIndex}),r=g(i),o=r.next();!o.done;o=r.next())s=o.value,t.push(OI(e,s));return T(d,Promise.all(t),2)}for(N1(e,i.map(function(f){return f.stream})),u=i.some(function(f){return f.$d==0}),i.length&&!u&&(a=iC,Tl(e,a.Ui),l=i.map(function(f){return f.ec}),e.j.vb(Math.min.apply(Math,W(l))),e.h.updateDuration()),u&&$d(e),c=g(i),o=c.next();!o.done;o=c.next())h=o.value,h.stream.segmentIndex&&!h.stream.segmentIndex.T[0]&&e.h.disableStream(h.stream);V(d)})};function Jd(e,t){return Ht(e)?e.O.get(t.type):t.pf}function OI(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H,F,X,me;return M(function(we){switch(we.g){case 1:for(n=[],i=g(t.R()),r=i.next();!r.done;r=i.next())o=r.value,s=new Ze(o),u=s.g,t.Re&&(0<=t.Pb&&u.add("_HLS_msn",String(t.Pb)),0<=t.Qb&&u.add("_HLS_part",String(t.Qb))),t.Se&&u.add("_HLS_skip","YES"),M0(u)&&Zo(s,u),n.push(s.toString());return Z(we,2),T(we,ip(e,n,!0),4);case 4:a=we.h,le(we,3);break;case 2:throw l=Q(we),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return we.return();if(c=Wd(e.Ia,a.data),c.type!=1)throw new L(2,4,4017);return h=a.uri,h==a.originalUri||t.R().includes(h)||t.si.push(h),d=mn(c.g,"EXT-X-DEFINE"),f=Zd(e,d,h),m=t.stream,y=Jd(e,t),T(we,b1(e,c,m.mimeType,t.R,f),5);case 5:for(v=we.h,A=v.keyIds,S=v.drmInfos,x=function(Ne,Me){return Ne.size===Me.size&&[].concat(W(Ne)).every(function(Et){return Me.has(Et)})},x(m.keyIds,A)||(m.keyIds=A,m.drmInfos=S,e.h.newDrmInfo(m)),E=V1(e,c,y,f,t.R,t.type),w=E.segments,(I=E.bandwidth)&&(m.bandwidth=I),k=xa(m),R=g(w),D=R.next();!D.done;D=R.next())P=D.value,P.ma&&(P.ma.nd=k);m.segmentIndex.je(w,e.j.Hb()),w.length&&(C=Mo(c.g,"EXT-X-MEDIA-SEQUENCE",0),_=(N=At(c.g,"EXT-X-SKIP"))?Number(Y(N,"SKIPPED-SEGMENTS")):0,U=U1(C,w),B=U.Pb,H=U.Qb,t.Pb=B+_,t.Qb=H,F=y.get(C),m.segmentIndex.hb(F)),(X=m.segmentIndex.T[0]||null)&&(t.Oc=X.startTime,me=w[w.length-1],t.ec=me.endTime),At(c.g,"EXT-X-ENDLIST")&&(t.$d=!0),ep(e,c),tp(e,c.g,m.type,f,t.R),V(we)}})}p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(e){this.l&&this.l.banLocation(e)},p.setMediaElement=function(e){this.W=e};function I1(e,t){for(var n=e.J==-1,i=g(t),r=i.next();!r.done;r=i.next()){r=r.value;var o=r.stream.segmentIndex,s=Jd(e,r);if(o=o.T[0]||null){s=g(s);for(var u=s.next();!u.done;u=s.next()){u=g(u.value);var a=u.next().value;if(u.next().value==o.startTime){n&&(e.J=Math.max(e.J,a)),r.rg=a;break}}}}if(!(0>e.J))for(t=g(t),r=t.next();!r.done;r=t.next())n=r.value,ru(e,n.type)&&(i=n.stream.segmentIndex)&&(r=e.J-n.rg,0<r&&(i.T.splice(0,r),i=i.T[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),C1(e,n,i)))}function bI(e,t){if(e.ea==1/0){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.T[0]||null;i!=null&&i.h!=null&&(e.ea=Math.min(e.ea,i.h))}}if(t=e.ea,t!=1/0){for(i=g(e.i.values()),n=i.next();!n.done;n=i.next())if(n=n.value,!ru(e,n.type)){var r=n.stream.segmentIndex;if(r!=null){var o=r.T[0]||null;if(o.h==null)si("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.R(),"Expect AV sync issues!");else for(C1(e,n,o.h-t-o.startTime),n=g(r),r=n.next();!r.done;r=n.next())r.value.wh(t)}}}}function C1(e,t,n){t.Oc+=n,t.ec+=n,e=Jd(e,t);for(var i=g(e),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.set(r,o+n)}t.R()}function jI(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H,F,X;return M(function(me){switch(me.g){case 1:return i=Qe,r=Wd(e.Ia,t),o=mn(r.g,"EXT-X-DEFINE"),s=[],u=[],a=[],e.j=new ee(null,0),e.j.Tc(!0),l=function(){return[n]},c=null,h=new Map,r.type==1?(e.ka=!1,x=mn(r.g,"EXT-X-DEFINE"),h=Zd(e,x,e.M),c=i.ua,E="",w=new Map,T(me,_1(e,e.C++,h,r,l,"",c,E,!0,"Media Playlist",null,w,null,!1,null,!1),7)):(BI(e,o),d=mn(r.g,"EXT-X-MEDIA"),f=mn(r.g,"EXT-X-STREAM-INF"),m=mn(r.g,"EXT-X-IMAGE-STREAM-INF"),y=mn(r.g,"EXT-X-I-FRAME-STREAM-INF"),v=mn(r.g,"EXT-X-SESSION-KEY"),A=mn(r.g,"EXT-X-SESSION-DATA"),S=mn(r.g,"EXT-X-CONTENT-STEERING"),VI(e,A),T(me,HI(e,S),4));case 4:return GI(e,f),JI(e,d),T(me,WI(e,f,v,d,l,e.u),5);case 5:return s=me.h,u=qI(e,d),T(me,KI(e,m,y),6);case 6:a=me.h,me.B(3);break;case 7:I=me.h,e.i.set(n,I),I.stream&&(k=xa(I.stream),I.stream.segmentIndex.qc(function(we){we.ma&&(we.ma.nd=k)})),c=I.stream.type,s.push({id:0,language:xe(E||"und"),disabledUntilTime:0,primary:!0,audio:c=="audio"?I.stream:null,video:c=="video"?I.stream:null,bandwidth:I.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new L(2,7,7001);if(r.type==1&&(Ht(e)&&(F1(e,r),R=e.s,e.A.X(R)),D=Array.from(e.i.values()),Qd(e,D),$d(e),tp(e,r.g,c,h,l)),e.m={presentationTimeline:e.j,variants:s,textStreams:u,imageStreams:a,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.aa||!e.g.hls.disableCodecGuessing){me.B(8);break}for(P=[],C=g(e.m.variants),N=C.next();!N.done;N=C.next())_=N.value,_.audio&&_.audio.codecs===""&&P.push(_.audio.createSegmentIndex()),_.video&&_.video.codecs===""&&P.push(_.video.createSegmentIndex());return T(me,Promise.all(P),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),s.length==1){for(U=[],B=s[0],H=g([B.video,B.audio]),F=H.next();!F.done;F=H.next())(X=F.value)&&!X.segmentIndex&&U.push(X.createSegmentIndex());if(0<U.length)return T(me,Promise.all(U),0)}me.B(0)}})}function FI(e,t){var n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R;return M(function(D){switch(D.g){case 1:if(n=Ia(e.g.hls.mediaPlaylistFullMimeType),!t.length)return D.return(n);if(i=H1(e,t),r=i.segment,o=i.segmentIndex,s=r.R(),u=s[0],a=new Ze(u),l=a.sb.split(".").pop(),c=W1[l])return D.return(Ia(c));if(h=Cn,f=d=null,m=r.ma,!m){D.B(2);break}return y=yr(m.R(),m.Ib(),m.Fb(),e.g.retryParameters),T(D,Ri(e,y,h,{type:0}),3);case 3:if(v=D.h,d=v.data,!m.aesKey){D.B(4);break}return T(D,qh(d,m.aesKey,0),5);case 5:d=D.h;case 4:(f=v.headers["content-type"])&&(f=f.split(";")[0].toLowerCase());case 2:return A=yr(r.R(),r.Ib(),r.Fb(),e.g.retryParameters),T(D,Ri(e,A,h,{type:1}),6);case 6:if(S=D.h,x=S.data,!r.aesKey){D.B(7);break}return T(D,qh(x,r.aesKey,o),8);case 8:x=D.h;case 7:if((E=S.headers["content-type"])&&(E=E.split(";")[0].toLowerCase()),w="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),I=["audio/mp4","video/mp4","video/iso.segment"],Is(he(x))){var P=x,C=he(P);C=new Oe().parse(C);var N=C.Wd();C=C.Ng();var _=[],U=!1,B=!1;switch(N.audio){case"aac":case"aac-loas":_.push("mp4a.40.2"),U=!0;break;case"mp3":_.push("mp4a.40.34"),U=!0;break;case"ac3":_.push("ac-3"),U=!0;break;case"ec3":_.push("ec-3"),U=!0;break;case"opus":_.push("opus"),U=!0}switch(N.video){case"avc":C.gb?_.push(C.gb):_.push("avc1.42E01E"),B=!0;break;case"hvc":C.gb?_.push(C.gb):_.push("hvc1.1.6.L93.90"),B=!0;break;case"av1":_.push("av01.0.01M.08"),B=!0}if(_.length){if(N=U&&!B,U=new Map,B){B=new Zt("video/mp2t"),B.i(P),P=g(B.j());for(var H=P.next();!H.done;H=P.next())H=H.value,U.set(H,H);B.g()}C={type:N?"audio":"video",mimeType:"video/mp2t",codecs:_.join(", "),language:null,height:C.height,width:C.width,channelCount:null,sampleRate:null,closedCaptions:U,ze:null,colorGamut:null}}else C=null;if(k=C)return D.return(k)}else if((w.includes(l)||I.includes(E)||f&&I.includes(f))&&(R=A2(d,x)))return D.return(R);return E?D.return(Ia(E)):f?D.return(Ia(f)):D.return(n)}})}function $d(e){if(Ht(e)){if(e.xa==Al){for(var t,n=t=1/0,i=g(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&(t=Math.min(t,r.ec),n=Math.min(n,r.Oc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.j.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.Bf(t)}}else e.j.vb(D1(e));if(!e.j.u)for(t=g(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.j.Ci(n.h);e.j.mf()}function BI(e,t){var n=new Ze(e.M).g;t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=Y(r,"NAME");var o=Y(r,"VALUE");r=Y(r,"QUERYPARAM"),i&&o&&(e.u.has(i)||e.u.set(i,o)),r&&(i=n.get(r)[0])&&!e.u.has(i)&&e.u.set(r,i)}}function Zd(e,t,n){n=new Ze(n).g;var i=new Map;t=g(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value,s=Y(o,"NAME"),u=Y(o,"VALUE");r=Y(o,"QUERYPARAM"),o=Y(o,"IMPORT"),s&&u&&(i.has(s)||i.set(s,u)),r&&(s=n.get(r)[0])&&!i.has(s)&&i.set(r,s),o&&(r=e.u.get(o))&&i.set(o,r)}return i}function GI(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Y(i,"AUDIO");n=Y(i,"VIDEO");var o=Y(i,"SUBTITLES");if(i=M1(e,i),o){var s=Ot(ye,i);e.H.set(o,s),bn(i,s)}r&&(o=Ot("audio",i),o||(o=e.g.hls.defaultAudioCodec),e.H.set(r,o)),n&&(r=Ot("video",i),r||(r=e.g.hls.defaultVideoCodec),e.H.set(n,r))}}function VI(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Y(i,"DATA-ID");n=Y(i,"URI");var o=Y(i,"LANGUAGE");i=Y(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",Yi([e.M],n,e.u)[0]),o&&r.set("language",o),i&&r.set("value",i),n=new G("sessiondata",r),e.h&&e.h.onEvent(n)}}function HI(e,t){var n,i,r,o,s,u;return M(function(a){if(!e.h||!e.g)return a.return();for(i=g(t),r=i.next();!r.done;r=i.next())if(o=r.value,s=Y(o,"PATHWAY-ID"),u=Y(o,"SERVER-URI"),s&&u){e.l=new xo(e.h),e.l.configure(e.g),e.l.i=[e.M],e.l.setManifestType("HLS"),e.l.h=s,n=Js(e.l,u);break}return T(a,n,0)})}function qI(e,t){var n=T1(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return P1(e,[s],new Map).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}}),n=g(n);for(var i=n.next();!i.done;i=n.next()){var r=Ie(i.value,"GROUP-ID");if((i=e.H.get(r))&&(r=e.I.get(r))){r=g(r);for(var o=r.next();!o.done;o=r.next())o=o.value,o.stream.codecs=i,o.stream.mimeType=np(ye,i)||yl(ye),ko(o.stream)}}return t.filter(function(s){return s})}function ko(e){e.fullMimeTypes=new Set([it(e.mimeType,e.codecs)])}function KI(e,t,n){var i,r;return M(function(o){return o.g==1?(i=t.map(function(s){var u,a;return M(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(Z(l,2),T(l,$I(e,s),4));if(l.g!=2)return u=l.h,l.return(u.stream);if(a=Q(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=Ie(s,"URI"),a=Y(s,"CODECS")||"";if(e.i.has(u))var l=e.i.get(u);else{var c=Y(s,"LANGUAGE"),h=Y(s,"NAME"),d=Y(s,"CHARACTERISTICS"),f=vl(e,e.C++,[u],a,"image",c,!1,h,null,null,d,!1,null,!1),m=Y(s,"RESOLUTION"),y=g(m?m.split("x"):[null,null]),v=y.next().value,A=y.next().value;f.stream.width=Number(v)||void 0,f.stream.height=Number(A)||void 0;var S=Y(s,"BANDWIDTH");S&&(f.stream.bandwidth=Number(S)),e.i.set(u,f),l=f}return s=l,s.stream.codecs!=="mjpg"?null:s.stream}catch(x){if(e.g.hls.ignoreImageStreamFailures)return null;throw x}})),T(o,Promise.all(i),2)):(r=o.h,o.return(r.filter(function(s){return s})))})}function zI(e,t,n){t=t.filter(function(u){var a=Y(u,"URI")||"";return Y(u,"TYPE")!="SUBTITLES"&&a!=""});var i={};t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=m1(r);i[o]?i[o].push(r):i[o]=[r]}for(var s in i)P1(e,i[s],n)}function WI(e,t,n,i,r,o){var s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H,F,X,me,we,Ne,Me,Et,qe;return M(function($e){switch($e.g){case 1:if(s=[],u=new Set,!(0<n.length)){$e.B(2);break}a=g(n),l=a.next();case 3:if(l.done){$e.B(2);break}if(c=l.value,h=Ie(c,"METHOD"),d=Y(c,"KEYFORMAT")||"identity",f=null,h=="NONE"){$e.B(4);break}if(El(h)){m=Yi(r(),Ie(c,"URI"),o),y=m.sort().join(""),e.L.has(y)||(v=ut(m,e.g.retryParameters),A=Ri(e,v,6),e.L.set(y,A)),$e.B(4);break}if(d!="identity"){f=(S=Y1[d])?S(c,""):null,$e.B(6);break}return T($e,z1(e,c,"",r,null,o),9);case 9:f=$e.h;case 6:if(f){if(f.keyIds)for(x=g(f.keyIds),E=x.next();!E.done;E=x.next())w=E.value,u.add(w);s.push(f)}case 4:l=a.next(),$e.B(3);break;case 2:for(I={},k=g(t),R=k.next();!R.done;R=k.next())D=R.value,P=m1(D),I[P]?I[P].push(D):I[P]=[D];C=[];for(N in I)_=I[N],U=_[0],B=Y(U,"FRAME-RATE"),H=Number(Y(U,"AVERAGE-BANDWIDTH"))||Number(Ie(U,"BANDWIDTH")),F=Y(U,"RESOLUTION"),X=g(F?F.split("x"):[null,null]),me=X.next().value,we=X.next().value,Ne=Y(U,"VIDEO-RANGE"),(Me=Y(U,"REQ-VIDEO-LAYOUT"))&&Me.includes(",")&&(Et=Me.split(",").filter(function(ke){return ke=="CH-STEREO"||ke=="CH-MONO"}),Me=Et[0]),Me=Me||"CH-MONO",qe=XI(e,_,i),C.push.apply(C,W(YI(e,qe.audio,qe.video,H,me,we,B,Ne,Me,s,u)));return $e.return(C.filter(function(ke){return ke!=null}))}})}function XI(e,t,n){for(var i={audio:[],video:[]},r=new Map,o=[],s=!1,u=!1,a=g(t),l=a.next();!l.done;l=a.next()){var c=l.value;l=Y(c,"AUDIO");var h=Y(c,"VIDEO"),d=l||h;d&&(o.includes(d)||o.push(d),(c=Y(c,"PATHWAY-ID"))&&r.set(d,c),l?s=!0:h&&(u=!0))}o.length&&n.length&&(a=n.filter(function(y){return o.includes(Ie(y,"GROUP-ID"))}),zI(e,a,r)),a=(r=o.sort().join(","))&&e.I.has(r)?e.I.get(r):[],s?i.audio.push.apply(i.audio,W(a)):u&&i.video.push.apply(i.video,W(a)),l=!1;var f=t.map(function(y){return Ie(y,"URI")});if(u=i.audio.find(function(y){return y&&y.R().find(function(v){return f.includes(v)})}),s=M1(e,t[0]),h=Ot("video",s),(d=Ot("audio",s))&&!h?(u="audio",l=0<i.audio.length):!i.audio.length&&!i.video.length&&d&&h?(u="video",s=[[h,d].join()]):i.audio.length&&u?(u="audio",l=!0):u=i.video.length&&!i.audio.length?"audio":"video",!l){var m=c=d=h=l=null;!a.length&&(n=n.find(function(y){var v=Y(y,"URI")||"",A=Y(y,"TYPE");return y=Ie(y,"GROUP-ID"),A!="SUBTITLES"&&v==""&&o.includes(y)}))&&(l=Y(n,"LANGUAGE"),h=Y(n,"NAME"),d=k1(n),R1(n),c=Y(n,"CHARACTERISTICS"),m=L1(n)),e=ZI(e,t,s,u,l,h,d,c,m),r&&(e.stream.groupId=r),i[e.stream.type]=[e]}return i}function M1(e,t){var n=Y(t,"CODECS")||"";return t=Y(t,"SUPPLEMENTAL-CODECS"),e.aa=0<n.length,e.aa||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(i){return i.split("/")[0]}),e.push.apply(e,W(t))),Hh(e)}function k1(e){return(e=Y(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function L1(e){return(e=Y(e,"SAMPLE-RATE"))?parseInt(e,10):null}function R1(e){return(e=Y(e,"CHANNELS"))?e.includes("/JOC"):!1}function YI(e,t,n,i,r,o,s,u,a,l,c){for(var h=g(n),d=h.next();!d.done;d=h.next())q1(d.value.stream,r,o,s,u,a,null);for(r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=g(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=g(n),u=s.next();!u.done;u=s.next()){var f=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=c),(a=f?f.stream:null)&&(a.drmInfos=l,a.keyIds=c),a&&!u&&(a.bandwidth=i),!a&&u&&(u.bandwidth=i),h=o?o.stream.drmInfos:null,d=f?f.stream.drmInfos:null,f=f?f.R().sort().join(","):"";var m=o?o.R().sort().join(","):"";f=f+" - "+m,u&&a&&!L0(h,d)||e.ob.has(f)||(u={id:e.C++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(u),e.ob.add(f))}return r}function JI(e,t){t=T1(t,"CLOSED-CAPTIONS"),e.ka=t.length==0,t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Y(i,"LANGUAGE");n=xe(r||"und"),r||(r=Y(i,"NAME"))&&(n=r),r=Ie(i,"GROUP-ID"),i=Ie(i,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(r)||e.G.set(r,new Map),e.G.get(r).set(i,n)}}function P1(e,t,n){for(var i=[],r=[],o=new Map,s=g(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=Ie(a,"URI"),a=Ie(a,"GROUP-ID"),i.push(u),r.push(a),o.set(a,u)}if(s=r.sort().join(","),u=t[0],t="",a=Ie(u,"TYPE").toLowerCase(),a=="subtitles"&&(a=ye),a==ye)t=Y(u,"CODECS")||"";else{r=g(r);for(var l=r.next();!l.done;l=r.next())if(l=l.value,e.H.has(l)){t=e.H.get(l);break}}if(r=i.sort().join(","),e.i.has(r))return e.i.get(r);if(l=e.C++,e.l){o=g(o);for(var c=o.next();!c.done;c=o.next()){var h=g(c.value);c=h.next().value,h=h.next().value,(c=n.get(c))&&Io(e.l,l,c,h)}}n=Y(u,"LANGUAGE"),o=Y(u,"NAME"),c=Y(u,"DEFAULT")=="YES",h=a=="audio"?k1(u):null;var d=a=="audio"?R1(u):!1,f=Y(u,"CHARACTERISTICS"),m=Y(u,"FORCED")=="YES";return u=a=="audio"?L1(u):null,i=vl(e,l,i,t,a,n,c,o,h,null,f,m,u,d),i.stream&&(i.stream.groupId=s),e.I.has(s)?e.I.get(s).push(i):e.I.set(s,[i]),e.i.set(r,i),i}function $I(e,t){var n,i,r,o,s,u,a,l,c,h;return M(function(d){return d.g==1?(n=Ie(t,"URI"),i=Y(t,"CODECS","jpeg")||"",e.i.has(n)?d.return(e.i.get(n)):(r=Y(t,"LANGUAGE"),o=Y(t,"NAME"),s=Y(t,"CHARACTERISTICS"),u=vl(e,e.C++,[n],i,"image",r,!1,o,null,null,s,!1,null,!1),(a=Y(t,"RESOLUTION"))?T(d,u.stream.createSegmentIndex(),3):d.B(2))):(d.g!=2&&(l=u.stream.segmentIndex.get(0),c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1])),(h=Y(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(h)),e.i.set(n,u),d.return(u))})}function ZI(e,t,n,i,r,o,s,u,a){for(var l=e.C++,c=[],h=g(t),d=h.next();!d.done;d=h.next()){var f=d.value;d=Ie(f,"URI"),f=Y(f,"PATHWAY-ID"),e.l&&f&&Io(e.l,l,f,d),c.push(d)}if(h=c.sort().join(","),e.i.has(h))return e.i.get(h);e:{if(t=Y(t[0],"CLOSED-CAPTIONS"),i=="video"){if(t){if(t!="NONE"){t=e.G.get(t);break e}e.ka=!1}else if(!t&&e.G.size)for(t=g(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=br(i,n),i=vl(e,l,c,n,i,r,!1,o,s,t,u,!1,a,!1),e.i.set(h,i),i}function vl(e,t,n,i,r,o,s,u,a,l,c,h,d,f){function m(w){var I,k,R,D,P,C,N,_,U,B,H,F,X,me,we,Ne,Me,Et,qe,$e,ke,wt;return M(function(rt){switch(rt.g){case 1:return I=Qe,k=S.R(),Z(rt,2),T(rt,ip(e,S.R(),!0),4);case 4:R=rt.h,le(rt,3);break;case 2:if(D=Q(rt),v.closeSegmentIndex(),e.h.disableStream(v))return rt.return();throw D;case 3:if(w.aborted)return rt.return();if(P=R.uri,P==R.originalUri||k.includes(P)||A.push(P),C=Wd(e.Ia,R.data),C.type!=1)throw new L(2,4,4017);return N=mn(C.g,"EXT-X-DEFINE"),_=Zd(e,N,P),U=!1,(!e.aa&&e.g.hls.disableCodecGuessing||e.ka&&r==I.ua&&!e.g.hls.disableClosedCaptionsDetection)&&0<C.segments.length&&(e.ka=!1,U=!0),B=!e.aa&&e.g.hls.disableCodecGuessing,H=Ht(e),T(rt,_1(e,0,_,C,y,i,r,o,s,u,a,l,c,h,d,f,void 0,U,B),5);case 5:if(F=rt.h,w.aborted)return rt.return();if(X=F.stream,Ht(e)&&!H&&F1(e,C),S.Oc=F.Oc,S.ec=F.ec,S.Se=F.Se,S.Re=F.Re,S.$d=F.$d,S.pf=F.pf,S.Pb=F.Pb,S.Qb=F.Qb,S.Vg=!0,v.segmentIndex=X.segmentIndex,v.encrypted=X.encrypted,v.drmInfos=X.drmInfos,v.keyIds=X.keyIds,v.mimeType=X.mimeType,v.bandwidth=v.bandwidth||X.bandwidth,v.codecs=v.codecs||X.codecs,v.closedCaptions=v.closedCaptions||X.closedCaptions,v.width=v.width||X.width,v.height=v.height||X.height,v.hdr=v.hdr||X.hdr,v.colorGamut=v.colorGamut||X.colorGamut,v.language=="und"&&X.language!="und"&&(v.language=X.language),v.language=v.language||X.language,v.channelsCount=v.channelsCount||X.channelsCount,v.audioSamplingRate=v.audioSamplingRate||X.audioSamplingRate,ko(v),v.drmInfos.length&&e.h.newDrmInfo(v),me=!1,(!l&&v.closedCaptions||l&&v.closedCaptions&&l.size!=v.closedCaptions.size)&&(me=!0),e.m&&me&&e.h.makeTextStreamsForClosedCaptions(e.m),r==I.ua||r==I.ha)for(we=g(e.i.values()),Ne=we.next();!Ne.done;Ne=we.next())Me=Ne.value,Me.Vg||Me.type!=r||(Me.stream.mimeType=X.mimeType,ko(Me.stream));r==I.Ka&&(Et=X.segmentIndex.get(0))&&Et.ma&&(v.mimeType="application/mp4",ko(v)),qe=xa(v),v.segmentIndex.qc(function(ot){ot.ma&&(ot.ma.nd=qe)}),QI(e)&&(e.Nb?Qd(e,[S]):(e.Nb=!0,$e=Array.from(e.i.values()),ke=$e.filter(function(ot){return ot.stream.segmentIndex}),Qd(e,ke),$d(e),wt=e.s,0<wt&&e.A.X(wt))),tp(e,C.g,v.type,_,y),V(rt)}})}function y(){return e.l&&1<n.length?$s(e.l,t):A.concat(E1([e.M],n,e.u))}var v=O1(e,i,r,o,s,u,a,l,c,h,d,f),A=[],S={stream:v,type:r,si:A,R:y,Oc:0,ec:0,pf:new Map,Se:!1,Re:!1,$d:!1,rg:-1,Pb:-1,Qb:-1,Vg:!1},x=null,E=new AbortController;return v.createSegmentIndex=function(){return x||(E=new AbortController,x=new Promise(function(w){w(m(E.signal))}))},v.closeSegmentIndex=function(){x&&!v.segmentIndex&&E.abort(),v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null),x=null},S}function D1(e){var t=1/0;e=g(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.ec));return t}function N1(e,t){var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.qc(function(r){n.push(r)});e.j.le(n)}function Qd(e,t){if(!Ht(e))for(var n=D1(e),i=g(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.dd(0,n);N1(e,t.map(function(o){return o.stream})),e.g.hls.ignoreManifestProgramDateTime?I1(e,t):(bI(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&I1(e,t))}function ru(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function QI(e){if(!e.m)return!1;var t=[],n=[];e=g(e.m.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(r){return r.segmentIndex})||0<n.length&&!n.some(function(r){return r.segmentIndex}))}function _1(e,t,n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S){A=A===void 0?!0:A,S=S===void 0?!0:S;var x,E,w,I,k,R,D,P,C,N,_,U,B,H,F,X,me,we,Ne,Me,Et,qe,$e,ke,wt,rt;return M(function(ot){switch(ot.g){case 1:var Wt=At(i.g,"EXT-X-PLAYLIST-TYPE"),Xt=At(i.g,"EXT-X-ENDLIST");if(Xt=Wt&&Wt.value=="VOD"||Xt,Wt=Wt&&Wt.value=="EVENT"&&!Xt,Wt=!Xt&&!Wt,Xt?Tl(e,Sl):Wt?Tl(e,Al):Tl(e,J1),Ht(e)&&ep(e,i),x=Ht(e)?e.O.get(s):new Map,E=V1(e,i,x,n,r,s),w=E.segments,I=E.bandwidth,P=D=R=k=null,!(0<w.length&&A)){ot.B(2);break}return T(ot,FI(e,w),3);case 3:C=ot.h,s=C.type,u=C.language,c=C.channelCount,m=C.sampleRate,h=C.closedCaptions,R=C.height,k=C.width,D=C.ze,P=C.colorGamut,S&&(v=C.mimeType,o=C.codecs);case 2:if(v){ot.B(4);break}return T(ot,nC(e,s,o,w),5);case 5:v=ot.h;case 4:return T(ot,b1(e,i,v,r,n),6);case 6:if(N=ot.h,_=N.drmInfos,U=N.keyIds,B=N.encrypted,H=N.Yi,B&&!_.length&&!H)throw new L(2,4,4026);return F=O1(e,o,s,u,a,l,c,h,d,f,m,y),F.encrypted=B,F.drmInfos=_,F.keyIds=U,F.mimeType=v,I&&(F.bandwidth=I),ko(F),s=="video"&&(k||R||D||P)&&q1(F,k,R,null,D,null,P),Ht(e)&&ep(e,i),X=w[0].startTime,me=w[w.length-1],we=me.endTime,Ne=new Se(w),F.segmentIndex=Ne,Et=(Me=At(i.g,"EXT-X-SERVER-CONTROL"))?iu(Me,"CAN-SKIP-UNTIL")!=null:!1,qe=Me?iu(Me,"CAN-BLOCK-RELOAD")!=null:!1,$e=Mo(i.g,"EXT-X-MEDIA-SEQUENCE",0),ke=U1($e,w),wt=ke.Pb,rt=ke.Qb,ot.return({stream:F,type:s,si:[],R:r,Oc:X,ec:we,Se:Et,Re:qe,$d:!1,rg:-1,Pb:wt,Qb:rt,pf:x,Vg:!1})}})}function U1(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Pb:e,Qb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].preload||(e++,n=0),{Pb:e,Qb:n}):(e++,t.m&&(n=0),{Pb:e,Qb:n})}function O1(e,t,n,i,r,o,s,u,a,l,c,h){var d=np(n,t)||yl(n),f=[];if(a){a=g(a.split(","));for(var m=a.next();!m.done;m=a.next())f.push(m.value)}return a=void 0,m=null,n==ye?a=f.includes("public.accessibility.transcribes-spoken-dialog")&&f.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":f.includes("public.accessibility.describes-video")&&(m="visually impaired"),f.length||a!=="subtitle"||f.push("subtitle"),e={id:e.C++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==ye?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:xe(i||"und"),originalLanguage:i,label:o,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:f,forced:l,channelsCount:s,audioSamplingRate:c,spatialAudio:h,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:m,external:!1,fastSwitching:!1,fullMimeTypes:new Set},ko(e),e}function b1(e,t,n,i,r){var o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U,B,H;return M(function(F){switch(F.g){case 1:if(o=new Map,t.segments){for(s=g(t.segments),u=s.next();!u.done;u=s.next())if(a=u.value,l=mn(a.g,"EXT-X-KEY"),c=null,l.length)for(c=B1(e,t,a.g,i,r),h=g(l),d=h.next();!d.done;d=h.next())f=d.value,o.set(f,c)}y=m=!1,v=[],A=new Set,S=g(o),x=S.next();case 2:if(x.done){F.B(4);break}if(E=x.value,w=g(E),I=w.next().value,k=w.next().value,R=I,D=k,P=Ie(R,"METHOD"),P=="NONE"){F.B(3);break}if(m=!0,C=Y(R,"KEYFORMAT")||"identity",N=null,El(P)){y=!0,F.B(3);break}if(C!="identity"){N=(_=Y1[C])?_(R,n):null,F.B(6);break}return T(F,z1(e,R,n,i,D,r),8);case 8:N=F.h;case 6:if(N){if(N.keyIds)for(U=g(N.keyIds),B=U.next();!B.done;B=U.next())H=B.value,A.add(H);v.push(N)}case 3:x=S.next(),F.B(2);break;case 4:return F.return({drmInfos:v,keyIds:A,encrypted:m,Yi:y})}})}function j1(e,t,n,i,r){if(!O.crypto||!O.crypto.subtle)throw ce("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new L(2,4,4042);var o=0,s=Y(t,"IV","");if(s){var u=or(s.substr(2));if(u.byteLength!=16)throw new L(2,4,4048)}else o=Mo(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+o,!e.qa.has(n)){var a={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(Ie(t,"METHOD")){case"AES-256":a.bitsKey=256;break;case"AES-256-CTR":a.bitsKey=256,a.blockCipherMode="CTR"}a.fetchKey=function(){var l,c,h,d,f,m,y;return M(function(v){if(v.g==1)return l=Yi(i(),Ie(t,"URI"),r),c=l.sort().join(""),e.L.has(c)||(h=ut(l,e.g.retryParameters),d=Ri(e,h,6),e.L.set(c,d)),T(v,e.L.get(c),2);if(v.g!=3){if(f=v.h,!f.data||f.data.byteLength!=a.bitsKey/8)throw new L(2,4,4049);return m={name:a.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:a.bitsKey},y=a,T(v,O.crypto.subtle.importKey("raw",f.data,m,!0,["decrypt"]),3)}y.cryptoKey=v.h,a.fetchKey=void 0,V(v)})},e.qa.set(n,a)}return e.qa.get(n)}function ep(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var o=At(i[r].g,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(i=At(t.g,"EXT-X-TARGETDURATION"),!i)throw new L(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=At(t.g,"EXT-X-PART-INF"))&&(e.P=Number(Ie(r,"PART-TARGET"))),t=At(t.g,"EXT-X-SERVER-CONTROL"),e.K&&e.P?(e.s=e.Lb?5*e.P<=n?Math.min(e.P,e.s):Math.min(n,e.s):Math.min(e.P,e.s),e.Fa=t?Number(Ie(t,"PART-HOLD-BACK")):0):(e.s=Math.min(n,e.s),n=t?iu(t,"HOLD-BACK"):null,e.Aa=n?Number(n.value):0),e.Xa=Math.max(i,e.Xa)}function F1(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Fa)t=e.Fa;else if(e.Aa)t=e.Aa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Xa*n}e.j.Ei(0),e.j.nh(t),e.j.Tc(!1)}function B1(e,t,n,i,r){var o=At(n,"EXT-X-MAP");if(!o)return null;var s=Ie(o,"URI"),u=Yi(i(),s,r);if(s=[u.toString(),Y(o,"BYTERANGE","")].join("-"),!e.sa.has(s)){var a=void 0,l=null;n=g(n);for(var c=n.next();!c.done;c=n.next())c=c.value,c.name=="EXT-X-KEY"?El(Ie(c,"METHOD"))&&c.id<o.id&&(a=j1(e,c,t,i,r)):c.name=="EXT-X-BYTERANGE"&&c.id<o.id&&(l=c);t=eC(u,o,l,a),e.sa.set(s,t)}return e.sa.get(s)}function eC(e,t,n,i){var r=0,o=null;return t=Y(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(r=t.split("@"),o=Number(r[0]),r=Number(r[1]),o=r+o-1,i&&(n=o+1-r,n%16&&(o+=16-n%16))),new bt(function(){return e},r,o,null,null,null,i)}function tC(e,t,n,i,r,o,s,u,a){var l=i.g,c=At(l,"EXTINF"),h=0,d=0,f=null;i.Yb.length&&(e.m.isLowLatency=!0);var m=null;if(!e.g.hls.ignoreManifestProgramDateTime){var y=At(l,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(m=Vi(y.value))}var v=Hi;if(At(l,"EXT-X-GAP")&&(e.m.gapCount++,v=2),!c){if(i.Yb.length==0)throw new L(2,4,4024,"EXTINF");if(!e.K)return null}var A=[];y=!1;var S=null,x=!1,E=!1;if(e.K&&i.Yb.length){h=t&&O.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var w=m,I={},k=0;k<i.Yb.length;I={Pd:I.Pd,Ge:I.Ge},k++){var R=i.Yb[k],D=k==0?n:A[A.length-1],P=k==0?r:D.endTime,C=Number(Y(R,"DURATION"))||e.P;if(C){var N=P+C,_=0,U=null;if(R.name=="EXT-X-PRELOAD-HINT"?(_=(_=Y(R,"BYTERANGE-START"))?Number(_):0,(D=Y(R,"BYTERANGE-LENGTH"))?U=_+Number(D)-1:_&&(U=Number.MAX_SAFE_INTEGER)):(_=Y(R,"BYTERANGE"),U=g(G1(D,_)),_=U.next().value,U=U.next().value),I.Ge=Y(R,"URI"),I.Ge){D=Hi,Y(R,"GAP")=="YES"&&(e.m.gapCount++,D=2,x=!0),I.Pd=null;var B=function(F){return function(){return F.Pd==null&&(F.Pd=Yi(u(),F.Ge,o)),F.Pd}}(I);h&&0<=_&&U!=null&&(S=B,y=!0),P=new ne(P,N,B,_,U,t,0,0,1/0,[],"",null,w,D,a),R.name=="EXT-X-PRELOAD-HINT"&&(P.Wg(),E=!0),Y(R,"INDEPENDENT")!="YES"&&0<k&&P.nf(),A.push(P),w&&(w+=C)}}}}if(c){if(c=Number(c.value.split(",")[0]),c==0)return null;h=r+c}else if(A.length)h=A[A.length-1].endTime;else return null;y&&(x||A[0].$a!=0?(y=!1,S=null):A=[]),(c=At(l,"EXT-X-BYTERANGE"))?(f=g(G1(n,c.value)),d=f.next().value,f=f.next().value):A.length&&(d=A[0].$a,f=A[A.length-1].Ja),n="",c=null,s=="image"&&(n="1x1",s=At(l,"EXT-X-TILES"))&&(n=Ie(s,"LAYOUT"),(s=Y(s,"DURATION"))&&(c=Number(s)));var H=null;return t=new ne(r,h,function(){return S?S():(H==null&&(H=Yi(u(),i.h,o)),H||[])},d,f,t,0,0,1/0,A,n,c,m,v,a,0<A.length&&!!i.h),y&&(e.Lb=!0,t.ji(),E&&t.Wg()),t}function G1(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.Ja+1,i=n+t-1),[n,i]}function tp(e,t,n,i,r){if(n=="video"||n=="audio"){var o=e.j.m;if(o&&!ru(e,n))for(t=mn(t,"EXT-X-DATERANGE"),t=t.sort(function(y,v){return y=Ie(y,"START-DATE"),v=Ie(v,"START-DATE"),y<v?-1:y>v?1:0}),n=0;n<t.length;n++){var s=t[n],u=Ie(s,"ID");if(!e.Ha.has(u)){var a=Ie(s,"START-DATE"),l=Vi(a);if(!isNaN(l)){a=Math.max(0,l-o);var c=null,h=Y(s,"END-DATE");if(h&&(h=Vi(h),!isNaN(h)&&(c=h-o,0>c))||c==null&&(h=Y(s,"DURATION")||Y(s,"PLANNED-DURATION"))&&(h=parseFloat(h),isNaN(h)||(c=a+h),0>l-o+h))continue;h=Y(s,"CLASS")||"com.apple.quicktime.HLS";var d=Y(s,"END-ON-NEXT")=="YES";if(c==null&&d){for(d=n+1;d<t.length;d++){var f=Y(t[d],"CLASS")||"com.apple.quicktime.HLS";if(h==f&&(f=Ie(t[d],"START-DATE"),f=Vi(f),!isNaN(f)&&f&&f>l)){c=Math.max(0,f-o);break}}if(c==null)continue}for(l="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),d=[],s=g(s.attributes),f=s.next();!f.done;f=s.next())if(f=f.value,!l.includes(f.name)){var m=S1(f.value,i);(f.name=="X-ASSET-URI"||f.name=="X-ASSET-LIST")&&(m=Yi(r(),f.value,i)[0]),d.push({key:f.name,description:"",data:m,mimeType:null,pictureType:null})}d.length&&e.h.onMetadata(h,a,c,d),e.Ha.add(u)}}}}}function V1(e,t,n,i,r,o){var s=t.segments,u=void 0,a=Mo(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=Mo(t.g,"EXT-X-MEDIA-SEQUENCE",0),c=At(t.g,"EXT-X-SKIP"),h=c?Number(Y(c,"SKIPPED-SEGMENTS")):0,d=l+h,f=0;Ht(e)&&n.has(d)&&(f=n.get(d)),f===0&&e.xa==Al&&0<n.size&&!n.has(d)&&(f=e.j.Hb());var m=[],y=null;c=[];for(var v=0;v<s.length;v++){var A=s[v],S=v==0?f:y.endTime;d=l+h+v,At(A.g,"EXT-X-DISCONTINUITY")&&a++;for(var x=g(A.g),E=x.next();!E.done;E=x.next())E=E.value,E.name=="EXT-X-KEY"&&(El(Ie(E,"METHOD"))?u=j1(e,E,t,r,i):u=void 0);n.set(d,S),x=B1(e,t,A.g,r,i),!e.K&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.K=e.h.isLowLatencyMode()),(S=tC(e,x,y,A,S,i,o,r,u))&&((y=Mo(A.g,"EXT-X-BITRATE"))?c.push({bitrate:y,duration:S.endTime-S.startTime}):c.length&&(y=c.pop(),y.duration+=S.endTime-S.startTime,c.push(y)),y=S,S.j=a,ru(e,o)&&e.J!=null&&d<e.J||m.push(S))}if(t=void 0,c.length&&(t=c.reduce(function(w,I){return w+I.duration},0),t=Math.round(c.reduce(function(w,I){return w+I.bitrate*I.duration},0)/t*1e3)),c=m.some(function(w){return w.h!=null})){for(n={},i=0;i<m.length;n={Ed:n.Ed,Dd:n.Dd,Ae:n.Ae,mc:n.mc,zd:n.zd},i++)if(n.mc=m[i],n.mc.h==null)for(n.Dd=0,n.Ed=i,r=function(w){return function(){var I=m[w.Ed];if(I){if(I.h!=null)return I.h+w.Dd;w.Dd-=I.endTime-I.startTime,w.Ed+=1}return null}}(n),n.zd=0,n.Ae=i,s=function(w){return function(){var I=m[w.Ae];if(I){if(I!=w.mc&&(w.zd+=I.endTime-I.startTime),I.h!=null)return I.h+w.zd;--w.Ae}return null}}(n);n.mc.h==null;)n.mc.h=s(),n.mc.h==null&&(n.mc.h=r())}if(c)for(n=g(m),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=g(r.g),s=r.next();!s.done;s=r.next())s=s.value,s.h=i,i+=s.endTime-s.startTime;if(n=e.ea,c&&n!=1/0&&!ru(e,o))for(e=g(m),i=e.next();!i.done;i=e.next())i.value.wh(n);return{segments:m,bandwidth:t}}function np(e,t){if(e==ye){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function yl(e){return e==ye?"text/vtt":X1[e].mp4}function H1(e,t){e=Ht(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.tc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function nC(e,t,n,i){var r,o,s,u,a,l,c,h,d,f,m,y,v,A;return M(function(S){switch(S.g){case 1:return r=Cn,o=H1(e,i),s=o.segment,s.status==2?S.return(yl(t)):(u=s.R(),a=new Ze(u[0]),l=a.sb.split(".").pop(),c=X1[t],(h=c[l])||(h=W1[l])||(h=np(t,n))?S.return(h):(f=1,m=ut(u,e.g.retryParameters),Z(S,2),m.method="HEAD",T(S,Ri(e,m,r,{type:f}),4)));case 4:y=S.h,d=y.headers["content-type"],le(S,3);break;case 2:if(v=Q(S),!v||v.code!=1002&&v.code!=1001){S.B(3);break}return m.method="GET",T(S,Ri(e,m,r,{type:f}),6);case 6:A=S.h,d=A.headers["content-type"];case 3:return d?S.return(d.toLowerCase().split(";")[0]):S.return(yl(t))}})}function q1(e,t,n,i,r,o,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=o||void 0,e.colorGamut=s||void 0)}function ip(e,t,n){return Ri(e,ut(t,e.g.retryParameters),0,{type:n?2:3})}function K1(e){var t,n,i,r,o,s;return M(function(u){switch(u.g){case 1:return e.h?(Z(u,2),t=Date.now(),T(u,e.update(),4)):u.return();case 4:n=Date.now(),Ht(e)&&(i=(n-t)/1e3,e.Kb.sample(1,i),r=e.s,o=Math.max(0,r-Ku(e.Kb)),e.A.X(o)),le(u,3);break;case 2:if(s=Q(u),!e.h)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),u.return();s.severity=1,e.h.onError(s),e.A.X(.1);case 3:if(!e.h)return u.return();e.h.onManifestUpdated(),V(u)}})}function Ht(e){return e.xa!=Sl}function Tl(e,t){e.xa=t,e.j&&e.j.Tc(!Ht(e)),Ht(e)||e.A.stop()}function Ri(e,t,n,i){if(!e.Z)throw new L(2,7,7001);return t=e.h.networkingEngine.request(n,t,i),gr(e.Z,t),t.promise}function El(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function z1(e,t,n,i,r,o){var s,u,a,l,c,h,d,f,m,y,v,A,S,x,E;return M(function(w){switch(w.g){case 1:if(n=="video/mp2t")throw new L(2,4,4040);if(Hu())throw new L(2,4,4041);if(s=Ie(t,"METHOD"),u=["SAMPLE-AES","SAMPLE-AES-CTR"],!u.includes(s))return w.return(null);if(a=Yi(i(),Ie(t,"URI"),o),a[0].startsWith("data:text/plain;base64,")){l=ci(ln(a[0].split("data:text/plain;base64,").pop())),w.B(2);break}return c=a.sort().join(""),e.ra.has(c)||(h=ut(a,e.g.retryParameters),d=Ri(e,h,6),e.ra.set(c,d)),T(w,e.ra.get(c),3);case 3:f=w.h,l=ci(f.data);case 2:if(m="00000000000000000000000000000000",!r){w.B(4);break}if(e.Ga.has(r)){y=e.Ga.get(r),w.B(5);break}return v=yr(r.R(),r.Ib(),r.Fb(),e.g.retryParameters),A=Cn,T(w,Ri(e,v,A,{type:0}),6);case 6:S=w.h,y=x2(S.data),e.Ga.set(r,y);case 5:y&&(m=y);case 4:return x=new Map,x.set(m,l),E="cenc",s=="SAMPLE-AES"&&(E="cbcs"),w.return(_0(x,E))}})}j("shaka.hls.HlsParser",ml);var W1={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},X1={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Y1={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new L(2,4,4040);if(Hu())throw new L(2,4,4041);if(t=Ie(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),sr("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Ie(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ie(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Ie(e,"URI"),t=Yd(t.split("?")[0]),t=he(t.data),n=sr("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Y(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Ie(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Ie(e,"URI"),e=Yd(e.split("?")[0]),e=he(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=oa(e,t,new Set,0),sr("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Sl="VOD",J1="EVENT",Al="LIVE",iC={Ui:Sl,ol:J1,zl:Al};Rn["application/x-mpegurl"]=function(){return new ml},Rn["application/vnd.apple.mpegurl"]=function(){return new ml};function rC(e){var t=0,n=Ut(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,r&1||r+e>n.byteLength){n=[];break e}var o=he(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function wl(e){if(e=$1(e))e:{e=g(kn(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Ln(t.value,"LA_URL")){e=nt(t);break e}e=""}else e="";return e}function $1(e){return e=ln(nt(e)),e=rC(e).filter(function(t){return t.type===oC})[0],e?(e=ai(e.value,!0),(e=Zr(e,"WRMHEADER"))?e:null):null}var oC=1,sC=new Map().set("com.microsoft.playready",wl).set("com.microsoft.playready.recommendation",wl).set("com.microsoft.playready.software",wl).set("com.microsoft.playready.hardware",wl);function Lo(e){if(!tT){tT=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);xl=ge("ftyp",t,i,t,n),t=ge("dref",vC),rp=ge("dinf",t)}this.g=e}function Ro(e){for(var t=[],n=g(e.g),i=n.next();!i.done;i=n.next()){var r=t,o=r.push,s=i.value;i=ge;var u=s.id+1,a=s.stream.width||0,l=s.stream.height||0;s.type=="audio"&&(l=a=0);var c=s.duration*s.timescale,h=Math.floor(c/(Ji+1));switch(c=Math.floor(c%(Ji+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(W(Ve(u,4)),[0,0,0,0],W(Ve(h,4)),W(Ve(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],W(Ve(a,2)),[0,0],W(Ve(l,2)),[0,0])),u=ge("tkhd",u),a=ge,h=s.duration*s.timescale,l=Math.floor(h/(Ji+1)),h=Math.floor(h%(Ji+1)),c=s.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(W(Ve(s.timescale,4)),W(Ve(l,4)),W(Ve(h,4)),W(Ve(c,2)),[0,0])),l=ge("mdhd",l),h=s,c=new Uint8Array([]),h.type){case"video":c=aC;break;case"audio":c=lC}h=ge("hdlr",c);e:{switch(s.type){case"video":s=ge("minf",ge("vmhd",fC),rp,Z1(s));break e;case"audio":s=ge("minf",ge("smhd",gC),rp,Z1(s));break e}s=new Uint8Array([])}s=a("mdia",l,h,s),i=i("trak",u,s),o.call(r,i)}for(t=ze.apply(xt,W(t)),o=e.g[0],n=ge,i=o.duration*o.timescale,r=Math.floor(i/(Ji+1)),i=Math.floor(i%(Ji+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(W(Ve(o.timescale,4)),W(Ve(r,4)),W(Ve(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=ge("mvhd",r),i=[],e=g(e.g),a=e.next();!a.done;a=e.next())s=i,u=s.push,a=new Uint8Array([0,0,0,0].concat(W(Ve(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),a=ge("trex",a),u.call(s,a);if(e=ze.apply(xt,W(i)),e=ge("mvex",e),i=[],o.encrypted){for(o=g(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=g(s.initData),u=s.next();!u.done;u=s.next())i.push(u.value.initData);o=ze.apply(xt,W(i))}else o=new Uint8Array([]);return e=n("moov",r,t,e,o),t=new Uint8Array(xl.byteLength+e.byteLength),t.set(xl),t.set(e,xl.byteLength),t}function Z1(e){var t=ge,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.Qa.byteLength)var r=ge("avcC",e.Qa);else{r=ge;for(var o=7,s=[],u=[],a=0,l=0,c=0,h=0;h<e.wb.length;h++){var d=eT(e.wb[h]);switch(d[0]&31){case 7:s.push(d),o+=d.length+2;break;case 8:u.push(d),o+=d.length+2}}for(0<s.length&&(a=s[0][1],c=s[0][2],l=s[0][3]),o=new Uint8Array(o),h=0,o[h++]=1,o[h++]=a,o[h++]=c,o[h++]=l,o[h++]=255,o[h++]=224|s.length,a=0;a<s.length;a++)o[h++]=(s[a].length&65280)>>8,o[h++]=s[a].length&255,o.set(s[a],h),h+=s[a].length;for(o[h++]=u.length,s=0;s<u.length;s++)o[h++]=(u[s].length&65280)>>8,o[h++]=u[s].length&255,o.set(u[s],h),h+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(W(Ve(n,2)),W(Ve(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=Q1(e),s=new Uint8Array([]),e.encrypted&&(s=Po(e),i="encv"),n=ge(i,n,r,u,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Qa.byteLength&&(n=ge("hvcC",e.Qa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(W(Ve(i,2)),W(Ve(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=Q1(e),s=new Uint8Array([]),e.encrypted&&(s=Po(e),r="encv"),n=ge(r,i,n,u,s));break;case"audio":e.codecs.includes("mp3")?e=ge(".mp3",ou(e)):e.codecs.includes("ac-3")?(n=ge("dac3",e.Ca),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=Po(e),i="enca"),e=ge(i,ou(e),n,r)):e.codecs.includes("ec-3")?(n=ge("dec3",e.Ca),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=Po(e),i="enca"),e=ge(i,ou(e),n,r)):e.codecs.includes("opus")?(n=ge("dOps",e.Ca),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=Po(e),i="enca"),e=ge(i,ou(e),n,r)):(0<e.Ca.byteLength?n=ge("esds",e.Ca):(n=ge,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=br("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=l[2*s]),s=parseInt(a.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(W(Ve(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=Po(e),i="enca"),e=ge(i,ou(e),n,r)),n=e}return e=ge("stsd",mC,n),t("stbl",e,ge("stts",cC),ge("stsc",hC),ge("stsz",pC),ge("stco",dC))}function Q1(e){if(!e.Va&&!e.Wa)return new Uint8Array([]);var t=e.Wa;return e=new Uint8Array([].concat(W(Ve(e.Va,4)),W(Ve(t,4)))),ge("pasp",e)}function ou(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(W(Ve(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Po(e){for(var t=ge,n=e.codecs.substring(0,e.codecs.indexOf(".")),i=0,r=0;r<n.length;r+=1)i|=n.charCodeAt(r)<<8*(n.length-r-1);n=new Uint8Array([].concat(W(Ve(i,4)))),n=ge("frma",n),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),i=ge("schm",i),r=ge;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=g(e.stream.drmInfos);for(var s=e.next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=g(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=eT(u.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=ge("tenc",e,o),t("sinf",n,i,r("schi",o))}function su(e){var t=[];e=g(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,o=ge,s=new Uint8Array([0,0,0,0].concat(W(Ve(n.data?n.data.Sb:0,4))));s=ge("mfhd",s);var u,a=n.data?n.data.ub:[],l=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var c=a[u].flags;l[u+4]=c.mb<<4|c.qb<<2|c.pb}a=ge("sdtp",l);var h=a.length+92;l=ge,u=new Uint8Array([0,0,0,58].concat(W(Ve(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=ge("tfhd",u),c=n.data?n.data.baseMediaDecodeTime:0;var d=Math.floor(c%(Ji+1));c=new Uint8Array([1,0,0,0].concat(W(Ve(Math.floor(c/(Ji+1)),4)),W(Ve(d,4)))),c=ge("tfdt",c);var f=h;h=n.data?n.data.ub:[],d=h.length;var m=12+16*d,y=new Uint8Array(m);for(f+=8+m,y.set([n.type==="video"?1:0,0,15,1].concat(W(Ve(d,4)),W(Ve(f,4))),0),f=0;f<d;f++){var v=h[f];m=Ve(v.duration,4);var A=Ve(v.size,4),S=v.flags;v=Ve(v.yb,4),y.set([].concat(W(m),W(A),[S.zb<<2|S.mb,S.qb<<6|S.pb<<4|S.Ab,S.kb&61440,S.kb&15],W(v)),12+16*f)}h=ge("trun",y),a=l("traf",u,c,h,a),o=o("moof",s,a),r.call(i,t,[o,uC(n)])}return ze.apply(xt,W(t))}function uC(e){return e=(e.data?e.data.ub:[]).map(function(t){return t.data}),e=ze.apply(xt,W(e)),ge("mdat",e)}function Ve(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function eT(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function ge(e){var t=An.apply(1,arguments),n=nT[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],nT[e]=n);for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var tT=!1,Ji=Math.pow(2,32)-1,nT={},aC=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),lC=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),cC=new Uint8Array([0,0,0,0,0,0,0,0]),hC=new Uint8Array([0,0,0,0,0,0,0,0]),dC=new Uint8Array([0,0,0,0,0,0,0,0]),pC=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),fC=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),gC=new Uint8Array([0,0,0,0,0,0,0,0]),mC=new Uint8Array([0,0,0,0,0,0,0,1]),xl=new Uint8Array([]),vC=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),rp=new Uint8Array([]);function op(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.C=new Br(5),this.s=new te(function(){yC(e)}),this.A=new Yr,this.m=new Map}p=op.prototype,p.configure=function(e){this.g=e},p.start=function(e,t){var n=this;return M(function(i){if(i.g==1)return n.l=[e],n.h=t,T(i,sp(n),2);if(!n.h)throw new L(2,7,7001);return i.return(n.j)})};function yC(e){var t;M(function(n){switch(n.g){case 1:return Z(n,2),T(n,sp(e),4);case 4:le(n,3);break;case 2:t=Q(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();V(n)}})}p.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.s!=null&&(this.s.stop(),this.s=null),this.m.clear(),this.A.destroy()},p.update=function(){var e=this,t;return M(function(n){if(n.g==1)return Z(n,2),T(n,sp(e),4);if(n.g!=2)return le(n,0);if(t=Q(n),!e.h||!t)return n.return();e.h.onError(t),V(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){};function sp(e){var t,n,i,r,o,s,u;return M(function(a){if(a.g==1)return t=ut(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5}),gr(e.A,r),T(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,c=o.data,h=e.g.mss.manifestPreprocessor;if(h!=Ra){if(He("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=n1(c,"SmoothStreamingMedia"),!c)throw new L(2,4,4046,l);h(c),c=On(c.outerHTML)}var d=ph(c,"SmoothStreamingMedia");if(!d)throw new L(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=Pa&&l(d),e.i||(e.i=new ee(null,0)),l=Te(d,"IsLive",gh,!1))throw new L(2,4,4047);e.i.Tc(!l),h=Te(d,"TimeScale",It,1e7),c=Te(d,"DVRWindowLength",It),l&&(c===0||isNaN(c))&&(c=1/0);var f=Te(d,"CanSeek",gh,!1);c===0&&f&&(c=1/0),f=null,c&&0<c&&(f=c/h),l&&!isNaN(e.g.availabilityWindowOverride)&&(f=e.g.availabilityWindowOverride),f==null&&(f=1/0),e.i.Bf(f),c=Te(d,"Duration",It,1/0),l||e.i.vb(c/h),l={variants:[],textStreams:[],timescale:h,duration:c/h},f=Ue(d,"Protection");var m;for(h=e.g.mss.keySystemsBySystemId,c=[],f=g(f),m=f.next();!m.done;m=f.next())c=c.concat(Ue(m.value,"ProtectionHeader"));if(c.length){for(f=[],m=0;m<c.length;m++){var y=c[m],v=y.attributes.SystemID.toLowerCase(),A=h[v];if(A){var S=$1(y);if(S)e:{S=g(kn(S,"DATA"));for(var x=S.next();!x.done;x=S.next())if(x=Ln(x.value,"KID")){S=ln(nt(x)),S=new Uint8Array([S[3],S[2],S[1],S[0],S[5],S[4],S[7],S[6]].concat(W(S.slice(8)))),S=ci(S);break e}S=null}else S=null;x=ln(nt(y)),v=or(v.replace(/-/g,"")),v=[{initData:oa(x,v,new Set,0),initDataType:"cenc",keyId:S}],v=sr(A,"cenc",v),S&&v.keyIds.add(S),(A=sC.get(A))&&(v.licenseServerUri=A(y)),f.push(v)}}h=f}else h=[];for(m=h,f=[],h=[],c=[],d=Ue(d,"StreamIndex"),d=g(d),y=d.next();!y.done;y=d.next()){y=y.value,A=Ue(y,"QualityLevel"),v=l.timescale,S=l.duration,x=Ue(y,"c");for(var E=[],w=0,I=0;I<x.length;++I){var k=x[I],R=x[I+1],D=Te(k,"t",It),P=Te(k,"d",It);if(k=Te(k,"r",aa),!P)break;if(D=D!=null?D:w,k=k||0,0>k)if(R){if(R=Te(R,"t",It),R==null)break;if(D>=R)break;k=Math.ceil((R-D)/P)-1}else{if(S==1/0)break;if(D/v>=S)break;k=Math.ceil((S*v-D)/P)-1}for(R=0;R<=k;++R)w=D+P,E.push({start:D/v,end:w/v,Ch:D}),D=w}for(v=E,A=g(A),S=A.next();!S.done;S=A.next())(S=TC(e,y,S.value,v,m,l))&&(S.type!="audio"||e.g.disableAudio?S.type!="video"||e.g.disableVideo?S.type!=ye||e.g.disableText||c.push(S):h.push(S):f.push(S))}for(d=[],f=g(0<f.length?f:[null]),m=f.next();!m.done;m=f.next())for(m=m.value,y=g(0<h.length?h:[null]),S=y.next();!S.done;S=y.next())A=d,v=A.push,S=S.value,x=0,m&&m.bandwidth&&0<m.bandwidth&&(x+=m.bandwidth),S&&S.bandwidth&&0<S.bandwidth&&(x+=S.bandwidth),S={id:e.u++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!S&&S.primary,audio:m,video:S,bandwidth:x,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(A,S);l.variants=d,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.mf()),Promise.resolve(),s=Date.now(),u=(s-i)/1e3,e.C.sample(1,u),V(a)})}function TC(e,t,n,i,r,o){var s=t.attributes.Type;if(s!=="audio"&&s!=="video"&&s!=="text")return ce("Ignoring unrecognized type:",s),null;var u=t.attributes.Language,a=e.u++,l=Te(n,"Bitrate",yi),c=Te(n,"MaxWidth",yi),h=Te(n,"MaxHeight",yi),d=Te(n,"Channels",yi),f=Te(n,"SamplingRate",yi),m=o.duration;i.length&&(m=i[i.length-1].end-i[0].start);var y=e.i.getDuration();e.i.vb(Math.min(m,y));var v={id:a,originalId:t.attributes.Name||String(a),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:h||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:xe(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:d,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((r=t.attributes.Subtype)&&((r=IC[r])&&v.roles.push(r),r==="main"&&(v.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(s==="audio")r="AAC";else if(s==="video")return ce('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!xC.includes(r.toUpperCase()))return ce("Codec not supported:",r),null;switch(n=EC(n,s,r,v),v.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return ce("Quality unsupported without CodecPrivateData",s),null;v.type="audio",v.mimeType="mss/audio/mp4",v.codecs=SC(r,n);break;case"video":if(!n)return ce("Quality unsupported without CodecPrivateData",s),null;v.type="video",v.mimeType="mss/video/mp4",v.codecs=AC(n);break;case"text":v.type=ye,v.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(v.codecs="stpp")}return v.fullMimeTypes.add(it(v.mimeType,v.codecs)),v.createSegmentIndex=function(){if(v.segmentIndex)return Promise.resolve();if(e.m.has(v.id))var A=e.m.get(v.id);else A=[],v.type=="video"&&(A=v.mssPrivateData.codecPrivateData.split("00000001").slice(1)),A={id:v.id,type:v.type,codecs:v.codecs,encrypted:v.encrypted,timescale:v.mssPrivateData.timescale,duration:v.mssPrivateData.duration,wb:A,Ca:new Uint8Array([]),Qa:new Uint8Array([]),Va:0,Wa:0,data:null,stream:v},A=Ro(new Lo([A])),e.m.set(v.id,A);return A=wC(e,new bt(function(){return[]},0,null,xa(v),v.mssPrivateData.timescale,A),v,t,i),v.segmentIndex=new Se(A),Promise.resolve()},v.closeSegmentIndex=function(){v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null)},v}function EC(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function SC(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function AC(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function wC(e,t,n,i,r){var o=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[];var s={};r=g(r);for(var u=r.next();!u.done;s={Ld:s.Ld},u=r.next())s.Ld=u.value,i.push(new ne(s.Ld.start,s.Ld.end,function(a){return function(){return gt(e.l,[o.replace("{start time}",String(a.Ld.Ch))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return i}j("shaka.mss.MssParser",op);var xC="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),IC={CAPT:"main",SUBT:"alternate",DESC:"main"};Rn["application/vnd.ms-sstr+xml"]=function(){return new op};function iT(e,t,n,i,r,o){if(200<=n&&299>=n&&n!=202)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var s=null;try{s=li(t)}catch(u){}throw new L(n==401||n==403?2:1,1,1001,i,n,s,e,o,r||i)}function up(){}function Il(e,t,n,i,r){var o=new RC;Ts(t.headers).forEach(function(l,c){o.append(c,l)});var s=new kC,u={Kh:!1,Mi:!1};if(e=CC(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,i,r,t.streamDataCallback),e=new Xe(e,function(){return u.Kh=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var a=new te(function(){u.Mi=!0,s.abort()});a.X(t/1e3),e.finally(function(){a.stop()})}return e}function CC(e,t,n,i,r,o,s){var u,a,l,c,h,d,f,m,y,v,A,S,x;return M(function(E){switch(E.g){case 1:return u=MC,a=LC,d=h=0,f=Date.now(),Z(E,2),T(E,u(e,n),4);case 4:if(l=E.h,o(rT(l.headers)),n.method=="HEAD"){E.B(5);break}return m=l.clone().body.getReader(),v=(y=l.headers.get("Content-Length"))?parseInt(y,10):0,A=function(w){function I(){var k,R,D;return M(function(P){switch(P.g){case 1:return Z(P,2),T(P,m.read(),4);case 4:k=P.h,le(P,3);break;case 2:return Q(P),P.return();case 3:if(k.done){P.B(5);break}if(h+=k.value.byteLength,!s){P.B(5);break}return T(P,s(k.value),5);case 5:R=Date.now(),(100<R-f||k.done)&&(D=k.done?0:v-h,r(R-f,h-d,D),d=h,f=R),k.done?w.close():(w.enqueue(k.value),I()),V(P)}})}I()},new a({start:A}),T(E,l.arrayBuffer(),6);case 6:c=E.h;case 5:le(E,3);break;case 2:throw S=Q(E),i.Kh?new L(1,1,7001,e,t):i.Mi?new L(1,1,1003,e,t):new L(1,1,1002,e,S,t);case 3:return x=rT(l.headers),E.return(iT(x,c,l.status,e,l.url,t))}})}function rT(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function oT(){if(O.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(O.Response){if(!new Response("").body)return!1}else return!1;return!(!O.fetch||"polyfill"in O.fetch||!O.AbortController)}j("shaka.net.HttpFetchPlugin",up),up.isSupported=oT,up.parse=Il;var MC=O.fetch,kC=O.AbortController,LC=O.ReadableStream,RC=O.Headers;oT()&&(fi("http",Il,2,!0),fi("https",Il,2,!0),fi("blob",Il,2,!0));function sT(){}function Cl(e,t,n,i,r){var o=new PC,s=Date.now(),u=0,a=new Promise(function(l,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new L(1,1,7001,e,n))};var h=!1;o.onreadystatechange=function(){if(o.readyState==2&&!h){var f=uT(o);r(f),h=!0}},o.onload=function(f){var m=uT(o),y=o.response;try{i(Date.now()-s,f.loaded-u,0);var v=iT(m,y,o.status,e,o.responseURL,n);l(v)}catch(A){c(A)}},o.onerror=function(f){c(new L(1,1,1002,e,f,n))},o.ontimeout=function(){c(new L(1,1,1003,e,n))},o.onprogress=function(f){var m=Date.now();(100<m-s||f.lengthComputable&&f.loaded==f.total)&&(i(m-s,f.loaded-u,o.readyState==4?0:f.total-f.loaded),u=f.loaded,s=m)};for(var d in t.headers)o.setRequestHeader(d.toLowerCase(),t.headers[d]);o.send(t.body)});return new Xe(a,function(){return o.abort(),Promise.resolve()})}function uT(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}j("shaka.net.HttpXHRPlugin",sT),sT.parse=Cl;var PC=O.XMLHttpRequest;fi("http",Cl,1,!0),fi("https",Cl,1,!0),fi("blob",Cl,1,!0);function aT(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function ap(e){return e.R().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.$a+":"+e.Ja}function DC(e,t){return yr(e.g.R(),e.g.$a,e.g.Ja,t.streaming.retryParameters)}function lT(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function cT(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}lT.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function hT(e){var t=this;this.s=e,this.j=new Map,this.i=new Jr(function(){return lp(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new lT}hT.prototype.destroy=function(){return this.i.destroy()};function NC(e,t,n){e.m=t,e.l=n}function lp(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function _C(e,t,n,i,r,o){Pe(e.i);var s=(e.j.get(t)||Promise.resolve()).then(function(){var u,a,l,c,h,d,f;return M(function(m){if(m.g==1)return T(m,OC(e,n),2);if(u=m.h,e.i.g)throw new L(2,9,7001);if(r)for(c in a=he(u),l=new _g(a),l.data)h=Number(c),d=l.data[h],f=l.g[h],e.l(d,f);e.g.close(i,u.byteLength);var y=e.g;return e.m(y.i==0?0:y.j/y.i,e.g.h),m.return(o(u))})});e.j.set(t,s)}function UC(e){return M(function(t){return t.g==1?T(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function OC(e,t){var n,i,r,o;return M(function(s){return s.g==1?(n=Cn,i=e.s.request(n,t),r=function(){return i.abort()},e.h.push(r),T(s,i.promise,2)):(o=s.h,bn(e.h,r),s.return(o.data))})}function Ml(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Le,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Ml.prototype.abort=function(){var e=this;return M(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return Z(t,2),T(t,e.g,4)}if(t.g!=2)return le(t,0);Q(t),V(t)})};function cp(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return M(function(s){if(s.g==1)return r.result==null?(n(),s.return()):(o=r.result,T(s,t(o.key,o.value,o),2));o.continue(),V(s)})}})}Ml.prototype.store=function(){return this.h},Ml.prototype.promise=function(){return this.g};function hp(e){this.h=e,this.g=[]}hp.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Ir(e,t){return kl(e,t,"readwrite")}function kl(e,t,n){n=e.h.transaction([t],n);var i=new Ml(n,t);return e.g.push(i),i.promise().then(function(){bn(e.g,i)},function(){bn(e.g,i)}),i}function Cr(e,t,n){this.h=new hp(e),this.i=t,this.g=n}p=Cr.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return dT(this.i)},p.removeSegments=function(e,t){return pT(this,this.i,e,t)},p.getSegments=function(e){var t=this,n;return M(function(i){return i.g==1?T(i,fT(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Ph(r)})))})},p.addManifests=function(){return dT(this.g)},p.updateManifest=function(){return Promise.reject(new L(2,9,9016,"Cannot modify values in "+this.g))};function bC(e,t,n){e=Ir(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}p.updateManifestExpiration=function(e,t){var n=Ir(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},p.removeManifests=function(e,t){return pT(this,this.g,e,t)},p.getManifests=function(e){var t=this,n;return M(function(i){return i.g==1?T(i,fT(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.Td(r)}))))})},p.getAllManifests=function(){var e=this,t,n;return M(function(i){return i.g==1?(t=kl(e.h,e.g,"readonly"),n=new Map,T(i,cp(t,function(r,o){var s;return M(function(u){if(u.g==1)return T(u,e.Td(o),2);s=u.h,n.set(r,s),V(u)})}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},p.Ph=function(e){return e},p.Td=function(e){return Promise.resolve(e)};function dT(e){return Promise.reject(new L(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,t){var n=this,i,r,o,s,u,a,l;return M(function(c){if(c.g==1){for(i=Ir(n.h,e),r=i.store(),o=[],s={},u=g(t),a=u.next();!a.done;s={He:s.He},a=u.next())l=a.value,s.He=r.add(l),s.He.onsuccess=function(h){return function(){o.push(h.He.result)}}(s);return T(c,i.promise(),2)}return c.return(o)})};function pT(e,t,n,i){e=Ir(e.h,t),t=e.store();var r={};n=g(n);for(var o=n.next();!o.done;r={Fe:r.Fe},o=n.next())r.Fe=o.value,t.delete(r.Fe).onsuccess=function(s){return function(){return i(s.Fe)}}(r);return e.promise()}function fT(e,t,n){var i,r,o,s,u,a,l;return M(function(c){if(c.g==1){for(i=kl(e.h,t,"readonly"),r=i.store(),o={},s=[],u={},a=g(n),l=a.next();!l.done;u={Jd:u.Jd,Gd:u.Gd},l=a.next())u.Gd=l.value,u.Jd=r.get(u.Gd),u.Jd.onsuccess=function(h){return function(){h.Jd.result==null&&s.push(h.Gd),o[h.Gd]=h.Jd.result}}(u);return T(c,i.promise(),2)}if(s.length)throw new L(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(h){return o[h]}))})}function uu(e){this.g=new hp(e)}uu.prototype.destroy=function(){return this.g.destroy()},uu.prototype.getAll=function(){var e=this,t,n;return M(function(i){return i.g==1?(t=kl(e.g,"session-ids","readonly"),n=[],T(i,cp(t,function(r,o){n.push(o)}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},uu.prototype.add=function(e){var t=Ir(this.g,"session-ids"),n=t.store();e=g(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},uu.prototype.remove=function(e){var t=this,n;return M(function(i){return i.g==1?(n=Ir(t.g,"session-ids"),T(i,cp(n,function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2)):T(i,n.promise(),0)})};function _t(){this.g=new Map}_t.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},_t.prototype.init=function(){var e=this;au.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=g(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function gT(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{Ob:i,bb:o},bb:r})})}),t)return t;throw new L(2,9,9013,"Could not find a cell that supports add-operations")}function jC(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({Ob:i,bb:o},r)})})}function Ll(e,t,n){if(e=e.g.get(t),!e)throw new L(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new L(2,9,9013,"Could not find cell with name "+n);return t}function FC(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function BC(e){var t=Array.from(e.g.keys());if(!t.length)throw new L(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function GC(e){var t,n,i;return M(function(r){return r.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=au,i.forEach(function(o){(o=o())&&t.push(o)})),T(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.B(0):T(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}function mT(e,t){au.set(e,t)}j("shaka.offline.StorageMuxer",_t),_t.unregister=function(e){au.delete(e)},_t.register=mT,_t.prototype.destroy=_t.prototype.destroy;var au=new Map;function lu(){Cr.apply(this,arguments)}de(lu,Cr),lu.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,o;return M(function(s){return i=Ir(n.h,n.g),r=i.store(),o=new Le,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new L(2,9,9012,"Could not find values for "+e))},T(s,Promise.all([i.promise(),o]),0)})},lu.prototype.Td=function(e){var t,n,i,r,o,s;return M(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,o=VC(e.periods[n],r),t.push(o);return T(u,Xy(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function VC(e,t){qC(e);for(var n=g(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return HC(r,e.startTime,t)})}function HC(e,t,n){var i=e.initSegmentUri?vT(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=vT(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}lu.prototype.Ph=function(e){return{data:e.data}};function vT(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new L(2,9,9004,"Could not parse uri "+e)}function qC(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=g(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=g(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,o=g(e);for(i=o.next();!i.done;i=o.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,o=g(t),i=o.next();!i.done;i=o.next())i.value.variantIds.push(r);if(e.length&&t.length)for(t=g(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=g(e),o=r.next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}function Rl(){Cr.apply(this,arguments)}de(Rl,Cr),Rl.prototype.Td=function(e){var t,n,i,r,o,s;return M(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=g(a.streams),h=c.next();!h.done;h=c.next())h=h.value,h.variantIds.length!=0&&l.push(KC(h,a.startTime,a.startTime+r));o=l,t.push(o)}return T(u,Xy(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function KC(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function dp(){Cr.apply(this,arguments)}de(dp,Cr),p=dp.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,t){return bC(this,e,t)},p.Td=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function yT(){this.m=this.j=this.i=this.h=this.g=this.l=null}p=yT.prototype,p.init=function(){var e=this,t=new Le,n=!1,i=new te(function(){n=!0,t.reject(new L(2,9,9017))});i.X(5);var r=O.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new lu(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new Rl(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new Rl(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new dp(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new uu(o):null,e.m=o,i.stop(),t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=g(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(t.reject(new L(2,9,9001,r.error)),i.stop(),o.preventDefault())},t},p.destroy=function(){var e=this;return M(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return T(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return T(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),V(t)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.m},p.erase=function(){var e=this;return M(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return T(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),T(t,zC(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,T(t,e.init(),0)}})};function zC(){var e=new Le,t=O.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new L(2,9,9001,t.error)),n.preventDefault()},e}mT("idb",function(){return $t()||ui()||!O.indexedDB?null:new yT});function ei(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}ei.prototype.Ob=function(){return this.i},ei.prototype.bb=function(){return this.h},ei.prototype.key=function(){return this.l},ei.prototype.toString=function(){return this.j};function pp(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new ei(t,n,i,Number(e[4])):null}function TT(e,t){this.h=e,this.g=t}function ET(e,t){var n=new ee(null,0);n.vb(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=WC(e,i,r,n),r=t.streams.filter(function(l){return l.type==ye}).map(function(l){return Pl(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return Pl(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=g(i.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function WC(e,t,n,i){for(var r=new Set,o=g(t),s=o.next();!s.done;s=o.next()){var u=g(s.value.variantIds);for(s=u.next();!s.done;s=u.next())r.add(s.value)}for(o=g(n),s=o.next();!s.done;s=o.next())for(u=g(s.value.variantIds),s=u.next();!s.done;s=u.next())r.add(s.value);for(o=new Map,r=g(r),s=r.next();!s.done;s=r.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),r=t.next();!r.done;r=t.next())for(r=r.value,s=Pl(e,r,i),u=g(r.variantIds),r=u.next();!r.done;r=u.next())r=o.get(r.value),r.language=s.language,r.primary=r.primary||s.primary,r.audio=s;for(n=g(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Pl(e,r,i),s=g(r.variantIds),r=s.next();!r.done;r=s.next())r=o.get(r.value),r.primary=r.primary||t.primary,r.video=t;return o}function Pl(e,t,n){var i=t.segments.map(function(r){return XC(e,r,t)});return n.le(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([it(t.mimeType,t.codecs)])}}function XC(e,t,n){var i=new ei("segment",e.h,e.g,t.dataKey);return e=new ne(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?YC(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function YC(e,t){var n=new ei("segment",e.h,e.g,t);return new bt(function(){return[n.toString()]},0,null)}function ST(){this.g=null}p=ST.prototype,p.configure=function(){},p.start=function(e,t){var n=this,i,r,o,s,u,a,l;return M(function(c){switch(c.g){case 1:if(i=pp(e),n.g=i,i==null||i.g!="manifest")throw new L(2,1,9004,e);return r=new _t,oi(c,2),T(c,r.init(),4);case 4:return T(c,Ll(r,i.Ob(),i.bb()),5);case 5:return o=c.h,T(c,o.getManifests([i.key()]),6);case 6:return s=c.h,u=s[0],a=new TT(i.Ob(),i.bb()),l=ET(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return Yt(c),T(c,r.destroy(),7);case 7:Jt(c,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,t){var n=this,i,r,o,s,u,a,l;return M(function(c){switch(c.g){case 1:return i=n.g,r=new _t,Z(c,2,3),T(c,r.init(),5);case 5:return T(c,Ll(r,i.Ob(),i.bb()),6);case 6:return o=c.h,T(c,o.getManifests([i.key()]),7);case 7:if(s=c.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){c.B(3);break}return T(c,o.updateManifestExpiration(i.key(),t),3);case 3:return Yt(c),T(c,r.destroy(),10);case 10:Jt(c,0);break;case 2:Q(c),c.B(3)}})},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){},Rn["application/x-offline-manifest"]=function(){return new ST};function AT(){}function wT(e){var t=pp(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Xr(e)):e=t&&t.g=="segment"?JC(t.key(),t):fr(new L(2,1,9004,e)),e}function JC(e,t){var n=new _t;return Xr(void 0).Ta(function(){return n.init()}).Ta(function(){return Ll(n,t.Ob(),t.bb())}).Ta(function(i){return i.getSegments([t.key()])}).Ta(function(i){return{uri:t,data:i[0].data,headers:{}}}).finally(function(){return n.destroy()})}j("shaka.offline.OfflineScheme",AT),AT.plugin=wT,fi("offline",wT);function xT(e,t,n){var i,r,o,s,u,a;return M(function(l){switch(l.g){case 1:i=[];for(var c=[],h=g(n),d=h.next();!d.done;d=h.next()){d=d.value;for(var f=!1,m=g(c),y=m.next();!y.done;y=m.next())if(y=y.value,ZC(y.info,d)){y.sessionIds.push(d.sessionId),f=!0;break}f||c.push({info:d,sessionIds:[d.sessionId]})}r=g(c),o=r.next();case 2:if(o.done){l.B(4);break}return s=o.value,u=$C(e,t,s),T(l,u,5);case 5:a=l.h,i=i.concat(a),o=r.next(),l.B(2);break;case 4:return l.return(i)}})}function $C(e,t,n){var i,r;return M(function(o){switch(o.g){case 1:return i=new ha({hc:t,onError:function(){},vf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Z(o,2),i.configure(e),T(o,mw(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:le(o,3);break;case 2:return Q(o),T(o,i.destroy(),5);case 5:return o.return([]);case 3:return r=[],T(o,Promise.all(n.sessionIds.map(function(s){return M(function(u){if(u.g==1)return Z(u,2),T(u,Tw(i,s),4);if(u.g!=2)return r.push(s),le(u,0);Q(u),V(u)})})),6);case 6:return T(o,i.destroy(),7);case 7:return o.return(r)}})}function ZC(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&q0(e.audioCapabilities,t.audioCapabilities,n)&&q0(e.videoCapabilities,t.videoCapabilities,n)}function QC(e,t,n){var i=t.presentationTimeline.getDuration();return t=IT(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function fp(e,t){var n=ET(new TT(e.Ob(),e.bb()),t),i=t.appMetadata||{};return n=IT(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function IT(e){var t=[],n=Qu(e.variants);n=g(n);for(var i=n.next();!i.done;i=n.next())t.push(Kr(i.value));for(e=g(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Zu(n.value));return t}function e3(){this.g={}}function t3(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;0>=o&&(o=t.bandwidth),e.g[n.id]=r,e.g[i.id]=o}}function n3(e,t){e.g[t.id]=t.bandwidth||2048}function CT(e,t){return e=e.g[t],e==null&&(e=0),e}function ht(e){var t=this;if(e&&e.constructor!=b)throw new L(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Gb()):(this.h=uo(),this.g=new _e),this.i=[],this.j=[];var n=!e;this.l=new Jr(function(){var i,r,o,s,u;return M(function(a){switch(a.g){case 1:return T(a,Promise.all(t.j.map(function(l){return lp(l)})),2);case 2:for(i=function(){},r=[],o=g(t.i),s=o.next();!s.done;s=o.next())u=s.value,r.push(u.then(i,i));return T(a,Promise.all(r),3);case 3:if(!n){a.B(4);break}return T(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,V(a)}})})}function gp(){if(Un())e:{for(var e=g(au.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=ht.prototype,p.destroy=function(){return this.l.destroy()},p.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Ns(e,t)),Ki(this.h,e)},p.getConfiguration=function(){var e=uo();return Ki(e,this.h,uo()),e},p.Gb=function(){return this.g},p.store=function(e,t,n){var i=this,r=this.getConfiguration(),o=new hT(this.g);return this.j.push(o),t=i3(this,e,t||{},function(){var s;return M(function(u){return u.g==1?n?u.B(2):T(u,ed(e,i.g,r.manifest.retryParameters),3):(u.g!=2&&(n=u.h),s=tm(e,n||null),u.return(s()))})},r,o),t=new Xe(t,function(){return lp(o)}),t.finally(function(){bn(i.j,o)}),m3(this,t)};function i3(e,t,n,i,r,o){var s,u,a,l,c,h,d,f,m,y,v,A,S,x;return M(function(E){switch(E.g){case 1:return Dl(),u=s=null,a=new _t,h=c=l=null,Z(E,2,3),T(E,i(),5);case 5:return s=E.h,T(E,d3(e,t,s,r),6);case 6:if(d=E.h,yt(e),f=!d.presentationTimeline.U()&&!d.presentationTimeline.Mc(),!f)throw new L(2,9,9005,t);return T(E,e.cd(d,function(w){h=h||w},r),7);case 7:if(u=E.h,yt(e),h)throw h;return T(E,o3(d,u,r),8);case 8:return T(E,a.init(),9);case 9:return yt(e),T(E,gT(a),10);case 10:return l=E.h,yt(e),m=s3(u,d,t,n,r,o),y=m.fk,v=m.yh,T(E,l.bb.addManifests([y]),11);case 11:if(A=E.h,yt(e),c=A[0],yt(e),h)throw h;return T(E,r3(e,v,c,y,o,r,l.bb,d,u),12);case 12:return yt(e),RT(d,y,u,r),T(E,l.bb.updateManifest(c,y),13);case 13:return yt(e),S=new ei("manifest",l.path.Ob,l.path.bb,c),E.return(fp(S,y));case 3:return Yt(E),T(E,a.destroy(),14);case 14:if(!s){E.B(15);break}return T(E,s.stop(),15);case 15:if(!u){E.B(17);break}return T(E,u.destroy(),17);case 17:Jt(E,0);break;case 2:if(x=Q(E),c==null){E.B(19);break}return T(E,MT(c),19);case 19:throw h||x}})}function r3(e,t,n,i,r,o,s,u,a){var l,c,h,d,f,m,y,v,A,S;return M(function(x){switch(x.g){case 1:if(l={},c=0,h=function(E,w){var I,k,R,D,P,C,N;return M(function(_){if(_.g==1){for(I={},k=g(E),R=k.next();!R.done;I={Cc:I.Cc},R=k.next())I.Cc=R.value,D=DC(I.Cc,o),P=I.Cc.i,C=I.Cc.h,N=function(U){return function(B){var H,F,X;return M(function(me){if(me.g==1)return T(me,s.addSegments([{data:B}]),2);H=me.h,yt(e),F=U.Cc.g,X=ap(F),l[X]=H[0],c+=B.byteLength,V(me)})}}(I),_C(r,I.Cc.groupId,D,P,C,N);return T(_,UC(r),2)}return w?(yt(e),RT(u,i,a,o),T(_,s.updateManifest(n,i),0)):_.B(0)})},d=!1,Z(x,2),!mp(u)||!d||LT(u)){x.B(4);break}return T(x,h(t.filter(function(E){return E.h}),!0),5);case 5:return yt(e),t=t.filter(function(E){return!E.h}),f=l,m=c,l={},c=0,T(x,kT(s,n,i,f,m,function(){return yt(e)}),6);case 6:yt(e);case 4:if(d){x.B(7);break}return T(x,h(t,!1),8);case 8:return yt(e),y=l,v=c,l={},c=0,T(x,kT(s,n,i,y,v,function(){return yt(e)}),9);case 9:yt(e);case 7:le(x,0);break;case 2:return A=Q(x),S=Object.values(l),T(x,s.removeSegments(S,function(){}),10);case 10:throw A}})}function MT(e){var t,n,i,r;return M(function(o){switch(o.g){case 1:return t=new _t,T(o,t.init(),2);case 2:return T(o,gT(t),3);case 3:return n=o.h,i=new ei("manifest",n.path.Ob,n.path.bb,e),T(o,t.destroy(),4);case 4:return r=new ht,T(o,r.remove(i.toString()),0)}})}function kT(e,t,n,i,r,o){var s,u,a,l,c,h,d,f,m,y,v;return M(function(A){switch(A.g){case 1:for(s=!1,Z(A,2),u=!0,a=g(n.streams),l=a.next();!l.done;l=a.next())for(c=l.value,h=g(c.segments),d=h.next();!d.done;d=h.next())f=d.value,m=f.pendingSegmentRefId?i[f.pendingSegmentRefId]:null,m!=null&&(f.dataKey=m,f.pendingSegmentRefId=void 0),m=f.pendingInitSegmentRefId?i[f.pendingInitSegmentRefId]:null,m!=null&&(f.initSegmentKey=m,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(u=!1),f.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),T(A,e.updateManifest(t,n),4);case 4:s=!0,o(),le(A,0);break;case 2:return y=Q(A),T(A,MT(t),5);case 5:if(s){A.B(6);break}return v=Object.values(i),T(A,e.removeSegments(v,function(){}),6);case 6:throw y}})}function o3(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E,w,I,k,R,D,P,C,N,_,U;return M(function(B){switch(B.g){case 1:return i={width:1/0,height:1/0},GA(e,n.restrictions,i),T(B,sg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(r=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,rg(e,s,u,o),a=g(e.variants),l=a.next();!l.done;l=a.next())c=l.value,r.push(Kr(c));for(h=g(e.textStreams),d=h.next();!d.done;d=h.next())f=d.value,r.push(Zu(f));for(m=g(e.imageStreams),y=m.next();!y.done;y=m.next())v=y.value,r.push(sh(v));return T(B,n.offline.trackSelectionCallback(r),3);case 3:for(A=B.h,S=e.presentationTimeline.getDuration(),x=0,E=g(A),w=E.next();!w.done;w=E.next())I=w.value,k=I.bandwidth*S/8,x+=k;return Z(B,4),T(B,n.offline.downloadSizeCallback(x),6);case 6:if(R=B.h,!R)throw new L(2,9,9014);le(B,5);break;case 4:throw D=Q(B),D instanceof L?D:new L(2,9,9015);case 5:for(P=new Set,C=new Set,N=new Set,_=g(A),w=_.next();!w.done;w=_.next())U=w.value,U.type=="variant"&&P.add(U.id),U.type=="text"&&C.add(U.id),U.type=="image"&&N.add(U.id);e.variants=e.variants.filter(function(H){return P.has(H.id)}),e.textStreams=e.textStreams.filter(function(H){return C.has(H.id)}),e.imageStreams=e.imageStreams.filter(function(H){return N.has(H.id)}),T3(e),V(B)}})}function s3(e,t,n,i,r,o){var s=QC(n,t,i),u=r.offline.progressCallback;NC(o,function(f,m){s.size=m,u(s,f)},function(f,m){a&&r.offline.usePersistentLicense&&l==m&&Es(e,"cenc",f)});var a=mp(t)&&!LT(t),l=null;a&&(l=E3.get(e.g.keySystem));for(var c=new e3,h=g(t.textStreams),d=h.next();!d.done;d=h.next())c.g[d.value.id]=52;for(h=g(t.imageStreams),d=h.next();!d.done;d=h.next())n3(c,d.value);for(d=g(t.variants),h=d.next();!h.done;h=d.next())t3(c,h.value);return c=p3(o,c,t,r),o=c.streams,c=c.yh,d=e.g,h=r.offline.usePersistentLicense,d&&h&&(d.initData=[]),{fk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Xd(),streams:o,sessionIds:h?Hg(e):[],drmInfo:d,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},yh:c}}function mp(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function LT(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function RT(e,t,n,i){if(t.expiration=n.Xd(),n=Hg(n),t.sessionIds=i.offline.usePersistentLicense?n:[],mp(e)&&i.offline.usePersistentLicense&&!n.length)throw new L(2,9,9007)}p.remove=function(e){return vp(this,u3(this,e))};function u3(e,t){var n,i,r,o,s,u;return M(function(a){switch(a.g){case 1:if(Dl(),n=pp(t),n==null||n.g!="manifest")throw new L(2,9,9004,t);return i=n,r=new _t,oi(a,2),T(a,r.init(),4);case 4:return T(a,Ll(r,i.Ob(),i.bb()),5);case 5:return o=a.h,T(a,o.getManifests([i.key()]),6);case 6:return s=a.h,u=s[0],T(a,Promise.all([a3(e,u,r),l3(o,i,u)]),2);case 2:return Yt(a),T(a,r.destroy(),8);case 8:Jt(a,0)}})}function PT(e,t){for(var n=[],i=g(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:it(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:it(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function a3(e,t,n){return M(function(i){return T(i,y3(e.g,e.h.drm,n,t),0)})}function l3(e,t,n){function i(){}var r=v3(n);return fp(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}p.Ak=function(){return vp(this,c3(this))};function c3(e){var t,n,i,r,o,s,u,a,l,c;return M(function(h){switch(h.g){case 1:return Dl(),t=e.g,n=e.h.drm,i=new _t,r=!1,oi(h,2),T(h,i.init(),4);case 4:o=[],FC(i,function(d){return o.push(d)}),s=g(o),u=s.next();case 5:if(u.done){h.B(2);break}return a=u.value,T(h,a.getAll(),8);case 8:return l=h.h,T(h,xT(n,t,l),9);case 9:return c=h.h,T(h,a.remove(c),10);case 10:c.length!=l.length&&(r=!0),u=s.next(),h.B(5);break;case 2:return Yt(h),T(h,i.destroy(),11);case 11:Jt(h,3);break;case 3:return h.return(!r)}})}p.list=function(){return vp(this,h3())};function h3(){var e,t,n;return M(function(i){switch(i.g){case 1:return Dl(),e=[],t=new _t,oi(i,2),T(i,t.init(),4);case 4:return n=Promise.resolve(),jC(t,function(r,o){n=n.then(function(){var s;return M(function(u){if(u.g==1)return T(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){a=fp(new ei("manifest",r.Ob,r.bb,l),a),e.push(a)}),V(u)})})}),T(i,n,2);case 2:return Yt(i),T(i,t.destroy(),6);case 6:Jt(i,3);break;case 3:return i.return(e)}})}function d3(e,t,n,i){var r,o,s,u,a;return M(function(l){if(l.g==1)return r=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(i.manifest),yt(e),T(l,n.start(t,s),2);if(l.g!=3)return u=l.h,yt(e),a=DT(u),T(l,Promise.all(Nc(a,function(c){return c.createSegmentIndex()})),3);if(yt(e),r)throw r;return l.return(u)})}p.cd=function(e,t,n){var i=this,r;return M(function(o){return o.g==1?(r=new ha({hc:i.g,onError:t,vf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(n.drm),T(o,gw(r,e.variants,n.offline.usePersistentLicense),2)):o.g!=3?T(o,Vg(r),3):o.return(r)})};function p3(e,t,n,i){var r=new Map,o=DT(n),s=new Map;o=g(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=f3(e,t,n,u,i,r);s.set(u.id,a)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),yh:Array.from(r.values())}}function f3(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external,fastSwitching:i.fastSwitching},u=r.offline.numberOfParallelDownloads,a=0;return g3(i,n.presentationTimeline.Hb(),function(l){var c=ap(l),h=void 0;if(!o.has(c)){var d=l.endTime-l.startTime;d=CT(t,i.id)*d,d=cT(e.g,d),o.set(c,new aT(l,d,a,!1))}l.ma&&(h=ap(l.ma),o.has(h)||(d=.5*CT(t,i.id),d=cT(e.g,d),o.set(h,new aT(l.ma,d,a,!0)))),s.segments.push({pendingInitSegmentRefId:h,initSegmentKey:h?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:c,dataKey:0,mimeType:l.mimeType,codecs:l.codecs}),a=(a+1)%u}),s}function g3(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function yt(e){if(e.l.g)throw new L(2,9,7001)}function Dl(){if(!gp())throw new L(2,9,9e3)}function vp(e,t){return M(function(n){return n.g==1?(e.i.push(t),oi(n,2),T(n,t,4)):n.g!=2?n.return(n.h):(Yt(n),bn(e.i,t),Jt(n,0))})}function m3(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){bn(e.i,n)})}function v3(e){var t=new Set;e=g(e.streams);for(var n=e.next();!n.done;n=e.next()){n=g(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function y3(e,t,n,i){var r,o,s;return M(function(u){return u.g==1?i.drmInfo?(r=BC(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:PT(i,!1),videoCapabilities:PT(i,!0)}}),T(u,xT(t,e,o),2)):u.return():u.g!=3?(s=u.h,T(u,r.remove(s),3)):T(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function DT(e){for(var t=new Set,n=g(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=g(e.imageStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=g(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function T3(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=g(t),i=n.next();!i.done;i=n.next()){i=g(t);for(var r=i.next();!r.done;r=i.next());}for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),i=n.next();!i.done;i=n.next());}j("shaka.offline.Storage",ht),ht.deleteAll=function(){var e;return M(function(t){return t.g==1?(e=new _t,oi(t,2),T(t,GC(e),2)):t.g!=5?(Yt(t),T(t,e.destroy(),5)):Jt(t,0)})},ht.prototype.list=ht.prototype.list,ht.prototype.removeEmeSessions=ht.prototype.Ak,ht.prototype.remove=ht.prototype.remove,ht.prototype.store=ht.prototype.store,ht.prototype.getNetworkingEngine=ht.prototype.Gb,ht.prototype.getConfiguration=ht.prototype.getConfiguration,ht.prototype.configure=ht.prototype.configure,ht.prototype.destroy=ht.prototype.destroy,ht.support=gp;var E3=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");vd.offline=gp;function ft(){}function NT(){for(var e=g(cu),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){ce("Error installing polyfill!",n)}}}function Mt(e,t){for(e={priority:t||0,callback:e},t=0;t<cu.length;t++)if(cu[t].priority<e.priority){cu.splice(t,0,e);return}cu.push(e)}j("shaka.polyfill",ft),ft.register=Mt,ft.installAll=NT;var cu=[];function hu(){this.g=new Nl}function _T(){O.AbortController||(O.AbortController=hu,O.AbortSignal=Nl)}hu.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new G("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},zn.Object.defineProperties(hu.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ft.AbortController=hu,hu.install=_T;function Nl(){ve.call(this),this.h=!1,this.g=void 0,this.onabort=null}de(Nl,ve),zn.Object.defineProperties(Nl.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Mt(_T);function UT(){}function OT(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())S3(t.value)}function S3(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}ft.Aria=UT,UT.install=OT,Mt(OT);function bT(){}function jT(){nS()}ft.EncryptionScheme=bT,bT.install=jT,Mt(jT,-2);function FT(){}function BT(){if(O.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Do),document.addEventListener("webkitfullscreenerror",Do),document.addEventListener("mozfullscreenchange",Do),document.addEventListener("mozfullscreenerror",Do),document.addEventListener("MSFullscreenChange",Do),document.addEventListener("MSFullscreenError",Do)}}function Do(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}ft.Fullscreen=FT,FT.install=BT,Mt(BT);function _l(){}function GT(){var e=!0;!$t()||$t()&&Vu()||$t()&&Ce("Fuchsia")||(e=!1),(nr()||Bu()||Yn()||Xn()||Wn()||Ce("PC=EOS")||Gu())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),VT=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=A3)}function A3(e){var t,n,i,r,o,s,u,a,l,c,h;return M(function(d){switch(d.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,o=is(r),!o)||i&&(s=i.contentType,u=is(s),!u))return d.return(t)}else return d.return(t);d.B(2);break}if(!Un())return d.return(t);if(!n){d.B(3);break}return T(d,w3(n),4);case 4:if(a=d.h,!a)return d.return(t);case 3:if(i){var f=i.contentType;if($t()&&i.spatialRendering&&(f+="; spatialRendering=true"),l=et(f),!l)return d.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,T(d,x3(n,i,c),6)):(t.supported=!0,d.return(t));case 6:(h=d.h)&&(t.supported=!0,t.keySystemAccess=h);case 5:return d.return(t)}})}function w3(e){var t,n;return M(function(i){return i.g==1?$t()?T(i,I3(e),3):Wn()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),i.return(et(t))):i.B(2):i.g!=2?(n=i.h,i.return(n)):i.return(et(e.contentType))})}function x3(e,t,n){var i,r,o,s,u,a,l,c,h;return M(function(d){switch(d.g){case 1:if(i=[],r=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},Wn()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme),i.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),r.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(u.audioCapabilities=i),r.length&&(u.videoCapabilities=r),a=e?e.contentType:"",l=t?t.contentType:"",c=n.keySystem,h=null,Z(d,2),bu.has(a+"#"+l+"#"+c)){h=bu.get(a+"#"+l+"#"+c)||null,d.B(4);break}return T(d,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:h=d.h,bu.set(a+"#"+l+"#"+c,h);case 4:le(d,3);break;case 2:Q(d);case 3:return d.return(h)}})}function I3(e){var t,n;return M(function(i){return i.g==1?O.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Ul?(n=Ul[t],i.B(2)):T(i,cast.__platform__.canDisplayType(t),3)):i.return(et(e.contentType)):(i.g!=2&&(n=i.h,Ul[t]=n),i.return(n))})}ft.MediaCapabilities=_l,_l.install=GT;var VT=null;_l.originalMcap=VT;var Ul={};_l.memoizedCanDisplayTypeRequests_=Ul,Mt(GT,-1);function HT(){}function qT(){var e=bi();(O.MediaSource||O.ManagedMediaSource)&&(e?10>=e?O.MediaSource=null:12>=e?(yp(),KT()):15>=e&&yp():Ce("DT_STB_BCM")?(yp(),KT()):(ju()||os()||Ce("Tizen 4"))&&M3()),(O.MediaSource||O.ManagedMediaSource)&&C3(),O.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&k3()}function yp(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,An.apply(0,arguments));return t.abort=function(){},t}}function KT(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function C3(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ju(n)!="mp2t"&&e(n)},O.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);O.ManagedMediaSource.isTypeSupported=function(n){return Ju(n)!="mp2t"&&t(n)}}}function M3(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Jn(n)!="opus"&&e(n)},O.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);O.ManagedMediaSource.isTypeSupported=function(n){return Jn(n)!="opus"&&t(n)}}}function k3(){var e=MediaSource.isTypeSupported;Xn()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}ft.MediaSource=HT,HT.install=qT,Mt(qT);function zT(){}function WT(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?L3():O.orientation!=null&&R3())}function L3(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function R3(){function e(){switch(O.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Ol;screen.orientation=t,e(),O.addEventListener("orientationchange",function(){e();var n=new G("change");t.dispatchEvent(n)})}ft.Orientation=zT,zT.install=WT;function Ol(){ve.call(this),this.type="",this.angle=0}de(Ol,ve),Ol.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Ol.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Mt(WT);function Tp(){}var Ep,Sp,Ap,wp,xp,Ip;function P3(e,t){try{var n=new bl(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function D3(e){var t=this.mediaKeys;return t&&t!=e&&XT(t,null),delete this.mediaKeys,(this.mediaKeys=e)?XT(e,this):Promise.resolve()}function N3(e){if(e=he(e.initData),Ut(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ai(e.subarray(4),!0),e=On(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=an(e),this.dispatchEvent(t)}ft.PatchedMediaKeysApple=Tp,Tp.uninstall=function(){Ep&&(Ep=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Sp),HTMLMediaElement.prototype.setMediaKeys=Ap,O.MediaKeys=wp,O.MediaKeySystemAccess=xp,navigator.requestMediaKeySystemAccess=Ip,Sp=Ip=Ap=xp=wp=null,O.shakaMediaKeysPolyfill="")},Tp.install=function(e){O.HTMLVideoElement&&O.WebKitMediaKeys&&(e!==void 0&&e&&(Ep=!0,Sp=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Ap=HTMLMediaElement.prototype.setMediaKeys,wp=O.MediaKeys,xp=O.MediaKeySystemAccess,Ip=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=D3,O.MediaKeys=du,O.MediaKeySystemAccess=bl,navigator.requestMediaKeySystemAccess=P3,O.shakaMediaKeysPolyfill=_3)};function bl(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=g(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=g(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(n=g(n.videoCapabilities),s=n.next();!s.done;s=n.next())o=s.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}bl.prototype.createMediaKeys=function(){var e=new du(this.keySystem);return Promise.resolve(e)},bl.prototype.getConfiguration=function(){return this.g};function du(e){this.h=new WebKitMediaKeys(e),this.g=new Ee}du.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Cp(this.h)},du.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function XT(e,t){if(e.g.Za(),!t)return Promise.resolve();e.g.o(t,"webkitneedkey",N3);try{return ro(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}du.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Cp(e){ve.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ee,this.sessionId="",this.expiration=NaN,this.closed=new Le,this.keyStatuses=new YT}de(Cp,ve),p=Cp.prototype,p.generateRequest=function(e,t){var n=this;this.h=new Le;try{var i=this.l.createSession("video/mp4",he(t));this.i=i,this.sessionId=i.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.tc()==null?"license-request":"license-renewal").set("message",an(r.message)),r=new G("message",r),n.dispatchEvent(r)}),this.j.o(i,"webkitkeyadded",function(){n.g&&(jl(n,"usable"),n.g.resolve(),n.g=null)}),this.j.o(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:jl(n,"output-not-allowed");break;default:jl(n,"internal-error")}}),jl(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.g=new Le;try{this.i.update(he(e))}catch(t){this.g.reject(t)}return this.g},p.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Za()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function jl(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new G("keystatuseschange"),e.dispatchEvent(t)}function YT(){this.size=0,this.g=void 0}p=YT.prototype,p.tc=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,Ou.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Ou.value();return!!(this.g&&Oi(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var _3="apple";function JT(){}function $T(){O.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||os()||Ce("Tizen 4")||Ce("Tizen 5.0")||Fu())&&(MediaKeys.prototype.setServerCertificate=U3)}function U3(){return Promise.resolve(!1)}ft.PatchedMediaKeysCert=JT,JT.install=$T,Mt($T);function ZT(){}function QT(){!O.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=O3,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=b3,O.MediaKeys=Fl,O.MediaKeySystemAccess=Mp,O.shakaMediaKeysPolyfill=j3)}function O3(){return Promise.reject(Error("The key system specified is not supported."))}function b3(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}ft.PatchedMediaKeysNop=ZT,ZT.install=QT;function Fl(){throw new TypeError("Illegal constructor.")}Fl.prototype.createSession=function(){},Fl.prototype.setServerCertificate=function(){},Fl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Mp(){throw this.keySystem="",new TypeError("Illegal constructor.")}Mp.prototype.getConfiguration=function(){},Mp.prototype.createMediaKeys=function(){};var j3="nop";Mt(QT,-10);function eE(){}function tE(){if(!(!O.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Dp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=F3,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=B3,O.MediaKeys=pu,O.MediaKeySystemAccess=Bl,O.shakaMediaKeysPolyfill=G3}}function kp(e){var t=Dp;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function F3(e,t){try{var n=new Bl(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function B3(e){var t=this.mediaKeys;return t&&t!=e&&nE(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&nE(e,this),Promise.resolve()}ft.PatchedMediaKeysWebkit=eE,eE.install=tE;function Bl(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=g(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=g(o.audioCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(a=g(o.videoCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Bl.prototype.createMediaKeys=function(){var e=new pu(this.g);return Promise.resolve(e)},Bl.prototype.getConfiguration=function(){return this.h};function pu(e){this.l=e,this.h=null,this.g=new Ee,this.i=[],this.j=new Map}function nE(e,t){e.h=t,e.g.Za();var n=Dp;t&&(e.g.o(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=an(i.initData),e.h.dispatchEvent(r)}),e.g.o(t,n+"keymessage",function(i){var r=Lp(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.tc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new G("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.o(t,n+"keyadded",function(i){(i=Lp(e,i.sessionId))&&(Gl(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),e.g.o(t,n+"keyerror",function(i){var r=Lp(e,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(i.systemCode==45&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Gl(r,"output-restricted"):o==1?Gl(r,"expired"):Gl(r,"internal-error"))}}))}pu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Rp(t,this.l,e),this.i.push(e),e},pu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},pu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Lp(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Rp(e,t,n){ve.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Le,this.keyStatuses=new rE}de(Rp,ve);function iE(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=he(On("LOAD_SESSION|"+n));else{var r=On("PERSISTENT|");i=ze(r,t)}else i=he(t)}catch(s){return Promise.reject(s)}e.h=new Le;var o=kp("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new te(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).X(.01)}return e.h}function Pp(e,t,n){if(e.g)e.g.then(function(){return Pp(e,t,n)}).catch(function(){return Pp(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=Fe(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=ln(r.keys[0].k),r=ln(r.keys[0].kid)}else i=he(n),r=null;var o=kp("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function Gl(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new G("keystatuseschange"),e.dispatchEvent(t)}p=Rp.prototype,p.generateRequest=function(e,t){return iE(this,t,null)},p.load=function(e){return this.l=="persistent-license"?iE(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var t=new Le;return Pp(this,t,e),t},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=kp("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function rE(){this.size=0,this.g=void 0}p=rE.prototype,p.tc=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,Ou.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Ou.value();return!!(this.g&&Oi(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var Dp="",G3="webkit";Mt(tE);function oE(){}function sE(){if(O.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=H3,Object.defineProperty(e,"disablePictureInPicture",{get:K3,set:z3,enumerable:!0,configurable:!0}),document.exitPictureInPicture=q3,document.addEventListener("webkitpresentationmodechanged",V3,!0))}}function V3(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function H3(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function q3(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function K3(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function z3(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}ft.PiPWebkit=oE,oE.install=sE,Mt(sE);function uE(){}function aE(){O.crypto&&("randomUUID"in O.crypto||(O.crypto.randomUUID=W3))}function W3(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}ft.RandomUUID=uE,uE.install=aE,Mt(aE);function lE(){}function cE(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:X3})}function X3(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}ft.Symbol=lE,lE.install=cE,Mt(cE);function hE(){}function dE(){if(O.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}ft.VideoPlayPromise=hE,hE.install=dE,Mt(dE);function pE(){}function fE(){if(O.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Fu())&&(e.getVideoPlaybackQuality=Y3)}}function Y3(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}ft.VideoPlaybackQuality=pE,pE.install=fE,Mt(fE);function gE(){}function mE(){if(!O.VTTCue&&O.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Np;else if(t==6)e=J3;else{try{var n=!!Np(1,2,"")}catch(i){n=!1}n&&(e=Np)}e&&(O.VTTCue=function(i,r,o){return e(i,r,o)})}}function Np(e,t,n){return new O.TextTrackCue(e,t,n)}function J3(e,t,n){return new O.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}ft.VTTCue=gE,gE.install=mE,Mt(mE);function tn(){}tn.prototype.parseInit=function(){},tn.prototype.setSequenceMode=function(){},tn.prototype.setManifestType=function(){},tn.prototype.parseMedia=function(e,t){var n=null,i=[];e=Fe(e).split(/\r?\n/),e=g(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=$3.exec(r))){var o=Z3.exec(r[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),r=new je(o,t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},j("shaka.text.LrcTextParser",tn),tn.prototype.parseMedia=tn.prototype.parseMedia,tn.prototype.setManifestType=tn.prototype.setManifestType,tn.prototype.setSequenceMode=tn.prototype.setSequenceMode,tn.prototype.parseInit=tn.prototype.parseInit;var $3=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Z3=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;tt["application/x-subtitle-lrc"]=function(){return new tn};function qt(){}qt.prototype.parseInit=function(){},qt.prototype.setSequenceMode=function(){},qt.prototype.setManifestType=function(){},qt.prototype.parseMedia=function(e,t,n){var i=Fe(e);if(e=[],i=="")return e;var r=Zr(i,"tt");if(!r)throw new L(2,2,2005,"Failed to parse TTML.");if(i=kn(r,"body")[0],!i)return[];var o=Zn(r,fu,"frameRate"),s=Zn(r,fu,"subFrameRate"),u=Zn(r,fu,"frameRateMultiplier"),a=Zn(r,fu,"tickRate"),l=Zn(r,fu,"cellResolution"),c=r.attributes["xml:space"]||"default",h=Zn(r,ql,"extent");if(c!="default"&&c!="preserve")throw new L(2,2,2005,"Invalid xml:space value: "+c);c=c=="default",o=new tM(o,s,u,a),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{Ec:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,s=(s=kn(r,"metadata")[0])?s.children:[],u=kn(r,"style"),r=kn(r,"region"),a=[];for(var d=g(r),f=d.next();!f.done;f=d.next()){var m=f.value;f=new lr;var y=m.attributes["xml:id"];if(y){f.id=y;var v=null;h&&(v=bp.exec(h)||jp.exec(h)),y=v?Number(v[1]):null,v=v?Number(v[2]):null;var A,S=Vl(m,u,"extent");if(S){var x=(A=bp.exec(S))||jp.exec(S);x!=null&&(f.width=Number(x[1]),f.height=Number(x[2]),A||(y!=null&&(f.width=100*f.width/y),v!=null&&(f.height=100*f.height/v)),f.widthUnits=A||y!=null?cn:0,f.heightUnits=A||v!=null?cn:0)}(m=Vl(m,u,"origin"))&&(x=(A=bp.exec(m))||jp.exec(m),x!=null&&(f.viewportAnchorX=Number(x[1]),f.viewportAnchorY=Number(x[2]),A?S||(f.width=100-f.viewportAnchorX,f.widthUnits=cn,f.height=100-f.viewportAnchorY,f.heightUnits=cn):(v!=null&&(f.viewportAnchorY=100*f.viewportAnchorY/v),y!=null&&(f.viewportAnchorX=100*f.viewportAnchorX/y)),f.viewportAnchorUnits=A||y!=null?cn:0))}else f=null;f&&a.push(f)}if(Ue(i,"p").length)throw new L(2,2,2001,"<p> can only be inside <div> in TTML");for(h=g(Ue(i,"div")),d=h.next();!d.done;d=h.next())if(Ue(d.value,"span").length)throw new L(2,2,2001,"<span> can only be inside <p> in TTML");return(t=vE(i,t,o,s,u,r,a,c,l,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function vE(e,t,n,i,r,o,s,u,a,l,c,h){var d=l;if(sa(e)){if(!c)return null;var f={tagName:"span",children:[nt(e)],attributes:{},parent:null}}else f=e;for(var m=null,y=g(ME),v=y.next();!v.done&&!(m=Hl(f,"backgroundImage",i,"#",v.value)[0]);v=y.next());y=null;var A=Zn(f,ME,"backgroundImage");if(h&&A&&!A.startsWith("#")&&(v=new Ze(h),A=new Ze(A),(v=v.resolve(A).toString())&&(y=v)),(e.tagName=="p"||m||y)&&(c=!0),e=c,v=(f.attributes["xml:space"]||(u?"default":"preserve"))=="default",A=f.children.every(sa),u=[],!A)for(var S=g(f.children),x=S.next();!x.done;x=S.next())(x=vE(x.value,t,n,i,r,o,s,v,a,f,c,h))&&u.push(x);if(i=l!=null,h=nt(f),h=f.children.length&&h&&/\S/.test(h),x=f.attributes.begin||f.attributes.end||f.attributes.dur,!(x||h||f.tagName=="br"||u.length!=0||i&&!v))return null;for(S=EE(f,n),h=S.start,S=S.end;d&&d.tagName&&d.tagName!="tt";)S=eM(d,n,h,S),h=S.start,S=S.end,d=d.parent;if(h==null&&(h=0),h+=t.periodStart,S=S==null?1/0:S+t.periodStart,h=Math.max(h,t.segmentStart),S=Math.min(S,t.segmentEnd),!x&&0<u.length)for(h=1/0,S=0,t=g(u),n=t.next();!n.done;n=t.next())n=n.value,h=Math.min(h,n.startTime),S=Math.max(S,n.endTime);if(f.tagName=="br")return r=new je(h,S,""),r.lineBreak=!0,r;if(t="",A&&(t=Pt(nt(f)||""),v&&(t=t.replace(/\s+/g," "))),t=new je(h,S,t),t.nestedCues=u,c||(t.isContainer=!0),a&&(t.cellResolution=a),a=Hl(f,"region",o,"")[0],f.attributes.region&&a&&a.attributes["xml:id"]){var E=a.attributes["xml:id"];t.region=s.filter(function(w){return w.id==E})[0]}return s=a,l&&i&&!f.attributes.region&&!f.attributes.style&&(s=Hl(l,"region",o,"")[0]),Q3(t,f,s,m,y,r,e,u.length==0),t}function Q3(e,t,n,i,r,o,s,u){if(s=s||u,Tt(t,n,o,"direction",s)=="rtl"&&(e.direction="rtl"),u=Tt(t,n,o,"writingMode",s),u=="tb"||u=="tblr"?e.writingMode="vertical-lr":u=="tbrl"?e.writingMode="vertical-rl":u=="rltb"||u=="rl"?e.direction="rtl":u&&(e.direction=ds),(u=Tt(t,n,o,"textAlign",!0))?(e.positionAlign=rM[u],e.lineAlign=iM[u],e.textAlign=Zc[u.toUpperCase()]):e.textAlign=hi,(u=Tt(t,n,o,"displayAlign",!0))&&(e.displayAlign=z0[u.toUpperCase()]),(u=Tt(t,n,o,"color",s))&&(e.color=u),(u=Tt(t,n,o,"backgroundColor",s))&&(e.backgroundColor=u),(u=Tt(t,n,o,"border",s))&&(e.border=u),u=Tt(t,n,o,"fontFamily",s))switch(u){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=u.split(",").filter(function(a){return a!="default"}).join(",")}switch((u=Tt(t,n,o,"fontWeight",s))&&u=="bold"&&(e.fontWeight=700),u=Tt(t,n,o,"wrapOption",s),e.wrapLine=!(u&&u=="noWrap"),(u=Tt(t,n,o,"lineHeight",s))&&u.match(No)&&(e.lineHeight=u),(u=Tt(t,n,o,"fontSize",s))&&(u.match(No)||u.match(nM))&&(e.fontSize=u),(u=Tt(t,n,o,"fontStyle",s))&&(e.fontStyle=J0[u.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,u=i.attributes.encoding,i=nt(i).trim(),r=="PNG"&&u=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=Tt(t,n,o,"textOutline",s))&&(i=i.split(" "),i[0].match(No)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(No)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=Tt(t,n,o,"letterSpacing",s))&&i.match(No)&&(e.letterSpacing=i),(i=Tt(t,n,o,"linePadding",s))&&i.match(No)&&(e.linePadding=i),(i=Tt(t,n,o,"opacity",s))&&(e.opacity=parseFloat(i)),(i=Vl(n,o,"textDecoration"))&&yE(e,i),(i=_p(t,o,"textDecoration"))&&yE(e,i),(i=Tt(t,n,o,"textCombine",s))&&(e.textCombineUpright=i),Tt(t,n,o,"ruby",s)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function yE(e,t){t=g(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&bn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&bn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&bn(e.textDecoration,"overline")}}function Tt(e,t,n,i,r){return r=r===void 0?!0:r,(e=_p(e,n,i))?e:r?Vl(t,n,i):null}function Vl(e,t,n){if(!e)return null;var i=Zn(e,ql,n);return i||TE(e,t,n)}function _p(e,t,n){var i=Zn(e,ql,n);return i||TE(e,t,n)}function TE(e,t,n){e=Hl(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var o=vi(e[r],"urn:ebu:tt:style",n);o||(o=Zn(e[r],ql,n)),o||(o=_p(e[r],t,n)),o&&(i=o)}return i}function Hl(e,t,n,i,r){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;!e&&!(e=r?vi(s,r,t):s.attributes[t])&&(s=s.parent,s););if(t=e){for(t=g(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=g(n),s=e.next();!s.done;s=e.next())if(s=s.value,i+s.attributes["xml:id"]==r){o.push(s);break}}return o}function eM(e,t,n,i){return e=EE(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function EE(e,t){var n=Up(e.attributes.begin,t),i=Up(e.attributes.end,t);return e=Up(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function Up(e,t){var n=null;if(SE.test(e)){e=SE.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,r+=o/t.frameRate,n=r+60*i+3600*n}else if(AE.test(e))n=Op(AE,e);else if(wE.test(e))n=Op(wE,e);else if(xE.test(e))e=xE.exec(e),n=Number(e[1])/t.frameRate;else if(IE.test(e))e=IE.exec(e),n=Number(e[1])/t.g;else if(CE.test(e))n=Op(CE,e);else if(e)throw new L(2,2,2001,"Could not parse cue time range in TTML");return n}function Op(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}j("shaka.text.TtmlTextParser",qt),qt.prototype.parseMedia=qt.prototype.parseMedia,qt.prototype.setManifestType=qt.prototype.setManifestType,qt.prototype.setSequenceMode=qt.prototype.setSequenceMode,qt.prototype.parseInit=qt.prototype.parseInit;function tM(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var bp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,nM=/^(\d{1,4}(?:\.\d+)?|100)%$/,No=/^(\d+px|\d+em|\d*\.?\d+c)$/,jp=/^(\d+)px (\d+)px$/,SE=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,AE=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,wE=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,xE=/^(\d*(?:\.\d*)?)f$/,IE=/^(\d*(?:\.\d*)?)t$/,CE=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),iM={left:cr,center:"center",right:"end",start:cr,end:"end"},rM={left:"line-left",center:"center",right:"line-right"},fu=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ql=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],ME=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];tt["application/ttml+xml"]=function(){return new qt};function dt(){this.g=new qt}dt.prototype.parseInit=function(e){var t=!1;if(new Re().box("moov",fe).box("trak",fe).box("mdia",fe).box("minf",fe).box("stbl",fe).Y("stsd",Gi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new L(2,2,2007)},dt.prototype.setSequenceMode=function(){},dt.prototype.setManifestType=function(){},dt.prototype.parseMedia=function(e,t,n){var i=this,r=!1,o=[];if(new Re().box("mdat",mr(function(s){r=!0,o=o.concat(i.g.parseMedia(s,t,n))})).parse(e,!1),!r)throw new L(2,2,2007);return o},j("shaka.text.Mp4TtmlParser",dt),dt.prototype.parseMedia=dt.prototype.parseMedia,dt.prototype.setManifestType=dt.prototype.setManifestType,dt.prototype.setSequenceMode=dt.prototype.setSequenceMode,dt.prototype.parseInit=dt.prototype.parseInit,tt['application/mp4; codecs="stpp"']=function(){return new dt},tt['application/mp4; codecs="stpp.ttml"']=function(){return new dt},tt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new dt},tt['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new dt},tt['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new dt},tt['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new dt},tt['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new dt},tt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new dt};function kt(){this.h=!1,this.g="UNKNOWN"}kt.prototype.parseInit=function(){},kt.prototype.setSequenceMode=function(e){this.h=e},kt.prototype.setManifestType=function(e){this.g=e},kt.prototype.parseMedia=function(e,t){e=Fe(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new L(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new L(2,2,2e3);if(e=Kl(new zi(e[1])),e==null)throw new L(2,2,2e3);e=t.periodStart+Number(i[1])/9e4-e}else e=t.segmentStart;t=[],i=g(n[0].split("\n"));for(var r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new zi(r);var o=new lr;Sr(r),vo(r);for(var s=Sr(r);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),vo(r),s=Sr(r)}t.push(o)}for(i=new Map,kE(i),r=[],n=g(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split("\n"),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=g(u),s=u.next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=i.get(s))||(l=new je(0,0,""));for(var c=!1,h=0;h<a.length;h++){var d=/^\s*([^:]+):\s*(.*)/.exec(a[h]);if(d){var f=d[2].trim().replace(";","");switch(d[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=f;break;case"color":c=!0,l.color=f;break;case"font-family":c=!0,l.fontFamily=f;break;case"font-size":c=!0,l.fontSize=f;break;case"font-weight":(700<=parseInt(f,10)||f=="bold")&&(c=!0,l.fontWeight=700);break;case"font-style":switch(f){case"normal":c=!0,l.fontStyle=eh;break;case"italic":c=!0,l.fontStyle="italic";break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(f);break;case"text-combine-upright":c=!0,l.textCombineUpright=f;break;case"text-shadow":c=!0,l.textShadow=f;break;case"white-space":c=!0,l.wrapLine=f!="noWrap"}}}c&&i.set(s,l)}}if(c=e,o.length==1&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||o[0]=="STYLE"||o[0]=="REGION")o=null;else if(u=null,o[0].includes("-->")||(u=o[0],o.splice(0,1)),s=new zi(o[0]),a=Kl(s),h=xi(s,/[ \t]+--\x3e[ \t]+/g),l=Kl(s),a==null||h==null||l==null)ce("Failed to parse VTT time code. Cue skipped:",u,o),o=null;else{for(a+=c,l+=c,o=o.slice(1).join("\n").trim(),i.has("global")?(c=i.get("global").clone(),c.startTime=a,c.endTime=l,c.payload=""):c=new je(a,l,""),vo(s),a=Sr(s);a;)PE(c,a,t),vo(s),a=Sr(s);LE(o,c,i),u!=null&&(c.id=u),o=c}o&&r.push(o)}return r};function kE(e){for(var t=g(Object.entries(W0)),n=t.next();!n.done;n=t.next()){var i=g(n.value);n=i.next().value,i=i.next().value;var r=new je(0,0,"");r.color=i,e.set("."+n,r)}for(t=g(Object.entries(X0)),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,r=new je(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function LE(e,t,n){if(e.includes("<")){n.size===0&&kE(n);var i=e;e=[];for(var r=-1,o=0;o<i.length;o++)i[o]==="<"?r=o+1:i[o]===">"&&0<r&&(r=i.substr(r,o-r),r.match(DE)&&e.push(r),r=-1);for(e=g(e),o=e.next();!o.done;o=e.next())o=o.value,i=i.replace("<"+o+">",'<div time="'+o+'">'),i+="</div>";e=i;e:{o=e,r=[];var s=-1;e="",i=!1;for(var u=0;u<o.length;u++)if(o[u]==="/"){var a=o.indexOf(">",u);if(a===-1){e=o;break e}if((a=o.substring(u+1,a))&&a=="v"){i=!0;var l=null;if(r.length&&(l=r[r.length-1]),l){if(l===a)e+="/"+a+">";else{if(!l.startsWith("v")){e+=o[u];continue}e+="/"+l+">"}u+=a.length+1}else e+=o[u]}else e+=o[u]}else o[u]==="<"?(s=u+1,o[s]!="v"&&(s=-1)):o[u]===">"&&0<s&&(r.push(o.substr(s,u-s)),s=-1),e+=o[u];for(o=g(r),r=o.next();!r.done;r=o.next())r=r.value,s=r.replace(" ",".voice-"),e=e.replace("<"+r+">","<"+s+">"),e=e.replace("</"+r+">","</"+s+">"),i||(e+="</"+s+">")}e=oM(e);try{var c=Zr("<span>"+e+"</span>","span")}catch(h){}if(c)if(c=c.children,c.length!=1||c[0].tagName)for(c=g(c),e=c.next();!e.done;e=c.next())RE(e.value,t,n);else t.payload=Pt(e);else t.payload=Pt(e)}else t.payload=Pt(e)}function oM(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function gu(e,t){return e&&0<e.length?e:t}function RE(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new lr,i.position=null,i.size=0,e.tagName)for(var r=g(e.tagName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(s=n.get(s))&&(i.backgroundColor=gu(s.backgroundColor,i.backgroundColor),i.color=gu(s.color,i.color),i.fontFamily=gu(s.fontFamily,i.fontFamily),i.fontSize=gu(s.fontSize,i.fontSize),i.textShadow=gu(s.textShadow,i.textShadow),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.rubyTag=s.rubyTag,i.textCombineUpright=s.textCombineUpright,i.wrapLine=s.wrapLine),o){case"br":i=K0(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":(o=e.attributes.color)&&(i.color=o);break;case"div":if(o=e.attributes.time,!o)break;(o=Kl(new zi(o)))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.children,sa(e)||r.length==1&&sa(r[0]))for(n=nt(e).split("\n"),e=!0,n=g(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=K0(i.startTime,i.endTime),t.nestedCues.push(e)),0<r.length&&(e=i.clone(),e.payload=Pt(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=g(r),e=t.next();!e.done;e=t.next())RE(e.value,i,n)}function PE(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=hi:e.textAlign=Zc[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Xu)):(i=/^region:(.*)$/.exec(t))?(t=sM(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Qc[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Yu,e.line=Number(n[1]),n[2]&&(e.lineAlign=Qc[n[2].toUpperCase()]))}function sM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function Kl(e){if(e=xi(e,DE),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}j("shaka.text.VttTextParser",kt),kt.prototype.parseMedia=kt.prototype.parseMedia,kt.prototype.setManifestType=kt.prototype.setManifestType,kt.prototype.setSequenceMode=kt.prototype.setSequenceMode,kt.prototype.parseInit=kt.prototype.parseInit;var DE=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;tt["text/vtt"]=function(){return new kt},tt['text/vtt; codecs="vtt"']=function(){return new kt},tt['text/vtt; codecs="wvtt"']=function(){return new kt};function nn(){this.g=null}nn.prototype.parseInit=function(e){var t=this,n=!1;if(new Re().box("moov",fe).box("trak",fe).box("mdia",fe).Y("mdhd",function(i){i=pa(i.reader,i.version),t.g=i.timescale}).box("minf",fe).box("stbl",fe).Y("stsd",Gi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new L(2,2,2008);if(!n)throw new L(2,2,2008)},nn.prototype.setSequenceMode=function(){},nn.prototype.setManifestType=function(){},nn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new L(2,2,2008);var n=0,i=[],r,o=[],s=!1,u=!1,a=!1,l=null;if(new Re().box("moof",fe).box("traf",fe).Y("tfdt",function(x){s=!0,n=da(x.reader,x.version).baseMediaDecodeTime}).Y("tfhd",function(x){l=am(x.reader,x.flags).Vd}).Y("trun",function(x){u=!0,i=lm(x.reader,x.version,x.flags).wi}).box("mdat",mr(function(x){a=!0,r=x})).parse(e,!1),!a&&!s&&!u)throw new L(2,2,2008);e=n;for(var c=new De(r,0),h=g(i),d=h.next();!d.done;d=h.next()){d=d.value;var f=d.hh||l,m=d.zf?n+d.zf:e;e=m+(f||0);var y=0;do{var v=c.V();y+=v;var A=c.V(),S=null;ra(A)=="vttc"?8<v&&(S=c.Rb(v-8)):c.skip(v-8),f&&S&&(v=uM(S,t.periodStart+m/this.g,t.periodStart+e/this.g),o.push(v))}while(d.sampleSize&&y<d.sampleSize)}return o.filter(pr)};function uM(e,t,n){var i,r,o;return new Re().box("payl",mr(function(s){i=Fe(s)})).box("iden",mr(function(s){r=Fe(s)})).box("sttg",mr(function(s){o=Fe(s)})).parse(e),i?aM(i,r,o,t,n):null}function aM(e,t,n,i,r){if(i=new je(i,r,""),LE(e,i,new Map),t&&(i.id=t),n)for(e=new zi(n),t=Sr(e);t;)PE(i,t,[]),vo(e),t=Sr(e);return i}j("shaka.text.Mp4VttParser",nn),nn.prototype.parseMedia=nn.prototype.parseMedia,nn.prototype.setManifestType=nn.prototype.setManifestType,nn.prototype.setSequenceMode=nn.prototype.setSequenceMode,nn.prototype.parseInit=nn.prototype.parseInit,tt['application/mp4; codecs="wvtt"']=function(){return new nn};function rn(){}rn.prototype.parseInit=function(){},rn.prototype.setSequenceMode=function(){},rn.prototype.setManifestType=function(){},rn.prototype.parseMedia=function(e){var t=Fe(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=g(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new zi(n[0]),r=NE(i),o=xi(i,/,/g);if(i=NE(i),r==null||o==null||i==null)throw new L(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new je(r,i,n.slice(1).join("\n").trim()))}return e};function NE(e){if(e=xi(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}j("shaka.text.SbvTextParser",rn),rn.prototype.parseMedia=rn.prototype.parseMedia,rn.prototype.setManifestType=rn.prototype.setManifestType,rn.prototype.setSequenceMode=rn.prototype.setSequenceMode,rn.prototype.parseInit=rn.prototype.parseInit,tt["text/x-subviewer"]=function(){return new rn};function Kt(){this.g=new kt}Kt.prototype.parseInit=function(){},Kt.prototype.setSequenceMode=function(){},Kt.prototype.setManifestType=function(){},Kt.prototype.parseMedia=function(e,t,n){return e=Fe(e),e=_E(e),e=he(On(e)),this.g.parseMedia(e,t,n)};function _E(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=g(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}j("shaka.text.SrtTextParser",Kt),Kt.srt2webvtt=_E,Kt.prototype.parseMedia=Kt.prototype.parseMedia,Kt.prototype.setManifestType=Kt.prototype.setManifestType,Kt.prototype.setSequenceMode=Kt.prototype.setSequenceMode,Kt.prototype.parseInit=Kt.prototype.parseInit,tt["text/srt"]=function(){return new Kt};function on(){}on.prototype.parseInit=function(){},on.prototype.setSequenceMode=function(){},on.prototype.setManifestType=function(){},on.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=Fe(e).split(/\r?\n\s*\r?\n/),e=g(r),r=e.next();!r.done;r=e.next()){var o=r.value;r=o,(o=cM.exec(o))&&(i=o[1],r=o[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+("\n"+r):r):i=="Events"&&(n=n?n+("\n"+r):r)}for(i=[],r=null,t=g(t.split(/\r?\n/)),o=t.next();!o.done;o=t.next())if(e=o.value,!/^\s*;/.test(e)&&(o=bE.exec(e))){if(e=o[1].trim(),o=o[2].trim(),e=="Format")r=o.split(zl);else if(e=="Style"){e=o.split(zl),o={};for(var s=0;s<r.length&&s<e.length;s++)o[r[s]]=e[s];i.push(o)}}for(r=[],t=null,e={},n=g(n.split(/\r?\n/)),o=n.next();!o.done;e={Uf:e.Uf},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=bE.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(zl);else if(o=="Dialogue"){s=s.split(zl),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=OE(o.Start);var a=OE(o.End);s=new je(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Uf=o.Style,(o=i.find(function(l){return function(c){return c.Name==l.Uf}}(e)))&&lM(s,o),r.push(s)}}return r};function lM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=UE(n))&&(e.color=n),(n=t.BackColour)&&(n=UE(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=hs,e.textAlign="start";break;case 2:e.displayAlign=hs,e.textAlign=hi;break;case 3:e.displayAlign=hs,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=hi;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=hi;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function UE(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function OE(e){return e=hM.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}j("shaka.text.SsaTextParser",on),on.prototype.parseMedia=on.prototype.parseMedia,on.prototype.setManifestType=on.prototype.setManifestType,on.prototype.setSequenceMode=on.prototype.setSequenceMode,on.prototype.parseInit=on.prototype.parseInit;var cM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,bE=/^\s*([^:]+):\s*(.*)/,zl=/\s*,\s*/,hM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;tt["text/x-ssa"]=function(){return new on};function jE(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{cf:n,na:e}:null}function FE(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:o,gb:"mp4a.40."+r}}function BE(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function dM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function sn(e){this.i=e,this.h=0,this.g=new Map}p=sn.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?et(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Qt(t)||"mp4a.40.2")+'"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,i){for(var r=he(e),o=Qr(r),s=o.length;s<r.length&&!BE(r,s);s++);if(e=1e3*n.endTime,o=vr(o),o.length&&n&&(o=o.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=o.data),o=FE(r,s),!o)return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var u=[];s<r.length;){var a=jE(r,s);if(!a)return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));var l=a.cf+a.na;s+l<=r.length&&u.push({data:r.subarray(s+a.cf,s+l),size:a.na,duration:1024,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),s+=l}return n=o.sampleRate,e=Math.floor(e*n/1e3),i={id:t.id,type:"audio",codecs:o.gb,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,wb:[],Ca:new Uint8Array([]),Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.h,baseMediaDecodeTime:e,ub:u},stream:t},n=new Lo([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Ro(n),this.g.set(t.id,i)),t=su(n),this.h++,t=ze(i,t),Promise.resolve(t)},j("shaka.transmuxer.AacTransmuxer",sn),sn.prototype.transmux=sn.prototype.transmux,sn.prototype.getOriginalMimeType=sn.prototype.getOriginalMimeType,sn.prototype.convertCodecs=sn.prototype.convertCodecs,sn.prototype.isSupported=sn.prototype.isSupported,sn.prototype.destroy=sn.prototype.destroy,di("audio/aac",function(){return new sn("audio/aac")},Bi);function GE(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,Ca:e,na:r}}function pM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,o;0<i;){o=e[t];var s=Math.min(i,8),u=8-s;r=4278190080>>>24+u<<u,r=(o&r)>>u,n=n?n<<s|r:r,t+=1,i-=s}if(16>n)return!0}return!1}function vn(e){this.i=e,this.h=0,this.g=new Map}p=vn.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?et(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,i){e=he(e);for(var r=Qr(e),o=r.length;o<e.length&&!pM(e,o);o++);var s=1e3*n.endTime;r=vr(r),r.length&&n&&(r=r.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=GE(e,o);if(!l)return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Ca,a.push({data:e.subarray(o,o+l.na),size:l.na,duration:1536,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),o+=l.na}return n=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,wb:[],Ca:u,Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.h,baseMediaDecodeTime:n,ub:a},stream:t},n=new Lo([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Ro(n),this.g.set(t.id,i)),t=su(n),this.h++,t=ze(i,t),Promise.resolve(t)},j("shaka.transmuxer.Ac3Transmuxer",vn),vn.prototype.transmux=vn.prototype.transmux,vn.prototype.getOriginalMimeType=vn.prototype.getOriginalMimeType,vn.prototype.convertCodecs=vn.prototype.convertCodecs,vn.prototype.isSupported=vn.prototype.isSupported,vn.prototype.destroy=vn.prototype.destroy,di("audio/ac3",function(){return new vn("audio/ac3")},Bi);function VE(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Ti(e.subarray(t+2));Ft(n,2),Ft(n,3);var i=pe(n,11)+1<<1,r=pe(n,2);if(r==3){r=pe(n,2),r=[24e3,22060,16e3][r];var o=3}else r=[48e3,44100,32e3][r],o=pe(n,2);var s=pe(n,3),u=pe(n,1);return n=pe(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][o])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,Ca:e,na:i})}function yn(e){this.i=e,this.h=0,this.g=new Map}p=yn.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?et(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,i){e=he(e);for(var r=Qr(e),o=r.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=1e3*n.endTime;r=vr(r),r.length&&n&&(r=r.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=VE(e,o);if(!l)return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Ca,a.push({data:e.subarray(o,o+l.na),size:l.na,duration:1536,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),o+=l.na}return n=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,wb:[],Ca:u,Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.h,baseMediaDecodeTime:n,ub:a},stream:t},n=new Lo([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Ro(n),this.g.set(t.id,i)),t=su(n),this.h++,t=ze(i,t),Promise.resolve(t)},j("shaka.transmuxer.Ec3Transmuxer",yn),yn.prototype.transmux=yn.prototype.transmux,yn.prototype.getOriginalMimeType=yn.prototype.getOriginalMimeType,yn.prototype.convertCodecs=yn.prototype.convertCodecs,yn.prototype.isSupported=yn.prototype.isSupported,yn.prototype.destroy=yn.prototype.destroy,di("audio/ec3",function(){return new yn("audio/ec3")},Bi);function fM(e){if(!e.length)return null;var t=e.find(function(y){return y.type==7});if(e=e.find(function(y){return y.type==8}),!t||!e)return null;var n=new Ti(t.data),i=Ae(n);if(Ae(n),Ae(n),Dt(n),mM.includes(i)&&(i=z(n),i===3&&Ft(n,1),Dt(n),Dt(n),Ft(n,1),$(n))){i=i!==3?8:12;for(var r=0;r<i;r++)$(n)&&(6>r?fa(n,16):fa(n,64))}if(Dt(n),i=z(n),i===0)z(n);else if(i===1)for(Ft(n,1),Dt(n),Dt(n),i=z(n),r=0;r<i;r++)Dt(n);Dt(n),Ft(n,1);var o=z(n),s=z(n),u=pe(n,1);u===0&&Ft(n,1),Ft(n,1);var a=0,l=0,c=0,h=0;if($(n)&&(a=z(n),l=z(n),c=z(n),h=z(n)),r=i=1,$(n)&&$(n)){var d=Ae(n),f=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],m=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<d&&16>=d?(i=f[d-1],r=m[d-1]):d===255&&(i=pe(n,16),r=pe(n,16))}return n=(2-u)*(s+1)*16-2*c-2*h,o=16*(o+1)-2*a-2*l,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,W(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,W(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Qa:e,Va:i,Wa:r}}function gM(e){var t=!1,n=[],i=e.find(function(a){return a.type==7}),r=!1;e=g(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var s=!1;switch(o.type){case 1:s=r=!0;var u=o.data;i&&4<u.length&&(u=Bw(new Ti(u)),u===2||u===4||u===7||u===9)&&(t=!0);break;case 5:t=s=r=!0;break;case 6:s=!0;break;case 7:s=!0;break;case 8:s=!0;break;case 9:r=s=!0;break;case 12:s=!0;break;default:s=!1}r&&s&&(s=o.fullData.byteLength,u=new Uint8Array(4),u[0]=s>>24&255,u[1]=s>>16&255,u[2]=s>>8&255,u[3]=s&255,n.push(u),n.push(o.fullData))}return n.length?{data:ze.apply(xt,W(n)),fe:t}:null}var mM=[100,110,122,244,44,83,86,118,128,138,139,134];function vM(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),i=e.find(function(s){return s.type==34});if(!t||!n||!i)return null;var r=yM(t.fullData);e=TM(n.fullData);var o=EM(i.fullData);return t=SM(t.fullData,n.fullData,i.fullData,{Yg:r.Yg,xh:r.xh,Fg:e.Fg,Gg:e.Gg,zg:e.zg,Eg:e.Eg,Ag:e.Ag,Bg:e.Bg,Cg:e.Cg,Dg:e.Dg,sg:e.sg,ug:e.ug,vg:e.vg,wg:e.wg,xg:e.xg,yg:e.yg,ng:e.ng,rf:e.rf,lg:e.lg,hg:e.hg,gg:e.gg,ah:o.ah}),{height:e.height,width:e.width,Qa:t,Va:e.Hk,Wa:e.Gk}}function yM(e){var t=new Ti(e,!0);return Ae(t),Ae(t),pe(t,4),pe(t,2),pe(t,6),e=pe(t,3),t=$(t),{Yg:e+1,xh:t}}function TM(e){e=new Ti(e,!0),Ae(e),Ae(e);var t=0,n=0,i=0,r=0;pe(e,4);var o=pe(e,3);$(e);for(var s=pe(e,2),u=pe(e,1),a=pe(e,5),l=Ae(e),c=Ae(e),h=Ae(e),d=Ae(e),f=Ae(e),m=Ae(e),y=Ae(e),v=Ae(e),A=Ae(e),S=Ae(e),x=Ae(e),E=[],w=[],I=0;I<o;I++)E.push($(e)),w.push($(e));if(0<o)for(I=o;8>I;I++)pe(e,2);for(I=0;I<o;I++)E[I]&&pe(e,88),w[I]&&Ae(e);z(e),E=z(e),E==3&&pe(e,1),w=z(e),I=z(e),$(e)&&(t+=z(e),n+=z(e),i+=z(e),r+=z(e));var k=z(e),R=z(e),D=z(e);if($(e))for(var P=0;P<=o;P++)z(e),z(e),z(e);else z(e),z(e),z(e);if(z(e),z(e),z(e),z(e),z(e),z(e),$(e)&&$(e))for(P=0;4>P;P++)for(var C=0;C<(P===3?2:6);C++)if($(e)){var N=Math.min(64,1<<4+(P<<1));1<P&&eo(e);for(var _=0;_<N;_++)eo(e)}else z(e);for($(e),$(e),$(e)&&(Ae(e),z(e),z(e),$(e)),P=z(e),N=C=0;N<P;N++)if(_=!1,N!==0&&(_=$(e)),_){N===P&&z(e),$(e),z(e);for(var U=_=0;U<=C;U++){var B=$(e),H=!1;B||(H=$(e)),(B||H)&&_++}C=_}else{for(U=z(e),_=z(e),C=U+_,B=0;B<U;B++)z(e),$(e);for(U=0;U<_;U++)z(e),$(e)}if($(e))for(P=z(e),C=0;C<P;C++){for(N=0;N<D+4;N++)pe(e,1);pe(e,1)}if(P=D=1,C=0,$(e),$(e),$(e)){if($(e)&&(N=Ae(e),_=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],U=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<N&&16>=N?(D=_[N-1],P=U[N-1]):N===255&&(D=pe(e,16),P=pe(e,16))),$(e)&&$(e),$(e)&&(pe(e,3),$(e),$(e)&&(Ae(e),Ae(e),Ae(e))),$(e)&&(z(e),z(e)),$(e),$(e),$(e),(N=$(e))&&(z(e),z(e),z(e),z(e)),$(e)&&(pe(e,32),pe(e,32),$(e)&&z(e),$(e)))for(U=!1,N=$(e),_=$(e),(N||_)&&((U=$(e))&&(Ae(e),pe(e,5),$(e),pe(e,5)),pe(e,4),pe(e,4),U&&pe(e,4),pe(e,5),pe(e,5),pe(e,5)),B=0;B<=o;B++){var F=!0;H=1,$(e)||(F=$(e));var X=!1;if(F?z(e):X=$(e),X||(H=z(e)+1),N){for(F=0;F<H;F++)z(e),z(e),U&&(z(e),z(e));$(e)}if(_){for(F=0;F<H;F++)z(e),z(e),U&&(z(e),z(e));$(e)}}$(e)&&($(e),$(e),$(e),C=z(e),z(e),z(e),z(e),z(e))}return{zg:x,Fg:s,Gg:u,Eg:a,Ag:l,Bg:c,Cg:h,Dg:d,sg:f,ug:m,vg:y,wg:v,xg:A,yg:S,rf:C,ng:0,lg:E,hg:k,gg:R,width:w-(t+n)*(E===1||E===2?2:1),height:I-(i+r)*(E===1?2:1),Hk:D,Gk:P}}function EM(e){var t=new Ti(e,!0);Ae(t),Ae(t),z(t),z(t),$(t),$(t),pe(t,3),$(t),$(t),z(t),z(t),eo(t),$(t),$(t),$(t)&&z(t),eo(t),eo(t),$(t),$(t),$(t),$(t),e=$(t),t=$(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{ah:n}}function SM(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(i.Fg&3)<<6|(i.Gg?1:0)<<5|i.Eg&31,r[2]=i.Ag,r[3]=i.Bg,r[4]=i.Cg,r[5]=i.Dg,r[6]=i.sg,r[7]=i.ug,r[8]=i.vg,r[9]=i.wg,r[10]=i.xg,r[11]=i.yg,r[12]=i.zg,r[13]=240|(i.rf&3840)>>8,r[14]=i.rf&255,r[15]=252|i.ah&3,r[16]=252|i.lg&3,r[17]=248|i.hg&7,r[18]=248|i.gg&7,r[19]=0,r[20]=0,r[21]=(i.ng&3)<<6|(i.Yg&7)<<3|(i.xh?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(e.byteLength&65280)>>8,r[27]=(e.byteLength&255)>>0,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(t.byteLength&65280)>>8,r[e.byteLength+32]=(t.byteLength&255)>>0,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,r[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,r.set(n,e.byteLength+10+t.byteLength+28),r}function Wl(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&o!==3){var s=e[t+3]>>6;r=1e3*AM[14*(n===3?3-i:i===3?3:4)+r-1],o=wM[3*(n===3?0:n===2?1:2)+o],n=xM[n][i];var u=IM[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&i===2&&224e3<=r&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,na:a,Fk:8*n*u}}return null}function HE(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function qE(e,t){if(t+1<e.length&&HE(e,t)){var n=Wl(e,t),i=4;return n&&n.na&&(i=n.na),t+=i,t===e.length||t+1<e.length&&HE(e,t)}return!1}var AM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],wM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],xM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],IM=[0,1,1,4];function Tn(e){this.i=e,this.h=0,this.g=new Map}p=Tn.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?et(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,i){for(var r=he(e),o=Qr(r).length;o<r.length&&!qE(r,o);o++);var s;for(e=[];o<r.length;){var u=Wl(r,o);if(!u)return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));s||(s=u),o+u.na<=r.length&&e.push({data:r.subarray(o,o+u.na),size:u.na,duration:1152,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),o+=u.na}return s?(n=9e4*s.Fk/s.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:i,wb:[],Ca:new Uint8Array([]),Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.h,baseMediaDecodeTime:n,ub:e},stream:t},s=new Lo([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Ro(s),this.g.set(t.id,i)),t=su(s),this.h++,t=ze(i,t),Promise.resolve(t)):Promise.reject(new L(2,3,3018,n?n.R()[0]:null))},j("shaka.transmuxer.Mp3Transmuxer",Tn),Tn.prototype.transmux=Tn.prototype.transmux,Tn.prototype.getOriginalMimeType=Tn.prototype.getOriginalMimeType,Tn.prototype.convertCodecs=Tn.prototype.convertCodecs,Tn.prototype.isSupported=Tn.prototype.isSupported,Tn.prototype.destroy=Tn.prototype.destroy,di("audio/mpeg",function(){return new Tn("audio/mpeg")},Bi);function En(e){this.h=e,this.g=null}p=En.prototype,p.destroy=function(){},p.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Qt(e).split(","),n=Ot("audio",t);return t=Ot("video",t),!n||t||xn(n)!="mp3"?!1:et(this.convertCodecs("audio",e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Oe,e=he(e),e=this.g.parse(e),e.Wd().audio!="mp3"||r!="audio")return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));for(n=new Uint8Array([]),r=g(e.rc()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=Wl(e,t))?(t+i.na<=e.length&&(n=ze(n,e.subarray(t,t+i.na))),t+=i.na):t++;return Promise.resolve(n)},j("shaka.transmuxer.MpegTsTransmuxer",En),En.prototype.transmux=En.prototype.transmux,En.prototype.getOriginalMimeType=En.prototype.getOriginalMimeType,En.prototype.convertCodecs=En.prototype.convertCodecs,En.prototype.isSupported=En.prototype.isSupported,En.prototype.destroy=En.prototype.destroy,di("video/mp2t",function(){return new En("video/mp2t")},nh);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function un(e){this.h=e,(this.g=zd.get("ISOBoxer")())&&CM(this)}function CM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==MM[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}p=un.prototype,p.destroy=function(){},p.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?et(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),et(t)||et(e))},p.convertCodecs=function(e,t){return t.replace("mss/","")},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n){if(!n)return Promise.resolve(he(e));if(!t.mssPrivateData)return Promise.reject(new L(2,3,3020,n?n.R()[0]:null));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var h=r.fetch("sepiff");if(h!==null){h.type="senc",h.usertype=void 0;var d=r.fetch("saio");if(d===null){d=this.g.createFullBox("saio",u),d.version=0,d.flags=0,d.entry_count=1,d.offset=[0];var f=this.g.createFullBox("saiz",u);if(f.version=0,f.flags=0,f.sample_count=h.sample_count,f.default_sample_info_size=0,f.sample_info_size=[],h.flags&2)for(i=0;i<h.sample_count;i+=1)f.sample_info_size[i]=10+6*h.entry[i].NumberOfEntries;else f.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var m=r.fetch("moof");a.data_offset=m.getLength()+8;var y=r.fetch("saio");y!==null&&(y.offset[0]=KE(m,"traf")+KE(u,"senc")+16);var v=he(r.write());return Promise.resolve(v)}catch(A){return A instanceof L?Promise.reject(A):Promise.reject(new L(2,3,3022,n?n.R()[0]:null))}};function KE(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}j("shaka.transmuxer.MssTransmuxer",un),un.prototype.transmux=un.prototype.transmux,un.prototype.getOriginalMimeType=un.prototype.getOriginalMimeType,un.prototype.convertCodecs=un.prototype.convertCodecs,un.prototype.isSupported=un.prototype.isSupported,un.prototype.destroy=un.prototype.destroy;var MM=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);di("mss/audio/mp4",function(){return new un("mss/audio/mp4")},Bi),di("mss/video/mp4",function(){return new un("mss/video/mp4")},Bi);function Sn(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}p=Sn.prototype,p.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},p.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Qt(n).split(",");return n=Ot("audio",i),i=Ot("video",i),n&&(n=xn(n),!kM.includes(n))||i&&(n=xn(i),!LM.includes(n))?!1:t?et(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),et(t)||et(e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Qt(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return qr(n,"audio/mp4")}).map(gs).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},p.getOriginalMimeType=function(){return this.l},p.transmux=function(e,t,n,i,r){var o=he(e);if(r=="audio"&&!Is(o)){for(var s=Qr(o),u=s.length;u<o.length;u++)if(qE(o,u))return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));for(u=s.length;u<o.length;u++)if(BE(o,u))return this.h||(this.h=new sn("audio/aac")),this.h.transmux(e,t,n,i,r);return Promise.reject(new L(2,3,3018,n?n.R()[0]:null))}this.j?this.j.clearData():this.j=new Oe;var a=this.j.parse(o),l=[],c=a.Wd();try{var h=null;if(r=="video"){switch(c.video){case"avc":var d=[],f=null,m=[],y=a.jd();if(!y.length)throw new L(2,3,3023,n?n.R()[0]:null);for(var v=0;v<y.length;v++){var A=y[v],S=A.nalus;m.push.apply(m,W(S));var x=gM(S);if(x){f==null&&(f=A.dts);var E=void 0;E=v+1<y.length?(y[v+1].dts||0)-(A.dts||0):1<y.length?(A.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),d.push({data:x.data,size:x.data.byteLength,duration:E,yb:Math.round((A.pts||0)-(A.dts||0)),flags:{zb:0,qb:0,pb:0,kb:0,mb:x.fe?2:1,Ab:x.fe?0:1}})}}var w=fM(m);if(!w||f==null)throw new L(2,3,3018,n?n.R()[0]:null);t.height=w.height,t.width=w.width,h={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,wb:[],Ca:new Uint8Array([]),Qa:w.Qa,Va:w.Va,Wa:w.Wa,data:{Sb:this.g,baseMediaDecodeTime:f,ub:d},stream:t};break;case"hvc":var I=[],k=null,R=[],D=a.jd();if(!D.length)throw new L(2,3,3023,n?n.R()[0]:null);for(var P=0;P<D.length;P++){var C=D[P],N=C.nalus;R.push.apply(R,W(N));for(var _=!1,U=[],B=!1,H=g(N),F=H.next();!F.done;F=H.next()){var X=F.value;switch(X.type){case 1:case 0:var me=B=!0;break;case 19:case 20:case 21:_=me=B=!0;break;case 32:me=!0;break;case 33:me=!0;break;case 34:me=!0;break;case 35:B=me=!0;break;case 39:case 40:me=!0;break;default:me=!1}if(B&&me){var we=X.fullData.byteLength,Ne=new Uint8Array(4);Ne[0]=we>>24&255,Ne[1]=we>>16&255,Ne[2]=we>>8&255,Ne[3]=we&255,U.push(Ne),U.push(X.fullData)}}var Me=U.length?{data:ze.apply(xt,W(U)),fe:_}:null;if(Me){k==null&&C.dts!=null&&(k=C.dts);var Et=void 0;Et=P+1<D.length?(D[P+1].dts||0)-(C.dts||0):1<D.length?(C.dts||0)-(D[P-1].dts||0):9e4*(n.endTime-n.startTime),I.push({data:Me.data,size:Me.data.byteLength,duration:Et,yb:Math.round((C.pts||0)-(C.dts||0)),flags:{zb:0,qb:0,pb:0,kb:0,mb:Me.fe?2:1,Ab:Me.fe?0:1}})}}var qe=vM(R);if(!qe||k==null)throw new L(2,3,3018,n?n.R()[0]:null);t.height=qe.height,t.width=qe.width,h={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,wb:[],Ca:new Uint8Array([]),Qa:qe.Qa,Va:qe.Va,Wa:qe.Wa,data:{Sb:this.g,baseMediaDecodeTime:k,ub:I},stream:t}}h&&(l.push(h),h=null)}if(r=="audio"){switch(c.audio){case"aac":for(var $e=[],ke,wt=null,rt=g(a.rc()),ot=rt.next();!ot.done;ot=rt.next()){var Wt=ot.value,Xt=Wt.data;if(Xt){var Dn=0;if(ke=FE(Xt,Dn),!ke)throw new L(2,3,3018,n?n.R()[0]:null);for(t.audioSamplingRate=ke.sampleRate,t.channelsCount=ke.channelCount,wt==null&&Wt.pts!==null&&(wt=Wt.pts);Dn<Xt.length;){var Di=jE(Xt,Dn);if(Di){var $i=Di.cf+Di.na;Dn+$i<=Xt.length&&$e.push({data:Xt.subarray(Dn+Di.cf,Dn+$i),size:Di.na,duration:1024,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),Dn+=$i}else Dn++}}}if(!ke||wt==null){if(!a.jd().length)throw new L(2,3,3018,n?n.R()[0]:null);wt=9e4*n.startTime;var Ko=Ot("audio",t.codecs.split(","));if(!Ko||!t.channelsCount||!t.audioSamplingRate)throw new L(2,3,3018,n?n.R()[0]:null);ke={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,gb:Ko};var Ni=dM(Ko,t.channelsCount);if(!Ni)throw new L(2,3,3018,n?n.R()[0]:null);for(var mc=wt+9e4*(n.endTime-n.startTime),Iu=wt;Iu<mc;)$e.push({data:Ni,size:Ni.byteLength,duration:1024,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),Iu+=1024/ke.sampleRate*9e4}var Cu=ke.sampleRate,Kn=wt/9e4*Cu;h={id:t.id,type:"audio",codecs:ke.gb,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Cu,duration:i,wb:[],Ca:new Uint8Array([]),Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.g,baseMediaDecodeTime:Kn,ub:$e},stream:t};break;case"ac3":for(var YS=[],vc=0,i0=new Uint8Array([]),yc=null,JS=g(a.rc()),r0=JS.next();!r0.done;r0=JS.next()){var o0=r0.value,s0=o0.data;yc==null&&o0.pts!==null&&(yc=o0.pts);for(var zo=0;zo<s0.length;){var Zi=GE(s0,zo);Zi?(t.audioSamplingRate=Zi.sampleRate,t.channelsCount=Zi.channelCount,vc=Zi.sampleRate,i0=Zi.Ca,YS.push({data:s0.subarray(zo,zo+Zi.na),size:Zi.na,duration:1536,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),zo+=Zi.na):zo++}}if(vc==0||i0.byteLength==0||yc==null)throw new L(2,3,3018,n?n.R()[0]:null);var Ak=yc/9e4*vc;h={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:vc,duration:i,wb:[],Ca:i0,Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.g,baseMediaDecodeTime:Ak,ub:YS},stream:t};break;case"ec3":for(var $S=[],Tc=0,u0=new Uint8Array([]),Ec=null,ZS=g(a.rc()),a0=ZS.next();!a0.done;a0=ZS.next()){var l0=a0.value,c0=l0.data;Ec==null&&l0.pts!==null&&(Ec=l0.pts);for(var Wo=0;Wo<c0.length;){var Qi=VE(c0,Wo);Qi?(t.audioSamplingRate=Qi.sampleRate,t.channelsCount=Qi.channelCount,Tc=Qi.sampleRate,u0=Qi.Ca,$S.push({data:c0.subarray(Wo,Wo+Qi.na),size:Qi.na,duration:1536,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),Wo+=Qi.na):Wo++}}if(Tc==0||u0.byteLength==0||Ec==null)throw new L(2,3,3018,n?n.R()[0]:null);var wk=Ec/9e4*Tc;h={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Tc,duration:i,wb:[],Ca:u0,Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.g,baseMediaDecodeTime:wk,ub:$S},stream:t};break;case"mp3":for(var QS=[],Sc,Ac=null,eA=g(a.rc()),h0=eA.next();!h0.done;h0=eA.next()){var d0=h0.value,Mu=d0.data;if(Mu){Ac==null&&d0.pts!==null&&(Ac=d0.pts);for(var Pr=0;Pr<Mu.length;){var Xo=Wl(Mu,Pr);Xo?(Sc||(Sc=Xo),Pr+Xo.na<=Mu.length&&QS.push({data:Mu.subarray(Pr,Pr+Xo.na),size:Xo.na,duration:1152,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),Pr+=Xo.na):Pr++}}}if(!Sc||Ac==null)throw new L(2,3,3018,n?n.R()[0]:null);var tA=Sc.sampleRate,xk=Ac/9e4*tA;h={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:tA,duration:i,wb:[],Ca:new Uint8Array([]),Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.g,baseMediaDecodeTime:xk,ub:QS},stream:t};break;case"opus":var nA=[],wc=null,ri=a.H;if(!ri)throw new L(2,3,3018,n?n.R()[0]:null);var Rt=[];switch(ri.bj){case 1:case 2:Rt=[0];break;case 0:Rt=[255,1,1,0,1];break;case 128:Rt=[255,2,0,0,1];break;case 3:Rt=[1,2,1,0,2,1];break;case 4:Rt=[1,2,2,0,1,2,3];break;case 5:Rt=[1,3,2,0,4,1,2,3];break;case 6:Rt=[1,4,2,0,4,1,2,3,5];break;case 7:Rt=[1,4,2,0,4,1,2,3,5,6];break;case 8:Rt=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Rt=[1,1,2,0,1];break;case 131:Rt=[1,1,3,0,1,2];break;case 132:Rt=[1,1,4,0,1,2,3];break;case 133:Rt=[1,1,5,0,1,2,3,4];break;case 134:Rt=[1,1,6,0,1,2,3,4,5];break;case 135:Rt=[1,1,7,0,1,2,3,4,5,6];break;case 136:Rt=[1,1,8,0,1,2,3,4,5,6,7]}for(var iA=new Uint8Array([0,ri.channelCount,0,0,ri.sampleRate>>>24&255,ri.sampleRate>>>17&255,ri.sampleRate>>>8&255,ri.sampleRate>>>0&255,0,0].concat(W(Rt))),rA=ri.sampleRate,oA=g(a.rc()),p0=oA.next();!p0.done;p0=oA.next()){var f0=p0.value,Yo=f0.data;wc==null&&f0.pts!==null&&(wc=f0.pts);for(var ku=0;ku<Yo.length;){for(var Ik=(Yo[ku+1]&16)!==0,Ck=(Yo[ku+1]&8)!==0,_i=ku+2,xc=0;Yo[_i]===255;)xc+=255,_i+=1;xc+=Yo[_i],_i+=1,_i+=Ik?2:0,_i+=Ck?2:0;var sA=Yo.slice(_i,_i+xc);nA.push({data:sA,size:sA.byteLength,duration:960,yb:0,flags:{zb:0,qb:0,pb:0,kb:0,mb:2,Ab:0}}),ku=_i+xc}}if(iA.byteLength==0||wc==null)throw new L(2,3,3018,n?n.R()[0]:null);t.audioSamplingRate=ri.sampleRate,t.channelsCount=ri.channelCount;var Mk=wc/9e4*rA;h={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:rA,duration:i,wb:[],Ca:iA,Qa:new Uint8Array([]),Va:0,Wa:0,data:{Sb:this.g,baseMediaDecodeTime:Mk,ub:nA},stream:t}}h&&(l.push(h),h=null)}}catch(m0){return m0&&m0.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(m0)}if(!l.length)return Promise.reject(new L(2,3,3018,n?n.R()[0]:null));var uA=new Lo(l);if(this.i.has(t.id))var g0=this.i.get(t.id);else g0=Ro(uA),this.i.set(t.id,g0);var kk=su(uA);this.g++;var Lk=ze(g0,kk);return Promise.resolve(Lk)},j("shaka.transmuxer.TsTransmuxer",Sn),Sn.prototype.transmux=Sn.prototype.transmux,Sn.prototype.getOriginalMimeType=Sn.prototype.getOriginalMimeType,Sn.prototype.convertCodecs=Sn.prototype.convertCodecs,Sn.prototype.isSupported=Sn.prototype.isSupported,Sn.prototype.destroy=Sn.prototype.destroy;var kM=["aac","ac-3","ec-3","mp3","opus"],LM=["avc","hevc"];di("video/mp2t",function(){return new Sn("video/mp2t")},ih);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function zE(){}var mu;function WE(){mu||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(mu=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=RM,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function RM(e,t){var n=this,i;return M(function(r){return r.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),T(r,mu.call(n,e,t),2)):(i=r.h,tS(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=mu,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=XE,r.return(XE.call(n,e,t))))})}function XE(e,t){var n=this,i,r,o,s,u,a,l,c,h,d,f,m;return M(function(y){if(y.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=eS(e),r=[],o=g(t),s=o.next();!s.done;s=o.next())u=s.value,a=YE(u.videoCapabilities,i),l=YE(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(c=Object.assign({},u),c.videoCapabilities=a,c.audioCapabilities=l,r.push(c));if(!r.length)throw h=Error("Unsupported keySystem or supportedConfigurations."),h.name="NotSupportedError",h.code=DOMException.NOT_SUPPORTED_ERR,h;return T(y,mu.call(n,e,r),2)}return d=y.h,m=f=null,r[0]&&(r[0].videoCapabilities&&(f=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(m=r[0].audioCapabilities[0].encryptionScheme)),y.return(new Xl(d,f,m))})}function YE(e,t){return e&&e.filter(function(n){return Fp(n.encryptionScheme,t)})}j("EmeEncryptionSchemePolyfill",zE),zE.install=WE;function JE(){}var vu;function $E(){vu||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(vu=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=PM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function PM(e){var t=this,n,i,r;return M(function(o){switch(o.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),T(o,vu.call(t,e),2);case 2:if(n=o.h,!e.keySystemConfiguration)return o.return(n);if((i=n.keySystemAccess)&&tS(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=vu,o.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ZE,i){o.B(3);break}return r=n,T(o,QE(e),4);case 4:return r.keySystemAccess=o.h,o.return(n);case 3:return o.return(ZE.call(t,e))}})}function ZE(e){var t=this,n,i,r,o,s,u,a,l;return M(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,s=eS(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Fp(i,s)&&Fp(n,s))?T(c,vu.call(t,e),2):c.return(u);case 2:if(a=c.h,a.keySystemAccess){a.keySystemAccess=new Xl(a.keySystemAccess,n,i),c.B(3);break}if(!e.keySystemConfiguration){c.B(3);break}return l=a,T(c,QE(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(a)}})}function QE(e){var t,n;return M(function(i){if(i.g==1){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),t=r,T(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}j("McEncryptionSchemePolyfill",JE),JE.install=$E;function Xl(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Xl.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=g(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Xl.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function eS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function tS(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Fp(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(NM||DM))}function Bp(){}function nS(){WE(),$E()}j("EncryptionSchemePolyfills",Bp),Bp.install=nS;var DM=navigator.userAgent.includes("CrKey"),NM=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof Ic<"u"&&Ic.exports&&(Ic.exports=Bp);/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var Mr={ach:{D:"Lwo",F:"Acholi"},ady:{D:"Адыгэбзэ",F:"Adyghe"},af:{D:"Afrikaans",F:"Afrikaans"},"af-NA":{D:"Afrikaans (Namibia)",F:"Afrikaans (Namibia)"},"af-ZA":{D:"Afrikaans (South Africa)",F:"Afrikaans (South Africa)"},ak:{D:"Tɕɥi",F:"Akan"},ar:{D:"العربية",F:"Arabic"},"ar-AR":{D:"العربية",F:"Arabic"},"ar-MA":{D:"العربية",F:"Arabic (Morocco)"},"ar-SA":{D:"العربية (السعودية)",F:"Arabic (Saudi Arabia)"},"ay-BO":{D:"Aymar aru",F:"Aymara"},az:{D:"Azərbaycan dili",F:"Azerbaijani"},"az-AZ":{D:"Azərbaycan dili",F:"Azerbaijani"},"be-BY":{D:"Беларуская",F:"Belarusian"},bg:{D:"Български",F:"Bulgarian"},"bg-BG":{D:"Български",F:"Bulgarian"},bn:{D:"বাংলা",F:"Bengali"},"bn-IN":{D:"বাংলা (ভারত)",F:"Bengali (India)"},"bn-BD":{D:"বাংলা(বাংলাদেশ)",F:"Bengali (Bangladesh)"},"bs-BA":{D:"Bosanski",F:"Bosnian"},ca:{D:"Català",F:"Catalan"},"ca-ES":{D:"Català",F:"Catalan"},cak:{D:"Maya Kaqchikel",F:"Kaqchikel"},"ck-US":{D:"ᏣᎳᎩ (tsalagi)",F:"Cherokee"},cs:{D:"Čeština",F:"Czech"},"cs-CZ":{D:"Čeština",F:"Czech"},cy:{D:"Cymraeg",F:"Welsh"},"cy-GB":{D:"Cymraeg",F:"Welsh"},da:{D:"Dansk",F:"Danish"},"da-DK":{D:"Dansk",F:"Danish"},de:{D:"Deutsch",F:"German"},"de-AT":{D:"Deutsch (Österreich)",F:"German (Austria)"},"de-DE":{D:"Deutsch (Deutschland)",F:"German (Germany)"},"de-CH":{D:"Deutsch (Schweiz)",F:"German (Switzerland)"},dsb:{D:"Dolnoserbšćina",F:"Lower Sorbian"},el:{D:"Ελληνικά",F:"Greek"},"el-GR":{D:"Ελληνικά",F:"Greek (Greece)"},en:{D:"English",F:"English"},"en-GB":{D:"English (UK)",F:"English (UK)"},"en-AU":{D:"English (Australia)",F:"English (Australia)"},"en-CA":{D:"English (Canada)",F:"English (Canada)"},"en-IE":{D:"English (Ireland)",F:"English (Ireland)"},"en-IN":{D:"English (India)",F:"English (India)"},"en-PI":{D:"English (Pirate)",F:"English (Pirate)"},"en-UD":{D:"English (Upside Down)",F:"English (Upside Down)"},"en-US":{D:"English (US)",F:"English (US)"},"en-ZA":{D:"English (South Africa)",F:"English (South Africa)"},"en@pirate":{D:"English (Pirate)",F:"English (Pirate)"},eo:{D:"Esperanto",F:"Esperanto"},"eo-EO":{D:"Esperanto",F:"Esperanto"},es:{D:"Español",F:"Spanish"},"es-AR":{D:"Español (Argentine)",F:"Spanish (Argentina)"},"es-419":{D:"Español (Latinoamérica)",F:"Spanish (Latin America)"},"es-CL":{D:"Español (Chile)",F:"Spanish (Chile)"},"es-CO":{D:"Español (Colombia)",F:"Spanish (Colombia)"},"es-EC":{D:"Español (Ecuador)",F:"Spanish (Ecuador)"},"es-ES":{D:"Español (España)",F:"Spanish (Spain)"},"es-LA":{D:"Español (Latinoamérica)",F:"Spanish (Latin America)"},"es-NI":{D:"Español (Nicaragua)",F:"Spanish (Nicaragua)"},"es-MX":{D:"Español (México)",F:"Spanish (Mexico)"},"es-US":{D:"Español (Estados Unidos)",F:"Spanish (United States)"},"es-VE":{D:"Español (Venezuela)",F:"Spanish (Venezuela)"},et:{D:"eesti keel",F:"Estonian"},"et-EE":{D:"Eesti (Estonia)",F:"Estonian (Estonia)"},eu:{D:"Euskara",F:"Basque"},"eu-ES":{D:"Euskara",F:"Basque"},fa:{D:"فارسی",F:"Persian"},"fa-IR":{D:"فارسی",F:"Persian"},"fb-LT":{D:"Leet Speak",F:"Leet"},ff:{D:"Fulah",F:"Fulah"},fi:{D:"Suomi",F:"Finnish"},"fi-FI":{D:"Suomi",F:"Finnish"},"fo-FO":{D:"Føroyskt",F:"Faroese"},fr:{D:"Français",F:"French"},"fr-CA":{D:"Français (Canada)",F:"French (Canada)"},"fr-FR":{D:"Français (France)",F:"French (France)"},"fr-BE":{D:"Français (Belgique)",F:"French (Belgium)"},"fr-CH":{D:"Français (Suisse)",F:"French (Switzerland)"},"fy-NL":{D:"Frysk",F:"Frisian (West)"},ga:{D:"Gaeilge",F:"Irish"},"ga-IE":{D:"Gaeilge (Gaelic)",F:"Irish (Gaelic)"},gl:{D:"Galego",F:"Galician"},"gl-ES":{D:"Galego",F:"Galician"},"gn-PY":{D:"Avañe'ẽ",F:"Guarani"},"gu-IN":{D:"ગુજરાતી",F:"Gujarati"},"gx-GR":{D:"Ἑλληνική ἀρχαία",F:"Classical Greek"},he:{D:"עברית‏",F:"Hebrew"},"he-IL":{D:"עברית‏",F:"Hebrew"},hi:{D:"हिन्दी",F:"Hindi"},"hi-IN":{D:"हिन्दी",F:"Hindi"},hr:{D:"Hrvatski",F:"Croatian"},"hr-HR":{D:"Hrvatski",F:"Croatian"},hsb:{D:"Hornjoserbšćina",F:"Upper Sorbian"},ht:{D:"Kreyòl",F:"Haitian Creole"},hu:{D:"Magyar",F:"Hungarian"},"hu-HU":{D:"Magyar",F:"Hungarian"},"hy-AM":{D:"Հայերեն",F:"Armenian"},id:{D:"Bahasa Indonesia",F:"Indonesian"},"id-ID":{D:"Bahasa Indonesia",F:"Indonesian"},is:{D:"Íslenska",F:"Icelandic"},"is-IS":{D:"Íslenska (Iceland)",F:"Icelandic (Iceland)"},it:{D:"Italiano",F:"Italian"},"it-IT":{D:"Italiano",F:"Italian"},ja:{D:"日本語",F:"Japanese"},"ja-JP":{D:"日本語",F:"Japanese"},"jv-ID":{D:"Basa Jawa",F:"Javanese"},"ka-GE":{D:"ქართული",F:"Georgian"},"kk-KZ":{D:"Қазақша",F:"Kazakh"},km:{D:"ភាសាខ្មែរ",F:"Khmer"},"km-KH":{D:"ភាសាខ្មែរ",F:"Khmer"},kab:{D:"Taqbaylit",F:"Kabyle"},kn:{D:"ಕನ್ನಡ",F:"Kannada"},"kn-IN":{D:"ಕನ್ನಡ (India)",F:"Kannada (India)"},ko:{D:"한국어",F:"Korean"},"ko-KR":{D:"한국어 (韩国)",F:"Korean (Korea)"},ku:{D:"Kurdî",F:"Kurdish"},"ku-TR":{D:"Kurdî",F:"Kurdish"},la:{D:"Latin",F:"Latin"},"la-VA":{D:"Latin",F:"Latin"},lb:{D:"Lëtzebuergesch",F:"Luxembourgish"},"li-NL":{D:"Lèmbörgs",F:"Limburgish"},lt:{D:"Lietuvių",F:"Lithuanian"},"lt-LT":{D:"Lietuvių",F:"Lithuanian"},lv:{D:"Latviešu",F:"Latvian"},"lv-LV":{D:"Latviešu",F:"Latvian"},mai:{D:"मैथिली, মৈথিলী",F:"Maithili"},"mg-MG":{D:"Malagasy",F:"Malagasy"},mk:{D:"Македонски",F:"Macedonian"},"mk-MK":{D:"Македонски (Македонски)",F:"Macedonian (Macedonian)"},ml:{D:"മലയാളം",F:"Malayalam"},"ml-IN":{D:"മലയാളം",F:"Malayalam"},"mn-MN":{D:"Монгол",F:"Mongolian"},mr:{D:"मराठी",F:"Marathi"},"mr-IN":{D:"मराठी",F:"Marathi"},ms:{D:"Bahasa Melayu",F:"Malay"},"ms-MY":{D:"Bahasa Melayu",F:"Malay"},mt:{D:"Malti",F:"Maltese"},"mt-MT":{D:"Malti",F:"Maltese"},my:{D:"ဗမာစကာ",F:"Burmese"},nb:{D:"Norsk (bokmål)",F:"Norwegian (bokmal)"},"nb-NO":{D:"Norsk (bokmål)",F:"Norwegian (bokmal)"},ne:{D:"नेपाली",F:"Nepali"},"ne-NP":{D:"नेपाली",F:"Nepali"},nl:{D:"Nederlands",F:"Dutch"},"nl-BE":{D:"Nederlands (België)",F:"Dutch (Belgium)"},"nl-NL":{D:"Nederlands (Nederland)",F:"Dutch (Netherlands)"},"nn-NO":{D:"Norsk (nynorsk)",F:"Norwegian (nynorsk)"},no:{D:"Norsk",F:"Norwegian"},oc:{D:"Occitan",F:"Occitan"},"or-IN":{D:"ଓଡ଼ିଆ",F:"Oriya"},pa:{D:"ਪੰਜਾਬੀ",F:"Punjabi"},"pa-IN":{D:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",F:"Punjabi (India)"},pl:{D:"Polski",F:"Polish"},"pl-PL":{D:"Polski",F:"Polish"},"ps-AF":{D:"پښتو",F:"Pashto"},pt:{D:"Português",F:"Portuguese"},"pt-BR":{D:"Português (Brasil)",F:"Portuguese (Brazil)"},"pt-PT":{D:"Português (Portugal)",F:"Portuguese (Portugal)"},"qu-PE":{D:"Qhichwa",F:"Quechua"},"rm-CH":{D:"Rumantsch",F:"Romansh"},ro:{D:"Română",F:"Romanian"},"ro-RO":{D:"Română",F:"Romanian"},ru:{D:"Русский",F:"Russian"},"ru-RU":{D:"Русский",F:"Russian"},"sa-IN":{D:"संस्कृतम्",F:"Sanskrit"},"se-NO":{D:"Davvisámegiella",F:"Northern Sámi"},"si-LK":{D:"පළාත",F:"Sinhala (Sri Lanka)"},sk:{D:"Slovenčina",F:"Slovak"},"sk-SK":{D:"Slovenčina (Slovakia)",F:"Slovak (Slovakia)"},sl:{D:"Slovenščina",F:"Slovenian"},"sl-SI":{D:"Slovenščina",F:"Slovenian"},"so-SO":{D:"Soomaaliga",F:"Somali"},sq:{D:"Shqip",F:"Albanian"},"sq-AL":{D:"Shqip",F:"Albanian"},sr:{D:"Српски",F:"Serbian"},"sr-RS":{D:"Српски (Serbia)",F:"Serbian (Serbia)"},su:{D:"Basa Sunda",F:"Sundanese"},sv:{D:"Svenska",F:"Swedish"},"sv-SE":{D:"Svenska",F:"Swedish"},sw:{D:"Kiswahili",F:"Swahili"},"sw-KE":{D:"Kiswahili",F:"Swahili (Kenya)"},ta:{D:"தமிழ்",F:"Tamil"},"ta-IN":{D:"தமிழ்",F:"Tamil"},te:{D:"తెలుగు",F:"Telugu"},"te-IN":{D:"తెలుగు",F:"Telugu"},tg:{D:"забо́ни тоҷикӣ́",F:"Tajik"},"tg-TJ":{D:"тоҷикӣ",F:"Tajik"},th:{D:"ภาษาไทย",F:"Thai"},"th-TH":{D:"ภาษาไทย (ประเทศไทย)",F:"Thai (Thailand)"},tl:{D:"Filipino",F:"Filipino"},"tl-PH":{D:"Filipino",F:"Filipino"},tlh:{D:"tlhIngan-Hol",F:"Klingon"},tr:{D:"Türkçe",F:"Turkish"},"tr-TR":{D:"Türkçe",F:"Turkish"},"tt-RU":{D:"татарча",F:"Tatar"},uk:{D:"Українська",F:"Ukrainian"},"uk-UA":{D:"Українська",F:"Ukrainian"},ur:{D:"اردو",F:"Urdu"},"ur-PK":{D:"اردو",F:"Urdu"},uz:{D:"O'zbek",F:"Uzbek"},"uz-UZ":{D:"O'zbek",F:"Uzbek"},vi:{D:"Tiếng Việt",F:"Vietnamese"},"vi-VN":{D:"Tiếng Việt",F:"Vietnamese"},"xh-ZA":{D:"isiXhosa",F:"Xhosa"},yi:{D:"ייִדיש",F:"Yiddish"},"yi-DE":{D:"ייִדיש (German)",F:"Yiddish (German)"},zh:{D:"中文",F:"Chinese"},"zh-HANS":{D:"中文简体",F:"Chinese Simplified"},"zh-HANT":{D:"中文繁體",F:"Chinese Traditional"},"zh-CN":{D:"中文（中国）",F:"Chinese Simplified (China)"},"zh-HK":{D:"中文（香港）",F:"Chinese Traditional (Hong Kong)"},"zh-SG":{D:"中文（新加坡）",F:"Chinese Simplified (Singapore)"},"zh-TW":{D:"中文（台灣）",F:"Chinese Traditional (Taiwan)"},"zu-ZA":{D:"isiZulu",F:"Zulu"}},iS=g(Object.keys(Mr)),Gp=iS.next();!Gp.done;Gp=iS.next()){var rS=Gp.value;Mr[rS.toLowerCase()]=Mr[rS]}function ae(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new Ee,this.localization=this.controls.xa,this.player=this.controls.hd(),this.video=this.controls.vc(),this.adManager=this.player.Ve(),this.ad=t.getAd(),this.eventManager.o(this.adManager,"ad-started",function(i){n.ad=i.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null})}ae.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},j("shaka.ui.Element",ae),ae.prototype.release=ae.prototype.release;function oS(e){return Vp(e,"shaka-back-to-overflow-button")}function Vp(e,t){return e=e.getElementsByClassName(t),e.length?e[0]:null}function yu(e){e&&(e=Vp(e,"shaka-chosen-item"))&&e.parentElement.focus()}function _o(){var e=q("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function ie(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function Uo(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60);return e=Math.floor(e%60),10>e&&(e="0"+e),e=i+":"+e,t&&(10>i&&(e="0"+e),e=n+":"+e),e}function Yl(e,t){ae.call(this,e,t);var n=this;this.i=q("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=q("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new te(function(){var i=Math.round(n.ad.getRemainingTime()),r=n.ad.getDuration();i!=-1&&r!=-1&&(0<i?(i=Uo(r-i,!1)+" / "+Uo(r,!1),1<n.ad.getSequenceLength()?n.h.textContent=i:(r=n.localization.resolve("AD_TIME"),n.h.textContent=r.replace("[AD_TIME]",i))):(n.g.stop(),n.h.textContent=""))}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){n.g.Sa(),n.g.wa(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.g.stop(),n.h.textContent=""}),this.ad&&(this.g.Sa(),this.g.wa(.5))}de(Yl,ae),Yl.prototype.release=function(){this.g.stop(),this.g=null,ae.prototype.release.call(this)},j("shaka.ui.AdCounter",Yl);function Hp(e,t){ae.call(this,e,t);var n=this;this.g=q("div"),this.g.classList.add("shaka-ad-position"),ie(this.g,!1),this.parent.appendChild(this.g),this.h=q("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",function(){n.ad&&Jl(n)}),this.eventManager.o(this.localization,"locale-changed",function(){n.ad&&Jl(n)}),this.eventManager.o(this.adManager,"ad-started",function(){Jl(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.h.textContent="",ie(n.g,!1)}),this.ad&&Jl(this)}de(Hp,ae);function Jl(e){var t=e.ad.getSequenceLength();if(1<t){var n=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(n)).replace("[NUM_ADS]",String(t)),ie(e.g,!0)}}j("shaka.ui.AdPosition",Hp);function Tu(e,t){ae.call(this,e,t);var n=this;this.j=this.controls.g,this.h=this.controls.h,this.i=[],this.g=q("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(i){if(n.g.classList.contains("shaka-hidden")){i.preventDefault();var r=n.h.getBoundingClientRect();n.g.style.left=i.clientX-r.left+"px",n.g.style.top=i.clientY-r.top+"px",ie(n.g,!0)}else ie(n.g,!1)}),this.eventManager.o(O,"click",function(){ie(n.g,!1)}),_M(this)}de(Tu,ae),Tu.prototype.release=function(){this.h=null;for(var e=g(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],ae.prototype.release.call(this)};function Oo(e,t){sS.set(e,t)}function _M(e){for(var t=g(e.j.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var i=sS.get(n);i?e.i.push(i.create(e.g,e.controls)):ce("Unrecognized context menu element:",n)}}j("shaka.ui.ContextMenu",Tu),Tu.registerElement=Oo;var sS=new Map;function ti(e,t){ae.call(this,e,t);var n=this;this.button=Ye(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){n.g()}),this.eventManager.o(this.localization,"locale-changed",function(){n.g()}),this.eventManager.o(this.video,"play",function(){n.g(),n.h()}),this.eventManager.o(this.video,"pause",function(){n.g(),n.h()}),this.eventManager.o(this.video,"seeking",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-paused",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-resumed",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-started",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.g(),n.h()}),this.eventManager.o(this.button,"click",function(){n.ad&&n.ad.isLinear()?ES(n.controls):TS(n.controls)}),this.ad&&(this.g(),this.h())}de(ti,ae),ti.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.A.paused&&!e.Z;return e},ti.prototype.isEnded=function(){return this.ad&&this.ad.isLinear()?!1:this.video.ended},ti.prototype.g=function(){},ti.prototype.h=function(){},j("shaka.ui.PlayButton",ti);function Eu(e,t){ti.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}de(Eu,ti),Eu.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},Eu.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)},j("shaka.ui.BigPlayButton",Eu);function bo(e,t){ae.call(this,e,t);var n=this;this.m=null,this.s=!1,this.j=new te(function(){parseInt(n.h.textContent,10)!=0&&(n.video.currentTime=n.controls.Ig()+parseInt(n.h.textContent,10)),n.g.style.opacity="0",n.s=!1,n.h.textContent="0s"}),this.g=q("div"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"touchend",function(i){n.controls.wc()&&(n.controls.Rd()?(i.preventDefault(),n.controls.Jc()):0<n.controls.g.tapSeekDistance&&(i.preventDefault(),i=n.controls.g.tapSeekDistance,n.s?n.m+1e3>Date.now()&&(n.j.stop(),n.m=Date.now(),n.h.textContent=(n.l?parseInt(n.h.textContent,10)-i:parseInt(n.h.textContent,10)+i).toString()+"s",n.g.style.opacity="1",n.j.X(1)):(n.s=!0,n.m=Date.now(),n.j.X(1))))}),this.h=q("span"),this.h.textContent="0s",this.g.appendChild(this.h),this.i=q("span"),this.i.classList.add("shaka-forward-rewind-container-icon"),this.g.appendChild(this.i),this.l=!1}de(bo,ae),j("shaka.ui.HiddenSeekButton",bo);function qp(e,t){bo.call(this,e,t),this.g.classList.add("shaka-fast-foward-container"),this.i.textContent="fast_forward",this.l=!1}de(qp,bo),j("shaka.ui.HiddenFastForwardButton",qp);function Kp(e,t){bo.call(this,e,t),this.g.classList.add("shaka-rewind-container"),this.i.textContent="fast_rewind",this.l=!0}de(Kp,bo),j("shaka.ui.HiddenRewindButton",Kp);function lt(e,t,n,i){ae.call(this,e,t);var r=this;this.container=q("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,W(n)),this.h=!1,this.bar=document.createElement("input"),this.I=new te(function(){r.onChangeEnd(),r.h=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,W(i)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",function(o){r.controls.wc()&&(r.h=!0,r.onChangeStart()),o.stopPropagation()}),this.eventManager.o(this.bar,"touchstart",function(o){r.controls.wc()&&(r.h=!0,$l(r,o),r.onChangeStart()),o.stopPropagation()}),this.eventManager.o(this.bar,"input",function(){r.onChange()}),this.eventManager.o(this.bar,"touchmove",function(o){r.h&&($l(r,o),r.onChange()),o.stopPropagation()}),this.eventManager.o(this.bar,"touchend",function(o){r.h&&(r.h=!1,$l(r,o),r.onChangeEnd()),o.stopPropagation()}),this.eventManager.o(this.bar,"touchcancel",function(o){r.h&&(r.h=!1,$l(r,o),r.onChangeEnd()),o.stopPropagation()}),this.eventManager.o(this.bar,"mouseup",function(o){r.h&&(r.h=!1,r.onChangeEnd()),o.stopPropagation()}),this.eventManager.o(this.bar,"blur",function(){r.h&&(r.h=!1,r.onChangeEnd())}),this.eventManager.o(this.bar,"contextmenu",function(o){o.preventDefault(),o.stopPropagation()})}de(lt,ae),p=lt.prototype,p.release=function(){this.I&&(this.I.stop(),this.I=null),ae.prototype.release.call(this)},p.setRange=function(e,t){this.bar.min=e,this.bar.max=t},p.onChangeStart=function(){},p.onChange=function(){},p.onChangeEnd=function(){},p.changeTo=function(e){this.h||(this.h=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.I.X(.5)},p.getValue=function(){return parseFloat(this.bar.value)},p.setValue=function(e){this.h||(this.bar.value=e)};function $l(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.bar.getBoundingClientRect();t=parseFloat(e.bar.min);var r=parseFloat(e.bar.max);n=t+(r-t)/i.width*(n.clientX-i.left),n<t?n=t:n>r&&(n=r),e.bar.value=n}j("shaka.ui.RangeElement",lt),lt.prototype.setValue=lt.prototype.setValue,lt.prototype.getValue=lt.prototype.getValue,lt.prototype.changeTo=lt.prototype.changeTo,lt.prototype.onChangeEnd=lt.prototype.onChangeEnd,lt.prototype.onChange=lt.prototype.onChange,lt.prototype.onChangeStart=lt.prototype.onChangeStart,lt.prototype.setRange=lt.prototype.setRange;function Su(e,t){lt.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.H=q("div"),this.H.classList.add("shaka-ad-markers"),this.container.insertBefore(this.H,this.container.childNodes[0]),this.J=this.controls.g,this.u=new te(function(){var i=n.getValue();n.player.U()||i==n.video.duration&&(i-=.001),n.video.currentTime=i}),this.C=new te(function(){uS(n)}),this.L=!1,this.i=q("div"),this.i.id="shaka-player-ui-thumbnail-container",this.g=q("img"),this.g.id="shaka-player-ui-thumbnail-image",this.g.draggable=!1,this.A=q("div"),this.A.id="shaka-player-ui-thumbnail-time",this.i.appendChild(this.g),this.i.appendChild(this.A),this.container.appendChild(this.i),this.j=q("div"),this.j.id="shaka-player-ui-time-container",this.container.appendChild(this.j),this.l=this.m=null,this.K=!1,this.s=new te(function(){jo(n)}),this.G=[],this.eventManager.o(this.localization,"locale-updated",function(){return Wp(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return Wp(n)}),this.eventManager.o(this.adManager,"ad-started",function(){zp(n)||ie(n.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){zp(n)&&ie(n.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(i){n.G=i.cuepoints,aS(n)}),this.eventManager.o(this.player,"unloading",function(){n.G=[],aS(n),n.l&&(n.l.abort(),n.l=null),n.m=null,jo(n),Xp(n)}),this.eventManager.o(this.bar,"mousemove",function(i){var r=n.bar.getBoundingClientRect(),o=parseFloat(n.bar.min);i=i.clientX-r.left,r=Math.round(o+(parseFloat(n.bar.max)-o)/r.width*i),n.player.We().length?(Xp(n),lS(n,i,r)):(jo(n),o=n.j.clientWidth,n.j.style.width="auto",n.j.style.height="20px",n.j.style.top="-30px",n.j.style.left=Math.min(n.bar.offsetWidth-o,Math.max(0,i-o/2))+"px",n.j.style.visibility="visible",n.player.U()?(i=n.player.Oa().end-r,n.j.textContent=1>i?n.localization.resolve("LIVE"):"-"+Zl(i)):n.j.textContent=Zl(r))}),this.eventManager.o(this.container,"mouseleave",function(){Xp(n),n.s.stop(),n.s.X(.25)}),this.setValue(this.video.currentTime),this.update(),Wp(this),this.ad&&ie(this.container,!1)}de(Su,lt),p=Su.prototype,p.release=function(){this.u&&(this.u.stop(),this.u=null,this.C.stop(),this.C=null),lt.prototype.release.call(this)},p.onChangeStart=function(){this.L=!this.video.paused,this.controls.sh(!0),this.video.pause(),this.s.stop(),this.K=!0},p.onChange=function(){if(this.video.duration)if(this.update(),this.u.X(.125),this.player.We().length){var e=parseFloat(this.bar.min),t=parseFloat(this.bar.max),n=this.bar.getBoundingClientRect(),i=Math.round(this.getValue());lS(this,(i-e)/((t-e)/n.width),i)}else jo(this)},p.onChangeEnd=function(){this.u.Sa(),this.controls.sh(!1),this.L&&this.video.play(),this.K&&(this.K=!1,this.s.stop(),this.s.X(.25))},p.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},p.update=function(){var e=this.J.seekBarColors,t=this.getValue(),n=this.video.buffered.length,i=n?this.video.buffered.start(0):0,r=n?this.video.buffered.end(n-1):0,o=this.player.Oa(),s=o.end-o.start;this.setRange(o.start,o.end),zp(this)?(ie(this.container,!0),n==0?this.container.style.background=e.base:(n=(Math.max(i,o.start)-o.start)/s||0,r=(Math.min(r,o.end)-o.start)/s||0,t=(Math.min(Math.max(t,o.start),o.end)-o.start)/s||0,this.container.style.background="linear-gradient("+["to right",(this.J.showUnbufferedStart?e.base:e.played)+" "+100*n+"%",e.played+" "+100*n+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*r+"%",e.base+" "+100*r+"%"].join()+")")):ie(this.container,!1)};function uS(e){if(e.G.length){for(var t=e.player.Oa(),n=t.end-t.start,i=["to right"],r=[],o=e.J.seekBarColors.adBreaks,s=!1,u=g(e.G),a=u.next();!a.done;a=u.next())if(a=a.value,a.start==-1&&!a.end)s=!0;else if(!a.end&&a.start>=t.start||typeof a.end=="number"&&a.end>t.start){var l=(Math.max(a.start,t.start)-t.start)/n||0,c=l+.01;a.end&&(c=(a.end-t.start)/n||0),r.push({start:l,end:c})}for(r=r.sort(function(h,d){return h.start-d.start}),t=g(r),a=t.next();!a.done;a=t.next())n=a.value,i.push("transparent "+100*n.start+"%"),i.push(o+" "+100*n.start+"%"),i.push(o+" "+100*n.end+"%"),i.push("transparent "+100*n.end+"%");s&&(i.push("transparent 99%"),i.push(o+" 99%")),e.H.style.background="linear-gradient("+i.join(",")+")"}else e.H.style.background="transparent",e.C.stop()}function aS(e){function t(){var n=e.player.Oa();n=n.end-n.start,e.player.U()&&5<n&&e.C.wa(.25)}uS(e),e.player.ei()?t():e.eventManager.ia(e.player,"loaded",t)}function zp(e){var t=e.player.Oa();return t=t.end-t.start,e.player.U()&&5>t?!1:e.ad==null||!e.ad.isLinear()}function Wp(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function lS(e,t,n){var i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E;M(function(w){switch(w.g){case 1:return i=UM(e),i?(0>n&&(n=0),r=e.player.Oa(),o=Math.max(Math.ceil(r.start),Math.min(Math.floor(r.end),n)),T(w,e.player.Mg(i.id,o),2)):(jo(e),w.return());case 2:if(s=w.h,!s||!s.uris.length)return jo(e),w.return();if(e.player.U()?(u=r.end-n,e.A.textContent=1>u?e.localization.resolve("LIVE"):"-"+Zl(u)):e.A.textContent=Zl(n),a=-10,l=e.i.clientWidth,c=Math.floor(9*l/16),e.i.style.height=c+"px",e.i.style.top=-(c-a)+"px",h=Math.min(e.bar.offsetWidth-l,Math.max(0,t-l/2)),e.i.style.left=h+"px",e.i.style.visibility="visible",d=s.uris[0].split("#xywh=")[0],e.m&&d===e.m.uris[0].split("#xywh=")[0]&&s.segment.Ib()==e.m.segment.Ib()&&s.segment.Fb()==e.m.segment.Fb()){w.B(3);break}if(e.m=s,e.l&&(e.l.abort(),e.l=null),i.codecs!="mjpg"&&!d.startsWith("offline:")){w.B(4);break}return e.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Z(w,5),f=Cn,m=yr(s.segment.R(),s.segment.Ib(),s.segment.Fb(),e.player.getConfiguration().streaming.retryParameters),e.l=e.player.Gb().request(f,m,{type:1}),T(w,e.l.promise,7);case 7:y=w.h,e.l=null,i.codecs=="mjpg"?(v=new Re().box("mdat",mr(function(I){d=URL.createObjectURL(new Blob([I],{type:"image/jpeg"}))})),v.parse(y.data,!1)):(A=i.mimeType||"image/jpeg",S=new Blob([y.data],{type:A}),d=URL.createObjectURL(S)),le(w,4);break;case 5:if(x=Q(w),x.code==7001)return w.return();throw x;case 4:try{e.i.removeChild(e.g)}catch(I){}e.g=q("img"),e.g.id="shaka-player-ui-thumbnail-image",e.g.draggable=!1,e.g.src=d,e.g.onload=function(){d.startsWith("blob:")&&URL.revokeObjectURL(d)},e.i.insertBefore(e.g,e.i.firstChild);case 3:E=l/s.width,s.imageHeight?e.g.height=s.imageHeight:s.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain"),s.imageWidth?e.g.width=s.imageWidth:s.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain"),e.g.style.left="-"+E*s.positionX+"px",e.g.style.top="-"+E*s.positionY+"px",e.g.style.transform="scale("+E+")",e.g.style.transformOrigin="left top",c=Math.floor(l*s.height/s.width),e.i.style.height=c+"px",e.i.style.top=-(c-a)+"px",V(w)}})}function UM(e){var t=e.player.We();if(!t.length)return null;for(var n={},i=g(["image/avif","image/webp","image/jpeg","image/png","image/svg+xml"]),r=i.next();!r.done;n={Pf:n.Pf,Nf:n.Nf},r=i.next())if(n.Pf=r.value,n.Nf=e.player.getStats().estimatedBandwidth,(r=t.filter(function(o){return function(s){return s.mimeType.toLowerCase()===o.Pf&&s.bandwidth<.01*o.Nf}}(n)).sort(function(o,s){return s.bandwidth-o.bandwidth}))&&r.length)return r[0];return t.find(function(o){return o.mimeType=="application/mp4"&&o.codecs=="mjpg"})||t[0]}function jo(e){e.i.style.visibility="hidden",e.A.textContent=""}function Xp(e){e.j.style.visibility="hidden"}function Zl(e){var t=Math.round(e);e=Math.floor(t/3600);var n=Math.floor((t-3600*e)/60);return t=t-3600*e-60*n,10>t&&(t="0"+t),0<e?(10>n&&(n="0"+n),e+":"+n+":"+t):n+":"+t}j("shaka.ui.SeekBar",Su);function Yp(){}Yp.prototype.create=function(e,t){return new Su(e,t)},Su.Factory=Yp;function Ql(e,t){ae.call(this,e,t);var n=this;this.j=q("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=q("div"),this.h.classList.add("shaka-skip-ad-counter"),ie(this.h,!1),this.j.appendChild(this.h),this.g=Ye(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,ie(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),Jp(this),this.i=new te(function(){var i=Math.round(n.ad.getTimeUntilSkippable());0<i?n.h.textContent=i:(n.i.stop(),ie(n.h,!1))}),this.eventManager.o(this.localization,"locale-updated",function(){Jp(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Jp(n)}),this.eventManager.o(this.adManager,"ad-started",function(){cS(n)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),ie(n.h,!1))}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.i.stop(),n.g.disabled=!0,ie(n.g,!1),ie(n.h,!1)}),this.eventManager.o(this.g,"click",function(){n.ad.skip()}),this.ad&&cS(this)}de(Ql,ae),Ql.prototype.release=function(){this.i.stop(),this.i=null,ae.prototype.release.call(this)};function Jp(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function cS(e){e.ad.isSkippable()&&(ie(e.g,!0),ie(e.h,!0),e.h.textContent="",e.i.Sa(),e.i.wa(.5))}j("shaka.ui.SkipAdButton",Ql);/*
 @license
 glMatrix: https://github.com/toji/gl-matrix/
 Copyright 2015-2021, Brandon Jones, Colin MacKenzie IV
 SPDX-License-Identifier: MIT
*/function Pi(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function $p(e,t,n){t=1/Math.tan(t/2),e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n=1/-99.9,e[10]=100.1*n,e[14]=20*n}function ec(e,t,n){var i=t[0],r=t[1],o=t[2],s=t[3],u=t[4],a=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],m=t[11],y=t[12],v=t[13],A=t[14];t=t[15];var S=n[0],x=n[1],E=n[2],w=n[3];e[0]=S*i+x*u+E*h+w*y,e[1]=S*r+x*a+E*d+w*v,e[2]=S*o+x*l+E*f+w*A,e[3]=S*s+x*c+E*m+w*t,S=n[4],x=n[5],E=n[6],w=n[7],e[4]=S*i+x*u+E*h+w*y,e[5]=S*r+x*a+E*d+w*v,e[6]=S*o+x*l+E*f+w*A,e[7]=S*s+x*c+E*m+w*t,S=n[8],x=n[9],E=n[10],w=n[11],e[8]=S*i+x*u+E*h+w*y,e[9]=S*r+x*a+E*d+w*v,e[10]=S*o+x*l+E*f+w*A,e[11]=S*s+x*c+E*m+w*t,S=n[12],x=n[13],E=n[14],w=n[15],e[12]=S*i+x*u+E*h+w*y,e[13]=S*r+x*a+E*d+w*v,e[14]=S*o+x*l+E*f+w*A,e[15]=S*s+x*c+E*m+w*t}function Zp(e,t){var n=new Float32Array(3),i=t[0],r=t[1],o=t[2],s=t[4],u=t[5],a=t[6],l=t[8],c=t[9],h=t[10];n[0]=Math.sqrt(i*i+r*r+o*o),n[1]=Math.sqrt(s*s+u*u+a*a),n[2]=Math.sqrt(l*l+c*c+h*h),a=1/n[0],l=1/n[1],c=1/n[2],s=t[0]*a,n=t[1]*l,i=t[2]*c,r=t[4]*a,u=t[5]*l,o=t[6]*c,a*=t[8],l*=t[9],t=t[10]*c,c=s+u+t,0<c?(t=2*Math.sqrt(c+1),e[3]=.25*t,e[0]=(o-l)/t,e[1]=(a-i)/t,e[2]=(n-r)/t):s>u&&s>t?(t=2*Math.sqrt(1+s-u-t),e[3]=(o-l)/t,e[0]=.25*t,e[1]=(n+r)/t,e[2]=(a+i)/t):u>t?(t=2*Math.sqrt(1+u-s-t),e[3]=(a-i)/t,e[0]=(n+r)/t,e[1]=.25*t,e[2]=(o+l)/t):(t=2*Math.sqrt(1+t-s-u),e[3]=(n-r)/t,e[0]=(a+i)/t,e[1]=(o+l)/t,e[2]=.25*t)}function hS(e,t){var n=t[0],i=t[1],r=t[2];t=t[3];var o=n+n,s=i+i,u=r+r;n*=o;var a=i*o;i*=s;var l=r*o,c=r*s;r*=u,o*=t,s*=t,t*=u,e[0]=1-i-r,e[1]=a+t,e[2]=l-s,e[3]=0,e[4]=a-t,e[5]=1-n-r,e[6]=c+o,e[7]=0,e[8]=l+s,e[9]=c-o,e[10]=1-n-i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}function Qp(){var e=new Float32Array(4);return e[3]=1,e}function OM(e,t){var n=t[0],i=t[1],r=t[2];t=t[3];var o=n*n+i*i+r*r+t*t;0<o&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=t*o}function ef(e,t,n,i,r){this.m=e,this.ra=t,this.l=n,this.g=i,this.s=new Ee,this.L=Qp(),this.h=Qp(),this.ka=this.qa=this.ea=this.j=null,this.G=Pi(),this.I=Pi(),this.M=Pi(),this.Z=Pi(),this.A=null,this.O=!1,this.J=this.u=null,this.Ga=this.sa=0,this.aa=this.P=this.S=this.K=null,this.H=0,this.i=75,this.W=0,this.C=r,bM(this)}ef.prototype.release=function(){this.s&&(this.s.release(),this.s=null),this.u&&(this.u.stop(),this.u=null),this.J&&(this.J.stop(),this.J=null)},ef.prototype.yd=function(){(this.O=!this.O)||this.g.viewport(0,0,this.l.width,this.l.height),Hn(this,!1)};function bM(e){jM(e),FM(e),BM(e),GM(e),VM(e),e.s.ia(e.m,"loadeddata",function(){var t;e.s.o(e.m,"canplaythrough",function(){Hn(e)}),e.s.o(e.m,"playing",function(){if(e.u&&e.u.stop(),!t){var n=e.ra.Jb();n=g(n);for(var i=n.next();!i.done;i=n.next())(i=i.value.frameRate)&&(!t||t<i)&&(t=i)}t||(t=60),Hn(e),e.u=new te(function(){Hn(e)}).Sa().wa(1/t)}),e.s.o(e.m,"pause",function(){e.u&&e.u.stop(),e.u=null,Hn(e)}),e.s.o(e.m,"seeked",function(){Hn(e)}),e.s.o(document,"visibilitychange",function(){Hn(e)})})}function jM(e){var t=e.G,n=[0,0,0],i=[1,0,0],r=[0,1,0],o=n[0],s=n[1];n=n[2];var u=r[0],a=r[1],l=r[2],c=i[0];r=i[1];var h=i[2];if(1e-6>Math.abs(o-c)&&1e-6>Math.abs(s-r)&&1e-6>Math.abs(n-h))for(o=0;16>o;o++)t[o]=o%5==0?1:0;else{i=o-c,r=s-r,c=n-h;var d=1/Math.sqrt(i*i+r*r+c*c);i*=d,r*=d,c*=d,h=a*c-l*r,l=l*i-u*c,u=u*r-a*i,(d=Math.sqrt(h*h+l*l+u*u))?(d=1/d,h*=d,l*=d,u*=d):u=l=h=0,a=r*u-c*l;var f=c*h-i*u,m=i*l-r*h;(d=Math.sqrt(a*a+f*f+m*m))?(d=1/d,a*=d,f*=d,m*=d):m=f=a=0,t[0]=h,t[1]=a,t[2]=i,t[3]=0,t[4]=l,t[5]=f,t[6]=r,t[7]=0,t[8]=u,t[9]=m,t[10]=c,t[11]=0,t[12]=-(h*o+l*s+u*n),t[13]=-(a*o+f*s+m*n),t[14]=-(i*o+r*s+c*n),t[15]=1}Zp(e.L,e.G),e=t=e.Z,n=[4,4,4],o=n[0],s=n[1],n=n[2],t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}function FM(e){pS(e),e.g.viewport(0,0,e.g.drawingBufferWidth,e.g.drawingBufferHeight),e.g.clearColor(0,0,0,1),e.g.enable(e.g.CULL_FACE),e.g.cullFace(e.g.FRONT),e.g.clear(e.g.COLOR_BUFFER_BIT)}function BM(e){var t=dS(e,e.g.VERTEX_SHADER),n=dS(e,e.g.FRAGMENT_SHADER);e.j=e.g.createProgram(),e.g.attachShader(e.j,t),e.g.attachShader(e.j,n),e.g.linkProgram(e.j),e.C=="cubemap"?(e.S=e.g.getAttribLocation(e.j,"aVertexPosition"),e.P=e.g.getAttribLocation(e.j,"aTextureCoord")):(e.S=e.g.getAttribLocation(e.j,"a_vPosition"),e.g.enableVertexAttribArray(e.S),e.P=e.g.getAttribLocation(e.j,"a_TexCoordinate"),e.g.enableVertexAttribArray(e.P))}function dS(e,t){switch(t){case e.g.VERTEX_SHADER:var n=e.C=="cubemap"?"attribute vec4 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvarying highp vec2 vTextureCoord;\nvarying highp vec3 vLighting;\nvoid main(void) {\n  gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n  vTextureCoord = aTextureCoord;\n}":"attribute vec4 a_vPosition;\n// Per-vertex texture coordinate info\nattribute vec2 a_TexCoordinate;\nuniform mat4 u_VPMatrix;\n// Passed into the fragment shader.\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nvoid main()\n{\n gl_Position = u_VPMatrix * a_vPosition;\n // Pass through texture coord\n v_TexCoordinate = a_TexCoordinate;\n pass_position = a_vPosition.xyz;\n}";break;case e.g.FRAGMENT_SHADER:n=e.C=="cubemap"?"varying highp vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\n  highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n  gl_FragColor = vec4(texelColor.rgb , texelColor.a);\n}":"precision highp float;\n#define PI 3.141592653589793238462643383279\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nuniform sampler2D uSampler;\nvoid main(void) {\nhighp float xValue =\n      (PI + atan(pass_position.z, pass_position.x)) / (2.0 * PI);\n vec2 tc = vec2(xValue, v_TexCoordinate.t);\n tc = vec2(tc.x , tc.y);\nhighp vec4 texelColor =\n      texture2D(uSampler, tc);\n  gl_FragColor = vec4(texelColor.rgb, texelColor.a);\n}";break;default:return null}return t=e.g.createShader(t),e.g.shaderSource(t,n),e.g.compileShader(t),t}function GM(e){if(e.C=="cubemap")var t={Oi:[-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1],Li:[2/3,.5,1/3,.5,1/3,0,2/3,0,2/3,.5,2/3,0,1,0,1,.5,1,1,2/3,1,2/3,.5,1,.5,0,.5,0,0,1/3,0,1/3,.5,0,.5,1/3,.5,1/3,1,0,1,1/3,1,1/3,.5,2/3,.5,2/3,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]};else{t=[];for(var n=[],i=[],r=0;100>=r;r++){var o=r/100,s=o*Math.PI,u=Math.sin(s);s=Math.cos(s);for(var a=0;100>=a;a++){var l=a/100,c=l*Math.PI*2;t.push(-1*Math.cos(c)*u,s,Math.sin(c)*u),n.push(l),n.push(o)}}for(r=0;100>r;r++)for(o=0;100>o;o++)u=101*r+o,s=u+1,a=101*(r+1)+o,l=a+1,i.push(u,a,s),i.push(s,a,l);t={Oi:t,Li:n,indices:i}}e.K=t,e.ea=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.ea),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.K.Oi),e.g.STATIC_DRAW),e.qa=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.qa),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.K.Li),e.g.STATIC_DRAW),e.ka=e.g.createBuffer(),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ka),e.g.bufferData(e.g.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.K.indices),e.g.STATIC_DRAW)}function VM(e){e.aa=e.g.createTexture(),e.g.bindTexture(e.g.TEXTURE_2D,e.aa),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_S,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_T,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MIN_FILTER,e.g.NEAREST),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MAG_FILTER,e.g.NEAREST)}function Hn(e,t){t=t===void 0?!0:t;var n=e.ra.gd()==St;!e.m||2>e.m.readyState||!n&&e.m.playbackRate==0||($p(e.I,e.i*Math.PI/180,1.5625),e.C=="cubemap"?$p(e.I,e.i*Math.PI/180,2.5):$p(e.I,e.i*Math.PI/180,1.5625),e.g.useProgram(e.j),e.g.clear(e.g.COLOR_BUFFER_BIT),pS(e),t&&(e.g.activeTexture(e.g.TEXTURE0),e.g.bindTexture(e.g.TEXTURE_2D,e.aa),e.g.pixelStorei(e.g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.g.texImage2D(e.g.TEXTURE_2D,0,e.g.RGBA,e.g.RGBA,e.g.UNSIGNED_BYTE,e.m)),e.C=="equirectangular"&&(ec(e.M,e.G,e.Z),ec(e.M,e.I,e.M)),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.ea),e.g.vertexAttribPointer(e.S,3,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.S),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.qa),e.g.vertexAttribPointer(e.P,2,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.P),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ka),e.C=="cubemap"?(e.g.uniformMatrix4fv(e.g.getUniformLocation(e.j,"uProjectionMatrix"),!1,e.I),e.g.uniformMatrix4fv(e.g.getUniformLocation(e.j,"uModelViewMatrix"),!1,e.M)):e.g.uniformMatrix4fv(e.g.getUniformLocation(e.j,"u_VPMatrix"),!1,e.M),e.g.uniform1i(e.g.getUniformLocation(e.j,"uSampler"),0),e.O&&e.g.viewport(0,0,e.l.width/2,e.l.height),e.g.drawElements(e.g.TRIANGLES,e.K.indices.length,e.g.UNSIGNED_SHORT,0),e.O&&(e.g.viewport(e.l.width/2,0,e.l.width/2,e.l.height),e.g.drawElements(e.g.TRIANGLES,e.K.indices.length,e.g.UNSIGNED_SHORT,0)))}function pS(e){var t=e.m.videoWidth;t||(t=e.l.scrollWidth);var n=e.m.videoHeight;if(n||(n=e.l.scrollHeight),e.sa!==t||e.Ga!==n){e.l.width=t,e.l.height=n,e.sa=t,e.Ga=n;var i=t/n,r=e.I,o=-i,s=1/(i-o);r[0]=0*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=(i+o)*s,r[9]=0,r[10]=-1,r[11]=-1,r[12]=0,r[13]=0,r[14]=-0,r[15]=0,e.I=r,e.g.viewport(0,0,t,n)}}function Fo(e,t,n,i){var r=90*Math.PI/180,o=e.C=="cubemap"?e.M:e.G,s=Math.sin(t);t=Math.cos(t);var u=o[0],a=o[1],l=o[2],c=o[3],h=o[8],d=o[9],f=o[10],m=o[11];o!==o&&(o[4]=o[4],o[5]=o[5],o[6]=o[6],o[7]=o[7],o[12]=o[12],o[13]=o[13],o[14]=o[14],o[15]=o[15]),o[0]=u*t-h*s,o[1]=a*t-d*s,o[2]=l*t-f*s,o[3]=c*t-m*s,o[8]=u*s+h*t,o[9]=a*s+d*t,o[10]=l*s+f*t,o[11]=c*s+m*t,e.H+=n,e.H<r&&e.H>-r?(r=Pi(),s=Pi(),t=-1*n,n=Math.sin(t),t=Math.cos(t),u=s[4],a=s[5],l=s[6],c=s[7],h=s[8],d=s[9],f=s[10],m=s[11],s!==r&&(r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15]),r[4]=u*t+h*n,r[5]=a*t+d*n,r[6]=l*t+f*n,r[7]=c*t+m*n,r[8]=h*t-u*n,r[9]=d*t-a*n,r[10]=f*t-l*n,r[11]=m*t-c*n,ec(o,r,o)):e.H-=n,n=Pi(),r=Pi(),s=Math.sin(i),i=Math.cos(i),t=r[0],u=r[1],a=r[2],l=r[3],c=r[4],h=r[5],d=r[6],f=r[7],r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=t*i+c*s,n[1]=u*i+h*s,n[2]=a*i+d*s,n[3]=l*i+f*s,n[4]=c*i-t*s,n[5]=h*i-u*s,n[6]=d*i-a*s,n[7]=f*i-l*s,ec(o,n,o),Hn(e,!1)}function tf(e,t){(t===void 0||t)&&(Zp(e.h,e.G),e.W=0,e.A=Qp(),e.A[0]=(e.h[0]-e.L[0])/20,e.A[1]=(e.h[1]-e.L[1])/20,e.A[2]=(e.h[2]-e.L[2])/20,e.A[3]=(e.h[3]-e.L[3])/20),e.h[0]-=e.A[0],e.h[1]-=e.A[1],e.h[2]-=e.A[2],e.h[3]-=e.A[3],t=Pi(),OM(e.h,e.h),hS(t,e.h),e.G=t,e.J&&(e.J.stop(),e.J=null),20>e.W?e.J=new te(function(){tf(e,!1),e.H=0,e.W++,Hn(e,!1)}).X(.025):(hS(t,e.L),e.G=t)}function nf(e,t,n,i,r){ve.call(this);var o=this;this.i=e,this.m=t,this.L=n,this.K=i,this.u=r,this.s=new Ee,this.h=new Ee,this.G=HM(this),this.g=null,this.j=!1,this.J=this.I=this.H=this.C=this.A=0,this.l=null,this.s.o(i,"loading",function(){o.g&&tf(o.g),Bo(o)}),this.s.o(i,"spatialvideoinfo",function(s){switch(s.detail.projection){case"hequ":o.l="equirectangular";break;case"fish":o.l="equirectangular";break;default:o.l=null}Bo(o)}),this.s.o(i,"nospatialvideoinfo",function(){o.l=null,Bo(o)}),this.s.o(i,"unloading",function(){o.l=null,Bo(o)}),Bo(this)}de(nf,ve),p=nf.prototype,p.release=function(){this.s&&(this.s.release(),this.s=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),ve.prototype.release.call(this)},p.configure=function(e){this.u=e,Bo(this)},p.kg=function(){return!!this.G},p.Mb=function(){return!!this.g},p.yd=function(){this.g?this.g.yd():ce("Not playing VR content")},p.Qg=function(e){this.g?Fo(this.g,e*kr,0,0):ce("Not playing VR content")},p.Og=function(e){this.g?Fo(this.g,0,e*kr,0):ce("Not playing VR content")},p.Pg=function(e){this.g?Fo(this.g,0,0,e*kr):ce("Not playing VR content")};function Bo(e){if(e.m)if(e.u.displayInVrMode||e.l){var t=e.l||e.u.defaultVrProjectionMode;e.g?e.g.C!=t&&(e.h.Za(),e.g.release(),fS(e,t)):(e.m.style.display="",fS(e,t),e.dispatchEvent(new G("vrstatuschanged",new Map().set("newStatus",e.Mb()))))}else e.u.displayInVrMode||e.l||!e.g||(e.m.style.display="none",e.h.Za(),e.g.release(),e.g=null,e.dispatchEvent(new G("vrstatuschanged",new Map().set("newStatus",e.Mb()))))}function fS(e,t){e.G&&e.m&&(e.g=new ef(e.L,e.K,e.m,e.G,t),qM(e))}function HM(e){if(!e.m||Vc())return null;for(var t=g(["webgl2","webgl"]),n=t.next();!n.done;n=t.next())if(n=e.m.getContext(n.value))return n;return null}function qM(e){e.h.o(e.i,"mousedown",function(i){if(!e.j){var r=i.clientX;i=i.clientY,e.j=!0,e.A=r,e.C=i}}),0<navigator.maxTouchPoints&&e.h.o(e.i,"touchstart",function(i){if(!e.j){var r=i.touches[0].clientX;i=i.touches[0].clientY,e.j=!0,e.A=r,e.C=i}}),e.h.o(e.i,"wheel",function(i){if(!e.j){var r=e.g,o=i.deltaY;o/=50,20<=r.i&&100>=r.i&&(r.i+=o),20>r.i?r.i=20:100<r.i&&(r.i=100),Hn(r,!1),i.preventDefault(),i.stopPropagation()}}),e.h.o(e.i,"mousemove",function(i){e.j&&gS(e,i.clientX,i.clientY)}),0<navigator.maxTouchPoints&&e.h.o(e.i,"touchmove",function(i){e.j&&gS(e,i.touches[0].clientX,i.touches[0].clientY),i.preventDefault()}),e.h.o(e.i,"mouseleave",function(){e.j=!1}),e.h.o(e.i,"mouseup",function(){e.j=!1}),0<navigator.maxTouchPoints&&e.h.o(e.i,"touchend",function(){e.j=!1});var t=!1;if(O.DeviceOrientationEvent)if(typeof DeviceMotionEvent.requestPermission=="function"){var n=function(){DeviceMotionEvent.requestPermission().then(function(i){i!=="granted"||t||(t=!0,rf(e))})};DeviceMotionEvent.requestPermission().then(function(i){e.h.Pa(e.i,"click",n),e.h.Pa(e.i,"mouseup",n),0<navigator.maxTouchPoints&&e.h.Pa(e.i,"touchend",n),i!=="granted"?(e.h.ia(e.i,"click",n),e.h.ia(e.i,"mouseup",n),0<navigator.maxTouchPoints&&e.h.ia(e.i,"touchend",n)):(t=!0,rf(e))}).catch(function(){e.h.Pa(e.i,"click",n),e.h.Pa(e.i,"mouseup",n),0<navigator.maxTouchPoints&&e.h.Pa(e.i,"touchend",n),e.h.ia(e.i,"click",n),e.h.ia(e.i,"mouseup",n),0<navigator.maxTouchPoints&&e.h.ia(e.i,"touchend",n)})}else t=!0,rf(e)}function rf(e){e.h.o(O,"deviceorientation",function(t){var n=(t.alpha||0)-e.H,i=(t.beta||0)-e.I,r=(t.gamma||0)-e.J;(10<Math.abs(n)||10<Math.abs(i)||5<Math.abs(r))&&(i=r=n=0),e.H=t.alpha||0,e.I=t.beta||0,e.J=t.gamma||0,t=screen.orientation.angle,t==90||t==-90?Fo(e.g,n*kr*-1,r*kr*-1,0):Fo(e.g,n*kr*-1,i*kr,0)})}function gS(e,t,n){var i=-.6*Math.PI/180;Fo(e.g,(t-e.A)*i,-1*(n-e.C)*i,0),e.A=t,e.C=n}var kr=Math.PI/180;function K(e,t,n,i,r){ve.call(this);var o=this;this.S=!0,this.g=r,this.C=new Je(n,e,this.g.castReceiverAppId,this.g.castAndroidReceiverCompatible),this.sa=!0,this.A=this.C.vc(),this.l=n,this.H=this.C.hd(),this.ea=e,this.j=t,this.Nb=i,this.ra=this.H.Ve(),this.m=this.s=null,this.Z=!1,this.J=[],this.ob=[],this.Xa=!1,this.P=new te(function(){o.j.style.cursor="none",o.Xa=!1,qn(o)}),this.ka=new te(function(){o.h.removeAttribute("shown"),o.M.X(2)}),this.M=new te(function(){for(var s=g(o.J),u=s.next();!u.done;u=s.next())ie(u.value,!1)}),this.Aa=new te(function(){o.wc()&&tc(o)}),this.I=null,this.G=[],this.xa=ak(),this.i=new Ee,this.u=null,this.configure(this.g),ik(this),this.qa=new Set,of(this),this.Aa.wa(this.g.refreshTickInSeconds),this.i.o(this.xa,"locale-changed",function(s){o.ra.setLocale(s.locales[0])}),this.ra.initInterstitial(this.L,this.ea,this.l)}de(K,ve),p=K.prototype,p.destroy=function(){var e=this;return M(function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.l){t.B(2);break}return T(t,document.exitPictureInPicture(),2);case 2:if(e.i&&(e.i.release(),e.i=null),e.P&&(e.P.stop(),e.P=null),e.ka&&(e.ka.stop(),e.ka=null),e.M&&(e.M.stop(),e.M=null),e.Aa&&(e.Aa.stop(),e.Aa=null),e.u&&(e.u.release(),e.u=null),mS(e),e.h&&(e.j.removeChild(e.h),e.h=null),!e.C){t.B(4);break}return T(t,e.C.destroy(),5);case 5:e.C=null;case 4:if(!e.ea){t.B(6);break}return T(t,e.ea.destroy(),7);case 7:e.ea=null;case 6:e.H=null,e.l=null,e.A=null,e.xa=null,e.qa.clear(),ve.prototype.release.call(e),V(t)}})};function mS(e){for(var t=g(e.G),n=t.next();!n.done;n=t.next())n.value.release();e.G=[]}function pt(e,t){sf.set(e,t)}p.Zi=function(e){this.sa=e,of(this)},p.ek=function(){qn(this)},p.configure=function(e){this.g=e,this.C.Mh(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.m&&(this.m=null),this.Ia&&(this.Ia=null),this.Ha&&(this.Ha=null),this.u&&this.u.configure(e),this.h?(Ai(this.h),mS(this)):(WM(this),nk(this),this.u=new nf(this.h,this.Nb,this.l,this.H,this.g)),this.j.classList.add("shaka-video-container"),this.l.classList.add("shaka-video"),YM(this),this.g.addBigPlayButton&&XM(this),this.g.customContextMenu&&(this.Ha=new Tu(this.W,this),this.G.push(this.Ha)),this.aa||$M(this),this.g.seekOnTaps&&(ZM(this),QM(this)),this.Fa=q("div"),this.Fa.classList.add("shaka-server-side-ad-container"),this.h.appendChild(this.Fa),ek(this),this.J=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.J.push.apply(this.J,W(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),tk(this),this.ob=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),qn(this),e=g(this.j.getElementsByClassName("shaka-no-propagation"));for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=function(i){return i.stopPropagation()};this.i.o(t,"click",n),this.i.o(t,"dblclick",n)}},p.oh=function(e){(this.S=e)?(this.j.setAttribute("shaka-controls","true"),this.l.tabIndex=-1,this.l.controls=!1):this.j.removeAttribute("shaka-controls"),qn(this)},p.Bi=function(e){this.l.controls=e,this.l.tabIndex=e?0:-1,e&&this.oh(!1)},p.getAd=function(){return this.s},p.jj=function(){return this.C},p.xj=function(){return this.xa},p.Pj=function(){return this.j},p.vc=function(){return this.A},p.wj=function(){return this.l},p.hd=function(){return this.H},p.vj=function(){return this.ea},p.oj=function(){return this.h},p.Gj=function(){return this.Fa},p.lj=function(){return this.L},p.mj=function(){return this.g},p.bk=function(){return this.Z},p.sh=function(e){this.Z=e},p.Vj=function(){return this.sa},p.Ig=function(){return this.m?this.m.getValue():this.A.currentTime},p.Di=function(e){this.I=e},p.Rd=function(){return this.J.some(function(e){return!e.classList.contains("shaka-hidden")})},p.Jc=function(){this.M.Sa()},p.ee=function(){return!!(document.fullscreenEnabled||this.l.webkitSupportsFullscreen)},p.ld=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var e=this.l;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1};function vS(e){var t,n,i;return M(function(r){switch(r.g){case 1:if(Z(r,2),!document.fullscreenEnabled){t=e.l,t.webkitSupportsFullscreen&&t.webkitEnterFullscreen(),r.B(4);break}if(!document.pictureInPictureElement){r.B(5);break}return T(r,document.exitPictureInPicture(),5);case 5:return n=e.g.fullScreenElement,T(r,n.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!e.g.forceLandscapeOnFullscreen||!screen.orientation){r.B(4);break}return Z(r,9),T(r,screen.orientation.lock("landscape"),11);case 11:le(r,4,2);break;case 9:Q(r,2);case 4:le(r,0);break;case 2:i=Q(r),e.dispatchEvent(new G("error",new Map().set("detail",i))),V(r)}})}function yS(e){var t;return M(function(n){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),T(n,document.exitFullscreen(),0)):(t=e.l,t.webkitSupportsFullscreen&&t.webkitExitFullscreen(),n.B(0))})}p.Ef=function(){var e=this;return M(function(t){return e.ld()?T(t,yS(e),0):T(t,vS(e),0)})},p.ef=function(){return this.C.Ra()?!1:"documentPictureInPicture"in O&&this.g.preferDocumentPictureInPicture||document.pictureInPictureEnabled?!this.l.disablePictureInPicture:!1},p.gf=function(){return"documentPictureInPicture"in O&&this.g.preferDocumentPictureInPicture?!!O.documentPictureInPicture.window:!!document.pictureInPictureElement},p.xe=function(){var e=this,t,n;return M(function(i){if(i.g==1)return Z(i,2),"documentPictureInPicture"in O&&e.g.preferDocumentPictureInPicture?T(i,KM(e),5):document.pictureInPictureElement?T(i,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),t=e.l,T(i,t.requestPictureInPicture(),5));if(i.g!=2)return le(i,0);n=Q(i),e.dispatchEvent(new G("error",new Map().set("detail",n))),V(i)})};function KM(e){var t,n,i,r,o,s;return M(function(u){if(u.g==1)return O.documentPictureInPicture.window?(O.documentPictureInPicture.window.close(),u.return()):(t=e.j,n=t.getBoundingClientRect(),T(u,O.documentPictureInPicture.requestWindow({width:n.width,height:n.height}),2));i=u.h,zM(i),r=t.parentNode||document.body,o=e.j.cloneNode(!0),o.style.visibility="hidden",o.style.height=getComputedStyle(t).height,r.appendChild(o),s=document.createElement("style"),s.append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}"),i.document.head.append(s),i.document.body.append(t),e.i.ia(i,"pagehide",function(){o.replaceWith(t)}),V(u)})}function zM(e){var t=[].concat(W(document.styleSheets)).map(function(i){try{return[].concat(W(i.cssRules)).map(function(o){return o.cssText}).join("")}catch(o){var r=document.createElement("link");r.rel="stylesheet",r.type=i.type,r.media=i.media,r.href=i.href,e.document.head.appendChild(r)}return""}).filter(Boolean).join("\n"),n=document.createElement("style");n.textContent=t,e.document.head.appendChild(n)}p.Ii=function(){ie(this.K,!0),ie(this.L,!0),this.h.setAttribute("ad-active","true")},p.ai=function(){ie(this.K,!1),ie(this.L,!1),this.h.removeAttribute("ad-active")};function TS(e){e.S&&e.A.duration&&(e.H.bd(),e.A.paused&&!e.Z?e.A.play():e.A.pause())}function ES(e){e.s&&e.s.isPaused()?e.s.play():e.s&&e.s.pause()}function WM(e){e.h=q("div"),e.h.classList.add("shaka-controls-container"),e.j.appendChild(e.h),e.j.setAttribute("shaka-controls","true"),e.i.o(e.h,"touchstart",function(t){e.A.duration&&(e.wc()?e.I=Date.now():(Go(e,t),t.cancelable&&t.preventDefault()))},{passive:!1}),e.i.o(e.h,"click",function(){SS(e)}),e.i.o(e.h,"dblclick",function(){e.g.doubleClickForFullscreen&&e.ee()&&e.Ef()})}function XM(e){var t=q("div");t.classList.add("shaka-play-button-container"),e.h.appendChild(t),e.Ia=new Eu(t,e),e.G.push(e.Ia)}function YM(e){var t=q("div");t.classList.add("shaka-scrim-container"),e.h.appendChild(t)}function JM(e){e.K=q("div"),e.K.classList.add("shaka-ad-controls");var t=e.s!=null&&e.s.isLinear();ie(e.K,t),e.O.appendChild(e.K),t=new Hp(e.K,e),e.G.push(t),t=new Yl(e.K,e),e.G.push(t),t=new Ql(e.K,e),e.G.push(t)}function $M(e){e.aa=q("div"),e.aa.classList.add("shaka-spinner-container"),e.j.appendChild(e.aa);var t=q("div");t.classList.add("shaka-spinner"),e.aa.appendChild(t),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.classList.add("shaka-spinner-svg"),e.setAttribute("viewBox","0 0 30 30"),t.appendChild(e),t=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.classList.add("shaka-spinner-path"),t.setAttribute("cx","15"),t.setAttribute("cy","15"),t.setAttribute("r","14.5"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-miterlimit","10"),e.appendChild(t)}function ZM(e){var t=q("div");t.classList.add("shaka-hidden-fast-forward-container"),e.h.appendChild(t),e.Kb=new qp(t,e),e.G.push(e.Kb)}function QM(e){var t=q("div");t.classList.add("shaka-hidden-rewind-container"),e.h.appendChild(t),e.Lb=new Kp(t,e),e.G.push(e.Lb)}function ek(e){e.O=q("div"),e.O.classList.add("shaka-bottom-controls"),e.O.classList.add("shaka-no-propagation"),e.h.appendChild(e.O),e.i.o(e.O,"click",function(i){i.target.closest(".shaka-overflow-button")||e.Jc()}),JM(e),e.W=q("div"),e.W.classList.add("shaka-controls-button-panel"),e.W.classList.add("shaka-show-controls-on-mouse-over"),e.g.enableTooltips&&e.W.classList.add("shaka-tooltips-on"),e.O.appendChild(e.W);for(var t=g(e.g.controlPanelElements),n=t.next();!n.done;n=t.next())n=n.value,sf.get(n)?(n=sf.get(n).create(e.W,e),e.G.push(n)):ce("Unrecognized control panel element requested:",n)}function tk(e){if(e.g.addSeekBar)e.m=wS.create(e.O,e),e.G.push(e.m);else{e=g(e.J);for(var t=e.next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}}function nk(e){e.L=q("div"),e.L.classList.add("shaka-client-side-ad-container"),ie(e.L,!1),e.i.o(e.L,"click",function(){SS(e)}),e.j.appendChild(e.L)}function ik(e){e.i.o(e.H,"buffering",function(){e.S&&ie(e.aa,e.H.ce())}),e.S&&ie(e.aa,e.H.ce()),e.i.o(O,"keydown",function(t){sk(e,t)}),e.i.o(O,"click",function(){return e.Jc()}),e.i.o(e,"submenuopen",function(){e.Jc()}),e.i.o(e.A,"play",function(){qn(e)}),e.i.o(e.A,"pause",function(){qn(e)}),e.i.o(e.j,"mousemove",function(t){Go(e,t)}),e.i.o(e.j,"touchmove",function(t){Go(e,t)},{passive:!0}),e.i.o(e.j,"touchend",function(t){Go(e,t)},{passive:!0}),e.i.o(e.j,"mouseleave",function(){e.I||e.P.Sa()}),e.i.o(e.C,"caststatuschanged",function(){of(e)}),e.i.o(e.u,"vrstatuschanged",function(){e.dispatchEvent(new G("vrstatuschanged"))}),e.i.o(e.j,"keydown",function(t){var n=document.activeElement,i=n&&n.classList?n.classList.contains("shaka-volume-bar"):!1,r=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(e.h.contains(n)&&Go(e,t),e.g.enableKeyboardPlaybackControls){n=e.g.keyboardSeekDistance;var o=e.g.keyboardLargeSeekDistance;switch(t.key){case"ArrowLeft":e.m&&r&&!i&&0<n&&(t.preventDefault(),Vo(e,e.m.getValue()-n));break;case"ArrowRight":e.m&&r&&!i&&0<n&&(t.preventDefault(),Vo(e,e.m.getValue()+n));break;case"PageDown":e.m&&r&&0<n&&(t.preventDefault(),Vo(e,e.m.getValue()-o));break;case"PageUp":e.m&&r&&0<n&&(t.preventDefault(),Vo(e,e.m.getValue()+o));break;case"Home":e.m&&Vo(e,e.H.Oa().start);break;case"End":e.m&&Vo(e,e.H.Oa().end);break;case"f":e.ee()&&e.Ef();break;case"m":e.s&&e.s.isLinear()?e.s.setMuted(!e.s.isMuted()):e.l.muted=!e.l.muted;break;case"p":e.ef()&&e.xe();break;case" ":r&&AS(e)}}}),e.i.o(e.j,"keyup",function(t){e.qa.delete(t.key)}),e.i.o(e.ra,"ad-started",function(t){e.s=t.ad,e.Ii()}),e.i.o(e.ra,"ad-stopped",function(){e.s=null,e.ai()}),screen.orientation&&e.i.o(screen.orientation,"change",function(){return M(function(t){return T(t,rk(e),0)})})}function rk(e){return M(function(t){return e.A&&e.A.readyState!=0&&!e.C.Ra()&&e.g.enableFullscreenOnRotation&&e.ee()?screen.orientation.type.includes("landscape")&&!e.ld()?T(t,vS(e),0):screen.orientation.type.includes("portrait")&&e.ld()?T(t,yS(e),0):t.B(0):t.return()})}function Go(e,t){t.type=="mousemove"&&(e.h.classList.remove("shaka-keyboard-navigation"),qn(e)),t.type=="touchstart"||t.type=="touchmove"||t.type=="touchend"||t.type=="keyup"?e.I=Date.now():e.I+1e3<Date.now()&&(e.I=null),e.I&&t.type=="mousemove"||(e.j.style.cursor="",e.Xa=!0,e.M.stop(),e.wc()||(tc(e),qn(e)),e.P.stop(),t.type!="touchend"&&t.type!="keyup"&&e.I||e.P.X(3))}function ok(e){return O.matchMedia("hover: hover").matches?e.ob.some(function(t){return t.matches(":hover")}):!1}function qn(e){var t=e.s?e.s.isPaused():!1,n=e.A.paused&&!e.Z,i=e.h.classList.contains("shaka-keyboard-navigation");t||(!e.s||!e.s.isLinear())&&n||e.Xa||i||ok(e)?(tc(e),e.h.setAttribute("shown","true"),e.ka.stop()):e.ka.X(e.g.fadeDelay)}function SS(e){e.S&&!e.Mb()&&(e.Rd()?e.M.Sa():e.g.singleClickForPlayAndPause&&AS(e))}function AS(e){e.s&&e.s.isLinear()?ES(e):TS(e)}function of(e){var t=e.C.Ra();e.dispatchEvent(new G("caststatuschanged",new Map().set("newStatus",t))),t?e.h.setAttribute("casting","true"):e.h.removeAttribute("casting")}p.wc=function(){return this.S?this.h.getAttribute("shown")!=null||this.h.getAttribute("casting")!=null:!1};function Vo(e,t){e.m.changeTo(t),e.wc()&&tc(e)}function tc(e){if(e.m)if(e.m.setValue(e.A.currentTime),e.m.update(),e.m.isShowing())for(var t=g(e.J),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");else for(t=g(e.J),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.dispatchEvent(new G("timeandseekrangeupdated"))}function sk(e,t){e.qa.add(t.key);var n=e.Rd();t.key=="Tab"&&(e.h.classList.add("shaka-keyboard-navigation"),qn(e),e.i.o(O,"mousedown",function(){e.i.Pa(O,"mousedown")})),t.key=="Escape"&&e.M.Sa(),n&&e.qa.has("Tab")&&uk(e,t)}function uk(e,t){var n=e.J.filter(function(o){return!o.classList.contains("shaka-hidden")});if(n.length){var i=n[0];if(i.childNodes.length){for(n=i.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(i=i.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;e.qa.has("Shift")?r==n&&(t.preventDefault(),i.focus()):r==i&&(t.preventDefault(),n.focus())}}}p.Sk=function(){var e=new Event("mousemove",{bubbles:!1,cancelable:!1});Go(this,e)},p.Uj=function(){this.I||this.P.Sa()},p.kg=function(){return this.u.kg()},p.Mb=function(){return this.u.Mb()},p.Nj=function(){var e=this.u;if(e.g){e=e.g,Zp(e.h,e.G);var t=e.h;e=t[0];var n=t[1],i=t[2];t=t[3];var r=i*i,o=t*t,s=e*e+n*n+r+o,u=e*t-n*i;u>.499995*s?(s=Math.PI/2,e=2*Math.atan2(n,e)):u<-.499995*s?(s=-Math.PI/2,e=2*Math.atan2(n,e)):(s=Math.asin(2*(e*i-t*n)),e=Math.atan2(2*(e*t+n*i),1-2*(r+o))),e=180*Math.acos(Math.cos(e)*Math.cos(s))/Math.PI}else ce("Not playing VR content"),e=null;return e},p.Mj=function(){var e=this.u;return e.g?e=e.g.i:(ce("Not playing VR content"),e=null),e},p.Rk=function(e){var t=this.u;t.g?(0>e?(ce("Field of view should be greater than 0"),e=0):100<e&&(ce("Field of view should be less than 100"),e=100),t=t.g,t.i=e,Hn(t,!1)):ce("Not playing VR content")},p.yd=function(){this.u.yd()},p.Qg=function(e){this.u.Qg(e)},p.Og=function(e){this.u.Og(e)},p.Pg=function(e){this.u.Pg(e)};function ak(){var e=new st("en");return e.Ma("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_TIME","الإعلان: [AD_TIME]"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),e.Ma("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),e.Ma("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recenter"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.Ma("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RECENTER_VR","Recenter"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.Ma("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadísticas de anuncios"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["QUALITY","Calidad"],["RECENTER_VR","Recentrar"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["STATISTICS","Estadísticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["TOGGLE_STEREOSCOPIC","Alternar estereoscópico"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Ma("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadísticas de anuncios"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RECENTER_VR","Recentrar"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["STATISTICS","Estadísticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["TOGGLE_STEREOSCOPIC","Alternar estereoscópico"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Ma("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_STATISTICS","Statistiques de l'annonce"],["AD_TIME","Annonce : [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["DOWNLOAD_VIDEO_FRAME","Enregistrer l'image vidéo"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["QUALITY","Qualité"],["RECENTER_VR","Recentrer"],["REPLAY","Rejouer"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["STATISTICS","Statistiques"],["SUBTITLE_FORCED","Forcé"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stéréoscopique ON/OFF"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.Ma("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.Ma("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_TIME","広告: [AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),e.Ma("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_TIME","광고: [AD_TIME]"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),e.Ma("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.Ma("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_STATISTICS","Statystyki reklam"],["AD_TIME","Reklama: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["DOWNLOAD_VIDEO_FRAME","Zapisz klatkę wideo"],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["QUALITY","Jakość"],["RECENTER_VR","Wycentruj"],["REPLAY","Odtwórz od nowa"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["STATISTICS","Statystyki"],["SUBTITLE_FORCED","Wymuszone"],["SURROUND","Przestrzenny"],["TOGGLE_STEREOSCOPIC","Przełącz widok stereoskopowy"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),e.Ma("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estatísticas de anúncios"],["AD_TIME","Anúncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["DOWNLOAD_VIDEO_FRAME","Salvar quadro de vídeo"],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["QUALITY","Qualidade"],["RECENTER_VR","Recentralizar"],["REPLAY","Replay"],["RESOLUTION","Resolução"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["STATISTICS","Estatísticas"],["SUBTITLE_FORCED","Forçado"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Alternar estereoscópico"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),e.Ma("ru",new Map([["AD_DURATION","Продолжительность рекламы"],["AD_PROGRESS","Реклама [AD_ON] из [NUM_ADS]"],["AD_TIME","Реклама: [AD_TIME]"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Субтитры"],["CAST","Транслировать..."],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Выкл."],["ON","Вкл."],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),e.Ma("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_TIME","โฆษณา: [AD_TIME]"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),e.Ma("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),e.Ma("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_TIME","广告：[AD_TIME]"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),e.Ma("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_TIME","廣告：[AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]])),e.Lh(navigator.languages||[]),e}j("shaka.ui.Controls",K),K.prototype.incrementRoll=K.prototype.Pg,K.prototype.incrementPitch=K.prototype.Og,K.prototype.incrementYaw=K.prototype.Qg,K.prototype.toggleStereoscopicMode=K.prototype.yd,K.prototype.setVRFieldOfView=K.prototype.Rk,K.prototype.getVRFieldOfView=K.prototype.Mj,K.prototype.getVRNorth=K.prototype.Nj,K.prototype.isPlayingVR=K.prototype.Mb,K.prototype.canPlayVR=K.prototype.kg,K.prototype.hideUI=K.prototype.Uj,K.prototype.showUI=K.prototype.Sk,K.prototype.isOpaque=K.prototype.wc,K.prototype.hideAdUI=K.prototype.ai,K.prototype.showAdUI=K.prototype.Ii,K.prototype.togglePiP=K.prototype.xe,K.prototype.isPiPEnabled=K.prototype.gf,K.prototype.isPiPAllowed=K.prototype.ef,K.prototype.toggleFullScreen=K.prototype.Ef,K.prototype.isFullScreenEnabled=K.prototype.ld,K.prototype.isFullScreenSupported=K.prototype.ee,K.prototype.hideSettingsMenus=K.prototype.Jc,K.prototype.anySettingsMenusAreOpen=K.prototype.Rd,K.prototype.setLastTouchEventTime=K.prototype.Di,K.prototype.getDisplayTime=K.prototype.Ig,K.prototype.isCastAllowed=K.prototype.Vj,K.prototype.setSeeking=K.prototype.sh,K.prototype.isSeeking=K.prototype.bk,K.prototype.getConfig=K.prototype.mj,K.prototype.getClientSideAdContainer=K.prototype.lj,K.prototype.getServerSideAdContainer=K.prototype.Gj,K.prototype.getControlsContainer=K.prototype.oj,K.prototype.getLocalPlayer=K.prototype.vj,K.prototype.getPlayer=K.prototype.hd,K.prototype.getLocalVideo=K.prototype.wj,K.prototype.getVideo=K.prototype.vc,K.prototype.getVideoContainer=K.prototype.Pj,K.prototype.getLocalization=K.prototype.xj,K.prototype.getCastProxy=K.prototype.jj,K.prototype.getAd=K.prototype.getAd,K.prototype.setEnabledNativeControls=K.prototype.Bi,K.prototype.setEnabledShakaControls=K.prototype.oh,K.prototype.configure=K.prototype.configure,K.prototype.loadComplete=K.prototype.ek,K.prototype.allowCast=K.prototype.Zi,K.registerSeekBar=function(e){wS=e},K.registerElement=pt,K.prototype.destroy=K.prototype.destroy;var sf=new Map,wS=new Yp;function Au(e,t){ae.call(this,e,t);var n=this;this.l=this.controls.g,this.j=this.controls.h,this.i=[],this.g=Ye(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=q("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),lk(this),this.eventManager.o(this.localization,"locale-updated",function(){uf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){uf(n)}),this.eventManager.o(this.adManager,"ad-started",function(){n.ad&&n.ad.isLinear()&&ie(n.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){ie(n.g,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){ie(n.h,!1)}),this.eventManager.o(this.h,"touchstart",function(i){n.controls.Di(Date.now()),i.stopPropagation()}),this.eventManager.o(this.g,"click",function(){ck(n)}),uf(this),this.ad&&this.ad.isLinear()&&ie(this.g,!1)}de(Au,ae),Au.prototype.release=function(){this.j=null;for(var e=g(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],ae.prototype.release.call(this)};function zt(e,t){af.set(e,t)}function lk(e){for(var t=g(e.l.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,af.get(n)?(n=af.get(n),e.i.push(n.create(e.h,e.controls))):ce("Unrecognized overflow menu element requested:",n)}function ck(e){if(e.controls.Rd())e.controls.Jc();else{ie(e.h,!0),qn(e.controls);var t=function(n){return n.classList.contains("shaka-hidden")==0};I0(e.h.childNodes,t)&&Nr(e.h.childNodes,t)[0].focus()}}function uf(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}j("shaka.ui.OverflowMenu",Au),Au.registerElement=zt;function xS(){}xS.prototype.create=function(e,t){return new Au(e,t)},pt("overflow_menu",new xS);var af=new Map;function nc(e,t){function n(r){return i.j[r]}ae.call(this,e,t);var i=this;this.h=Ye(),this.h.classList.add("shaka-ad-statistics-button"),this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="insert_chart_outlined",this.h.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),this.u=q("span"),e.appendChild(this.u),this.m=q("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.h.appendChild(e),this.parent.appendChild(this.h),this.g=q("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-ad-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.h.appendChild(this.g),this.C=[],this.j=this.adManager.getStats(),this.s={},this.A={loadTimes:function(r){var o=0;r=g(i.j[r]);for(var s=r.next();!s.done;s=r.next())o+=parseFloat(s.value);return o},averageLoadTime:n,started:n,playedCompletely:n,skipped:n,errors:n},this.l=new te(function(){i.j=i.adManager.getStats();for(var r=g(i.C),o=r.next();!o.done;o=r.next())o=o.value,i.s[o].textContent=i.A[o](o)}),ic(this),hk(this),this.eventManager.o(this.localization,"locale-updated",function(){ic(i)}),this.eventManager.o(this.localization,"locale-changed",function(){ic(i)}),this.eventManager.o(this.h,"click",function(){ie(i.parent,!1),i.g.classList.contains("shaka-hidden")?(i.i.textContent="insert_chart",i.l.wa(.1),ie(i.g,!0)):(i.i.textContent="insert_chart_outlined",i.l.stop(),ie(i.g,!1)),ic(i)}),this.eventManager.o(this.player,"loading",function(){ie(i.h,!1)}),this.eventManager.o(this.adManager,"ad-started",function(){ie(i.h,!0)})}de(nc,ae);function ic(e){e.u.textContent=e.localization.resolve("AD_STATISTICS"),e.h.ariaLabel=e.localization.resolve("AD_STATISTICS"),e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function hk(e){for(var t=g(e.controls.g.adStatisticsList),n=t.next();!n.done;n=t.next())if(n=n.value,n in e.j){var i=e.g,r=i.appendChild,o=e,s=q("div"),u=q("label");u.textContent=n+":",s.appendChild(u),u=q("span"),u.textContent=o.A[n](n),s.appendChild(u),o.s[n]=u,r.call(i,s),e.C.push(n)}else ce("Unrecognized ad statistic element:",n)}nc.prototype.release=function(){this.l.stop(),this.l=null,ae.prototype.release.call(this)},j("shaka.ui.AdStatisticsButton",nc);function lf(){}lf.prototype.create=function(e,t){return new nc(e,t)},zt("ad_statistics",new lf),Oo("ad_statistics",new lf);function cf(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=q("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),O.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),e.appendChild(this.j),this.i=q("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),hf(this),IS(this),this.eventManager.o(this.localization,"locale-updated",function(){hf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){hf(n)}),this.eventManager.o(this.g,"click",function(){n.controls.vc().webkitShowPlaybackTargetPicker()}),e=this.controls.vc(),this.eventManager.o(e,"webkitplaybacktargetavailabilitychanged",function(i){var r=n.player.gd()==mt;ie(n.g,i.availability=="available"&&r)}),this.eventManager.o(e,"webkitcurrentplaybacktargetiswirelesschanged",function(){IS(n)})}de(cf,ae);function IS(e){var t=e.controls.vc();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function hf(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}j("shaka.ui.AirPlayButton",cf);function df(){}df.prototype.create=function(e,t){return new cf(e,t)},zt("airplay",new df),pt("airplay",new df);function Lt(e,t,n,i){i=i===void 0?null:i,this.i=e,this.j=t,this.h=rc(this),t.dataset.shakaPlayerContainer="",t.ui=this,this.Sg()&&t.classList.add("shaka-mobile"),this.g=new K(e,t,n,i,this.h),this.configure({}),n.controls||e.uh(t),t.ui=this,n.ui=this}p=Lt.prototype,p.destroy=function(){var e=this;return M(function(t){if(t.g==1)return e.g?T(t,e.g.destroy(),2):t.B(2);if(t.g!=4)return e.g=null,e.i?T(t,e.i.destroy(),4):t.B(4);e.i=null,V(t)})},p.Sg=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:nr()&&1<navigator.maxTouchPoints},p.getConfiguration=function(){var e=rc(this);return Ds(e,this.h,rc(this),{},""),e},p.configure=function(e,t){arguments.length==2&&typeof e=="string"&&(e=Ns(e,t)),Ds(this.h,e,rc(this),{},""),this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast"),this.g.configure(this.h),this.g.dispatchEvent(new G("uiupdated"))},p.nj=function(){return this.g},p.Ok=function(e){this.g.oh(e)};function rc(e){var t={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate recenter_vr toggle_stereoscopic save_video_frame".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent manifestSizeBytes bytesDownloaded nonFatalErrorCount manifestPeriodCount manifestGapCount".split(" "),adStatisticsList:"loadTimes averageLoadTime started playedCompletely skipped errors".split(" "),contextMenuElements:["loop","picture_in_picture","save_video_frame","statistics","ad_statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:oc,textTrackLabelFormat:oc,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:e.j,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!0,tapSeekDistance:10,refreshTickInSeconds:.125,displayInVrMode:!1,defaultVrProjectionMode:"equirectangular"};return"remote"in HTMLMediaElement.prototype?t.overflowMenuButtons.push("remote"):O.WebKitPlaybackTargetAvailabilityEvent&&t.overflowMenuButtons.push("airplay"),e.Sg()&&(t.addBigPlayButton=!0,t.controlPanelElements=t.controlPanelElements.filter(function(n){return n!="play_pause"&&n!="volume"})),t}function CS(){var e,t,n,i,r,o,s,u,a,l,c,h,d,f,m,y,v,A,S,x,E;return M(function(w){switch(w.g){case 1:if(NT(),!fv())return pf("shaka-ui-load-failed",LS),w.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),t=document.querySelectorAll("[data-shaka-player]"),n=document.querySelectorAll("[data-shaka-player-canvas]"),i=document.querySelectorAll("[data-shaka-player-vr-canvas]"),!t.length&&!e.length){w.B(2);break}if(t.length&&!e.length){for(r=g(t),o=r.next();!o.done;o=r.next())s=o.value,s.ui||(u=document.createElement("div"),a=s.parentElement,a.replaceChild(u,s),u.appendChild(s),l=kS(u,n,i),c=l.gi,h=l.Qi,MS(u,s,c,h));w.B(2);break}d=g(e),f=d.next();case 4:if(f.done){w.B(2);break}if(m=f.value,m.ui){w.B(5);break}for(y=null,v=g(t),o=v.next();!o.done;o=v.next())if(A=o.value,A.parentElement==m){y=A;break}return y||(y=document.createElement("video"),y.setAttribute("playsinline",""),m.appendChild(y)),S=kS(m,n,i),x=S.gi,E=S.Qi,Z(w,7),T(w,MS(m,y,x,E),9);case 9:le(w,5);break;case 7:return Q(w),pf("shaka-ui-load-failed",RS),w.return();case 5:f=d.next(),w.B(4);break;case 2:pf("shaka-ui-loaded"),V(w)}})}function pf(e,t){var n=null;t!=null&&(n={reasonCode:t}),e=new CustomEvent(e,{detail:n}),document.dispatchEvent(e)}function MS(e,t,n,i){var r,o,s,u,a,l,c,h,d;return M(function(f){switch(f.g){case 1:r=new b,o=new Lt(r,e,t,i),r.Hh(n),s="",u=!1,e.dataset&&e.dataset.shakaPlayerCastReceiverId?(s=e.dataset.shakaPlayerCastReceiverId,u=e.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"):t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(s=t.dataset.shakaPlayerCastReceiverId,u=t.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"),s.length&&o.configure({castReceiverAppId:s,castAndroidReceiverCompatible:u}),t.controls&&o.g.Bi(!0),(a=t.getAttribute("src"))&&(l=document.createElement("source"),l.setAttribute("src",a),t.appendChild(l),t.removeAttribute("src")),c=g(t.querySelectorAll("source")),h=c.next();case 2:if(h.done){f.B(4);break}return d=h.value,Z(f,5),T(f,o.g.hd().load(d.getAttribute("src")),7);case 7:f.B(4);break;case 5:Q(f);case 3:h=c.next(),f.B(2);break;case 4:return T(f,r.ac(t),0)}})}function kS(e,t,n){var i=null,r=g(t);for(t=r.next();!t.done;t=r.next())if(t=t.value,t.parentElement==e){i=t;break}for(i||(i=document.createElement("canvas"),i.classList.add("shaka-canvas-container"),e.appendChild(i)),r=null,n=g(n),t=n.next();!t.done;t=n.next())if(t=t.value,t.parentElement==e){r=t;break}return r||(r=document.createElement("canvas"),r.classList.add("shaka-vr-canvas-container"),e.appendChild(r)),{gi:i,Qi:r}}j("shaka.ui.Overlay",Lt),Lt.prototype.setEnabled=Lt.prototype.Ok,Lt.prototype.getControls=Lt.prototype.nj,Lt.prototype.configure=Lt.prototype.configure,Lt.prototype.getConfiguration=Lt.prototype.getConfiguration,Lt.prototype.isMobile=Lt.prototype.Sg,Lt.prototype.destroy=Lt.prototype.destroy;var oc=0;Lt.TrackLabelFormat={LANGUAGE:oc,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var LS=0,RS=1;Lt.FailReasonCode={NO_BROWSER_SUPPORT:LS,PLAYER_FAILED_TO_LOAD:RS},document.readyState=="complete"?M(function(e){if(e.g==1)return T(e,Promise.resolve(),2);CS(),V(e)}):O.addEventListener("load",CS);function PS(e,t,n,i,r,o,s,u){function a(C){var N="";return C=C.toLowerCase(),C.startsWith("mp4a")?N="AAC":C==="ec-3"||C==="ac-3"?N="Dolby":C==="opus"?N="Opus":C==="flac"&&(N="fLaC"),N&&" "+N}function l(C){var N="";return 5<=C&&(N=" "+o.resolve("SURROUND")),N}function c(C,N,_,U,B){return N=[C,N],u&&U!=null&&N.push(U),d(C)&&B&&N.push(B),_&&s==3&&N.push(_),N.join(": ")}function h(C){return C.type=="variant"?C.audioRoles?C.audioRoles.join(", "):void 0:C.roles.join(", ")}function d(C){return m.has(C)&&1<m.get(C).size}for(var f=e.find(function(C){return C.active==1}),m=new Map,y=g(e),v=y.next();!v.done;v=y.next()){var A=v.value;A.audioCodec&&(m.has(A.language)||m.set(A.language,new Set),m.get(A.language).add(A.audioCodec))}for(y=oS(t),Ai(t),t.appendChild(y),y=new Map,A=g(e),v=A.next();!v.done;v=A.next())v=v.value,y.has(v.language)||y.set(v.language,new Set),y.get(v.language).add(h(v));for(y=new Set,f=f?c(f.language,h(f),f.label,f.channelsCount,f.audioCodec):"",A={},e=g(e),v=e.next();!v.done;A={Eb:A.Eb},v=e.next()){A.Eb=v.value,v=A.Eb.language;var S=A.Eb.forced,x=o.resolve("SUBTITLE_FORCED"),E=h(A.Eb),w=A.Eb.label,I=A.Eb.channelsCount,k=A.Eb.audioCodec,R=c(v,E,w,I,k);if(!y.has(R)){y.add(R);var D=Ye();D.addEventListener("click",function(C){return function(){n(C.Eb)}}(A));var P=q("span");switch(D.appendChild(P),P.textContent=dk(v,o),s){case oc:d(v)&&(P.textContent+=a(k)),u&&(P.textContent+=l(I)),S&&(P.textContent+=" ("+x+")");break;case 1:d(v)&&(P.textContent+=a(k)),u&&(P.textContent+=l(I)),E?P.textContent=E:(ce("Track #"+A.Eb.id+" does not have a role, but the UI is configured to only show role."),P.textContent="?"),S&&(P.textContent+=" ("+x+")");break;case 2:d(v)&&(P.textContent+=a(k)),u&&(P.textContent+=l(I)),E&&(P.textContent+=": "+E),S&&(P.textContent+=" ("+x+")");break;case 3:w?P.textContent=w:(ce("Track #"+A.Eb.id+" does not have a label, but the UI is configured to only show labels."),P.textContent="?")}i&&R==f&&(D.appendChild(_o()),P.classList.add("shaka-chosen-item"),D.ariaSelected="true",r.textContent=P.textContent),t.appendChild(D)}}}function dk(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=Fr(e);return e in Mr?Mr[e].D:n in Mr?Mr[n].D+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function ni(e,t,n){ae.call(this,e,t);var i=this;pk(this,n),fk(this),gk(this),this.eventManager.o(this.button,"click",function(){i.menu.classList.contains("shaka-hidden")?(i.controls.dispatchEvent(new G("submenuopen")),ie(i.menu,!0),yu(i.menu)):ie(i.menu,!1)})}de(ni,ae);function pk(e,t){e.button=Ye(),e.button.classList.add("shaka-overflow-button"),e.icon=q("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon),t=q("label"),t.classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),e.nameSpan=q("span"),t.appendChild(e.nameSpan),e.currentSelection=q("span"),e.currentSelection.classList.add("shaka-current-selection-span"),t.appendChild(e.currentSelection),e.button.appendChild(t),e.parent.appendChild(e.button)}function fk(e){e.menu=q("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=Ye(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.Jc()});var t=q("i");t.classList.add("material-icons-round"),t.textContent="close",e.backButton.appendChild(t),e.backSpan=q("span"),e.backButton.appendChild(e.backSpan),e.controls.h.appendChild(e.menu)}function gk(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",function(){function t(n){return n.classList.contains("shaka-hidden")==0}ie(e.parent,!0),I0(e.parent.childNodes,t)&&Nr(e.parent.childNodes,t)[0].focus(),qn(e.controls)}))}j("shaka.ui.SettingsMenu",ni);function ff(e,t){ni.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){mf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){mf(n)}),this.eventManager.o(this.player,"loading",function(){DS(n)}),this.eventManager.o(this.player,"trackschanged",function(){DS(n)}),this.eventManager.o(this.player,"variantchanged",function(){gf(n)}),mf(this),gf(this)}de(ff,ni);function gf(e){var t=e.player.Jb();PS(t,e.menu,function(n){var i=void 0;n.channelsCount&&e.controls.g.showAudioChannelCountVariants&&(i=n.channelsCount);var r=void 0;n.audioCodec&&(r=n.audioCodec),e.player.jh(n.language,n.roles[0],i,0,r)},!0,e.currentSelection,e.localization,e.controls.g.trackLabelFormat,e.controls.g.showAudioChannelCountVariants),yu(e.menu),e.controls.dispatchEvent(new G("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText),ie(e.button,2<e.menu.getElementsByTagName("button").length)}function DS(e){var t=0<e.player.Jb().length;ie(e.button,t),gf(e)}function mf(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}j("shaka.ui.AudioLanguageSelection",ff);function vf(){}vf.prototype.create=function(e,t){return new ff(e,t)},zt("language",new vf),pt("language",new vf);function yf(e,t){ae.call(this,e,t);var n=this;this.h=this.controls.C,this.g=Ye(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=q("span"),e.appendChild(this.l),this.j=q("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),Tf(this),NS(this),this.eventManager.o(this.localization,"locale-updated",function(){Tf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Tf(n)}),this.eventManager.o(this.g,"click",function(){mk(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){NS(n)})}de(yf,ae);function mk(e){var t;M(function(n){if(n.g==1)return e.h.Ra()?(e.h.Ji(),n.B(0)):(Z(n,3),e.g.disabled=!0,T(n,e.h.cast(),5));if(n.g!=3)return e.g.disabled=!1,le(n,0);t=Q(n),e.g.disabled=!1,t.code!=8004&&e.controls.dispatchEvent(new G("error",new Map().set("detail",t))),V(n)})}function NS(e){var t=e.h.ig()&&e.controls.sa,n=e.h.Ra();ie(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),_S(e)}function _S(e){e.j.textContent=e.h.Ra()?e.h.yf():e.localization.resolve("OFF")}function Tf(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),_S(e)}j("shaka.ui.CastButton",yf);function Ef(){}Ef.prototype.create=function(e,t){return new yf(e,t)},zt("cast",new Ef),pt("cast",new Ef);function Sf(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),Af(this),this.h=this.controls.g.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){Af(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Af(n)}),this.eventManager.o(this.g,"click",function(){if(n.video.duration){var i=n.h.indexOf(n.player.Ua())+1;i=i!=n.h.length?n.h[i]:n.h[0],n.player.Uc(i),n.g.setAttribute("shaka-status",i+"x")}})}de(Sf,ae);function Af(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}j("shaka.ui.FastForwardButton",Sf);function US(){}US.prototype.create=function(e,t){return new Sf(e,t)},pt("fast_forward",new US);function wf(e,t){ae.call(this,e,t);var n=this;this.h=this.controls.l,this.g=Ye(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),xf(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),sc(this),this.eventManager.o(this.localization,"locale-updated",function(){sc(n)}),this.eventManager.o(this.localization,"locale-changed",function(){sc(n)}),this.eventManager.o(this.g,"click",function(){return M(function(i){return T(i,n.controls.Ef(),0)})}),this.eventManager.o(document,"fullscreenchange",function(){n.g.textContent=n.controls.ld()?"fullscreen_exit":"fullscreen",sc(n)}),this.eventManager.o(this.h,"loadedmetadata",function(){xf(n)}),this.eventManager.o(this.h,"loadeddata",function(){xf(n)})}de(wf,ae);function xf(e){e.controls.ee()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function sc(e){e.g.ariaLabel=e.localization.resolve(e.controls.ld()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}j("shaka.ui.FullscreenButton",wf);function OS(){}OS.prototype.create=function(e,t){return new wf(e,t)},pt("fullscreen",new OS);function uc(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=q("span"),this.l.textContent=this.localization.resolve("LOOP"),e.appendChild(this.l),this.j=q("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),ac(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){ac(n)}),this.eventManager.o(this.localization,"locale-changed",function(){ac(n)}),this.eventManager.o(this.g,"click",function(){n.video.loop=!n.video.loop,n.h.Sa(),n.h.wa(1)}),this.m=this.video.loop,this.h=new te(function(){n.m!=n.video.loop&&(ac(n),n.m=n.video.loop)}),this.h.wa(1)}de(uc,ae),uc.prototype.release=function(){this.h.stop(),this.h=null,ae.prototype.release.call(this)};function ac(e){e.l.textContent=e.localization.resolve("LOOP"),e.j.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}j("shaka.ui.LoopButton",uc);function lc(){}lc.prototype.create=function(e,t){return new uc(e,t)},zt("loop",new lc),pt("loop",new lc),Oo("loop",new lc);function If(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),Lr(this),wu(this),this.eventManager.o(this.localization,"locale-updated",function(){Lr(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Lr(n)}),this.eventManager.o(this.g,"click",function(){n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted=!n.video.muted}),this.eventManager.o(this.video,"volumechange",function(){Lr(n),wu(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){Lr(n),wu(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){Lr(n),wu(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null,Lr(n),wu(n)})}de(If,ae);function Lr(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function wu(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}j("shaka.ui.MuteButton",If);function bS(){}bS.prototype.create=function(e,t){return new If(e,t)},pt("mute",new bS);function Cf(e,t){ae.call(this,e,t);var n=this;this.l=this.controls.l,this.g=Ye(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),e.appendChild(this.j),this.h=q("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),Mf(this),this.parent.appendChild(this.g),this.controls.ef()||ie(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){Mf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Mf(n)}),this.eventManager.o(this.g,"click",function(){n.controls.xe()}),this.eventManager.o(this.l,"enterpictureinpicture",function(){jS(n)}),this.eventManager.o(this.l,"leavepictureinpicture",function(){FS(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){BS(n)}),this.eventManager.o(this.player,"trackschanged",function(){BS(n)}),"documentPictureInPicture"in O&&this.eventManager.o(O.documentPictureInPicture,"enter",function(i){jS(n),n.eventManager.ia(i.window,"pagehide",function(){FS(n)})})}de(Cf,ae);function jS(e){e.i.textContent="branding_watermark",e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("ON")}function FS(e){e.i.textContent="picture_in_picture_alt",e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("OFF")}function Mf(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE");var t=e.controls.gf();e.g.ariaLabel=e.localization.resolve(t?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(t?"ON":"OFF")}function BS(e){M(function(t){return e.controls.ef()&&(!e.player||!e.player.Lc())?(ie(e.g,!0),t.B(0)):(ie(e.g,!1),e.controls.gf()?T(t,e.controls.xe(),0):t.B(0))})}j("shaka.ui.PipButton",Cf);function cc(){}cc.prototype.create=function(e,t){return new Cf(e,t)},zt("picture_in_picture",new cc),pt("picture_in_picture",new cc),Oo("picture_in_picture",new cc);function kf(e,t){ni.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",function(){Lf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Lf(n)}),this.eventManager.o(this.player,"loaded",function(){Rf(n,n.player.Ua())}),this.eventManager.o(this.player,"ratechange",function(){Rf(n,n.player.Ua())}),this.g=new Map(this.controls.g.playbackRates.map(function(i){return[i+"x",i]})),Lf(this),vk(this),Rf(this,this.player.Ua())}de(kf,ni);function Lf(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function Rf(e,t){var n=Vp(e.menu,"material-icons-round shaka-chosen-item");if(n){var i=n.parentElement;i.removeAttribute("aria-selected"),i.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),i.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find(function(r){return e.g.get(r.textContent)==t}))&&(i=n.parentElement,i.appendChild(_o()),i.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x",e.button.setAttribute("shaka-status",t+"x")}function vk(e){for(var t={},n=g(e.g.keys()),i=n.next();!i.done;t={Hd:t.Hd},i=n.next()){t.Hd=i.value,i=Ye();var r=q("span");r.textContent=t.Hd,i.appendChild(r),e.eventManager.o(i,"click",function(o){return function(){e.video.playbackRate=e.g.get(o.Hd),e.video.defaultPlaybackRate=e.g.get(o.Hd)}}(t)),e.menu.appendChild(i)}yu(e.menu)}j("shaka.ui.PlaybackRateSelection",kf);function Pf(){}Pf.prototype.create=function(e,t){return new kf(e,t)},zt("playback_rate",new Pf),pt("playback_rate",new Pf);function Df(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-current-time"),hc(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){n.player.U()&&(n.video.currentTime=n.player.Oa().end)}),this.eventManager.o(this.player,"loading",function(){ie(n.g,!0)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var i=n.controls.Z,r=n.controls.Ig(),o=n.player.Oa(),s=o.end-o.start;n.player.U()?(r=Math.max(0,Math.floor(o.end-r)),s=3600<=s,1<=r||i?(hc(n,"- "+Uo(r,s)),n.g.disabled=!1):(hc(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(i=3600<=s,r=Uo(Math.max(0,r-o.start),i),s&&(r+=" / "+Uo(s,i)),hc(n,r),n.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){n.player.U()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))}),this.eventManager.o(this.adManager,"ad-started",function(){ie(n.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){ie(n.g,!0)})}de(Df,ae);function hc(e,t){t!=e.g.textContent&&(e.g.textContent=t)}j("shaka.ui.PresentationTimeTracker",Df);function GS(){}GS.prototype.create=function(e,t){return new Df(e,t)},pt("time_and_duration",new GS);function Nf(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-recenter-vr-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=q("i"),this.h.classList.add("material-icons-round"),this.h.textContent="control_camera",this.g.appendChild(this.h),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),e.appendChild(this.j),this.i=q("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),_f(this),this.eventManager.o(this.localization,"locale-updated",function(){_f(n)}),this.eventManager.o(this.localization,"locale-changed",function(){_f(n)});var i=this.controls.u;this.eventManager.o(this.g,"click",function(){i.g?tf(i.g):ce("Not playing VR content")}),this.eventManager.o(i,"vrstatuschanged",function(){ie(n.g,n.controls.Mb())}),ie(this.g,this.controls.Mb())}de(Nf,ae);function _f(e){e.g.ariaLabel=e.localization.resolve("RECENTER_VR"),e.j.textContent=e.localization.resolve("RECENTER_VR")}j("shaka.ui.RecenterVRButton",Nf);function Uf(){}Uf.prototype.create=function(e,t){return new Nf(e,t)},zt("recenter_vr",new Uf),pt("recenter_vr",new Uf);function dc(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-remote-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=q("i"),this.i.classList.add("material-icons-round"),e="cast",(t=bi())&&13<=t&&(e="airplay"),this.i.textContent=e,this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=q("span"),e.appendChild(this.l),this.j=q("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),this.h=-1,Of(this),ie(this.g,!1),!this.video.remote||this.video.disableRemotePlayback?this.g.classList.add("shaka-hidden"):(this.eventManager.o(this.localization,"locale-updated",function(){Of(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Of(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Ho(n)}),this.eventManager.o(this.g,"click",function(){n.video.remote.prompt()}),this.eventManager.o(this.video.remote,"connect",function(){Ho(n)}),this.eventManager.o(this.video.remote,"connecting",function(){Ho(n)}),this.eventManager.o(this.video.remote,"disconnect",function(){Ho(n)}),this.eventManager.o(this.player,"loaded",function(){Ho(n)}),Ho(this))}de(dc,ae),dc.prototype.release=function(){this.video.remote&&this.h!=-1&&this.video.remote.cancelWatchAvailability(this.h).catch(function(){}),ae.prototype.release.call(this)};function Ho(e){var t,n;M(function(i){switch(i.g){case 1:if(e.controls.C.ig()&&e.controls.sa){ie(e.g,!1),e.h!=-1&&(e.video.remote.cancelWatchAvailability(e.h),e.h=-1),i.B(0);break}if(e.video.remote.state=="disconnected"){if(t=function(r){e.player?ie(e.g,e.player.gd()==mt&&r):ie(e.g,!1)},Z(i,7),e.h==-1){i.B(9);break}return T(i,e.video.remote.cancelWatchAvailability(e.h),10)}if(e.h==-1){i.B(0);break}return T(i,e.video.remote.cancelWatchAvailability(e.h),6);case 6:e.h=-1,i.B(0);break;case 10:e.h=-1;case 9:le(i,8);break;case 7:Q(i);case 8:return Z(i,11),T(i,e.video.remote.watchAvailability(t),13);case 13:n=i.h,e.h=n,le(i,0);break;case 11:Q(i),t(!0),V(i)}})}function Of(e){var t=e.localization.resolve("CAST"),n=bi();n&&13<=n&&(t=e.localization.resolve("AIRPLAY")),e.g.ariaLabel=t,e.l.textContent=t}j("shaka.ui.RemoteButton",dc);function bf(){}bf.prototype.create=function(e,t){return new dc(e,t)},zt("remote",new bf),pt("remote",new bf);function jf(e,t){ni.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",function(){Ff(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Ff(n)}),this.eventManager.o(this.player,"loading",function(){qo(n)}),this.eventManager.o(this.player,"variantchanged",function(){qo(n)}),this.eventManager.o(this.player,"trackschanged",function(){qo(n)}),this.eventManager.o(this.player,"abrstatuschanged",function(){qo(n)}),qo(this)}de(jf,ni);function qo(e){var t=[];e.player.gd()!=mt&&(t=e.player.Jb());var n=t.find(function(a){return a.active});n&&(t=t.filter(function(a){if(a.language!=n.language||e.controls.g.showAudioChannelCountVariants&&a.channelsCount!=n.channelsCount)return!1;var l=e.controls.g.trackLabelFormat;return!((l==1||l==2)&&JSON.stringify(a.audioRoles)!=JSON.stringify(n.audioRoles)||l==3&&a.label!=n.label)})),t=e.player.Lc()?t.filter(function(a,l){return t.findIndex(function(c){return c.bandwidth==a.bandwidth})==l}):1<[].concat(W(new Set(t.map(function(a){return a.audioId})))).length?t.filter(function(a,l){return t.findIndex(function(c){return c.height==a.height&&c.videoBandwidth==a.videoBandwidth&&c.frameRate==a.frameRate&&c.hdr==a.hdr&&c.videoLayout==a.videoLayout})==l}):t.filter(function(a,l){return t.findIndex(function(c){return c.height==a.height&&c.bandwidth==a.bandwidth&&c.frameRate==a.frameRate&&c.hdr==a.hdr&&c.videoLayout==a.videoLayout})==l}),e.player.Lc()?t.sort(function(a,l){return l.bandwidth-a.bandwidth}):t.sort(function(a,l){return l.height==a.height?l.bandwidth-a.bandwidth:l.height-a.height});var i=oS(e.menu);Ai(e.menu),e.menu.appendChild(i),i=e.player.getConfiguration().abr.enabled;for(var r={},o=g(t),s=o.next();!s.done;r={$b:r.$b},s=o.next()){r.$b=s.value,s=Ye(),s.classList.add("explicit-resolution"),e.eventManager.o(s,"click",function(a){return function(){var l=a.$b;e.player.configure({abr:{enabled:!1}}),e.player.Af(l,e.controls.g.clearBufferOnQualityChange)}}(r));var u=q("span");u.textContent=e.player.Lc()&&r.$b.bandwidth?Math.round(r.$b.bandwidth/1e3)+" kbits/s":r.$b.height&&r.$b.width?yk(r.$b,t):"Unknown",s.appendChild(u),i||r.$b!=n||(s.ariaSelected="true",s.appendChild(_o()),u.classList.add("shaka-chosen-item"),e.currentSelection.textContent=u.textContent),e.menu.appendChild(s)}r=Ye(),r.classList.add("shaka-enable-abr-button"),e.eventManager.o(r,"click",function(){e.player.configure({abr:{enabled:!0}}),qo(e)}),e.g=q("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),r.appendChild(e.g),i&&(r.ariaSelected="true",r.appendChild(_o()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(r),yu(e.menu),e.controls.dispatchEvent(new G("resolutionselectionupdated")),Ff(e),ie(e.button,1<t.length)}function yk(e,t){var n=e.height||0,i=e.width||0,r=n;return i/n>16/9&&(r=Math.round(9*i/16)),n=r+"p",r==2160&&(n="4K"),(r=e.frameRate)&&(50<=r||20>=r)&&(n+=Math.round(e.frameRate)),(e.hdr=="PQ"||e.hdr=="HLG")&&(n+=" (HDR)"),e.videoLayout=="CH-STEREO"&&(n+=" (3D)"),t.some(function(o){return o!=e&&o.height==e.height})&&(n+=" ("+Math.round((e.videoBandwidth||e.bandwidth)/1e3)+" kbits/s)"),n}function Ff(e){var t=e.player.Lc()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t),e.backButton.ariaLabel=e.localization.resolve(t),e.backSpan.textContent=e.localization.resolve(t),e.nameSpan.textContent=e.localization.resolve(t),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}j("shaka.ui.ResolutionSelection",jf);function Bf(){}Bf.prototype.create=function(e,t){return new jf(e,t)},zt("quality",new Bf),pt("quality",new Bf);function Gf(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),Vf(this),this.h=this.controls.g.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){Vf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Vf(n)}),this.eventManager.o(this.g,"click",function(){if(n.video.duration){var i=n.h.indexOf(n.player.Ua())+1;i=i!=n.h.length?n.h[i]:n.h[0],n.player.Uc(i),n.g.setAttribute("shaka-status",i+"x")}})}de(Gf,ae);function Vf(e){e.g.ariaLabel=e.localization.resolve("REWIND")}j("shaka.ui.RewindButton",Gf);function VS(){}VS.prototype.create=function(e,t){return new Gf(e,t)},pt("rewind",new VS);function Hf(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-save.video-frame-button"),this.g.classList.add("shaka-tooltip"),this.h=q("i"),this.h.classList.add("material-icons-round"),this.h.textContent="download",this.g.appendChild(this.h),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=q("span"),this.i.textContent=this.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.appendChild(this.i),this.j=q("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),qf(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){qf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){qf(n)}),this.eventManager.o(this.g,"click",function(){var i=document.createElement("canvas"),r=i.getContext("2d"),o=n.controls.l;i.width=o.videoWidth,i.height=o.videoHeight,r.drawImage(o,0,0,i.width,i.height),i=i.toDataURL("image/png"),r=document.createElement("a"),r.href=i,r.download="videoframe_"+o.currentTime.toFixed(3)+".png",r.click()}),this.eventManager.o(this.controls.u,"vrstatuschanged",function(){ii(n)}),this.eventManager.o(this.adManager,"ad-started",function(){ii(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){ii(n)}),this.eventManager.o(this.player,"unloading",function(){ii(n)}),this.eventManager.o(this.player,"loaded",function(){ii(n)}),this.eventManager.o(this.player,"loaded",function(){ii(n)}),this.eventManager.o(this.video,"play",function(){ii(n)}),this.eventManager.o(this.video,"pause",function(){ii(n)}),this.eventManager.o(this.video,"seeking",function(){ii(n)}),ii(this)}de(Hf,ae);function ii(e){var t=!0;e.controls.Mb()&&(t=!1),(e.player.drmInfo()||e.player.Lc())&&(t=!1),e.ad&&(t=!1),ie(e.g,t)}function qf(e){e.g.ariaLabel=e.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.i.textContent=e.localization.resolve("DOWNLOAD_VIDEO_FRAME")}j("shaka.ui.SaveVideoFrameButton",Hf);function Kf(){}Kf.prototype.create=function(e,t){return new Hf(e,t)},zt("save_video_frame",new Kf),Oo("save_video_frame",new Kf);function xu(e,t){ti.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}de(xu,ti),xu.prototype.h=function(){this.isEnded()?this.button.textContent="replay":this.button.textContent=this.isPaused()?"play_arrow":"pause"},xu.prototype.g=function(){if(this.isEnded())this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}},j("shaka.ui.SmallPlayButton",xu);function HS(){}HS.prototype.create=function(e,t){return new xu(e,t)},pt("play_pause",new HS);function zf(e,t){ae.call(this,e,t),e=q("div"),e.classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}de(zf,ae),j("shaka.ui.Spacer",zf);function qS(){}qS.prototype.create=function(e,t){return new zf(e,t)},pt("spacer",new qS);function pc(e,t){function n(c){return c=parseInt(l.g[c],10),1e6<c?(c/1e6).toFixed(2)+"MB":1e3<c?(c/1e3).toFixed(2)+"KB":c+"B"}function i(c){return l.g[c]+" (gaps)"}function r(c){return Uo(l.g[c],!1)+" (m)"}function o(c){return Math.round(l.g[c]/1e3)+" (kbits/s)"}function s(c){return l.g[c].toFixed(2)+" (s)"}function u(c){return l.g[c]+" (frames)"}function a(c){return l.g[c]+" (px)"}ae.call(this,e,t);var l=this;this.i=Ye(),this.i.classList.add("shaka-statistics-button"),this.j=q("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),e=q("label"),e.classList.add("shaka-overflow-button-label"),this.u=q("span"),e.appendChild(this.u),this.m=q("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.i.appendChild(e),this.parent.appendChild(this.i),this.h=q("div"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-statistics-container"),this.h.classList.add("shaka-hidden"),this.controls.h.appendChild(this.h),this.C=[],this.G=["stateHistory","switchHistory"],this.g=this.player.getStats(),this.s={},this.A={width:a,height:a,completionPercent:function(c){return l.g[c]+" (%)"},bufferingTime:s,drmTimeSeconds:s,licenseTime:s,liveLatency:s,loadLatency:s,manifestTimeSeconds:s,estimatedBandwidth:o,streamBandwidth:o,maxSegmentDuration:r,pauseTime:r,playTime:r,corruptedFrames:u,decodedFrames:u,droppedFrames:u,stallsDetected:function(c){return l.g[c]+" (stalls)"},gapsJumped:i,manifestSizeBytes:n,bytesDownloaded:n,nonFatalErrorCount:function(c){return l.g[c]+" (errors)"},manifestPeriodCount:function(c){return l.g[c]+" (periods)"},manifestGapCount:i},this.l=new te(function(){l.g=l.player.getStats();for(var c=g(l.C),h=c.next();!h.done;h=c.next()){h=h.value;var d=l.s[h];d.textContent=l.A[h](h),d&&d.parentElement&&ie(d.parentElement,!isNaN(l.g[h]))}}),fc(this),Tk(this),this.eventManager.o(this.localization,"locale-updated",function(){fc(l)}),this.eventManager.o(this.localization,"locale-changed",function(){fc(l)}),this.eventManager.o(this.i,"click",function(){ie(l.parent,!1),l.h.classList.contains("shaka-hidden")?(l.j.textContent="insert_chart",l.l.wa(.1),ie(l.h,!0)):(l.j.textContent="insert_chart_outlined",l.l.stop(),ie(l.h,!1)),fc(l)})}de(pc,ae);function fc(e){e.u.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.m.textContent=e.localization.resolve(e.h.classList.contains("shaka-hidden")?"OFF":"ON")}function Tk(e){for(var t=g(e.controls.g.statisticsList),n=t.next();!n.done;n=t.next())if(n=n.value,n in e.g&&!e.G.includes(n)){var i=e,r=q("div"),o=q("label");o.textContent=n+":",r.appendChild(o),o=q("span"),o.textContent=i.A[n](n),r.appendChild(o),i.s[n]=o,i=r,e.h.appendChild(i),e.C.push(n),ie(i.parentElement,!isNaN(e.g[n]))}else ce("Unrecognized statistic element:",n)}pc.prototype.release=function(){this.l.stop(),this.l=null,ae.prototype.release.call(this)},j("shaka.ui.StatisticsButton",pc);function Wf(){}Wf.prototype.create=function(e,t){return new pc(e,t)},zt("statistics",new Wf),Oo("statistics",new Wf);function Xf(e,t){ni.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Nc()?this.button.ariaPressed="true":this.button.ariaPressed="false",Ek(this),this.eventManager.o(this.localization,"locale-updated",function(){Yf(n),Rr(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Yf(n),Rr(n)}),this.eventManager.o(this.player,"loading",function(){Jf(n)}),this.eventManager.o(this.player,"texttrackvisibility",function(){KS(n),Rr(n)}),this.eventManager.o(this.player,"textchanged",function(){Rr(n)}),this.eventManager.o(this.player,"trackschanged",function(){Jf(n)}),KS(this),Yf(this),Rr(this),Jf(this)}de(Xf,ni);function Ek(e){var t=Ye();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(_o()),e.g=q("span"),e.g.classList.add("shaka-auto-span"),t.appendChild(e.g)}function KS(e){e.player.Nc()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false"),e.controls.dispatchEvent(new G("captionselectionupdated"))}function Rr(e){var t=e.player.uc();PS(t,e.menu,function(n){return Sk(e,n)},e.player.Nc(),e.currentSelection,e.localization,e.controls.g.textTrackLabelFormat,e.controls.g.showAudioChannelCountVariants),t=Ye(),t.classList.add("shaka-turn-captions-off-button"),e.eventManager.o(t,"click",function(){e.player.Cf(!1),Rr(e)}),t.appendChild(e.g),e.menu.appendChild(t),e.player.Nc()||(t.ariaSelected="true",t.appendChild(_o()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),yu(e.menu),e.controls.dispatchEvent(new G("captionselectionupdated"))}function Sk(e,t){return M(function(n){return e.player.lh(t),T(n,e.player.Cf(!0),0)})}function Yf(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function Jf(e){var t=0<e.player.uc().length;ie(e.button,t),Rr(e)}j("shaka.ui.TextSelection",Xf);function $f(){}$f.prototype.create=function(e,t){return new Xf(e,t)},zt("captions",new $f),pt("captions",new $f);function Zf(e,t){ae.call(this,e,t);var n=this;this.g=Ye(),this.g.classList.add("shaka-toggle-stereoscopic-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=q("i"),this.h.classList.add("material-icons-round"),this.h.textContent="3d_rotation",this.g.appendChild(this.h),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),e.appendChild(this.j),this.i=q("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),Qf(this),this.eventManager.o(this.localization,"locale-updated",function(){Qf(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Qf(n)});var i=this.controls.u;this.eventManager.o(this.g,"click",function(){i.yd()}),this.eventManager.o(i,"vrstatuschanged",function(){ie(n.g,n.controls.Mb())}),ie(this.g,this.controls.Mb())}de(Zf,ae);function Qf(e){e.g.ariaLabel=e.localization.resolve("TOGGLE_STEREOSCOPIC"),e.j.textContent=e.localization.resolve("TOGGLE_STEREOSCOPIC")}j("shaka.ui.ToggleStereoscopicButton",Zf);function e0(){}e0.prototype.create=function(e,t){return new Zf(e,t)},zt("toggle_stereoscopic",new e0),pt("toggle_stereoscopic",new e0);function gc(e,t){lt.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.g=this.controls.g,this.setRange(0,100),this.eventManager.o(this.video,"volumechange",function(){return t0(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return zS(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){return zS(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){return t0(n)}),this.eventManager.o(this.localization,"locale-updated",function(){return n0(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return n0(n)}),t0(this),n0(this),this.ad&&this.onChange()}de(gc,lt),gc.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()/100):(this.video.volume=this.getValue()/100,this.video.muted=this.video.volume==0)};function t0(e){e.video.muted?e.setValue(0):e.setValue(100*e.video.volume),WS(e)}function zS(e){var t=e.ad.getVolume();e.setValue(100*t),WS(e)}function WS(e){var t=e.g.volumeBarColors,n=["to right"];n.push(t.level+e.getValue()+"%"),n.push(t.base+e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function n0(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}j("shaka.ui.VolumeBar",gc);function XS(){}XS.prototype.create=function(e,t){return new gc(e,t)},pt("volume",new XS)}).call(er,Jo,Jo,void 0);for(var Ui in er.shaka)Nn[Ui]=er.shaka[Ui]})()})(v0);const Nk=Dk(v0),Ok=Rk({__proto__:null,default:Nk},[v0]);export{Ok as s};
//# sourceMappingURL=shaka-player.ui-BxG0Tsk8.js.map
